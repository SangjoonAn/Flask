<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RF EMS Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <style>
        body { 
            background-color: #E0E0E0; overflow: auto; 
            transition: background-color 0.2s ease, color 0.2s ease; /* body에도 트랜지션 추가 (선택 사항) */
        }
        .navbar { background: #547186; color: white; display: flex; align-items: center; justify-content: space-between; padding: 10px; }
        .navbar img { height: 40px; }
        .time-container { color: white; }
        .icon-container { display: flex; gap: 15px; color: white; }
        .icon-container i { font-size: 20px; cursor: pointer; }
        .wrapper { 
            display: flex; 
            min-height: 100vh; 
        }
        .sidebar { 
            width: 300px; 
            background: #41515D; 
            color: white; 
            padding: 15px; 
            flex-shrink: 0;
            transition: background-color 0.2s ease, color 0.2s ease; /* 핵심 변경: 사이드바에 트랜지션 추가 */
        }
        .sidebar h5 { font-weight: bold; margin-bottom: 10px; }
        .sidebar .info-box { 
            background: #B0B0B0; 
            padding: 10px; 
            border-radius: 5px; 
            margin-bottom: 5px; 
            /* grid 관련 스타일을 여기서 정의 */
            display: grid;
            grid-template-columns: 120px auto; /* 여기에 정의 */
            grid-gap: 5px;
            align-items: center;
        }
        .sidebar .status-box {        
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 160px; /* 원하는 너비로 조정 */
            margin: 0;
            padding: 0;    
        }

        .sidebar .status-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 13px;
        padding: 2px 0;     /* 상하 padding 줄이기 */
        margin: 0;          /* margin 제거 */
        }

        .sidebar .info-box p {
        margin: 2px 0;           /* 위아래 여백 줄이기 */
        padding: 0;              /* padding 제거 */
        line-height: 1.2;        /* 줄 간격 압축 */
        font-size: 14px;         /* 폰트 크기 조정 (선택) */
        }

        .status-item span {
        margin: 0;
        padding: 0;
        line-height: 1.2;
        }

        /* 상태 원 기본 스타일 */
        .status-circle {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        display: inline-block;
        }

        .status-normal { background-color: green; }
        .status-alarm { background-color: red; }
        .status-alarm-yellow { background-color: yellow; }
        .status-unknown { background-color: gray; }
        .status-linkfail { background-color: orange; }
        .status-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 5px;
        }

        /* 작은 텍스트 크기 클래스 */
        .small-text {
            font-size: 0.75rem;
        }

        /* 플러스 아이콘 스타일 */
        .plus-icon {
            width: 16px;
            height: 16px;
            background-color: #6c757d;
            border-radius: 50%;
            display: flex;
            align-items: center;
        }

        /* Set Mode 관련 스타일 */
        .editable-on {
            background-color: #fff !important;
        }

        /* Sync Module 입력 요소 스타일 */
        .sync-input {
            transition: all 0.2s ease;
        }

        .sync-input:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .sync-select {
            transition: all 0.2s ease;
        }

        .sync-select:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .plus-icon {
            justify-content: center;
            position: relative;
        }

        .plus-icon span {
            color: white;
            font-size: 12px;
            font-weight: bold;
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            line-height: 1;
        }



        /* On 버튼 통일 스타일 */
        .btn-on {
            background-color: #507346 !important;
            color: white !important;
            width: 50px;
        }



        .small-text-2 {
            font-size: 0.7rem;
        }

        /* Beam Info 카드 텍스트 크기 절반으로 줄이기 */
        .beam-info-card span {
            font-size: 0.5rem;
        }









        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-dialog {
            margin: 50px auto;
        }

        .modal-content {
            background-color: #fefefe;
            border: 1px solid #888;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .modal-header {
            border-bottom: 1px solid #ddd;
        }

        .modal-header .close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            float: right;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-body table {
            width: 100%;
            border-collapse: collapse;
        }

        .modal-body table td {
            padding: 8px;
            border: 1px solid #ddd;
        }

        .modal-body table input[type="text"],
        .modal-body table textarea {
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 4px 8px;
        }

        .modal-body table input[type="text"]:focus,
        .modal-body table textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        /* DU/SU Navigation Section Styles */
        .du-su-section {
            margin-top: 20px;
            background-color: #3c5260;
            padding: 15px;
            border-radius: 8px;
            color: white;
        }
        .du-item, .su-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            cursor: pointer; /* 클릭 가능하도록 커서 변경 */
            transition: background-color 0.2s ease; /* 호버 효과 추가 */
            padding: 5px;
            border-radius: 5px;
        }
        .du-item:hover, .su-item:hover {
            background-color: #496373; /* 호버 시 배경색 변경 */
        }
        /* du-item-circle 및 su-item-circle에 status-circle 공통 스타일 적용 */
        .du-item-circle, .su-item-circle {
            width: 10px; /* Specific size for nav dots */
            height: 10px; /* Specific size for nav dots */
            border-radius: 50%;
            margin-right: 8px;
            /* background-color will be set by JS via status classes or white for active */
        }
        .su-item { margin-left: 20px; } /* SU 항목 들여쓰기 */

        /* Main Content Area */
        .content-area {
            flex: 1;
            padding: 20px;
            background-color: #fff;
            overflow-y: auto; /* 내용이 많을 경우 스크롤바 생성 */
            box-shadow: -2px 0 5px rgba(0,0,0,0.05);
        }

        /* 각 화면 컨테이너 (처음에는 DU만 보이고 SU#1은 숨김) */
        #du_content_display, #su1_content_display, #su2_content_display, #su3_content_display, #su4_content_display { /* SU2, SU3, SU4 추가 */
            display: none; /* 기본적으로 모두 숨김 */
        }

        /* 특정 화면이 활성화될 때만 보이도록 - 디버깅용 테두리와 배경색 추가 */
        #du_content_display.active,
        #su1_content_display.active,
        #su2_content_display.active,
        #su3_content_display.active,
        #su4_content_display.active { 
            display: block; /* 활성화된 화면만 보이도록 */
        }

        /* DU/SU 화면 내부 스타일 (예시) */
        .dashboard-card {
            background-color: #f0f2f5;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* Sync Module 스타일 */
        .sync-card {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            width: 100%;
            max-width: 280px;
        }

        .sync-label {
            font-weight: 500;
            font-size: 0.85rem;
            margin-bottom: 4px;
        }

        .sync-container {
            background-color: #e9ecef;
            padding: 20px;
            border-radius: 8px;
        }

        .frequency-bar {
            background-color: #dee2e6;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
        }
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 0.75rem;
        }
        .dashboard-header h2 {
            font-size: 1.5rem;
            font-weight: bold;
            color: #343a40;
            margin: 0;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        .info-item {
            background-color: #ffffff;
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            font-size: 0.9em;
            color: #333;
        }
        .info-item label {
            font-weight: bold;
            color: #555;
            display: block;
            margin-bottom: 0.25rem;
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }
        .status-section {
            background-color: #ffffff;
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .status-section h3 {
            font-size: 1.2rem;
            font-weight: bold;
            color: #343a40;
            margin-top: 0;
            margin-bottom: 1rem;
            border-bottom: 1px dashed #e0e0e0;
            padding-bottom: 0.5rem;
        }
        .status-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .status-indicator .status-circle { /* Changed from .status-dot */
            width: 10px; /* Ensure size consistency */
            height: 10px; /* Ensure size consistency */
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        /* Buttons in content area */
        .action-buttons button {
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: bold;
        }
        .action-buttons button:hover {
            background-color: #0056b3;
        }
        .action-buttons .btn-secondary {
            background-color: #6c757d;
        }
        .action-buttons .btn-secondary:hover {
            background-color: #5a6268;
        }



        .status-box span { display: block; }
        .content { flex-grow: 1; padding: 20px; overflow: auto; }
        .card { margin-bottom: 20px; }
        .tx-rx-box { 
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
            gap: 10px;
            margin-bottom: 10px; /* ← 상태 리스트와의 간격 추가 */
        }
        /* 상태 텍스트들을 감싸는 컨테이너 */
            .status-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }        
        /* TX와 RX 박스 공통 스타일 */
        .tx-box, .rx-box {
            padding: 3px 10px;        /* 더 작게 */
            border-radius: 5px;
            font-size: 12px;          /* 글자 크기 축소 */
            font-weight: bold;
            text-align: center;
            min-width: 35px;          /* 너무 좁아지지 않도록 최소 폭 지정 */
        }
        
        /* 송신 박스 스타일 */
        .tx-box {
        background-color: gray;
        color: white;
        }
        /* 수신 박스 스타일 */
        .rx-box {
        background-color: gray;
        color: white;
        }

        .content-card {
            background-color: #f0f0f0; /* 배경색 변경 */
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
        }
        .content-card h5 {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        .content-card p {
            margin-bottom: 5px;
        }
        .content-card .badge {
            margin-left: 5px;
        }
        .content-card .status-circle {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }

        /* Custom styles for DU Hidden Modal */
        .modal-body .rf-optic-section {
            background-color: #f0f2f5; /* Light gray background for the entire section */
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .modal-body .rf-optic-section h6 {
            font-weight: bold;
            font-size: 1.125rem;
            color: #343a40;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
        }

        .modal-body .rf-optic-section h6 i {
            color: #007bff;
            margin-right: 0.5rem;
        }

        .modal-body .rf-optic-section hr {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            border-top: 1px dotted #6c757d; /* Changed to darker dotted line */
        }

        /* Specific styles for input items within RF/Optic sections */
        .modal-body .rf-optic-section .input-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .modal-body .rf-optic-section .input-item label {
            font-weight: 600;
            font-size: 0.875rem;
            color: #495057;
            flex-grow: 1;
            text-align: left;
            margin-right: 10px;
        }

        .modal-body .rf-optic-section .input-item .input-with-unit {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .modal-body .rf-optic-section .input-item input.form-control-sm {
            width: 80px;
            text-align: center;
            border-radius: 0.375rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            border: 1px solid #ced4da;
        }

        .modal-body .rf-optic-section .input-item span.unit {
            margin-left: 0.5rem;
            font-size: 0.875rem;
            color: #495057;
        }

        .modal-body .rf-optic-section .text-muted-small {
            font-size: 0.75rem;
            color: #6c757d;
            text-align: right;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Specific styles for the bottom section of DU Hidden Modal */
        .modal-body .bottom-section .form-group-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .modal-body .bottom-section .form-group-item input.form-control-sm.w-40 {
            width: 160px;
        }

        .modal-body .bottom-section .btn-toggle {
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            color: white;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
            border: none; /* Ensure no default button border */
        }
        .modal-body .bottom-section .btn-toggle.on {
            background-color: #28a745;
        }
        .modal-body .bottom-section .btn-toggle.off {
            background-color: #dc3545;
        }

        /* Button styling */
        .btn-custom-gray {
            background-color: #6c757d;
            color: white;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
            border: none;
        }
        .btn-custom-gray:hover {
            background-color: #5a6268;
            color: white;
        }
        .btn-custom-blue {
            background-color: #007bff;
            color: white;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
            border: none;
        }
        .btn-custom-blue:hover {
            background-color: #0056b3;
            color: white;
        }
        .btn-custom-blue-lg {
            padding: 0.75rem 1.5rem;
            background-color: #007bff;
            color: white;
            border-radius: 0.375rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
            border: none;
        }
        .btn-custom-blue-lg:hover {
            background-color: #0056b3;
            color: white;
        }



        /* ==================== 모달 관련 커스텀 스타일 (다단계 설정 모달 CSS) ==================== */
        /* Custom styles for consistency and rounded corners */
        .modal-content {
            border-radius: 12px;
            overflow: hidden; /* Ensures rounded corners apply to children */
        }

        /* Beam Info Modal 관련 CSS */
        .beam-scan-field {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            padding: 0.25rem 0;
        }

        .beam-scan-field label {
            font-size: 0.875rem;
            color: #495057;
            margin: 0;
        }

        .toggle-switch {
            width: 40px;
            height: 20px;
            background-color: #ccc;
            border-radius: 10px;
            border: none;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .toggle-switch:checked {
            background-color: #28a745;
        }

        .toggle-switch:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.25);
        }

        /* 초기 설정 모달 특정 스타일 */
        .modal-header.initial-setup-header {
            background-color: #A0A0A0; /* 회색 배경 */
            color: black; 
            border-bottom: none; 
            padding: 8px 15px; 
            position: relative; 
        }
        .modal-header.initial-setup-header .modal-title {
            font-weight: bold;
            font-size: 1rem; 
            display: flex;
            align-items: center;
            gap: 5px; 
        }
        .modal-header.initial-setup-header .modal-title i {
            font-size: 0.8rem; 
        }
        .modal-header.initial-setup-header .btn-close {
            color: black; 
            opacity: 1; 
            font-size: 0.9rem; 
            background: none; 
            padding: 0; 
            margin: 0; 
        }
        .modal-header.initial-setup-header .btn-close:focus {
            box-shadow: none;
        }
        .modal-header {
            background-color: #f8f9fa; /* Light header background */
            border-bottom: 1px solid #e9ecef;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }
        .modal-footer {
            border-top: 1px solid #e9ecef;
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
        }
        .btn-styled {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.2s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn-styled:hover {
            transform: translateY(-2px);
        }
        .btn-primary-custom {
            background-color: #2563eb; /* Blue */
            color: white;
        }
        .btn-secondary-custom {
            background-color: #6b7280; /* Gray */
            color: white;
        }

        /* DU Hidden Modal Grid Layout */
        .du-hidden-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto auto;
            gap: 15px;
            margin-bottom: 20px;
        }

        .rf-section, .optic-section {
            background: #e9ecef;
            border-radius: 6px;
            padding: 15px;
            border: 1px solid #ced4da;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .rf-section h6, .optic-section h6 {
            color: #495057;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .rf-content {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .rf-column {
            flex: 1;
        }

        .rf-column h6 {
            color: #6c757d;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .optic-content {
            margin-top: 10px;
        }

        .input-item {
            margin-bottom: 8px;
        }

        .input-item label {
            font-size: 12px;
            color: #495057;
            font-weight: 500;
            margin-bottom: 3px;
            display: block;
        }

        .input-with-unit {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .input-with-unit input {
            flex: 1;
            font-size: 12px;
            padding: 4px 8px;
            border: 1px solid #ced4da;
            border-radius: 3px;
            background: white;
        }

        .input-with-unit .unit {
            font-size: 11px;
            color: #6c757d;
            white-space: nowrap;
        }

        .bottom-section {
            grid-column: 1 / -1;
            background: #e9ecef;
            border-radius: 6px;
            padding: 15px;
            border: 1px solid #ced4da;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .bottom-content {
            display: flex;
            gap: 30px;
            justify-content: space-between;
        }

        .bottom-block {
            flex: 1;
        }

        .form-group-item {
            margin-bottom: 10px;
        }

        .form-group-item label {
            font-size: 12px;
            color: #495057;
            font-weight: 600;
            margin-bottom: 3px;
            display: block;
        }

        .form-group-item input {
            font-size: 12px;
            padding: 4px 8px;
            border: 1px solid #ced4da;
            border-radius: 3px;
            background: white;
            width: 100%;
        }

        .btn-toggle {
            padding: 4px 12px;
            border: none;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-toggle.on {
            background-color: #28a745;
            color: white;
        }

        .btn-toggle.off {
            background-color: #6c757d;
            color: white;
        }

        .cut-time-button {
            display: flex;
            justify-content: flex-end;
            margin-top: 15px;
        }

        .btn-custom-blue-lg {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        .btn-success-custom {
            background-color: #10b981; /* Green */
            color: white;
        }
        .btn-danger-custom {
            background-color: #ef4444; /* Red */
            color: white;
        }
        .step-content {
            display: none; /* Hide all step content by default */
        }
        .info-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        input[type="text"], input[type="number"], select {
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            width: 100%;
            background-color: #fff;
            transition: border-color 0.2s;
        }
        input[type="text"]:focus, input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.25);
        }
        /* 초기 설정 모달 특정 스타일 */
        .modal-header.initial-setup-header {
            background-color: #A0A0A0; /* 회색 배경 */
            color: black; 
            border-bottom: none; 
            padding: 8px 15px; 
            position: relative; 
        }
        .modal-header.initial-setup-header .modal-title {
            font-weight: bold;
            font-size: 1rem; 
            display: flex;
            align-items: center;
            gap: 5px; 
        }
        .modal-header.initial-setup-header .modal-title i {
            font-size: 0.8rem; 
        }
        .modal-header.initial-setup-header .btn-close {
            color: black; 
            opacity: 1; 
            font-size: 0.9rem; 
            background: none; 
            padding: 0; 
            margin: 0; 
        }
        .modal-header.initial-setup-header .btn-close:focus {
            box-shadow: none;
        }
        .modal-body.initial-setup-body {
            background-color: #E0E0E0; 
            padding: 20px; 
            display: flex;
            flex-direction: column;
            align-items: center; 
            gap: 20px; 
        }


        .initial-setup-bar {
            background-color: #FFFF00; 
            color: #1A2E59; 
            font-weight: bold;
            font-size: 1.2rem;
            padding: 8px 0; 
            text-align: center;
            width: 100%; 
            border-radius: 5px; 
        }
        .initial-setup-buttons {
            display: flex;
            gap: 15px; 
        }
        .initial-setup-body .btn-custom-gray {
            background-color: #A0A0A0; 
            color: black; 
            border: none;
            border-radius: 5px; 
            font-weight: bold;
            padding: 5px 20px; 
            font-size: 0.9rem;
        }
        .initial-setup-body .btn-custom-gray:hover {
            background-color: #8C8C8C; 
            color: black;
        }
        .initial-setup-time {
            font-size: 0.9rem;
            color: #555555;
            margin-top: 10px; 
        }
        /* 기존 모달 푸터와 겹치지 않도록 이름을 명확히 하고, 이 모달에서는 기본 푸터 숨김 */
        .modal-footer.initial-setup-footer { /* footer에 클래스 추가 */
             display: flex !important; /* 다시 보이게 함 */
             justify-content: space-between; 
             align-items: center; 
             padding: 1rem; /* 부트스트랩 기본 패딩 */
             border-top: 1px solid #dee2e6; /* 부트스트랩 기본 보더 */
        }
        .modal-footer { /* 기존 모달 푸터 스타일은 유지 */
            display: none; /* 이미지에 푸터가 없으므로 숨김 */
        }

        .siso-rf-box { margin-right: 40px; }
        .mimo-rf-box { margin-left: 40px; }

    </style>


</head>
<body onload="updateTime(); updateNavDotColors(); showScreen('du_content');">
    <nav class="navbar navbar-dark">
        <div class="container-fluid">
            <img src="static/images/main_logo.png" alt="Logo">
            <a class="navbar-brand" href="#">RF EMS</a>
            <div class="time-container">
                <span id="utc-time">UTC: Loading...</span> |
                <span id="browser-time">Local: Loading...</span>
            </div>
            <div class="icon-container d-flex align-items-center">
                <i class="fas fa-user me-3 js-top-icon" style="cursor: pointer;" onclick="openUserManagementModal()"></i> 
                <i class="fas fa-compass me-3 js-top-icon" style="cursor: pointer;" onclick="openBeamInfoModal()"></i>                
                <div style="position: relative; display: inline-block;" class="me-3 js-top-icon">
                    <i class="fas fa-bell" style="cursor: pointer;" onclick="openAlarmHistoryModal()"></i> <span class="badge rounded-pill bg-danger" style="position: absolute; top: -5px; right: -5px; font-size: 0.6em;">125</span>
                </div>
                <i class="fas fa-cog me-3 js-top-icon" onclick="openAlarmLevelModal()"></i> 
                <div class="dropdown js-top-icon">
                    <a class="nav-link dropdown-toggle d-flex align-items-center text-white" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" data-bs-toggle="dropdown" aria-expanded="false" style="color: white !important;">
                        <span class="me-2">primaer</span> </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                        <li><a class="dropdown-item" href="#">My Info</a></li>
                        <li><a class="dropdown-item" href="#">Logout</a></li>
                    </ul>
                </div>
                

            </div>
        </div>
    </nav>

    <div class="wrapper">
        <div class="sidebar">
            <div class="info-box"> 
                <p style="color: black;">Manufacturer:</p>
                <p><strong>FRTek</strong></p>
                <p style="color: black;">Version:</p>
                <p><strong><span id="McuSwVer">N/A</span></strong></p>
            </div>
            
            <div class="info-box">
                <p style="color: black;">IP:</p>
                <p><strong><span id="modipaddress">N/A</span></strong></p>
                <p style="color: black;">Local IP:</p>
                <p><strong>192.168.1.1</strong></p>
                <p style="color: black;">Port:</p>
                <p><strong>80</strong></p>
            </div>

            <div class="tx-rx-box">
                <span class="tx-box">TX</span>
                <span class="rx-box">RX</span>
            </div>

            <div class="status-box">
                <div class="status-item">
                    <span class="status-label">Normal</span>
                    <span class="status-circle status-normal"></span>
                </div>

                <div class="status-item">
                    <span class="status-label">Alarm</span>
                    <span class="status-circle status-alarm"></span>
                </div>

                <div class="status-item">
                    <span class="status-label">Link Fail</span>
                    <span class="status-circle status-linkfail"></span>
                </div>
            </div>
            
            <button class="btn btn-light w-100 mt-2">Reload</button>

            <!-- DU/SU Navigation Section -->
            <div class="du-su-section">
                <div class="du-item" id="nav_du" onclick="showScreen('du_content')">
                    <div class="du-item-circle status-circle" id="du_nav_dot"></div> <!-- status-circle 클래스 추가 -->
                    <span style="font-weight: bold;">DU</span>
                </div>

                <div class="su-item" id="nav_su1" onclick="showScreen('su1_content')">
                    <div class="du-item-circle status-circle" id="su1_nav_dot"></div> <!-- status-circle 클래스 추가 -->
                    <span>SU #1</span>
                </div>

                <div class="su-item" id="nav_su2" onclick="showScreen('su2_content')">
                    <div class="du-item-circle status-circle" id="su2_nav_dot"></div>
                    <span>SU #2</span>
                  </div>

                <div class="su-item" id="nav_su3" onclick="showScreen('su3_content')">
                    <div class="du-item-circle status-circle" id="su3_nav_dot"></div> <!-- status-circle 클래스 추가 -->
                    <span>SU #3</span>
                </div>

                <div class="su-item" id="nav_su4" onclick="showScreen('su4_content')">
                    <div class="du-item-circle status-circle" id="su4_nav_dot"></div> <!-- status-circle 클래스 추가 -->
                    <span>SU #4</span>
                </div>
            </div>

            <hr>
                            <button class="btn btn-secondary w-100" onclick="showPacketInfo()">Packet Info</button>
                <button class="btn btn-secondary w-100 mt-2" onclick="showSyncModule()">Sync Module</button>
            <button class="btn btn-secondary w-100 mt-2">Modem AtCmd</button>
            <button class="btn btn-secondary w-100 mt-2">Download</button>
        </div>


        <div class="content-area">
            <!-- DU Content (첫 번째 이미지에 해당하는 내용) -->
            <div id="du_content_display" class="active">
                <div class="bg-light p-3 rounded shadow-sm mb-2"> 
                    <div class="row align-items-center mb-2"> 
                        <div class="col-md-3">
                            <small class="text-muted">Site ID :</small> Kor - FRTek - 001
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">Site Name :</small> Korea FRTek RF - EMIS
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">S/N :</small> <span id="conserialnum_header">N/A</span>
                        </div>
                        <div class="col-md-3 text-end">
                            <small class="text-muted">EMS ver :</small>
                            <span id="emsversion2">N/A</span>
                        </div>
                    </div>
                    
                <hr class="my-3" style="border-top: 1px dotted #000000;"> 
                <div class="d-flex justify-content-between align-items-center"> 
                    <div style="font-size: 1.5rem; font-weight: bold; color: #343a40;">DU <i class="fas fa-pencil-alt text-muted fs-6"></i></div>
                    <div>
                        <button id="openModalBtn" class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#duInitialSetupModal" onclick="startInitialSetup()">
                            Initial Setup
                        </button>
                        <button id="openModalBtn" class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#BtapnSetupModal" >
                            APN
                        </button>
                        <button id="openModalBtn" class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#confirmResetModal" >
                            RESET
                        </button>
                         <button id="openModalBtn" class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#duHiddenModal" >
                            HIDDEN
                        </button>
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#beamInfoModal">Beam Info</button>       
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#alarmMaskModal">Alarm Mask</button>
                        <button id="btnStatusMode" class="btn btn-secondary btn-sm me-2 d-none">Status Mode</button>
                        <button id="btnApply" class="btn btn-success btn-sm d-none">Set</button>
                        <button id="btnSetMode" class="btn btn-sm" style="background-color: gray; border: none; border-radius: 5px; color: white;">Set Mode</button>
                    </div>
                </div>



                <!-- Initial Setup Custom Modal -->
                <div class="modal fade" id="duInitialSetupModal" tabindex="-1" aria-labelledby="duInitialSetupModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 10px; margin: 0;">
                            <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0;">
                            <h5 class="modal-title text-white" id="duInitialSetupModalLabel">Initial Setup</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                            <div class="modal-body" style="padding: 2rem;">
                            <div class="p-3 mb-3" style="background-color: yellow; font-size: 2rem; font-weight: bold;">
                            INITIAL SETUP
                            </div>
                            <div class="d-flex justify-content-center gap-3 mb-4">
                            <button
                                class="btn btn-lg"
                                style="width: 120px; background-color: #d3dce6;"
                                data-bs-toggle="modal"
                                data-bs-target="#usimCheckModal"
                                data-bs-dismiss="modal"
                                onclick="startUsimTimer()">
                                Start
                            </button>


                            <button class="btn btn-lg" style="width: 120px; background-color: #d3dce6;" data-bs-dismiss="modal">Close</button>
                            </div>
                            <div class="mt-2" style="font-size: 1.2rem;">
                            Time : <span id="setupTimer">10</span> [Sec]
                            </div>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- USIM Check Modal -->
                <div class="modal fade" id="usimCheckModal" tabindex="-1" aria-labelledby="usimCheckModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered" style="max-width:600px;">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                            <div style="font-weight:bold; font-size:1.2rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:10px; margin-bottom:20px;">
                                <i class="bi bi-folder"></i> USIM Insert Check
                            </div>
                            <div style="margin-bottom:30px;">
                                Did you insert the USIM Card?
                            </div>
                            <div class="d-flex justify-content-center gap-3 mb-4">
                                <button class="btn btn-lg btn-light" style="min-width:150px; font-weight:bold;">YES</button>
                                <button class="btn btn-lg btn-light" style="min-width:150px; font-weight:bold;">NO</button>
                            </div>
                            <div style="font-size:1rem; margin-top:10px; margin-bottom:20px;">
                                Time : <span id="usimTimer">300</span> [Sec]
                            </div>

                            <div class="modal-footer d-flex justify-content-between">
                                <button class="btn btn-secondary">Back</button>
                                <div>&lt;Step 1/7&gt;</div>
                                <button class="btn btn-primary" onclick="goToStep2()">Next</button>
                                <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- APN Setup Modal -->
                <div class="modal fade" id="apnSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                            <div style="font-weight:bold; font-size:1.2rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:10px; margin-bottom:20px;">
                                <i class="bi bi-folder"></i> Modem APN Setup
                            </div>

                            <div class="modal-body text-center">

                                <div class="d-flex justify-content-center align-items-center gap-3 mb-4">
                                <label class="fw-bold">Mobile Company</label>
                                <input type="text" class="form-control text-center" style="max-width:100px;" value="uscc" readonly>
                                <input type="text" class="form-control text-center" style="max-width:300px;" value="uscc07454.enterprise3.usc-cdp">
                                <button class="btn btn-secondary">Set</button>
                                </div>
                                <div style="font-size:1rem; margin-top:10px; margin-bottom:20px;">
                                    Time : <span id="apnTimer">300</span> [Sec]
                                </div>

                            </div>
                            <div class="modal-footer d-flex justify-content-between">
                                <button class="btn btn-secondary" onclick="goToUsimFromApn()">Back</button>
                                <div>&lt;Step 2/7&gt;</div>
                                <button class="btn btn-primary" onclick="goToStep3()">Next</button>
                                <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Btapn Setup Modal -->
                <div class="modal fade" id="BtapnSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                  <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                      
                      <!-- Header -->
                      <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0; margin: -20px -20px 20px -20px;">
                        <h5 class="modal-title text-white">APN Setup</h5>
                        <!-- Close(X) button -->
                        <button type="button" class="btn-close btn-close-white" style="filter: invert(1);" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      
                      <!-- Section title -->
                      <div style="font-weight:bold; font-size:1.2rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:10px; margin-bottom:20px;">
                        <i class="bi bi-folder"></i> Modem APN Setup
                      </div>

                      <!-- Body -->
                      <div class="modal-body text-center">
                        <table style="margin: 0 auto; border-collapse: collapse; border: none;">
                          <thead>
                            <tr>
                              <th style="border: none; padding: 8px;"></th>
                              <th style="border: none; padding: 8px;">&lt;Company&gt;</th>
                              <th style="border: none; padding: 8px;">&lt;APN&gt;</th>
                              <th style="border: none; padding: 8px;"></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td style="font-weight:bold; text-align:right; white-space:nowrap; border: none; padding: 8px;">Mobile Company</td>
                              <td style="border: none; padding: 8px;">
                                <input type="text" class="form-control text-center" style="width:100px;" value="uscc" readonly>
                              </td>
                              <td style="border: none; padding: 8px;">
                                <input type="text" class="form-control text-center" style="width:300px;" value="uscc07454.enterprise3.usc-cdp">
                              </td>
                              <td style="border: none; padding: 8px;">
                                <button class="btn btn-secondary">Set</button>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>

                      <!-- Footer -->
                      
                      <div class="modal-footer d-flex justify-content-center">
                        <button class="btn btn-secondary" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                    </div>
                    </div>
                  </div>
                </div>

                <script>
                // ---------- Config ----------
                var PAGE_SIZE = 25;           // 한 페이지에 더 많이 보이도록
                var WINDOW_SIZE = 3;          // 페이지 버튼 3개만 보이도록
                var TOTAL_ROWS = 180;         // 더미 데이터 개수

                // ---------- Dummy data ----------
                var levels = [
                  {name:'Warning',  color:'#f7c948'},
                  {name:'Major',    color:'#fb923c'},
                  {name:'Critical', color:'#e74c3c'}
                ];
                function pad(n){return (n<10?'0':'')+n;}
                function makeDate(i){
                  // 2025-06-(01~20) 01:01:01 형태
                  var d = 1 + (i % 20), h = i%24, m = (i*3)%60, s = (i*7)%60;
                  return '2025-06-' + pad(d) + ' ' + pad(h) + ':' + pad(m) + ':' + pad(s);
                }
                var rows = [];
                for(var i=0;i<TOTAL_ROWS;i++){
                  var L = levels[i%levels.length];
                  rows.push({
                    level: L.name,
                    color: L.color,
                    msg:   (i%5===2?'DU Main TSYNC LINK Alarm':'DU Main EMS DU LINK Alarm'),
                    date:  makeDate(i+1),
                    yn:    (i%3===0?'N':'Y'),
                    cdate: (i%3===0?'':makeDate(i+2))
                  });
                }

                // ===== Alarm History State =====

                // ===== Alarm History State =====
                var histCurrent = 1;
                var histTotalPages = 8; // 하드코딩된 페이지 수
                
                // ===== Alarm History Helpers =====
                function histRenderTable(){
                  // body 요소를 다시 찾기 (전역 변수 참조 문제 해결)
                  var bodyElement = document.getElementById('histBody');
                  
                  if (!bodyElement) {
                    console.error('Alarm History - histRenderTable: body 요소를 찾을 수 없음', {
                      bodyId: 'histBody'
                    });
                    return;
                  }
                  
                  // 더미 알람 데이터 생성 (실제로는 서버에서 가져와야 함)
                  var alarms = [];
                  for(var i=1; i<=histTotalPages*10; i++){
                    alarms.push({
                      level: ['Critical', 'Major', 'Minor', 'Warning'][i%4],
                      message: 'Alarm message ' + i + ' - This is a test alarm for demonstration',
                      date: '2024-01-' + (i%28+1).toString().padStart(2,'0') + ' 12:00:00',
                      clear: i%3===0 ? 'Y' : 'N',
                      clearDate: i%3===0 ? '2024-01-' + (i%28+1).toString().padStart(2,'0') + ' 13:00:00' : ''
                    });
                  }
                  
                  var start = (histCurrent-1)*10;
                  var slice = alarms.slice(start, start+10);
                  
                  console.log('Alarm History - histRenderTable 실행:', {alarmsLength: alarms.length, start, sliceLength: slice.length});
                  
                  bodyElement.innerHTML = slice.map(function(alarm){
                    return '<tr>'+
                      '<td style="text-align:center;">'+alarm.level+'</td>'+
                      '<td>'+alarm.message+'</td>'+
                      '<td style="text-align:center;">'+alarm.date+'</td>'+
                      '<td style="text-align:center;">'+alarm.clear+'</td>'+
                      '<td style="text-align:center;">'+alarm.clearDate+'</td>'+
                    '</tr>';
                  }).join('') || '<tr><td colspan="5" class="text-center text-muted">No data</td></tr>';
                }

                function histRenderPager(){
                  // DOM 요소를 다시 찾기 (전역 변수 참조 문제 해결)
                  var pagerElement = document.getElementById('histPager');
                  var statusElement = document.getElementById('histPageStatus');
                  
                  if (!pagerElement || !statusElement) {
                    console.error('Alarm History - histRenderPager: pager 또는 status 요소를 찾을 수 없음', {
                      pager: !!pagerElement, 
                      status: !!statusElement,
                      pagerId: 'histPager',
                      statusId: 'histPageStatus'
                    });
                    return;
                  }
                  
                  console.log('Alarm History - histRenderPager 실행:', {histCurrent, histTotalPages, pager: !!pagerElement, status: !!statusElement});
                  
                  // 좌/우 버튼 상태
                  var first = pagerElement.querySelector('[data-act="first"]').parentElement;
                  var prev  = pagerElement.querySelector('[data-act="prev"]').parentElement;
                  var next  = pagerElement.querySelector('[data-act="next"]').parentElement;
                  var last  = pagerElement.querySelector('[data-act="last"]').parentElement;
                  
                  first.classList.toggle('disabled', histCurrent===1);
                  prev .classList.toggle('disabled', histCurrent===1);
                  next .classList.toggle('disabled', histCurrent===histTotalPages);
                  last .classList.toggle('disabled', histCurrent===histTotalPages);

                  // 기존 숫자 버튼 제거
                  [].slice.call(pagerElement.querySelectorAll('a[data-page]')).forEach(function(a){ a.parentElement.remove(); });

                  // 윈도우 계산 (3개만 보이도록)
                  var WINDOW_SIZE = 3;
                  var start = Math.max(1, Math.min(histCurrent - Math.floor(WINDOW_SIZE/2), histTotalPages - WINDOW_SIZE + 1));
                  var end   = Math.min(histTotalPages, start + WINDOW_SIZE - 1);

                  // 새 숫자 버튼 삽입 (prev 뒤에)
                  var anchor = pagerElement.querySelector('[data-act="prev"]').parentElement;
                  for(var p=start; p<=end; p++){
                    var li = document.createElement('li');
                    li.className = 'page-item' + (p===histCurrent?' active':'');
                    li.innerHTML = '<a class="page-link" href="#" data-page="'+p+'">'+p+'</a>';
                    anchor.after(li);
                    anchor = li;
                  }

                  // 상태 문구 업데이트
                  statusElement.textContent = 'Showing ' + histCurrent + ' of ' + histTotalPages + ' pages';
                  console.log('Alarm History - 상태 업데이트 완료:', histCurrent, 'of', histTotalPages);
                  
                  // 실제 DOM에 반영되었는지 확인
                  console.log('Alarm History - DOM 상태 확인:', {
                    statusText: statusElement.textContent,
                    statusInnerHTML: statusElement.innerHTML,
                    statusVisible: statusElement.offsetParent !== null
                  });
                }

                function initAlarmHistory(){
                  console.log('=== Alarm History 초기화 시작 ===');
                  
                  // 상태 초기화
                  histCurrent = 1;
                  
                  // DOM 요소들 가져오기 (전역 변수 사용하지 않음)
                  var pagerElement = document.getElementById('histPager');
                  var bodyElement = document.getElementById('histBody');
                  var statusElement = document.getElementById('histPageStatus');
                  
                  console.log('DOM 요소 검색 결과:', {
                    pager: pagerElement ? '찾음' : '못찾음',
                    body: bodyElement ? '찾음' : '못찾음', 
                    status: statusElement ? '찾음' : '못찾음'
                  });
                  
                  if(pagerElement && bodyElement && statusElement){
                    console.log('페이지네이션 이벤트 리스너 추가 중...');
                    // 이벤트 리스너 추가
                    pagerElement.addEventListener('click', function(e){
                      var a = e.target.closest('a.page-link'); if(!a){return;}
                      e.preventDefault();
                      var act = a.getAttribute('data-act');
                      var num = a.getAttribute('data-page');

                      if(act==='first') histCurrent = 1;
                      else if(act==='prev') histCurrent = Math.max(1, histCurrent-1);
                      else if(act==='next') histCurrent = Math.min(histTotalPages, histCurrent+1);
                      else if(act==='last') histCurrent = histTotalPages;
                      else if(num){ histCurrent = parseInt(num,10); }

                      console.log('Alarm History - 페이지 변경:', act || num, '현재:', histCurrent, '총:', histTotalPages);
                      histRenderTable();
                      histRenderPager();
                    });
                    console.log('페이지네이션 이벤트 리스너 추가 완료');

                    // 초기 렌더
                    console.log('초기 렌더 시작...');
                    console.log('histRenderTable() 호출...');
                    histRenderTable();
                    console.log('histRenderPager() 호출...');
                    histRenderPager();
                    console.log('초기 렌더 완료');
                  } else {
                    console.error('Alarm History 초기화 실패: 필요한 DOM 요소가 없음');
                  }
                  
                  console.log('=== Alarm History 초기화 완료 ===');
                }

                        // 모달이 열릴 때 초기화
        document.addEventListener('DOMContentLoaded', function() {
          console.log('=== DOM 로드 완료, 모달 이벤트 리스너 설정 시작 ===');
          
          // Alarm History 모달 초기화
          var alarmModal = document.getElementById('alarmHistoryModal');
          if(alarmModal) {
            console.log('Alarm History 모달 찾음, 이벤트 리스너 추가 중...');
            alarmModal.addEventListener('shown.bs.modal', function() {
              console.log('Alarm History 모달 열림 이벤트 발생!');
              setTimeout(function() {
                console.log('Alarm History 모달 초기화 시작 (500ms 지연 후)');
                initAlarmHistory();
              }, 500); // User Management와 동일한 지연 시간
            });
            console.log('Alarm History 모달 이벤트 리스너 추가 완료');
          } else {
            console.error('Alarm History 모달을 찾을 수 없음!');
          }
          
          // User Management 모달 초기화
          var userModal = document.getElementById('userMgmtModal');
          if(userModal) {
            console.log('User Management 모달 찾음, 이벤트 리스너 추가 중...');
            userModal.addEventListener('shown.bs.modal', function() {
              console.log('User Management 모달 열림 이벤트 발생!');
              setTimeout(function() {
                console.log('User Management 모달 초기화 시작 (500ms 지연 후)');
                setupUserManagementEvents();
              }, 500); // Alarm History와 동일한 지연 시간
            });
            
            // 모달이 닫힐 때 초기화 상태 리셋
            userModal.addEventListener('hidden.bs.modal', function() {
              console.log('User Management 모달 닫힘, 초기화 상태 리셋');
              window.userManagementInitialized = false;
            });
            
            console.log('User Management 모달 이벤트 리스너 추가 완료');
          } else {
            console.error('User Management 모달을 찾을 수 없음!');
          }
          
          console.log('=== 모달 이벤트 리스너 설정 완료 ===');
        });
                </script>

                <!-- Device Time Setup Modal -->
                <div class="modal fade" id="DeviceSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                            <div style="font-weight:bold; font-size:1.2rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:10px; margin-bottom:20px;">
                                <i class="bi bi-folder"></i> Device Time Setup
                            </div>

                            <div class="modal-body text-center">

                                <div class="text-center my-4 p-3 bg-light rounded">
                                    Cur Time Set (PC browser time applied.)
                                </div>
                                <div style="font-size:1rem; margin-top:10px; margin-bottom:20px;">
                                    Time : <span id="DeviceTimer">300</span> [Sec]
                                </div>

                            </div>
                            <div class="modal-footer d-flex justify-content-between">
                                <button class="btn btn-secondary" onclick="goToApnFromDevice()">Back</button>
                                <div>&lt;Step 3/7&gt;</div>
                                <button class="btn btn-primary" onclick="goToStep4()">Next</button>
                                <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- AGC & TDD Setup Modal -->
                <div class="modal fade" id="AgcSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                        
                        <!-- Title -->
                        <div class="d-flex justify-content-between" style="margin-top: 10px; margin-bottom: 20px;">
                            <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; width:48%;">
                            <i class="bi bi-folder"></i> AGC Setup
                            </div>
                            <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; width:48%;">
                            <i class="bi bi-folder"></i> TDD Setup
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="modal-body text-start d-flex justify-content-between gap-3">

                            <!-- AGC Setup -->
                            <div style="width:48%;">
                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">AGC On/Off</label>
                                    <div class="col-7">
                                    <button id="Mvbx_RsAgcMode2" class="btn btn-success btn-sm w-100" style="width: 50px;">ON</button>
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">AGC Level</label>
                                    <div class="col-7 d-flex align-items-center">
                                    <input type="text" id="Mvbx_RsAgcThreshold2" class="form-control text-end" value="N/A">
                                    <span class="ms-2">[dBm]</span>
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">gNB Type</label>
                                    <div class="col-7">
                                        <select id="gNB_Vendor_1" class="form-select form-select-sm">
                                            <option value="Manual">Manual</option>
                                            <option value="Samsung">Samsung</option>
                                            <option value="Nokia">Nokia</option>
                                            <option value="Ericsson">Ericsson</option>
                                        </select>
                                        <button id="setVendorBtn" class="btn btn-sm btn-secondary mt-2">Set Vendor</button>
                                    </div>
                                </div>

                            </div>

                            <!-- TDD Setup -->
                            <div style="width:48%;">
                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">Frequency</label>
                                    <div class="col-7 d-flex align-items-center">
                                    <input type="text" id="TDD_Freq" class="form-control text-end" value="">
                                    <span class="ms-2">[MHz]</span>
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">ARFCN</label>
                                    <div class="col-7">
                                    <input type="text" id="TDD_Arfcn" class="form-control text-end" value="">
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">SSB MU</label>
                                    <div class="col-7">
                                    <select id="MvbxSsbMu" class="form-select">
                                        <option value="120K">120K</option>
                                        <option value="240K">240K</option>
                                    </select>
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">TDD Rate</label>
                                    <div class="col-7">
                                    <select id="MvbxTddRate" class="form-select">
                                        <option value="3:1">3 : 1</option>
                                        <option value="4:1">4 : 1</option>
                                    </select>
                                    </div>
                                </div>




                            </div>

                        </div>

                        <!-- Timer -->
                        <div style="font-size:1rem; margin-top:10px; margin-bottom:20px; text-align: center;">
                            Time : <span id="AgcTimer">300</span> [Sec]
                        </div>

                        <!-- Footer -->
                        <div class="modal-footer d-flex justify-content-between">
                            <button class="btn btn-secondary" onclick="goToDeviceFromAgc()">Back</button>
                            <div>&lt;Step 4/7&gt;</div>
                            <button class="btn btn-primary" onclick="goToStep5()">Next</button>
                            <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                        </div>
                        </div>
                    </div>
                </div>


                <!-- Confirm Reset Modal (Updated to match Initial Setup Modal style and content) -->
                <div class="modal fade" id="confirmResetModal" tabindex="-1" aria-labelledby="confirmResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to DU Reset it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confirm Modem Reset Modal -->
                <div class="modal fade" id="confirmModemResetModal" tabindex="-1" aria-labelledby="confirmModemResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to Modem Reset it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleModemResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleModemResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confirm EMS Reset Modal -->
                <div class="modal fade" id="confirmEmsResetModal" tabindex="-1" aria-labelledby="confirmEmsResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to EMS Reset it?<br>(EMS will reboot.)</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleEmsResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleEmsResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Confirm RSRP Req Modal -->
                <div class="modal fade" id="confirmRsrpReqModal" tabindex="-1" aria-labelledby="confirmRsrpReqModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to RSRP Req refresh set it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleRsrpReqConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleRsrpReqConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confirm PLL Relock Modal -->
                <div class="modal fade" id="confirmPllRelockModal" tabindex="-1" aria-labelledby="confirmPllRelockModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to PLL Relock it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handlePllRelockConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handlePllRelockConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confirm Beam Scan Modal -->
                <div class="modal fade" id="confirmBeamScanModal" tabindex="-1" aria-labelledby="confirmBeamScanModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to start Beam Scan it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleBeamScanConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleBeamScanConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Initial Setup Modal (Step 5/7) -->
                <div class="modal fade" id="InitialSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                        


                        <!-- Body -->
                        <div class="modal-body text-start">

                            <!-- DU Physical Section -->
                            <div class="mb-4">
                                <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; margin-bottom:15px;">
                                    <i class="bi bi-folder"></i> DU Physical
                                </div>
                                
                                <div class="row gx-5">
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Orientation</label>
                                            <div class="col-8 d-flex align-items-center">
                                                <input type="text" id="Actual_Orientation" class="form-control text-end" value="0">
                                                <span class="ms-2">[0]</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Tilt</label>
                                            <div class="col-8 d-flex align-items-center">
                                                <input type="text" id="Actual_Tilt" class="form-control text-end" value="0">
                                                <span class="ms-2">[0]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- DU Info Section -->
                            <div class="mb-4">
                                <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; margin-bottom:15px;">
                                    <i class="bi bi-folder"></i> DU Info
                                </div>
                                
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Site ID</label>
                                            <div class="col-8">
                                                <input type="text" id="site-id" class="form-control" value="Kor-FRTek-001" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Site Name</label>
                                            <div class="col-8">
                                                <input type="text" id="site-name" class="form-control" value="Korea FRTek RF-EMS" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Latitude</label>
                                            <div class="col-8">
                                                <input type="text" id="latitude" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Longitude</label>
                                            <div class="col-8">
                                                <input type="text" id="longitude" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">DU Name</label>
                                            <div class="col-8">
                                                <input type="text" id="du-name" class="form-control" value="DU">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Timer -->
                        <div style="font-size:1rem; margin-top:10px; margin-bottom:20px; text-align: center;">
                            Time : <span id="InitialSetupTimer">300</span> [Sec]
                        </div>

                        <!-- Footer -->
                        <div class="modal-footer d-flex justify-content-between">
                            <button class="btn btn-secondary" onclick="backToAgcSetup()">Back</button>
                            <div>&lt;Step 5/7&gt;</div>
                            <button class="btn btn-primary" onclick="goToStep6()">Next</button>
                            <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- SU Setup Modal (Step 6/7) -->
                <div class="modal fade" id="SuSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">



                        <!-- Body -->
                        <div class="modal-body text-start">

                            <!-- SU Enable Section -->
                            <div class="mb-4">
                                <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; margin-bottom:15px;">
                                    <i class="bi bi-folder"></i>SU Enable
                                </div>
                                
                                <div class="row gx-5">
                                    <div class="col-md-12">
                                        <div class="row align-items-center">
                                            <label class="col-3 col-form-label">CASCADE</label>
                                            <div class="col-9">
                                                <div class="d-flex gap-2">
                                                    <button id="su1-enable-btn" class="btn btn-success btn-sm">#1 Enable</button>
                                                    <button id="su2-enable-btn" class="btn btn-secondary btn-sm">#2 Disable</button>
                                                    <button id="su3-enable-btn" class="btn btn-secondary btn-sm">#3 Disable</button>
                                                    <button id="su4-enable-btn" class="btn btn-secondary btn-sm">#4 Disable</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- SU Info Section -->
                            <div class="mb-4">
                                <div style="font-weight:bold; font-size:0.9rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:3px; margin-bottom:10px;">
                                    <i class="bi bi-folder"></i> SU Info
                                </div>
                                
                                <div class="row g-2">
                                    <!-- SU#1 Row -->
                                    <div class="col-md-12">
                                        <div class="row g-1 justify-content-center">
                                            <div class="col-md-2">
                                                <div class="row align-items-center">
                                                    <label class="col-12 col-form-label" style="font-size:0.7rem;">SU#1</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-5 col-form-label" style="font-size:0.7rem;">Name</label>
                                                    <div class="col-7">
                                                        <input type="text" id="su1-name" class="form-control form-control-sm" value="SU #1" style="font-size:0.7rem;">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Latitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su1-latitude" class="form-control form-control-sm" style="font-size:0.7rem;">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Longitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su1-longitude" class="form-control form-control-sm" style="font-size:0.7rem;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- SU#2 Row -->
                                    <div class="col-md-12">
                                        <div class="row g-1 justify-content-center">
                                            <div class="col-md-2">
                                                <div class="row align-items-center">
                                                    <label class="col-12 col-form-label" style="font-size:0.7rem;">SU#2</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-5 col-form-label" style="font-size:0.7rem;">Name</label>
                                                    <div class="col-7">
                                                        <input type="text" id="su2-name" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Latitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su2-latitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Longitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su2-longitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- SU#3 Row -->
                                    <div class="col-md-12">
                                        <div class="row g-1 justify-content-center">
                                            <div class="col-md-2">
                                                <div class="row align-items-center">
                                                    <label class="col-12 col-form-label" style="font-size:0.7rem;">SU#3</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-5 col-form-label" style="font-size:0.7rem;">Name</label>
                                                    <div class="col-7">
                                                        <input type="text" id="su3-name" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Latitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su3-latitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Longitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su3-longitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- SU#4 Row -->
                                    <div class="col-md-12">
                                        <div class="row g-1 justify-content-center">
                                            <div class="col-md-2">
                                                <div class="row align-items-center">
                                                    <label class="col-12 col-form-label" style="font-size:0.7rem;">SU#4</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-5 col-form-label" style="font-size:0.7rem;">Name</label>
                                                    <div class="col-7">
                                                        <input type="text" id="su4-name" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Latitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su4-latitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Longitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su4-longitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Timer -->
                        <div style="font-size:1rem; margin-top:10px; margin-bottom:20px; text-align: center;">
                            Time : <span id="BtapnTimer">300</span> [Sec]
                        </div>

                        <!-- Footer -->
                        <div class="modal-footer d-flex justify-content-between">
                            <button class="btn btn-secondary" onclick="backToInitialSetup()">Back</button>
                            <div>&lt;Step 6/7&gt;</div>
                            <button class="btn btn-primary" onclick="goToStep7()">Next</button>
                            <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- Final Setup Modal (Step 7/7) -->
                <div class="modal fade" id="FinalSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-md">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:30px;">
                        
                        <!-- Question -->
                        <div style="font-size:1.2rem; margin-bottom:25px; color:#333;">
                            Complete set up?
                        </div>

                        <!-- Buttons -->
                        <div class="d-flex justify-content-center gap-3">
                            <button class="btn btn-light" style="padding:10px 25px; font-weight:bold; color:#333; border:none; border-radius:5px;">YES</button>
                            <button class="btn btn-light" style="padding:10px 25px; font-weight:bold; color:#333; border:none; border-radius:5px;">NO</button>
                        </div>

                        <!-- Timer -->
                        <div style="font-size:1rem; margin-top:20px; text-align: center;">
                            Time : <span id="FinalSetupTimer">300</span> [Sec]
                        </div>

                        <!-- Footer -->
                        <div class="modal-footer d-flex justify-content-between">
                            <button class="btn btn-secondary" onclick="backToBtapnSetup()">Back</button>
                            <div>&lt;Step 7/7&gt;</div>
                            <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                        </div>
                        </div>
                    </div>
                </div>



                <!-- DU Hidden Modal -->
                <div class="modal fade" id="duHiddenModal" tabindex="-1" aria-labelledby="duHiddenModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-xl">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                            <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                                <h5 class="modal-title" id="duHiddenModalLabel" style="font-weight: bold;">
                                    <i class="fas fa-plus me-2"></i>DU HIDDEN
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            
                            <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                                <!-- Main Grid Layout -->
                                <div class="row">
                                    <div class="col-md-6">
                                        <!-- SISO RF Section -->
                                        <div class="card mb-3">
                                            <div class="card-header">SISO RF</div>
                                            <div class="card-body">
                                        <div class="rf-content">
                                            <!-- DL Column -->
                                            <div class="rf-column">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus me-1"></i> DL
                                                </h6>
                                                <!-- DL Top Section -->
                                                <div class="input-item">
                                                    <label>DL SUB ATT</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="DlSubAtten_SISO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>DL Input Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="DL_InputOffset_SISO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- DL Middle Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>DL ATT Test</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Dl_Att_Test_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- DL Bottom Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>Ant Gain</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ant_Gain_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant ATT Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ant_Offset_DL_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- UL Column -->
                                            <div class="rf-column">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus me-1"></i> UL
                                                </h6>
                                                <!-- UL Top Section -->
                                                <div class="input-item">
                                                    <label>UL SUB ATT</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="UlSubAtten_SISO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>UL Output Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="UL_OutputOffset_SISO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>SD Status</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                                        <span class="unit"></span>
                                                    </div>
                                                </div>
                                                
                                                <!-- UL Middle Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>UL ATT Test</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ul_Att_Test_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- UL Bottom Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>Ant Out Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ant_Out_Offset_Siso" />
                                                        <span class="unit">[dBm]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant Output</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" readonly id="Ant_Output_SISO" />
                                                        <span class="unit">[dBm]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant ATT Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ant_Offset_UL_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <!-- MIMO RF Section -->
                                        <div class="card mb-3">
                                            <div class="card-header">MIMO RF</div>
                                            <div class="card-body">
                                        <div class="rf-content">
                                            <!-- DL Column -->
                                            <div class="rf-column">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus me-1"></i> DL
                                                </h6>
                                                <!-- DL Top Section -->
                                                <div class="input-item">
                                                    <label>DL SUB ATT</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="DlSubAtten_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>DL Input Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="DL_InputOffset_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- DL Middle Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>DL ATT Test</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Dl_Att_Test_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- DL Bottom Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>Ant Gain</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ant_Gain_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant ATT Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ant_Offset_DL_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- UL Column -->
                                            <div class="rf-column">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus me-1"></i> UL
                                                </h6>
                                                <!-- UL Top Section -->
                                                <div class="input-item">
                                                    <label>UL SUB ATT</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="UlSubAtten_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>UL Output Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="UL_OutputOffset_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>SD Status</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                                        <span class="unit"></span>
                                                    </div>
                                                </div>
                                                
                                                <!-- UL Middle Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>UL ATT Test</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="U_Att_Testl_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- UL Bottom Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>Ant Out Output</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ant_Out_Offset_Mimo" />
                                                        <span class="unit">[dBm]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant Output</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ant_Output_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant ATT Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="N/A" class="form-control form-control-sm" id="Ant_Offset_UL_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <!-- SISO OPTIC Section -->
                                        <div class="card mb-3">
                                            <div class="card-header">SISO OPTIC</div>
                                            <div class="card-body">
                                        <div class="optic-content">
                                            <div class="input-item">
                                                <label>LD PWR Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="N/A" class="form-control form-control-sm" id="LD1_DET_DL0_SISO_Offset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>PD PWR Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="N/A" class="form-control form-control-sm" id="PD1_DET_UL0_SISO_Offset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>RSRQ Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="N/A" class="form-control form-control-sm" id="RsrpOffset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>RSRQ Low Level</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="N/A" class="form-control form-control-sm" id="LowRsrpLevel" />
                                                    <span class="unit">[dBm]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>RSRQ Still Time</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="N/A" class="form-control form-control-sm" id="LowRsrpStillTime" />
                                                    <span class="unit">[sec]</span>
                                                </div>
                                            </div>
                                        </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <!-- MIMO OPTIC Section -->
                                        <div class="card mb-3">
                                            <div class="card-header">MIMO OPTIC</div>
                                            <div class="card-body">
                                        <div class="optic-content">
                                            <div class="input-item">
                                                <label>LD PWR Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="N/A" class="form-control form-control-sm" id="LD2_DET_DL1_MIMO_Offset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>PD PWR Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="N/A" class="form-control form-control-sm" id="PD2_DET_UL1_MIMO_Offset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                        </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Bottom Section (S/N, Polling Time, Baudrate, Toggles) -->
                                <div class="card mb-3">
                                    <div class="card-header">System Settings</div>
                                    <div class="card-body">
                                        <div class="bottom-content">
                                            <!-- Left Block -->
                                            <div class="bottom-block">
                                                <div class="form-group-item">
                                                    <label class="font-semibold">S/N</label>
                                                    <input type="text" id="conserialnum" value="N/A" class="form-control form-control-sm" />
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">ISO Detect</label>
                                                    <select id="isodetect" class="form-select form-select-sm" style="width: 80px; font-size: 0.65rem; padding: 0.1rem 0.2rem;">
                                                        <option value="SISO">SISO</option>
                                                        <option value="MIMO">MIMO</option>
                                                    </select>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Polling Time</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" id="pollingtime" value="N/A" class="form-control form-control-sm" />
                                                        <span class="unit">[ms]</span>
                                                    </div>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Baudrate</label>
                                                    <select id="baudrate" class="form-select form-select-sm" style="width: 80px; font-size: 0.65rem; padding: 0.1rem 0.2rem;">
                                                        <option value="19200">19200</option>
                                                        <option value="38400">38400</option>
                                                        <option value="57600">57600</option>
                                                        <option value="115200">115200</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <!-- Middle Block (Toggles) -->
                                            <div class="bottom-block">
                                                <div class="form-group-item">
                                                    <label class="font-semibold">AOM Temp</label>
                                                    <button id="aomtemp-toggle" class="btn-toggle on">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Att Test</label>
                                                    <button id="att-test-toggle" class="btn-toggle off">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Api Init.</label>
                                                    <button id="api-init-toggle" class="btn-toggle on">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Api Init. Retry</label>
                                                    <button id="api-init-retry-toggle" class="btn-toggle on">N/A</button>
                                                </div>
                                            </div>

                                            <!-- Right Block (More Toggles) -->
                                            <div class="bottom-block">
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Debug</label>
                                                    <button id="debug-toggle" class="btn-toggle on">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Modem</label>
                                                    <button id="modem-toggle" class="btn-toggle off">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Ant Band</label>
                                                    <span id ="antband">N/A</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>
                            <div class="modal-footer" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; justify-content: center; gap: 10px;">
                                <button type="button" class="btn btn-custom-blue-lg" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-custom-blue-lg">Set</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Beam Info Modal -->
                <div class="modal fade" id="beamInfoModal" tabindex="-1" aria-labelledby="beamInfoModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered" style="max-width: 95%; width: 95%;"> <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">

                            <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                                <h5 class="modal-title" id="beamInfoModalLabel" style="font-weight: bold;">
                                    <i class="fas fa-info-circle"></i> DU Beam Control
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                                <div class="card mb-3">
                                    <div class="card-header">Evn</div>
                                    <div class="card-body">
                                        <div class="row align-items-center justify-content-between">
                                            <div class="col-auto">
                                                <small class="text-muted">Ant. Array Ver</small>
                                                <small id="antArrayVer">N/A</small>
                                            </div>
                                            <div class="col-auto">
                                                <small class="text-muted">Temper Comp</small>
                                            </div>
                                            <div class="col-auto">
                                                <button class="btn btn-sm btn-on" id="temperComp">N/A</button>
                                            </div>
                                            <div class="col-auto">
                                                <small class="text-muted">Start Temper</small>
                                                <small id="startTemper">N/A</small>
                                            </div>
                                            <div class="col-auto">
                                                <small class="text-muted">Cur Temper</small>
                                                <small id="curTemper">N/A</small>
                                            </div>
                                            <div class="col-auto">
                                                <div class="text-end">
                                                    <small class="text-muted">Compensation DL</small>
                                                    <small id="compensationDL">N/A</small>
                                                </div>
                                                <div class="text-end mt-1">
                                                    <small class="text-muted">Compensation UL</small>
                                                    <small id="compensationUL">N/A</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header">SISO Tx/Rx Gain Setting</div>
                                            <div class="card-body">
                                                <div class="row g-2">
                                                    <div class="col-12 d-flex align-items-center">
                                                        <div class="me-2 plus-icon">
                                                            <span>+</span>
                                                        </div> Front End
                                                        <div class="ms-auto d-flex align-items-center">
                                                            <span class="me-2 text-muted">Tx Gain Idx</span>
                                                            <span class="me-3" style="width: 50px;" id="mvbxMv2850TxGainSiso">N/A</span>
                                                            <span class="me-2 text-muted">Rx Gain Idx</span>
                                                            <span style="width: 50px;" id="mvbxMv2850RxGainSiso">N/A</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 d-flex align-items-center">
                                                        <div class="me-2 plus-icon">
                                                            <span>+</span>
                                                        </div> Mixer
                                                        <div class="ms-auto d-flex align-items-center">
                                                            <span class="me-2 text-muted">Tx Gain Idx</span>
                                                            <span class="me-3" style="width: 50px;" id="mvbxMv2853TxGainSiso">N/A</span>
                                                            <span class="me-2 text-muted">Rx Gain Idx</span>
                                                            <span style="width: 50px;" id="mvbxMv2853RxGainSiso">N/A</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header">MIMO Tx/Rx Gain Setting</div>
                                            <div class="card-body">
                                                <div class="row g-2">
                                                    <div class="col-12 d-flex align-items-center">
                                                        <div class="me-2 plus-icon">
                                                            <span>+</span>
                                                        </div> Front End
                                                        <div class="ms-auto d-flex align-items-center">
                                                            <span class="me-2 text-muted">Tx Gain Idx</span>
                                                            <span class="me-3" style="width: 50px;" id="mvbxMv2850TxGainMimo">N/A</span>
                                                            <span class="me-2 text-muted">Rx Gain Idx</span>
                                                            <span style="width: 50px;" id="mvbxMv2850RxGainMimo">N/A</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 d-flex align-items-center">
                                                        <div class="me-2 plus-icon">
                                                            <span>+</span>
                                                        </div> Mixer
                                                        <div class="ms-auto d-flex align-items-center">
                                                            <span class="me-2 text-muted">Tx Gain Idx</span>
                                                            <span class="me-3" style="width: 50px;" id="mvbxMv2853TxGainMimo">N/A</span>
                                                            <span class="me-2 text-muted">Rx Gain Idx</span>
                                                            <span style="width: 50px;" id="mvbxMv2853RxGainMimo">N/A</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header">Beam Book</div>
                                            <div class="card-body text-center">

                                                <svg id="beamBook" width="360" height="360" viewBox="0 0 400 400"></svg>


                                                <div class="text-end mt-3">
                                                    <small class="text-muted">Orientation</small> <span class="ms-2" id="orientation">N/A</span><br>
                                                    <small class="text-muted">Tilt</small> <span class="ms-4" id="tilt">N/A</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card mb-3 beam-info-card" style="position: sticky; top: 0; z-index: 100;">
                                            <div class="card-header">Beam Info</div>
                                            <div class="card-body p-0">
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-sm mb-0 small-text text-center">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Rank</th>
                                                                <th scope="col">Beam ID</th>
                                                                <th scope="col">PCI</th>
                                                                <th scope="col">SSB</th>
                                                                <th scope="col">Energy</th>
                                                                <th scope="col">PSS</th>
                                                                <th scope="col">SNR(dB)</th>
                                                                <th scope="col">RSRP(dBm)</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td style="background-color: #F2C029; color: white; font-weight: bold;">1st</td>
                                                                <td id="mvbxBeamInfoBeamId1">N/A</td>
                                                                <td id="mvbxBeamInfoPci1">N/A</td>
                                                                <td id="mvbxBeamInfoSsbldx1">N/A</td>
                                                                <td id="mvbxBeamInfoEnergy1">N/A</td>
                                                                <td id="mvbxBeamInfoPsstype1">N/A</td>
                                                                <td id="mvbxBeamInfoSnr1">N/A</td>
                                                                <td id="mvbxBeamInfoRsrp1">N/A</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="background-color: #84D9A9; color: white; font-weight: bold;">2nd</td>
                                                                <td id="mvbxBeamInfoBeamId2">N/A</td>
                                                                <td id="mvbxBeamInfoPci2">N/A</td>
                                                                <td id="mvbxBeamInfoSsbldx2">N/A</td>
                                                                <td id="mvbxBeamInfoEnergy2">N/A</td>
                                                                <td id="mvbxBeamInfoPsstype2">N/A</td>
                                                                <td id="mvbxBeamInfoSnr2">N/A</td>
                                                                <td id="mvbxBeamInfoRsrp2">N/A</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="background-color: #84D9A9; color: white; font-weight: bold;">3rd</td>
                                                                <td id="mvbxBeamInfoBeamId3">N/A</td>
                                                                <td id="mvbxBeamInfoPci3">N/A</td>
                                                                <td id="mvbxBeamInfoSsbldx3">N/A</td>
                                                                <td id="mvbxBeamInfoEnergy3">N/A</td>
                                                                <td id="mvbxBeamInfoPsstype3">N/A</td>
                                                                <td id="mvbxBeamInfoSnr3">N/A</td>
                                                                <td id="mvbxBeamInfoRsrp3">N/A</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="background-color: #84D9A9; color: white; font-weight: bold;">4th</td>
                                                                <td id="mvbxBeamInfoBeamId4">N/A</td>
                                                                <td id="mvbxBeamInfoPci4">N/A</td>
                                                                <td id="mvbxBeamInfoSsbldx4">N/A</td>
                                                                <td id="mvbxBeamInfoEnergy4">N/A</td>
                                                                <td id="mvbxBeamInfoPsstype4">N/A</td>
                                                                <td id="mvbxBeamInfoSnr4">N/A</td>
                                                                <td id="mvbxBeamInfoRsrp4">N/A</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card mb-3">
                                            <div class="card-header">Beam Scan</div>
                                            <div class="card-body">
                                                <div class="row g-4">
                                                    <div class="col-md-6">
                                                        <div class="beam-scan-field">
                                                            <label for="beamRetry">Beam Retry</label>
                                                            <button class="btn btn-sm ms-auto btn-on" id="beamRetrySwitch">N/A</button>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="decodeAGC">Decode AGC</label>
                                                            <button class="btn btn-sm ms-auto btn-on" id="decodeAGCSwitch">N/A</button>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="retryCount">Retry Count [1:5min]</label>
                                                            <span class="ms-auto" id="retryCount">N/A</span>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="pllRelockCount">PLL Relock Count</label>
                                                            <span class="ms-auto" id="pllRelockCount">N/A</span>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="centerFrequency">Center Frequency</label>
                                                            <div class="input-group input-group-sm ms-auto" style="width: 120px;">
                                                                <input type="text" class="form-control" id="centerFrequency" value="N/A">
                                                                <span class="input-group-text">KHz</span>
                                                            </div>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="beamFix">Beam Fix</label>
                                                            <select class="form-select form-select-sm ms-auto" id="beamFix" style="width: 80px; font-size: 0.6rem; padding: 0.1rem 0.2rem;">
                                                                <option value="AUTO">AUTO</option>
                                                                <option value="FIX">FIX</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="beam-scan-field">
                                                            <label for="apiLogLevel">API Log Level [2~6]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="apiLogLevel" value="N/A">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="apiAdcSel">API Adc Sel [0-3 :6dB]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="apiAdcSel" value="N/A">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="syncPathGain">Sync Path Gain [0-15 :2dB]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="syncPathGain" value="N/A">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="duTimeAdvance">DU Time Advance [1:0.5us]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="duTimeAdvance" value="N/A">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="suTimeAdvance">SU Time Advance [1:0.5us]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="suTimeAdvance" value="N/A">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <table class="table table-sm table-borderless mb-0" style="border: none;">
                                                                <thead>
                                                                    <tr>
                                                                        <th scope="col" class="text-center" style="border: none; padding: 8px;"></th>
                                                                        <th scope="col" class="text-center" style="border: none; padding: 8px;">[Actual]</th>
                                                                        <th scope="col" class="text-center" style="border: none; padding: 8px;">[Adjust]</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="text-center" style="border: none; padding: 8px;">
                                                                            <small class="text-muted">Orientation</small>
                                                                        </td>
                                                                        <td class="text-center" style="border: none; padding: 8px;">
                                                                            <input type="text" class="form-control form-control-sm" id="orientationActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                                        </td>
                                                                        <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-center" style="border: none; padding: 8px;">
                                                                            <small class="text-muted">Tilt</small>
                                                                        </td>
                                                                        <td class="text-center" style="border: none; padding: 8px;">
                                                                            <input type="text" class="form-control form-control-sm" id="tiltActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                                        </td>
                                                                        <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>                             <div class="modal-footer justify-content-center" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                                <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal" style="visibility: visible; opacity: 1;">Cancel</button>
                                <button class="btn btn-primary" id="btnSetModeModal" style="visibility: visible; opacity: 1;">Set Mode</button>
                                <button class="btn btn-success d-none" id="btnApply">Apply</button>
                                <button class="btn btn-secondary d-none" id="btnStatusMode">Status Mode</button>
                            </div>

                        </div>
                    </div>
                </div>


                <!-- DU Alarm Mask Modal -->
                <div class="modal fade" id="alarmMaskModal" tabindex="-1" aria-labelledby="alarmMaskModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered" style="max-width: 90%; width: 90%;">
                        <div class="modal-content" style="background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 10px;">
                            <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0;">
                                <h5 class="modal-title text-white" id="alarmMaskModalLabel">
                                    <i class="fas fa-plus me-2"></i>DU Alarm Mask
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body" style="padding: 1.5rem;">
                                <div class="row g-3">
                                    <!-- Alarm Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>Alarm
                                            </h6>
                                            <div class="row g-2">
                                                <div class="col-3">
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">DC</small>
                                                        <button id="alarm_mask_madc" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">AC</small>
                                                        <button id="alarm_mask_ac" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">FPGA Link</small>
                                                        <button id="alarm_mask_fpga_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">EMS Link</small>
                                                        <button id="EMS_DU_Link_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">Temp</small>
                                                        <button id="alarm_mask_temp" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">BAT</small>
                                                        <button id="alarm_mask_bat" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;"></small>
                                                        <div style="height: 22px;"></div>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;"></small>
                                                        <div style="height: 22px;"></div>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">IF PLL</small>
                                                        <button id="alarm_mask_if_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">Sync PLL</small>
                                                        <button id="alarm_mask_sync_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;"></small>
                                                        <div style="height: 22px;"></div>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">TSync Link</small>
                                                        <button id="alarm_mask_tsync_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">Decoding</small>
                                                        <button id="alarm_mask_decoding" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">Ant Link</small>
                                                        <button id="alarm_mask_aa_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SU FAIL Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>SU FAIL
                                            </h6>
                                            <div class="mb-3">
                                                <div class="d-flex justify-content-center gap-4">
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">CASCADE</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">#1</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">#2</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">#3</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">#4</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <div class="d-flex justify-content-center gap-4">
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">PATH#0</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <button id="SU1_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <button id="SU2_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <button id="SU3_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <button id="SU4_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SISO RF Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>SISO RF
                                            </h6>
                                            <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                            <div class="mb-3">
                                                <div class="row g-2">
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                            <small style="font-size: 13px;">DL</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                            <small style="font-size: 13px;">UL</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-2">
                                                <div class="d-flex align-items-center">
                                                    <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                                    <button id="SISO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- MIMO RF Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>MIMO RF
                                            </h6>
                                            <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                            <div class="mb-3">
                                                <div class="row g-2">
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                            <small style="font-size: 13px;">DL</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                            <small style="font-size: 13px;">UL</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-2">
                                                <div class="d-flex align-items-center">
                                                    <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                                    <button id="MIMO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SISO OPTIC Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>SISO OPTIC
                                            </h6>
                                            <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                            <div class="mb-3">
                                                <div class="row g-2">
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <small style="font-size: 11px;">DL LD Lower</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <button id="LD1_DET_DL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <small style="font-size: 11px;">UL PD Lower</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <button id="PD1_DET_UL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- MIMO OPTIC Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>MIMO OPTIC
                                            </h6>
                                            <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                            <div class="mb-3">
                                                <div class="row g-2">
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <small style="font-size: 11px;">DL LD Lower</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <button id="LD2_DET_DL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <small style="font-size: 11px;">UL PD Lower</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <button id="PD2_DET_UL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer justify-content-center" style="background-color: #f5f5f5; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                                <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" style="background-color: #007bff; border: none;">Set</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DU System -->
                <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white;" class="mb-2">DU System</div>

                <div class="row">
                    <div class="col-md-6 mb-2">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 520px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> DU System
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small">
                                <div class="col-3 mb-2">
                                    <span><strong>F/W Ver</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="McuSwVer2">N/A</span> 
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Rpt Type</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="rpttype">N/A</span>
                                </div>

                                <div class="col-3 mb-2">
                                    <span><strong>FPGA Ver</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="FPGA_Ver">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Manufacturer</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span>FRTek</span>
                                </div>

                                <div class="col-3 mb-2">
                                    <span><strong>Cur Time</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="curtime">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Cur Temper</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="curtemper">N/A</span>
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-1">
                                    <span><strong>Temp Upper</strong></span>
                                </div>
                                <div class="col-3 mb-1 text-end">
                                    <input type="text" id="tempupper" data-editable="true" value="N/A" readonly style="width: 60%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                </div>
                                <div class="col-3 mb-1">
                                    <span><strong>Temp Lower</strong></span>
                                </div>
                                <div class="col-3 mb-1 text-end">
                                    <input type="text" id="templower" data-editable="true" value="N/A" readonly style="width: 60%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-2">
                                    <span><strong>FPGA Boot Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="FpgaStatus">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Init Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="InitStatus">N/A</span>
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-2">
                                    <span><strong>Beam Scan Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="ScanStatus">N/A</span>
                                </div>
                                
                            </div>

                            <div class="p-3 mt-4 rounded shadow-sm" style="background-color: #f0ffff;">
                                <h5 class="text-primary d-flex align-items-center mb-3">
                                    <i class="fas fa-folder me-2"></i>SU Enable
                                </h5>
                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="row text-secondary small">
                                    <div class="col-3 mb-2">
                                        <span><strong>CASCADE</strong></span>
                                    </div>
                                    <div class="col-2 mb-2 text-center">
                                        <span id="su1-enable-badge" class="badge bg-secondary">N/A</span>
                                    </div>
                                    <div class="col-2 mb-2 text-center">
                                        <span id="su2-enable-badge" class="badge bg-secondary">N/A</span>
                                    </div>
                                    <div class="col-2 mb-2 text-center">
                                        <span id="su3-enable-badge" class="badge bg-secondary">N/A</span>
                                    </div>
                                    <div class="col-2 mb-2 text-center">
                                        <span id="su4-enable-badge" class="badge bg-secondary">N/A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 520px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> Alarm
                            </h5>
                            <hr class="my-2" />

                            <div class="row text-secondary small mb-4">
                                    <div class="col-4">
                                        <p id="alarm_dc"><span class="status-circle"></span> DC</p>
                                        <p id="alarm_temp" style="color: gray;"><span class="status-circle"></span> Temp</p>
                                        <p id="alarm_if_pll" style="color: gray;"><span class="status-circle"></span> IF PLL</p>
                                    </div>
                                    <div class="col-4">
                                        <p id="alarm_ac" style="color: gray;"><span class="status-circle"></span> AC</p>
                                        <p id="alarm_bat" style="color: gray;"><span class="status-circle"></span> BAT</p>
                                        <p id="alarm_sync_pll" style="color: gray;"><span class="status-circle"></span> Sync PLL</p>
                                    </div>
                                    <div class="col-4">
                                        <p id="alarm_fpga_link" style="color: gray;"><span class="status-circle"></span> FPGA Link</p>
                                        <p id="alarm_aa_link" style="color: gray;"><span class="status-circle"></span> Ant Link</p>
                                        <p id="alarm_tsync_link" style="color: gray;"><span class="status-circle"></span> TSync Link</p>
                                        <p id="alarm_decoding" style="color: gray;"><span class="status-circle"></span> Decoding</p>
                                    </div>
                            </div>

                            <div class="p-3 rounded shadow-sm" style="background-color: #ffffff; border: 1px solid #e0e0e0;">
                                <h5 class="text-primary d-flex align-items-center mb-3">
                                    <i class="fas fa-folder me-2"></i> SU Link
                                </h5>
                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="row text-secondary small">
                                    <div class="col-3 text-center" id="su1-link-container">
                                        <div class="mb-2">
                                            <span>#1</span>
                                        </div>
                                        <div class="mb-2">
                                            <span id="su1-link-dot" class="status-dot status-unknown"></span>
                                        </div>
                                    </div>
                                    <div class="col-3 text-center" id="su2-link-container">
                                        <div class="mb-2">
                                            <span>#2</span>
                                        </div>
                                        <div class="mb-2">
                                            <span id="su2-link-dot" class="status-dot status-unknown"></span>
                                        </div>
                                    </div>
                                    <div class="col-3 text-center" id="su3-link-container">
                                        <div class="mb-2">
                                            <span>#3</span>
                                        </div>
                                        <div class="mb-2">
                                            <span id="su3-link-dot" class="status-dot status-unknown"></span>
                                        </div>
                                    </div>
                                    <div class="col-3 text-center" id="su4-link-container">
                                        <div class="mb-2">
                                            <span>#4</span>
                                        </div>
                                        <div class="mb-2">
                                            <span id="su4-link-dot" class="status-dot status-unknown"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                    </div>

                    <div class="col-md-2">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 520px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> ISO Measur
                            </h5>
                            <hr class="my-2" />

                            <div class="row text-secondary small">
                                <div class="col-6 mb-2">
                                    <span class="small-text"><strong>ISO Status</strong></span>
                                </div>
                                <div class="col-6 mb-2" style="text-align: center;">
                                    <span id="du_iso_status" class="small-text-2">N/A</span>
                                </div>

                                <div class="col-6 mb-2">
                                    <span>#1</span>
                                </div>
                                <div class="col-6 mb-2" style="text-align: center;">
                                    <span>-55dB</span>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>

                                <div class="row">
                    <!-- Modem Status -->
                    <div class="col-md-6"> <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                            Modem Status
                        </div>
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 400px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> Modem Status
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small mb-4">
                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Mod Ver</strong></span>
                                        <span id="modver">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>EMS Ver</strong></span>
                                        <span id="emsversion">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Status</strong></span>
                                        <span id="modstatus" class="text-success">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>IMSI</strong></span>
                                        <span id="modimsi">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>IMEI</strong></span>
                                        <span id="modimei">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Num</strong></span>
                                        <span id="modnum">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Mod IP</strong></span>
                                        <span id="modip">N/A</span>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSRP</strong></span>
                                        <span id="rsrp">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSRQ</strong></span>
                                        <span id="rsrq">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSSI</strong></span>
                                        <span id="rssi">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>PCI</strong></span>
                                        <span id="pci">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>SINR</strong></span>
                                        <span id="sinr">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Tx Pwr</strong></span>
                                        <span id="txpwr">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>LAN</strong></span>
                                        <span id="lan">N/A</span>
                                    </div>
                                </div>
                            </div>

                            <hr class="my-3" style="border-top: 1px dotted black;" /> <div class="row text-center mt-3">                                 <div class="col-6 mb-2">
                                    <button id="modemResetBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmModemResetModal">Modem Reset</button>
                                </div>
                                <div class="col-6 mb-2">
                                    <button id="emsResetBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmEmsResetModal">EMS Reset</button>
                                </div>
                                <div class="col-6 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">LAN Disable</button>
                                </div>
                                <div class="col-6 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">LAN Enable</button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Beam Status -->
                    <div class="col-md-6">
                        <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                            Beam Status
                        </div>
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 450px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> Beam Status
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small mb-4">
                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Beam ID</strong></span>
                                        <span id="mvbx_beamset">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSRP</strong></span>
                                        <span id="mvbx_rsrp">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>SNR</strong></span>
                                        <span id="mvbx_snr">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>SSB</strong></span>
                                        <span id="mvbx_ssb">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>PCI</strong></span>
                                        <span id="mvbx_pci">N/A</span>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="d-flex justify-content-between mb-1">
                                        <span><strong>Ant. Array On/Off</strong></span>
                                        <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="gumstick_onoff" data-editable="true">N/A</button>
                                    </div>
                                    <div class="d-flex justify-content-between mb-1">
                                        <span><strong>AGC On/Off</strong></span>
                                        <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="mvbx_rsagc_mode" data-editable="true">N/A</button>
                                    </div>
                                    <div class="d-flex justify-content-between mb-1">
                                        <span><strong>AGC Level</strong></span>
                                        <input type="text" id="mvbx_rsagc_threshold" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>AGC Input</strong></span>
                                        <span id="agc_input_power">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Decoded count</strong></span>
                                        <span id="decoded_ssb_count">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Decoded success</strong></span>
                                        <span id="decoded_ssb_no_error_count">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Decoded rate</strong></span>
                                        <span id="DecodedRate">N/A</span>
                                    </div>
                                </div>
                            </div>

                            <hr class="my-3" style="border-top: 1px dotted black;" /> <div class="row mb-3 align-items-center">
                                <div class="col-md-3">
                                    <span><strong>gNB Type</strong></span>
                                </div>
                                <div class="col-md-9">
                                    <select id="gNB_Vendor" data-editable="true" class="form-select form-select-sm">
                                        <option value="Manual">Manual</option>
                                        <option value="Samsung">Samsung</option>
                                        <option value="Nokia">Nokia</option>
                                        <option value="Ericsson">Ericsson</option>
                                    </select>
                                </div>
                            </div>

                            <hr class="my-3" style="border-top: 1px dotted black;" /> <div class="row text-center mt-3">                                 <div class="col-md-4 mb-2">
                                    <button id="rsrpReqBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmRsrpReqModal">RSRP Req</button>
                                </div>
                                <div class="col-md-4 mb-2">
                                    <button id="pllRelockBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmPllRelockModal">PLL Relock</button>
                                </div>
                                <div class="col-md-4 mb-2">
                                    <button id="beamScanBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmBeamScanModal">Beam Scan</button>
                                </div>
                            </div>
                                                </div>
                    </div>
                </div>





                <!-- AOM Status -->
                <div class="col-md-12 mb-4 mt-2"> <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                        AOM & mmWave
                    </div>
                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 340px;">
                        <h5 class="text-primary d-flex align-items-center mb-3">
                            <i class="fas fa-folder me-2"></i> AOM & mmWave
                        </h5>
                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                        <div class="row text-secondary small">
                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> SISO RF
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> DL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL Input</strong></span>
                                                <span id="dl_input_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ATT</strong></span>
                                                <input type="text" id="dl_att_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ALC Level</strong></span>
                                                <input type="text" id="dl_alc_level_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ALC On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="alc_dl0_siso_mode" data-editable="true">N/A</button>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> UL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL Output(EIRP)</strong></span>
                                                <span id="ul_input_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ATT</strong></span>
                                                <input type="text" id="ul_att_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ISO Level</strong></span>
                                                <input type="text" id="ul_iso_level_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-1">
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>DL Front End ATT</strong></span>
                                            <input type="text" id="mvbx_tx_gain_set_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>UL Front End ATT</strong></span>
                                            <input type="text" id="mvbx_rx_gain_set_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL ISO ATT</strong></span>
                                            <span id="ul_iso_att_siso">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> MIMO RF
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> DL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL Input</strong></span>
                                                <span id="dl_input_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ATT</strong></span>
                                                <input type="text" id="dl_att_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ALC Level</strong></span>
                                                <input type="text" id="dl_alc_level_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 22px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ALC On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="alc_dl1_mimo_mode" data-editable="true">N/A</button>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> UL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL Output(EIRP)</strong></span>
                                                <span id="ul_input_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ATT</strong></span>
                                                <input type="text" id="ul_att_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ISO Level</strong></span>
                                                <input type="text" id="ul_iso_level_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-1">
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>DL Front End ATT</strong></span>
                                            <input type="text" id="mvbx_tx_gain_set_miso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>UL Front End ATT</strong></span>
                                            <input type="text" id="mvbx_rx_gain_set_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL ISO ATT</strong></span>
                                            <span id="ul_iso_att_mimo">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> SISO OPTIC
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL LD</strong></span>
                                            <span id="ld1_det_dl0_siso">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL PD</strong></span>
                                            <span id="pd1_det_ul0_siso">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1 align-items-center">
                                            <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>DL LD Lower</strong></span>
                                            <input type="text" id="ld1_det_dl0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1 align-items-center">
                                            <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>UL PD Lower</strong></span>
                                            <input type="text" id="pd1_det_ul0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> MIMO OPTIC
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL LD</strong></span>
                                            <span id="ld2_det_dl1_mimo">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL PD</strong></span>
                                            <span id="pd2_det_ul1_mimo">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1 align-items-center">
                                            <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>DL LD Lower</strong></span>
                                            <input type="text" id="ld2_det_dl1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1 align-items-center">
                                            <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>UL PD Lower</strong></span>
                                            <input type="text" id="pd2_det_ul1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>


            <!-- SU Content (첫 번째 이미지에 해당하는 내용) -->
            <div id="su1_content_display">
                <div class="bg-light p-3 rounded shadow-sm mb-2"> 
                    <div class="row align-items-center mb-2"> 
                        <div class="col-md-3">
                            <small class="text-muted">Site ID :</small> Kor - FRTek - 001
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">Site Name :</small> Korea FRTek RF - EMIS
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">S/N :</small> <span id="su1_conserialnum_header">N/A</span>
                        </div>
                        <div class="col-md-3 text-end">
                            <small class="text-muted" >EMS ver :</small> 
                            <span id="su1_emsversion2">N/A</span>
                        </div>
                    </div>
                    
                <hr class="my-3" style="border-top: 1px dotted #000000;"> 
                <div class="d-flex justify-content-between align-items-center"> 
                    <div style="font-size: 1.5rem; font-weight: bold; color: #343a40;">SU #1 <i class="fas fa-pencil-alt text-muted fs-6"></i></div>
                    <div>
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su1ResetModal">RESET</button>
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su1BeamInfoModal">Beam Info</button>
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su1AlarmMaskModal">Alarm Mask</button>
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su1HiddenModal">HIDDEN</button>
                        <button id="btnSetModeSu1" class="btn btn-sm" style="background-color: gray; border: none; border-radius: 5px; color: white;">Set Mode</button>
                        <button id="btnStatusModeSu1" class="btn btn-secondary btn-sm me-2 d-none">Status Mode</button>
                        <button id="btnApplySu1" class="btn btn-success btn-sm d-none">Set</button>
                    </div>
                </div>



                <!-- SU System -->
                <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white;" class="mb-2">SU System</div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 400px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> SU System
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small">
                                <div class="col-3 mb-2">
                                    <span><strong>F/W Ver</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_McuSwVer">N/A</span> 
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Rpt Type</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_rpttype">N/A</span>
                                </div>

                                <div class="col-3 mb-2">
                                    <span><strong>Manufacturer</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span>FRTek</span>
                                </div>

                                <div class="col-3 mb-2">
                                    <span><strong>Cur Time</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_curtime">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Cur Temper</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_curtemper">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>SU Mode</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_sumode">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>SU ID</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <select id="su1_suid" data-editable="true" style="width: 60%; height: 25px; padding: 0px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        <option value="1">SU #1</option>
                                        <option value="2">SU #2</option>
                                        <option value="3">SU #3</option>
                                        <option value="4">SU #4</option>
                                    </select>
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-1">
                                    <span><strong>Temp Upper</strong></span>
                                </div>
                                <div class="col-3 mb-1 text-end">
                                    <input type="text" id="su1_tempupper" data-editable="true" value="N/A" readonly style="width: 60%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                </div>
                                <div class="col-3 mb-1">
                                    <span><strong>Temp Lower</strong></span>
                                </div>
                                <div class="col-3 mb-1 text-end">
                                    <input type="text" id="su1_templower" data-editable="true" value="N/A" readonly style="width: 60%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-2">
                                    <span><strong>Init Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_InitStatus">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Cascade Mode</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <button type="button" class="btn btn-success btn-sm" style="width: 60%; height: 25px; padding: 2px 6px;" id="su1_cascade_mode" data-editable="true">N/A</button>
                                </div>
                            </div>

                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 200px;">
                                    <h5 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> Alarm
                                    </h5>
                                    <hr class="my-2" />

                                    <div class="row text-secondary small mb-4">
                                        <div class="col-4">
                                            <p id="su1_alarm_dc"><span class="status-circle"></span> DC</p>
                                            <p id="su1_alarm_temp" style="color: gray;"><span class="status-circle"></span> Temp</p>
                                            <p id="su1_alarm_if_pll" style="color: gray;"><span class="status-circle"></span> IF PLL</p>
                                        </div>
                                        <div class="col-4">
                                            <p id="su1_alarm_ac" style="color: gray;"><span class="status-circle"></span> AC</p>
                                            <p id="su1_alarm_bat" style="color: gray;"><span class="status-circle"></span> BAT</p>
                                            <p id="su1_alarm_du_link" style="color: gray;"><span class="status-circle"></span> DU Link</p>
                                        </div>
                                        <div class="col-4">
                                            <p id="su1_alarm_aa_link" style="color: gray;"><span class="status-circle"></span> Ant Link</p>
                                            <p id="su1_alarm_tsync_link" style="color: gray;"><span class="status-circle"></span> TSync Link</p>
                                            <p id="su1_alarm_ref_pll" style="color: gray;"><span class="status-circle"></span> REF PLL</p>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 200px;">
                                    <h5 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> ISO Measur
                                    </h5>
                                    <hr class="my-2" />

                                    <div class="row text-secondary small">
                                        <div class="col-6 mb-2">
                                            <span  class="small-text"><strong>ISO Status</strong></span>
                                        </div>
                                        <div class="col-6 mb-2 text-end">
                                            <span id="su1_iso_status" class="small-text-2">N/A</span>
                                        </div>

                                        <div class="col-6 mb-2">
                                            <span>#1</span>
                                        </div>
                                        <div class="col-6 mb-2 text-end">
                                            <span>-55dB</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        
                        <!-- Beam Status -->
                        <div class="row mt-2">
                            <div class="col-md-12">
                                <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                                    Beam Status
                                </div>
                                <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 100px;">
                                    <h5 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> Beam Status
                                    </h5>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                                    <div class="row text-secondary small mb-4">
                                        <div class="col-md-6">
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>Ant. Array On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su1_gumstick_onoff" data-editable="true">N/A</button>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="d-flex justify-content-center">
                                                <button id="su1_pllRelockBtn" class="btn btn-secondary btn-sm" style="background-color: #6c757d; color: white; border-radius: 5px; width: 60%; height: 25px; padding: 2px 6px;" data-bs-toggle="modal" data-bs-target="#confirmSu1PllRelockModal">PLL RELOCK</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>





                <!-- AOM Status -->
                <div class="col-md-12 mb-4 mt-2"> <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                        AOM & mmWave
                    </div>
                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5;">
                        <h5 class="text-primary d-flex align-items-center mb-3">
                            <i class="fas fa-folder me-2"></i> AOM & mmWave
                        </h5>
                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                        <div class="row text-secondary small">
                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;"> <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> SISO RF
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> DL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL Output</strong></span>
                                                <span id="su1_dl_input_siso">N/A</span>
                                            </div>
                                                                                <div class="d-flex justify-content-between mb-1">
                                        <span><strong>DL ATT</strong></span>
                                                                                        <input type="text" id="su1_dl_att_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                    </div>
                                                                                <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ALC Level</strong></span>
                                                                                                                                                                                                   <input type="text" id="su1_dl_alc_level_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 22px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                    <div class="d-flex justify-content-between mb-1">
                                        <span><strong>DL ALC On/Off</strong></span>
                                        <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su1_dl_alc_onoff_siso" data-editable="true">N/A</button>
                                    </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> UL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL Input</strong></span>
                                                <span id="su1_ul_output_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ATT</strong></span>
                                                <input type="text" id="su1_ul_att_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ALC Level</strong></span>
                                                <input type="text" id="su1_ul_alc_level_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ALC On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su1_ul_alc_onoff_siso" data-editable="true">N/A</button>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-1">
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>DL Front End ATT</strong></span>
                                            <input type="text" id="su1_mvbx_tx_gain_set_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>UL Front End ATT</strong></span>
                                            <input type="text" id="su1_mvbx_rx_gain_set_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>DL ISO ATT</strong></span>
                                            <span id="su1_dl_iso_att_siso">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL ISO ATT</strong></span>
                                            <span id="su1_ul_iso_att_siso">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> MIMO RF
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> DL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL Output</strong></span>
                                                <span id="su1_dl_input_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ATT</strong></span>
                                                <input type="text" id="su1_dl_att_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ALC Level</strong></span>
                                                <input type="text" id="su1_dl_alc_level_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 22px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>DL ALC On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su1_dl_alc_onoff_mimo" data-editable="true">N/A</button>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> UL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL Input</strong></span>
                                                <span id="su1_ul_output_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ATT</strong></span>
                                                <input type="text" id="su1_ul_att_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ALC Level</strong></span>
                                                <input type="text" id="su1_ul_alc_level_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ALC On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su1_ul_alc_onoff_mimo" data-editable="true">N/A</button>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-1">
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>DL Front End ATT</strong></span>
                                            <input type="text" id="su1_mvbx_tx_gain_set_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>UL Front End ATT</strong></span>
                                            <input type="text" id="su1_mvbx_rx_gain_set_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-1">
                                            <span><strong>DL ISO ATT</strong></span>
                                            <span id="su1_dl_iso_att_mimo">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL ISO ATT</strong></span>
                                            <span id="su1_ul_iso_att_mimo">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> SISO OPTIC
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <!-- DL Section -->
                                        <div class="col-6">
                                            <div class="mb-2">
                                                <div class="d-flex justify-content-between mb-2">
                                            <span><strong>DL LD</strong></span>
                                            <span id="su1_ld1_det_dl0_siso">N/A</span>
                                        </div>
                                                <div class="d-flex justify-content-between mb-1 align-items-center">
                                            <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>DL LD Lower</strong></span>
                                            <input type="text" id="su1_ld1_det_dl0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                            </div>
                                            <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                            <div class="mb-2">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>DL Next LD</strong></span>
                                                    <span id="su1_ld3_det_dl0_siso">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1 align-items-center">
                                                    <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                    <span><strong>DL Next LD Lower</strong></span>
                                                    <input type="text" id="su1_ld3_det_dl0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- UL Section -->
                                        <div class="col-6">
                                            <div class="mb-2">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL PD</strong></span>
                                                    <span id="su1_pd1_det_ul0_siso">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1 align-items-center">
                                            <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>UL PD Lower</strong></span>
                                            <input type="text" id="su1_pd1_det_ul0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                    </div>
                                            <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                            <div class="mb-2">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL Next PD</strong></span>
                                                    <span id="su1_pd3_det_ul0_siso">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1 align-items-center">
                                                    <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                    <span><strong>UL Next PD Lower</strong></span>
                                                    <input type="text" id="su1_pd3_det_ul0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> MIMO OPTIC
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <!-- DL Section -->
                                        <div class="col-6">
                                            <div class="mb-2">
                                                <div class="d-flex justify-content-between mb-2">
                                            <span><strong>DL LD</strong></span>
                                            <span id="su1_ld2_det_dl1_mimo">N/A</span>
                                        </div>
                                                <div class="d-flex justify-content-between mb-1 align-items-center">
                                            <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>DL LD Lower</strong></span>
                                            <input type="text" id="su1_ld2_det_dl1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                            </div>
                                            <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                            <div class="mb-2">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>DL Next LD</strong></span>
                                                    <span id="su1_ld4_det_dl1_mimo">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1 align-items-center">
                                                    <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                    <span><strong>DL Next LD Lower</strong></span>
                                                    <input type="text" id="su1_ld4_det_dl1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- UL Section -->
                                        <div class="col-6">
                                            <div class="mb-2">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL PD</strong></span>
                                                    <span id="su1_pd2_det_ul1_mimo">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1 align-items-center">
                                            <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>UL PD Lower</strong></span>
                                            <input type="text" id="su1_pd2_det_ul1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                        </div>
                                    </div>
                                            <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                            <div class="mb-2">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL Next PD</strong></span>
                                                    <span id="su1_pd4_det_ul1_mimo">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1 align-items-center">
                                                    <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                    <span><strong>UL Next PD Lower</strong></span>
                                                    <input type="text" id="su1_pd4_det_ul1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>









            <div class="modal fade" id="duBeamControlModal" tabindex="-1" aria-labelledby="duBeamControlModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl"> <!-- Adjusted to extra large for more content -->
                    <div class="modal-content rounded-lg shadow-xl">
                        <div class="modal-header bg-gray-700 text-white rounded-t-lg">
                            <h5 class="modal-title text-xl font-bold" id="duBeamControlModalLabel">DU Beam Control</h5>
                            <button type="button" class="btn-close text-white" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body p-6 bg-gray-50">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Left Column -->
                                <div class="flex flex-col gap-6">
                                    <!-- Env Section -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">Env</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-gray-700">
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Ant. Array Ver</span>
                                                <span>03.15</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Temper Comp.</span>
                                                <span>Green</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Start Temper</span>
                                                <span>53.0℃</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Cur Temper</span>
                                                <span>39.0℃</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Compensation DL</span>
                                                <span>1dB</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Compensation UL</span>
                                                <span>1dB</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SISO Tx/Rx Gain Setting -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">SISO Tx/Rx Gain Setting</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="grid grid-cols-2 gap-4 text-sm text-gray-700">
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Front End</span>
                                                <span class="ml-auto">Tx Gain Idx <strong class="text-blue-600">9</strong></span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Tx Gain Idx</span>
                                                <span class="ml-auto">14</span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Mixer</span>
                                                <span class="ml-auto">Tx Gain Idx <strong class="text-blue-600">5</strong></span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Rx Gain Idx</span>
                                                <span class="ml-auto">5</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Beam Book (Placeholder for complex image) -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">Beam Book</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="w-full text-center py-8">
                                            <!-- This is a placeholder for the complex SVG/drawing from the image -->
                                            <!-- For now, we'll use a simple text or a placeholder image URL -->
                                            <img src="https://placehold.co/300x300/e0e0e0/333333?text=Beam+Book+Diagram" alt="Beam Book Diagram" class="mx-auto rounded-lg shadow-sm">
                                            <p class="text-sm text-gray-500 mt-2">[Orientation]</p>
                                            <p class="text-sm text-gray-500">0.000</p>
                                            <p class="text-sm text-gray-500">0.000</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Right Column -->
                                <div class="flex flex-col gap-6">
                                    <!-- MIMO Tx/Rx Gain Setting -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">MIMO Tx/Rx Gain Setting</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="grid grid-cols-2 gap-4 text-sm text-gray-700">
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Front End</span>
                                                <span class="ml-auto">Tx Gain Idx <strong class="text-blue-600">9</strong></span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Tx Gain Idx</span>
                                                <span class="ml-auto">14</span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Mixer</span>
                                                <span class="ml-auto">Tx Gain Idx <strong class="text-blue-600">5</strong></span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Rx Gain Idx</span>
                                                <span class="ml-auto">5</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Beam Info Table -->
                                    <div class="bg-white p-4 rounded-lg shadow-md overflow-x-auto">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">Beam Info</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <table class="min-w-full text-sm text-gray-700 border-collapse">
                                            <thead>
                                                <tr class="bg-gray-100 border-b border-gray-200">
                                                    <th class="py-2 px-3 text-left font-semibold">Rank</th>
                                                    <th class="py-2 px-3 text-left font-semibold">Beam ID</th>
                                                    <th class="py-2 px-3 text-left font-semibold">PCI</th>
                                                    <th class="py-2 px-3 text-left font-semibold">SSB</th>
                                                    <th class="py-2 px-3 text-left font-semibold">Energy</th>
                                                    <th class="py-2 px-3 text-left font-semibold">PSS</th>
                                                    <th class="py-2 px-3 text-left font-semibold">SNR[dB]</th>
                                                    <th class="py-2 px-3 text-left font-semibold">RSRP[dBm]</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="border-b border-gray-100 bg-yellow-100">
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">-0.00</td>
                                                    <td class="py-2 px-3">-990.00</td>
                                                </tr>
                                                <tr class="border-b border-gray-100">
                                                    <td class="py-2 px-3">2nd</td>
                                                    <td class="py-2 px-3">12</td>
                                                    <td class="py-2 px-3">313</td>
                                                    <td class="py-2 px-3">32</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">15.81</td>
                                                    <td class="py-2 px-3">-96.13</td>
                                                </tr>
                                                <tr class="border-b border-gray-100 bg-green-100">
                                                    <td class="py-2 px-3">3rd</td>
                                                    <td class="py-2 px-3">13</td>
                                                    <td class="py-2 px-3">313</td>
                                                    <td class="py-2 px-3">64</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">12.64</td>
                                                    <td class="py-2 px-3">-99.63</td>
                                                </tr>
                                                <tr class="border-b border-gray-100 bg-green-100">
                                                    <td class="py-2 px-3">4th</td>
                                                    <td class="py-2 px-3">47</td>
                                                    <td class="py-2 px-3">313</td>
                                                    <td class="py-2 px-3">16</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">12.14</td>
                                                    <td class="py-2 px-3">-100.67</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- Beam Scan -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">Beam Scan</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700">
                                            <div class="flex flex-col gap-2">
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Beam Retry</span>
                                                    <button class="bg-green-500 text-white rounded-md px-3 py-1 text-xs">ON</button>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Retry Count(1/5min)</span>
                                                    <span>9230</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">PLL Relock Count</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Center Frequency</span>
                                                    <span>27252000 [KHz]</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Beam Fix</span>
                                                    <div class="flex items-center">
                                                        <span class="mr-2">AUTO</span>
                                                        <i class="fas fa-arrow-right text-gray-400"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flex flex-col gap-2">
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">API Log Level(2-4)</span>
                                                    <span>3</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">API AGC Sel(0-2)</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Sync Path Gain(0-15)</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">DU Time Advance(10.5us)</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">SU Time Advance(10.5us)</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center mt-4">
                                                    <span class="text-gray-500">[Actual]</span>
                                                    <span class="text-gray-500">[Adjust]</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Orientation</span>
                                                    <span>0</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Tx/Rx</span>
                                                    <span>0</span>
                                                    <span>0</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer bg-gray-100 rounded-b-lg p-4 flex justify-end space-x-3">
                            <button type="button" class="bg-gray-500 text-white rounded-md px-4 py-2 shadow-sm hover:bg-gray-600 transition duration-300 ease-in-out" data-bs-dismiss="modal">Cancel</button>
                            <button type="button" class="bg-blue-600 text-white rounded-md px-4 py-2 shadow-sm hover:bg-blue-700 transition duration-300 ease-in-out">Set Mode</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Confirm Reset Modal -->
            <div class="modal fade" id="confirmResetModal" tabindex="-1" aria-labelledby="confirmResetModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-sm modal-dialog-centered">
                    <div class="modal-content rounded-lg shadow-xl p-4 text-center">
                        <div class="modal-header border-b-0 pb-0 flex justify-center">
                            <h5 class="modal-title sr-only" id="confirmResetModalLabel">Reset Confirmation</h5>
                            <button type="button" class="btn-close absolute top-3 right-3 text-gray-500 hover:text-gray-700" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body pt-0">
                            <div class="flex justify-center mb-4">
                                <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                            </div>
                            <p class="text-lg text-gray-700 mb-6">Do you want to DU Reset it?</p>
                            <div class="flex justify-center space-x-4">
                                <button
                                    type="button"
                                    class="btn btn-lg"
                                    style="width: 120px; background-color: #d3dce6;"
                                    data-bs-dismiss="modal"
                                    onclick="handleResetConfirmation(true)">
                                    Ok
                                </button>

                                <button type="button" class="bg-gray-400 text-gray-800 rounded-md px-6 py-2 shadow-sm hover:bg-gray-500 transition duration-300 ease-in-out" data-bs-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            </div>

            <!-- SU Content (SU #2) -->
            <div id="su2_content_display">
                <div class="bg-light p-3 rounded shadow-sm mb-2"> 
                    <div class="row align-items-center mb-2"> 
                        <div class="col-md-3">
                            <small class="text-muted">Site ID :</small> Kor - FRTek - 001
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">Site Name :</small> Korea FRTek RF - EMIS
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">S/N :</small> <span id="su2_conserialnum_header">N/A</span>
                        </div>
                        <div class="col-md-3 text-end">
                            <small class="text-muted">EMS ver :</small> 
                            <span id="su2_emsversion2">N/A</span>
                        </div>
                    </div>
                    
                    <hr class="my-3" style="border-top: 1px dotted #000000;"> 
                    <div class="d-flex justify-content-between align-items-center"> 
                        <div style="font-size: 1.5rem; font-weight: bold; color: #343a40;">SU #2 <i class="fas fa-pencil-alt text-muted fs-6"></i></div>
                        <div>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su2ResetModal">RESET</button>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su2BeamInfoModal">Beam Info</button>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su2AlarmMaskModal">Alarm Mask</button>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su2HiddenModal">HIDDEN</button>
                            <button id="btnSetModeSu2" class="btn btn-sm" style="background-color: gray; border: none; border-radius: 5px; color: white;">Set Mode</button>
                            <button id="btnStatusModeSu2" class="btn btn-secondary btn-sm me-2 d-none">Status Mode</button>
                            <button id="btnApplySu2" class="btn btn-success btn-sm d-none">Set</button>
                        </div>
                    </div>

                    <!-- SU System -->
                    <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white;" class="mb-2">SU System</div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 400px;">
                                <h5 class="text-primary d-flex align-items-center mb-3">
                                    <i class="fas fa-folder me-2"></i> SU System
                                </h5>
                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                                <div class="row text-secondary small">
                                    <div class="col-3 mb-2"><span><strong>F/W Ver</strong></span></div>
                                    <div class="col-3 mb-2 text-end"><span id="su2_McuSwVer">N/A</span></div>
                                    <div class="col-3 mb-2"><span><strong>Rpt Type</strong></span></div>
                                <div class="col-3 mb-2 text-end"><span id="su2_rptmaker">N/A</span></div>

                                    <div class="col-3 mb-2"><span><strong>Manufacturer</strong></span></div>
                                    <div class="col-3 mb-2 text-end"><span>FRTek</span></div>

                                    <div class="col-3 mb-2"><span><strong>Cur Time</strong></span></div>
                                    <div class="col-3 mb-2 text-end"><span id="su2_curtime">N/A</span></div>
                                    <div class="col-3 mb-2"><span><strong>Cur Temper</strong></span></div>
                                <div class="col-3 mb-2 text-end"><span id="su2_systememper">N/A</span></div>
                                    <div class="col-3 mb-2">
                                        <span><strong>SU Mode</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <span id="su2_sumode">N/A</span>
                                    </div>
                                    <div class="col-3 mb-2">
                                        <span><strong>SU ID</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <select id="su2_suid" data-editable="true" style="width: 60%; height: 25px; padding: 0px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            <option value="1">SU #1</option>
                                            <option value="2">SU #2</option>
                                            <option value="3">SU #3</option>
                                            <option value="4">SU #4</option>
                                        </select>
                                    </div>

                                    <hr class="my-2" />
                                    <div class="col-3 mb-1"><span><strong>Temp Upper</strong></span></div>
                                <div class="col-3 mb-1 text-end"><input type="text" id="su2_inittemper" data-editable="true" value="N/A" readonly style="width:60%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;"></div>
                                    <div class="col-3 mb-1"><span><strong>Temp Lower</strong></span></div>
                                    <div class="col-3 mb-1 text-end"><input type="text" id="su2_templower" data-editable="true" value="N/A" readonly style="width:60%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;"></div>

                                    <hr class="my-2" />
                                    <div class="col-3 mb-2"><span><strong>Init Status</strong></span></div>
                                <div class="col-3 mb-2 text-end"><span id="su2_fpga_init_status">N/A</span></div>
                                <div class="col-3 mb-2"><span><strong>Cascade Mode</strong></span></div>
                                <div class="col-3 mb-2 text-end">
                                    <button type="button" class="btn btn-success btn-sm" style="width: 60%; height: 25px; padding: 2px 6px;" id="su2_cascade_mode" data-editable="true">N/A</button>
                                </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Alarm -->
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 200px;">
                                        <h5 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> Alarm
                                        </h5>
                                        <hr class="my-2" />

                                        <div class="row text-secondary small mb-4">
                                            <div class="col-4">
                                                <p id="su2_alarm_dc"><span class="status-circle"></span> DC</p>
                                                <p id="su2_alarm_temp" style="color: gray;"><span class="status-circle"></span> Temp</p>
                                                <p id="su2_alarm_if_pll" style="color: gray;"><span class="status-circle"></span> IF PLL</p>
                                            </div>
                                            <div class="col-4">
                                                <p id="su2_alarm_ac" style="color: gray;"><span class="status-circle"></span> AC</p>
                                                <p id="su2_alarm_bat" style="color: gray;"><span class="status-circle"></span> BAT</p>
                                                <p id="su2_alarm_du_link" style="color: gray;"><span class="status-circle"></span> DU Link</p>
                                            </div>
                                            <div class="col-4">
                                                <p id="su2_alarm_aa_link" style="color: gray;"><span class="status-circle"></span> Ant Link</p>
                                                <p id="su2_alarm_tsync_link" style="color: gray;"><span class="status-circle"></span> TSync Link</p>
                                                <p id="su2_alarm_ref_pll" style="color: gray;"><span class="status-circle"></span> REF PLL</p>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 200px;">
                                        <h5 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> ISO Measur
                                        </h5>
                                        <hr class="my-2" />

                                        <div class="row text-secondary small">
                                            <div class="col-6 mb-2">
                                                <span class="small-text"><strong>ISO Status</strong></span>
                                            </div>
                                            <div class="col-6 mb-2 text-end">
                                                <span id="su2_iso_status" class="small-text-2">N/A</span>
                                            </div>

                                            <div class="col-6 mb-2"><span>#1</span></div>
                                            <div class="col-6 mb-2 text-end"><span>-55dB</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Beam Status -->
                            <div class="row mt-2">
                                <div class="col-md-12">
                                    <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                                        Beam Status
                                    </div>
                                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 150px;">
                                        <h5 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> Beam Status
                                        </h5>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                                        <div class="row text-secondary small mb-4">
                                            <div class="col-md-6">
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>Ant. Array On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su2_gumstick_onoff" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex justify-content-center">
                                                    <button id="su2_pllRelockBtn" class="btn btn-secondary btn-sm" style="background-color: #6c757d; color: white; border-radius: 5px; width: 60%; height: 25px; padding: 2px 6px;" data-bs-toggle="modal" data-bs-target="#confirmSu2PllRelockModal">PLL RELOCK</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- AOM & mmWave -->
                    <div class="col-md-12 mb-4 mt-2">
                        <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                            AOM & mmWave
                        </div>
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> AOM & mmWave
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small">
                                <!-- SISO RF -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> SISO RF
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> DL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>DL Output</strong></span>
                                                    <span id="su2_dl_input_siso">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ATT</strong></span>
                                                    <input type="text" id="su2_dl_att_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC Level</strong></span>
                                                    <input type="text" id="su2_dl_alc_level_siso" data-editable="true" value="N/A" readonly style="width:30%; height:22px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width:30%; height:25px; padding:2px 6px;" id="su2_dl_alc_onoff_siso" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> UL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL Input</strong></span>
                                                    <span id="su2_ul_output_siso">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ATT</strong></span>
                                                    <input type="text" id="su2_ul_att_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ALC Level</strong></span>
                                                <input type="text" id="su2_ul_alc_level_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ALC On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width:30%; height:25px; padding:2px 6px;" id="su2_ul_alc_onoff_siso" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-1">
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL Front End ATT</strong></span>
                                                <input type="text" id="su2_mvbx_tx_gain_set_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>UL Front End ATT</strong></span>
                                                <input type="text" id="su2_mvbx_rx_gain_set_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL ISO ATT</strong></span>
                                                <span id="su2_dl_iso_att_siso">N/A</span>
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO ATT</strong></span>
                                                <span id="su2_ul_iso_att_siso">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- MIMO RF -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> MIMO RF
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> DL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>DL Output</strong></span>
                                                    <span id="su2_dl_input_mimo">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ATT</strong></span>
                                                    <input type="text" id="su2_dl_att_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC Level</strong></span>
                                                    <input type="text" id="su2_dl_alc_level_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:22px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width:30%; height:25px; padding:2px 6px;" id="su2_dl_alc_onoff_mimo" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> UL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL Input</strong></span>
                                                    <span id="su2_ul_output_mimo">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ATT</strong></span>
                                                    <input type="text" id="su2_ul_att_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ALC Level</strong></span>
                                                <input type="text" id="su2_ul_alc_level_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="d-flex justify-content-between mb-1">
                                                <span><strong>UL ALC On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width:30%; height:25px; padding:2px 6px;" id="su2_ul_alc_onoff_mimo" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-1">
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL Front End ATT</strong></span>
                                                <input type="text" id="su2_mvbx_tx_gain_set_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>UL Front End ATT</strong></span>
                                                <input type="text" id="su2_mvbx_rx_gain_set_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL ISO ATT</strong></span>
                                                <span id="su2_dl_iso_att_mimo">N/A</span>
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO ATT</strong></span>
                                                <span id="su2_ul_iso_att_mimo">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- SISO OPTIC -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> SISO OPTIC
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <!-- DL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL LD</strong></span>
                                                <span id="su2_ld1_det_dl0_siso">N/A</span>
                                            </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>DL LD Lower</strong></span>
                                                        <input type="text" id="su2_ld1_det_dl0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                                </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>DL Next LD</strong></span>
                                                        <span id="su2_ld3_det_dl0_siso">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>DL Next LD Lower</strong></span>
                                                        <input type="text" id="su2_ld3_det_dl0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- UL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL PD</strong></span>
                                                        <span id="su2_pd1_det_ul0_siso">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>UL PD Lower</strong></span>
                                                        <input type="text" id="su2_pd1_det_ul0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                        </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL Next PD</strong></span>
                                                        <span id="su2_pd3_det_ul0_siso">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>UL Next PD Lower</strong></span>
                                                        <input type="text" id="su2_pd3_det_ul0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- MIMO OPTIC -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> MIMO OPTIC
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <!-- DL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL LD</strong></span>
                                                <span id="su2_ld2_det_dl1_mimo">N/A</span>
                                            </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>DL LD Lower</strong></span>
                                                        <input type="text" id="su2_ld2_det_dl1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                                </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>DL Next LD</strong></span>
                                                        <span id="su2_ld4_det_dl1_mimo">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>DL Next LD Lower</strong></span>
                                                        <input type="text" id="su2_ld4_det_dl1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- UL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL PD</strong></span>
                                                        <span id="su2_pd2_det_ul1_mimo">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>UL PD Lower</strong></span>
                                                        <input type="text" id="su2_pd2_det_ul1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                        </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL Next PD</strong></span>
                                                        <span id="su2_pd4_det_ul1_mimo">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>UL Next PD Lower</strong></span>
                                                        <input type="text" id="su2_pd4_det_ul1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> <!-- /row -->
                        </div>
                    </div> <!-- /AOM & mmWave -->
                </div>
            </div>

            <!-- SU Content (SU #3) -->
            <div id="su3_content_display">
                <div class="bg-light p-3 rounded shadow-sm mb-2"> 
                    <div class="row align-items-center mb-2"> 
                        <div class="col-md-3">
                            <small class="text-muted">Site ID :</small> Kor - FRTek - 001
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">Site Name :</small> Korea FRTek RF - EMIS
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">S/N :</small> <span id="su3_conserialnum_header">N/A</span>
                        </div>
                        <div class="col-md-3 text-end">
                            <small class="text-muted">EMS ver :</small> 
                            <span id="su3_emsversion2">N/A</span>
                        </div>
                    </div>
                    
                    <hr class="my-3" style="border-top: 1px dotted #000000;"> 
                    <div class="d-flex justify-content-between align-items-center"> 
                        <div style="font-size: 1.5rem; font-weight: bold; color: #343a40;">SU #3 <i class="fas fa-pencil-alt text-muted fs-6"></i></div>
                        <div>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su3ResetModal">RESET</button>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su3BeamInfoModal">Beam Info</button>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su3AlarmMaskModal">Alarm Mask</button>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su3HiddenModal">HIDDEN</button>
                            <button id="btnSetModeSu3" class="btn btn-sm" style="background-color: gray; border: none; border-radius: 5px; color: white;">Set Mode</button>
                            <button id="btnStatusModeSu3" class="btn btn-secondary btn-sm me-2 d-none">Status Mode</button>
                            <button id="btnApplySu3" class="btn btn-success btn-sm d-none">Set</button>
                        </div>
                    </div>

                    <!-- SU System -->
                    <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white;" class="mb-2">SU System</div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 400px;">
                                <h5 class="text-primary d-flex align-items-center mb-3">
                                    <i class="fas fa-folder me-2"></i> SU System
                                </h5>
                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                                <div class="row text-secondary small">
                                    <div class="col-3 mb-2"><span><strong>F/W Ver</strong></span></div>
                                    <div class="col-3 mb-2 text-end"><span id="su3_McuSwVer">N/A</span></div>
                                    <div class="col-3 mb-2"><span><strong>Rpt Type</strong></span></div>
                                    <div class="col-3 mb-2 text-end"><span id="su3_rpttype">N/A</span></div>

                                    <div class="col-3 mb-2"><span><strong>Manufacturer</strong></span></div>
                                    <div class="col-3 mb-2 text-end"><span>FRTek</span></div>

                                    <div class="col-3 mb-2"><span><strong>Cur Time</strong></span></div>
                                    <div class="col-3 mb-2 text-end"><span id="su3_curtime">N/A</span></div>
                                    <div class="col-3 mb-2"><span><strong>Cur Temper</strong></span></div>
                                    <div class="col-3 mb-2 text-end"><span id="su3_curtemper">N/A</span></div>
                                    <div class="col-3 mb-2">
                                        <span><strong>SU Mode</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <span id="su3_sumode">N/A</span>
                                    </div>
                                    <div class="col-3 mb-2">
                                        <span><strong>SU ID</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <select id="su3_suid" data-editable="true" style="width: 60%; height: 25px; padding: 0px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            <option value="1">SU #1</option>
                                            <option value="2">SU #2</option>
                                            <option value="3">SU #3</option>
                                            <option value="4">SU #4</option>
                                        </select>
                                    </div>

                                    <hr class="my-2" />
                                    <div class="col-3 mb-1"><span><strong>Temp Upper</strong></span></div>
                                    <div class="col-3 mb-1 text-end"><input type="text" id="su3_tempupper" data-editable="true" value="N/A" readonly style="width:60%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;"></div>
                                    <div class="col-3 mb-1"><span><strong>Temp Lower</strong></span></div>
                                    <div class="col-3 mb-1 text-end"><input type="text" id="su3_templower" data-editable="true" value="N/A" readonly style="width:60%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;"></div>

                                    <hr class="my-2" />
                                    <div class="col-3 mb-2"><span><strong>Init Status</strong></span></div>
                                <div class="col-3 mb-2 text-end"><span id="su3_fpga_init_status">N/A</span></div>
                                <div class="col-3 mb-2"><span><strong>Cascade Mode</strong></span></div>
                                <div class="col-3 mb-2 text-end">
                                    <button type="button" class="btn btn-success btn-sm" style="width: 60%; height: 25px; padding: 2px 6px;" id="su3_cascade_mode" data-editable="true">N/A</button>
                                </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Alarm -->
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 200px;">
                                        <h5 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> Alarm
                                        </h5>
                                        <hr class="my-2" />

                                        <div class="row text-secondary small mb-4">
                                            <div class="col-4">
                                                <p id="su3_alarm_dc"><span class="status-circle"></span> DC</p>
                                                <p id="su3_alarm_temp" style="color: gray;"><span class="status-circle"></span> Temp</p>
                                                <p id="su3_alarm_if_pll" style="color: gray;"><span class="status-circle"></span> IF PLL</p>
                                            </div>
                                            <div class="col-4">
                                                <p id="su3_alarm_ac" style="color: gray;"><span class="status-circle"></span> AC</p>
                                                <p id="su3_alarm_bat" style="color: gray;"><span class="status-circle"></span> BAT</p>
                                                <p id="su3_alarm_du_link" style="color: gray;"><span class="status-circle"></span> DU Link</p>
                                            </div>
                                            <div class="col-4">
                                                <p id="su3_alarm_aa_link" style="color: gray;"><span class="status-circle"></span> Ant Link</p>
                                                <p id="su3_alarm_tsync_link" style="color: gray;"><span class="status-circle"></span> TSync Link</p>
                                                <p id="su3_alarm_ref_pll" style="color: gray;"><span class="status-circle"></span> REF PLL</p>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 200px;">
                                        <h5 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> ISO Measur
                                        </h5>
                                        <hr class="my-2" />

                                        <div class="row text-secondary small">
                                            <div class="col-6 mb-2">
                                                <span class="small-text"><strong>ISO Status</strong></span>
                                            </div>
                                            <div class="col-6 mb-2 text-end">
                                                <span id="su3_iso_status" class="small-text-2">N/A</span>
                                            </div>

                                            <div class="col-6 mb-2"><span>#1</span></div>
                                            <div class="col-6 mb-2 text-end"><span>-55dB</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Beam Status -->
                            <div class="row mt-2">
                                <div class="col-md-12">
                                    <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                                        Beam Status
                                    </div>
                                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 150px;">
                                        <h5 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> Beam Status
                                        </h5>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                                        <div class="row text-secondary small mb-4">
                                            <div class="col-md-6">
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>Ant. Array On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su3_gumstick_onoff" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex justify-content-center">
                                                    <button id="su3_pllRelockBtn" class="btn btn-secondary btn-sm" style="background-color: #6c757d; color: white; border-radius: 5px; width: 60%; height: 25px; padding: 2px 6px;" data-bs-toggle="modal" data-bs-target="#confirmSu3PllRelockModal">PLL RELOCK</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- AOM & mmWave -->
                    <div class="col-md-12 mb-4 mt-2">
                        <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                            AOM & mmWave
                        </div>
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> AOM & mmWave
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small">
                                <!-- SISO RF -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> SISO RF
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> DL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>DL Output</strong></span>
                                                    <span id="su3_dl_input_siso">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ATT</strong></span>
                                                    <input type="text" id="su3_dl_att_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC Level</strong></span>
                                                    <input type="text" id="su3_dl_alc_level_siso" data-editable="true" value="N/A" readonly style="width:30%; height:22px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width:30%; height:25px; padding:2px 6px;" id="su3_dl_alc_onoff_siso" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> UL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL Input</strong></span>
                                                    <span id="su3_ul_output_siso">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ATT</strong></span>
                                                    <input type="text" id="su3_ul_att_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ALC Level</strong></span>
                                                    <input type="text" id="su3_ul_alc_level_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width:30%; height:25px; padding:2px 6px;" id="su3_ul_alc_onoff_siso" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-1">
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL Front End ATT</strong></span>
                                                <input type="text" id="su3_mvbx_tx_gain_set_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>UL Front End ATT</strong></span>
                                                <input type="text" id="su3_mvbx_rx_gain_set_siso" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL ISO ATT</strong></span>
                                                <span id="su3_dl_iso_att_siso">N/A</span>
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO ATT</strong></span>
                                                <span id="su3_ul_iso_att_siso">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- MIMO RF -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> MIMO RF
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> DL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>DL Output</strong></span>
                                                    <span id="su3_dl_input_mimo">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ATT</strong></span>
                                                    <input type="text" id="su3_dl_att_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC Level</strong></span>
                                                    <input type="text" id="su3_dl_alc_level_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:22px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width:30%; height:25px; padding:2px 6px;" id="su3_dl_alc_onoff_mimo" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> UL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL Input</strong></span>
                                                    <span id="su3_ul_output_mimo">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ATT</strong></span>
                                                    <input type="text" id="su3_ul_att_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ALC Level</strong></span>
                                                    <input type="text" id="su3_ul_alc_level_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width:30%; height:25px; padding:2px 6px;" id="su3_ul_alc_onoff_mimo" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-1">
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL Front End ATT</strong></span>
                                                <input type="text" id="su3_mvbx_tx_gain_set_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>UL Front End ATT</strong></span>
                                                <input type="text" id="su3_mvbx_rx_gain_set_mimo" data-editable="true" value="N/A" readonly style="width:30%; height:25px; padding:0 4px; text-align:center; border:1px solid #ced4da; border-radius:.25rem; font-size:.875rem; background-color:#fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL ISO ATT</strong></span>
                                                <span id="su3_dl_iso_att_mimo">N/A</span>
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO ATT</strong></span>
                                                <span id="su3_ul_iso_att_mimo">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- SISO OPTIC -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> SISO OPTIC
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <!-- DL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL LD</strong></span>
                                                <span id="su3_ld1_det_dl0_siso">N/A</span>
                                            </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>DL LD Lower</strong></span>
                                                        <input type="text" id="su3_ld1_det_dl0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                                </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>DL Next LD</strong></span>
                                                        <span id="su3_ld3_det_dl0_siso">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>DL Next LD Lower</strong></span>
                                                        <input type="text" id="su3_ld3_det_dl0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- UL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL PD</strong></span>
                                                        <span id="su3_pd1_det_ul0_siso">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>UL PD Lower</strong></span>
                                                        <input type="text" id="su3_pd1_det_ul0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                        </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL Next PD</strong></span>
                                                        <span id="su3_pd3_det_ul0_siso">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>UL Next PD Lower</strong></span>
                                                        <input type="text" id="su3_pd3_det_ul0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- MIMO OPTIC -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> MIMO OPTIC
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <!-- DL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL LD</strong></span>
                                                <span id="su3_ld2_det_dl1_mimo">N/A</span>
                                            </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>DL LD Lower</strong></span>
                                                        <input type="text" id="su3_ld2_det_dl1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                                </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>DL Next LD</strong></span>
                                                        <span id="su3_ld4_det_dl1_mimo">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>DL Next LD Lower</strong></span>
                                                        <input type="text" id="su3_ld4_det_dl1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- UL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL PD</strong></span>
                                                        <span id="su3_pd2_det_ul1_mimo">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>UL PD Lower</strong></span>
                                                        <input type="text" id="su3_pd2_det_ul1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                        </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL Next PD</strong></span>
                                                        <span id="su3_pd4_det_ul1_mimo">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>UL Next PD Lower</strong></span>
                                                        <input type="text" id="su3_pd4_det_ul1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> <!-- /row -->
                        </div>
                    </div> <!-- /AOM & mmWave -->
                </div>
            </div>

            <!-- SU Content (SU #4) -->
            <div id="su4_content_display">
                <div class="bg-light p-3 rounded shadow-sm mb-2"> 
                    <div class="row align-items-center mb-2"> 
                        <div class="col-md-3">
                            <small class="text-muted">Site ID :</small> Kor - FRTek - 001
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">Site Name :</small> Korea FRTek RF - EMIS
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">S/N :</small> <span id="su4_conserialnum_header">N/A</span>
                        </div>
                        <div class="col-md-3 text-end">
                            <small class="text-muted">EMS ver :</small> 
                            <span id="su4_emsversion2">N/A</span>
                        </div>
                    </div>
                    
                    <hr class="my-3" style="border-top: 1px dotted #000000;"> 
                    <div class="d-flex justify-content-between align-items-center"> 
                        <div style="font-size: 1.5rem; font-weight: bold; color: #343a40;">SU #4 <i class="fas fa-pencil-alt text-muted fs-6"></i></div>
                        <div>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su4ResetModal">RESET</button>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su4BeamInfoModal">Beam Info</button>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su4AlarmMaskModal">Alarm Mask</button>
                            <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#su4HiddenModal">HIDDEN</button>
                            <button id="btnSetModeSu4" class="btn btn-sm" style="background-color: gray; border: none; border-radius: 5px; color: white;">Set Mode</button>
                            <button id="btnStatusModeSu4" class="btn btn-secondary btn-sm me-2 d-none">Status Mode</button>
                            <button id="btnApplySu4" class="btn btn-success btn-sm d-none">Set</button>
                        </div>
                    </div>

                    <!-- SU System -->
                    <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white;" class="mb-2">SU System</div>

                    <div class="row">
                        <div class="col-md-6 mb-2">
                            <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 400px;">
                                <h5 class="text-primary d-flex align-items-center mb-3">
                                    <i class="fas fa-folder me-2"></i> SU System
                                </h5>
                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                                <div class="row text-secondary small">
                                    <div class="col-3 mb-2">
                                        <span><strong>F/W Ver</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <span id="su4_McuSwVer">N/A</span> 
                                    </div>
                                    <div class="col-3 mb-2">
                                        <span><strong>Rpt Type</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <span id="su4_rpttype">N/A</span>
                                    </div>

                                    <div class="col-3 mb-2">
                                        <span><strong>Manufacturer</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <span>FRTek</span>
                                    </div>

                                    <div class="col-3 mb-2">
                                        <span><strong>Cur Time</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <span id="su4_curtime">N/A</span>
                                    </div>
                                    <div class="col-3 mb-2">
                                        <span><strong>Cur Temper</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <span id="su4_curtemper">N/A</span>
                                    </div>
                                    <div class="col-3 mb-2">
                                        <span><strong>SU Mode</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <span id="su4_sumode">N/A</span>
                                    </div>
                                    <div class="col-3 mb-2">
                                        <span><strong>SU ID</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <select id="su4_suid" data-editable="true" style="width: 60%; height: 25px; padding: 0px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            <option value="1">SU #1</option>
                                            <option value="2">SU #2</option>
                                            <option value="3">SU #3</option>
                                            <option value="4">SU #4</option>
                                        </select>
                                    </div>

                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="col-3 mb-1">
                                        <span><strong>Temp Upper</strong></span>
                                    </div>
                                    <div class="col-3 mb-1 text-end">
                                        <input type="text" id="su4_tempupper" data-editable="true" value="N/A" readonly style="width: 60%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                    </div>
                                    <div class="col-3 mb-1">
                                        <span><strong>Temp Lower</strong></span>
                                    </div>
                                    <div class="col-3 mb-1 text-end">
                                        <input type="text" id="su4_templower" data-editable="true" value="N/A" readonly style="width: 60%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                    </div>

                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="col-3 mb-2">
                                        <span><strong>Init Status</strong></span>
                                    </div>
                                    <div class="col-3 mb-2 text-end">
                                        <span id="su4_fpga_init_status">N/A</span>
                                    </div>
                                </div>

                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 200px;">
                                        <h5 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> Alarm
                                        </h5>
                                        <hr class="my-2" />

                                        <div class="row text-secondary small mb-4">
                                            <div class="col-4">
                                                <p id="su4_alarm_dc"><span class="status-circle"></span> DC</p>
                                                <p id="su4_alarm_temp" style="color: gray;"><span class="status-circle"></span> Temp</p>
                                                <p id="su4_alarm_if_pll" style="color: gray;"><span class="status-circle"></span> IF PLL</p>
                                            </div>
                                            <div class="col-4">
                                                <p id="su4_alarm_ac" style="color: gray;"><span class="status-circle"></span> AC</p>
                                                <p id="su4_alarm_bat" style="color: gray;"><span class="status-circle"></span> BAT</p>
                                                <p id="su4_alarm_du_link" style="color: gray;"><span class="status-circle"></span> DU Link</p>
                                            </div>
                                            <div class="col-4">
                                                <p id="su4_alarm_aa_link" style="color: gray;"><span class="status-circle"></span> Ant Link</p>
                                                <p id="su4_alarm_tsync_link" style="color: gray;"><span class="status-circle"></span> TSync Link</p>
                                                <p id="su4_alarm_ref_pll" style="color: gray;"><span class="status-circle"></span> REF PLL</p>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 200px;">
                                        <h5 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> ISO Measur
                                        </h5>
                                        <hr class="my-2" />

                                        <div class="row text-secondary small">
                                            <div class="col-6 mb-2">
                                                <span  class="small-text"><strong>ISO Status</strong></span>
                                            </div>
                                            <div class="col-6 mb-2 text-end">
                                                <span id="su4_iso_status" class="small-text-2">N/A</span>
                                            </div>

                                            <div class="col-6 mb-2">
                                                <span>#1</span>
                                            </div>
                                            <div class="col-6 mb-2 text-end">
                                                <span>-55dB</span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            
                            <!-- Beam Status -->
                            <div class="row mt-2">
                                <div class="col-md-12">
                            <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                                Beam Status
                            </div>
                            <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 150px;">
                                <h5 class="text-primary d-flex align-items-center mb-3">
                                    <i class="fas fa-folder me-2"></i> Beam Status
                                </h5>
                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                                <div class="row text-secondary small mb-4">
                                    <div class="col-md-6">
                                        <div class="d-flex justify-content-between mb-1">
                                            <span><strong>Ant. Array On/Off</strong></span>
                                            <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su4_gumstick_onoff" data-editable="true">N/A</button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="d-flex justify-content-center">
                                            <button id="su4_pllRelockBtn" class="btn btn-secondary btn-sm" style="background-color: #6c757d; color: white; border-radius: 5px; width: 60%; height: 25px; padding: 2px 6px;" data-bs-toggle="modal" data-bs-target="#confirmSu4PllRelockModal">PLL RELOCK</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AOM Status -->
                    <div class="col-md-12 mb-4 mt-2">
                        <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                            AOM & mmWave
                        </div>
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> AOM & mmWave
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small">
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> SISO RF
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> DL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>DL Output</strong></span>
                                                    <span id="su4_dl_input_siso">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ATT</strong></span>
                                                    <input type="text" id="su4_dl_att_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC Level</strong></span>
                                                    <input type="text" id="su4_dl_alc_level_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 22px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su4_dl_alc_onoff_siso" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> UL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL Input</strong></span>
                                                    <span id="su4_ul_output_siso">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ATT</strong></span>
                                                    <input type="text" id="su4_ul_att_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ALC Level</strong></span>
                                                    <input type="text" id="su4_ul_alc_level_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su4_ul_alc_onoff_siso" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-1">
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL Front End ATT</strong></span>
                                                <input type="text" id="su4_mvbx_tx_gain_set_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>UL Front End ATT</strong></span>
                                                <input type="text" id="su4_mvbx_rx_gain_set_siso" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL ISO ATT</strong></span>
                                                <span id="su4_dl_iso_att_siso">N/A</span>
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO ATT</strong></span>
                                                <span id="su4_ul_iso_att_siso">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- MIMO RF -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> MIMO RF
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> DL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>DL Output</strong></span>
                                                    <span id="su4_dl_input_mimo">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ATT</strong></span>
                                                    <input type="text" id="su4_dl_att_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC Level</strong></span>
                                                    <input type="text" id="su4_dl_alc_level_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 22px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>DL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su4_dl_alc_onoff_mimo" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus-circle me-1"></i> UL
                                                </h6>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span><strong>UL Input</strong></span>
                                                    <span id="su4_ul_output_mimo">N/A</span>
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ATT</strong></span>
                                                    <input type="text" id="su4_ul_att_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ALC Level</strong></span>
                                                    <input type="text" id="su4_ul_alc_level_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                </div>
                                                <div class="d-flex justify-content-between mb-1">
                                                    <span><strong>UL ALC On/Off</strong></span>
                                                    <button type="button" class="btn btn-success btn-sm" style="width: 30%; height: 25px; padding: 2px 6px;" id="su4_ul_alc_onoff_mimo" data-editable="true">N/A</button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-1">
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL Front End ATT</strong></span>
                                                <input type="text" id="su4_mvbx_tx_gain_set_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>UL Front End ATT</strong></span>
                                                <input type="text" id="su4_mvbx_rx_gain_set_mimo" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-1">
                                                <span><strong>DL ISO ATT</strong></span>
                                                <span id="su4_dl_iso_att_mimo">N/A</span>
                                            </div>
                                            <div class="col-6 d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO ATT</strong></span>
                                                <span id="su4_ul_iso_att_mimo">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- SISO OPTIC -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> SISO OPTIC
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <!-- DL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL LD</strong></span>
                                                <span id="su4_ld1_det_dl0_siso">N/A</span>
                                            </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>DL LD Lower</strong></span>
                                                                                                    <input type="text" id="su4_ld1_det_dl0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                                </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>DL Next LD</strong></span>
                                                        <span id="su4_ld3_det_dl0_siso">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>DL Next LD Lower</strong></span>
                                                        <input type="text" id="su4_ld3_det_dl0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- UL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL PD</strong></span>
                                                        <span id="su4_pd1_det_ul0_siso">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>UL PD Lower</strong></span>
                                                                                                    <input type="text" id="su4_pd1_det_ul0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                        </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL Next PD</strong></span>
                                                        <span id="su4_pd3_det_ul0_siso">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>UL Next PD Lower</strong></span>
                                                        <input type="text" id="su4_pd3_det_ul0_siso_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- MIMO OPTIC -->
                                <div class="col-md-6 mb-4">
                                    <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                        <h6 class="text-primary d-flex align-items-center mb-3">
                                            <i class="fas fa-folder me-2"></i> MIMO OPTIC
                                        </h6>
                                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                        <div class="row mt-3">
                                            <!-- DL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL LD</strong></span>
                                                <span id="su4_ld2_det_dl1_mimo">N/A</span>
                                            </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>DL LD Lower</strong></span>
                                                                                                    <input type="text" id="su4_ld2_det_dl1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                                </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>DL Next LD</strong></span>
                                                        <span id="su4_ld4_det_dl1_mimo">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>DL Next LD Lower</strong></span>
                                                        <input type="text" id="su4_ld4_det_dl1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- UL Section -->
                                            <div class="col-6">
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL PD</strong></span>
                                                        <span id="su4_pd2_det_ul1_mimo">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                <span><strong>UL PD Lower</strong></span>
                                                                                                    <input type="text" id="su4_pd2_det_ul1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                            </div>
                                        </div>
                                                <div class="mb-3"></div> <!-- 한 줄 띄우기 -->
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between mb-2">
                                                        <span><strong>UL Next PD</strong></span>
                                                        <span id="su4_pd4_det_ul1_mimo">N/A</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between mb-1 align-items-center">
                                                        <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                                        <span><strong>UL Next PD Lower</strong></span>
                                                        <input type="text" id="su4_pd4_det_ul1_mimo_low" data-editable="true" value="N/A" readonly style="width: 30%; height: 25px; padding: 0px 4px; text-align: center; border: 1px solid #ced4da; border-radius: 0.25rem; font-size: 0.875rem; background-color: #fff;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> <!-- /row -->
                        </div>
                    </div> <!-- /AOM section -->
                </div>
        </div>

        <!-- Packet Info Content -->
        <div id="packet_info_display" style="display: none; background-color: #D2D7D9; min-height: 100vh; padding: 20px;">
            <div style="background-color: #F0F1F2; padding: 1rem; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); margin-bottom: 0.5rem;"> 
                <div class="row align-items-center mb-2"> 
                    <div class="col-md-3">
                        <small class="text-muted">Site ID :</small> Kor-FRTek-001
                    </div>
                    <div class="col-md-3 text-center">
                        <small class="text-muted">Site Name :</small> Korea FRTek RF-EMS
                    </div>
                    <div class="col-md-3 text-center">
                        <small class="text-muted">S/N :</small> <span id="conserialnum_header_packet">N/A</span>
                    </div>
                    <div class="col-md-3 text-end">
                        <small class="text-muted">EMS ver :</small> <span id="emsversion2_packet">N/A</span>
                    </div>
                </div>
            </div>
            
            <hr class="my-3" style="border-top: 1px dotted #000000;"> 
            
            <!-- Main Packet Info Card -->
            <div style="background-color: #F0F1F2; padding: 1.5rem; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);">
                <div class="d-flex justify-content-between align-items-center mb-3"> 
                    <div style="font-size: 1.2rem; font-weight: bold; color: #343a40; background-color: #6c757d; color: white; padding: 8px 16px; border-radius: 4px;">
                        Packet Info
                    </div>
                    <button class="btn btn-secondary btn-sm">Clear</button>
                </div>

                <!-- SU Packet Send / Success Count Section -->
                <div class="mb-3">
                    <div class="d-flex align-items-center mb-2">
                        <i class="bi bi-folder me-2"></i>
                        <span style="font-weight: bold; color: #343a40;">SU Packet Send / Success Count</span>
                    </div>
                    
                    <!-- Data Table -->
                    <div class="table-responsive">
                        <table class="table table-bordered" style="background-color: white;">
                            <thead>
                                <tr>
                                    <th style="background-color: #f8f9fa; text-align: center;">CASCADE</th>
                                    <th style="background-color: #f8f9fa; text-align: center;">#1</th>
                                    <th style="background-color: #f8f9fa; text-align: center;">#2</th>
                                    <th style="background-color: #f8f9fa; text-align: center;">#3</th>
                                    <th style="background-color: #f8f9fa; text-align: center;">#4</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="text-align: center; font-weight: bold;">PATH#0</td>
                                    <td style="text-align: center; font-weight: bold;" id="packet_cascade1">N/A</td>
                                    <td style="text-align: center; font-weight: bold;" id="packet_cascade2">N/A</td>
                                    <td style="text-align: center; font-weight: bold;" id="packet_cascade3">N/A</td>
                                    <td style="text-align: center; font-weight: bold;" id="packet_cascade4">N/A</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sync Module Content -->
        <div id="sync_module_display" style="display: none; background-color: #D2D7D9; min-height: 100vh; padding: 20px;">
            <div style="background-color: #F0F1F2; padding: 1rem; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); margin-bottom: 0.5rem;"> 
                <div class="row align-items-center mb-2"> 
                    <div class="col-md-3">
                        <small class="text-muted">Site ID :</small> Kor-FRTek-001
                    </div>
                    <div class="col-md-3 text-center">
                        <small class="text-muted">Site Name :</small> Korea FRTek RF-EMS
                    </div>
                    <div class="col-md-3 text-center">
                        <small class="text-muted">S/N :</small> <span id="conserialnum_sync2">N/A</span>
                    </div>
                    <div class="col-md-3 text-end">
                        <small class="text-muted">EMS ver :</small> <span id="emsversion2_sync2">N/A</span>
                    </div>
                </div>
            </div>
            
            <hr class="my-3" style="border-top: 1px dotted #000000;"> 
            
            <!-- Main Sync Module Card -->
            <div style="background-color: #F0F1F2; padding: 1.5rem; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);">
                <div class="d-flex justify-content-between align-items-center mb-3"> 
                    <div style="font-size: 1.2rem; font-weight: bold; color: #343a40; background-color: #6c757d; color: white; padding: 8px 16px; border-radius: 4px;">
                        Sync Module
                    </div>
                    <div class="d-flex gap-2">
                        <button id="sync_3gpp_form_btn" class="btn btn-secondary btn-sm d-none">3Gpp Format Excel</button>
                        <button id="sync_3gpp_load_btn" class="btn btn-secondary btn-sm d-none">3Gpp Format Load</button>
                        <input type="file" id="sync_3gpp_file_input" accept=".xlsx,.xls,.csv" style="display: none;">
                        <button id="sync_slot_form_btn" class="btn btn-secondary btn-sm d-none">Slot Format Excel</button>
                        <button id="sync_slot_load_btn" class="btn btn-secondary btn-sm d-none">Slot Format Load</button>
                        <input type="file" id="sync_slot_file_input" accept=".xlsx,.xls,.csv" style="display: none;">
                        <button id="sync_set_mode_btn" class="btn btn-sm" style="background-color: gray; border: none; border-radius: 5px; color: white;">Set Mode</button>
                        <button id="sync_status_mode_btn" class="btn btn-secondary btn-sm d-none">Status Mode</button>
                        <button id="sync_apply_btn" class="btn btn-success btn-sm d-none">Set</button>
                    </div>
                </div>

                <!-- Slot Format Section -->
                <div class="mb-4">
                    <div class="d-flex align-items-center mb-2" style="cursor: pointer;" onclick="toggleSlotFormat()">
                        <i class="fas fa-chevron-right me-2" id="slot-format-icon"></i>
                        <span style="font-weight: bold; color: #343a40;">Slot Format</span>
                    </div>
                    <div id="slot-format-content" style="display: none;">
                        <div class="table-responsive">
                            <table class="table table-bordered" style="font-size: 0.8rem; text-align: center;">
                                <tbody>
                                    {% for row in range(0, 160, 20) %}
                                    <tr>
                                      <!-- 설명 셀: Slot No / Slot Format -->
                                      <td class="align-middle" style="font-weight: bold; white-space: nowrap; width: 100px; line-height: 1.8;">
                                        Slot No<br>Slot Format
                                      </td>
                                  
                                      <!-- 슬롯 번호 + 입력창 (20칸) -->
                                      {% for col in range(row, row + 20) %}
                                      <td>
                                        <div style="font-weight: bold; margin-bottom: 6px;">{{ col }}</div>
                                        <input id="slot_format_{{ col }}" type="text" class="form-control form-control-sm mt-1 sync-input" style="height: 15px; font-size: 0.5rem; padding: 0px 3px; text-align: center;" value="" readonly>
                                      </td>
                                      {% endfor %}
                                    </tr>
                                    {% endfor %}
                                  </tbody>
                                  
                              </table>
                              
                        </div>
                    </div>
                </div>

                                <!-- Synchronization Parameters -->
                <div class="sync-container">
                    <div class="row gx-4">
                        <!-- Channel 1 -->
                        <div class="col-md-3 px-2">
                            <div class="sync-card">
                                <div class="sync-label">TTG CTRL #1</div>
                                <div id="ttg_ctrl_1" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">RTG CTRL #1</div>
                                <div id="rtg_ctrl_1" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC Delay #1</div>
                                <div id="tsync_delay_1" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC OUT SEL #1</div>
                                <select id="tsync_out_sel_1" class="form-select form-select-sm mb-2 sync-select" disabled>
                                    <option value="0">AUTO</option>
                                    <option value="1">DL(L)</option>
                                    <option value="2">UL(H)</option>
                                </select>

                                <div class="sync-label">TSYNC OUT MODE #1</div>
                                <select id="tsync_out_mode_1" class="form-select form-select-sm sync-select" disabled>
                                    <option value="0">NORMAL</option>
                                    <option value="1">INVERT</option>
                                </select>
                            </div>
                        </div>

                        <!-- Channel 2 -->
                        <div class="col-md-3 px-2">
                            <div class="sync-card">
                                <div class="sync-label">TTG CTRL #2</div>
                                <div id="ttg_ctrl_2" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">RTG CTRL #2</div>
                                <div id="rtg_ctrl_2" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC Delay #2</div>
                                <div id="tsync_delay_2" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC OUT SEL #2</div>
                                <select id="tsync_out_sel_2" class="form-select form-select-sm mb-2 sync-select" disabled>
                                    <option value="0">AUTO</option>
                                    <option value="1">DL(L)</option>
                                    <option value="2">UL(H)</option>
                                </select>

                                <div class="sync-label">TSYNC OUT MODE #2</div>
                                <select id="tsync_out_mode_2" class="form-select form-select-sm sync-select" disabled>
                                    <option value="0">NORMAL</option>
                                    <option value="1">INVERT</option>
                                </select>
                            </div>
                        </div>

                        <!-- Channel 3 -->
                        <div class="col-md-3 px-2">
                            <div class="sync-card">
                                <div class="sync-label">TTG CTRL #3</div>
                                <div id="ttg_ctrl_3" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">RTG CTRL #3</div>
                                <div id="rtg_ctrl_3" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC Delay #3</div>
                                <div id="tsync_delay_3" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC OUT SEL #3</div>
                                <select id="tsync_out_sel_3" class="form-select form-select-sm mb-2 sync-select" disabled>
                                    <option value="0">AUTO</option>
                                    <option value="1">DL(L)</option>
                                    <option value="2">UL(H)</option>
                                </select>

                                <div class="sync-label">TSYNC OUT MODE #3</div>
                                <select id="tsync_out_mode_3" class="form-select form-select-sm sync-select" disabled>
                                    <option value="0">NORMAL</option>
                                    <option value="1">INVERT</option>
                                </select>
                            </div>
                        </div>

                        <!-- SSB MU + TDD Rate -->
                        <div class="col-md-3 px-2">
                            <div class="sync-card">
                                <div class="sync-label">SSB MU</div>
                                <select id="ssb_mu" class="form-select form-select-sm mb-2 sync-select" disabled>
                                    <option value="120">120K</option>
                                    <option value="240">240K</option>
                                </select>

                                <div class="sync-label">TDD Rate</div>
                                <select id="tdd_rate" class="form-select form-select-sm sync-select" disabled>
                                    <option value="0">4:1</option>
                                    <option value="1">DL</option>
                                    <option value="2">UL</option>
                                    <option value="3">CUS</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Frequency Bar -->
                <div class="frequency-bar" style="margin-top: 1rem;">
                    <div>Frequency &nbsp;&nbsp; <input id="TDD_Freq2" type="text" class="form-control form-control-sm sync-input" style="display: inline-block; width: 120px; margin-left: 10px; background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;" value="N/A" readonly> &nbsp; [MHz]</div>
                    <div>ARFCN &nbsp;&nbsp; <input id="TDD_Arfcn2" type="text" class="form-control form-control-sm sync-input" style="display: inline-block; width: 100px; margin-left: 10px; background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;" value="N/A" readonly></div>
                </div>

                <!-- Slot 3gpp Format Section -->
                <div class="mb-4" style="margin-top: 2rem;">
                    <div class="d-flex align-items-center mb-2" style="cursor: pointer;" onclick="toggleSlot3gppFormat()">
                        <i class="fas fa-chevron-right me-2" id="slot-3gpp-format-icon"></i>
                        <span style="font-weight: bold; color: #343a40;">Slot 3gpp Format</span>
                    </div>
                    <div id="slot-3gpp-format-content" style="display: none;">
                        <div class="table-responsive">
                            <table border="1" style="border-collapse: collapse; font-size: 0.8rem; background-color: white; width: 100%;">
                                <!-- Header -->
                                <thead>
                                    <tr>
                                        <th style="background-color: #f8f9fa; text-align: center; width: 40px; border: 1px solid #dee2e6;"></th>
                                        <!-- Column headers 0~13 -->
                                        {% for col in range(14) %}
                                        <th style="background-color: #f8f9fa; text-align: center; width: 40px; border: 1px solid #dee2e6;">{{ col }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>

                                <!-- Body -->
                                <tbody>
                                    {% for row in range(56) %}
                                    <tr>
                                        <!-- Row header -->
                                        <td style="text-align: center; font-weight: bold; border: 1px solid #dee2e6;">{{ row }}</td>

                                        <!-- Dropdowns -->
                                        {% for col in range(14) %}
                                        <td style="text-align: center; border: 1px solid #dee2e6;">
                                            <select id="slot_3gpp_format_{{ row }}_{{ col }}" class="slot-3gpp-format-select sync-select" data-row="{{ row }}" data-col="{{ col }}" style="font-size: 0.75rem; padding: 2px 4px; width: 100%; border: none; background: transparent;" disabled>
                                                <option value="0">D</option>
                                                <option value="1">U</option>
                                                <option value="2">F</option>
                                            </select>
                                        </td>
                                        {% endfor %}
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- F Mode Section -->
                <div class="mb-4" style="margin-top: 2rem;">
                    <div class="frequency-bar">
                        <div>F Mode &nbsp;&nbsp; <select id="F_Mode" class="form-select form-select-sm sync-select" style="display: inline-block; width: 120px; margin-left: 10px;" disabled>
                            <option value="0">DL</option>
                            <option value="1">UL</option>
                        </select></div>
                    </div>
                </div>
            </div>
        </div>



    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/socket.io-client@4.0.1/dist/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

    <script>
        // ✅ 통합된 JavaScript
        let socket = io();

        // 1) 어떤 페이지/모달에서 어떤 패킷을 돌릴지 선언 (원하면 키만 추가)
        //    값이 true면 1초 폴링, false/null이면 안 돌림
        const PAGE_POLL = {
            dashboard: { update: true,  tdd: false }, // 대시보드: update_status만 (네비게이션, 기본 상태)
            su1:       { update: true, tdd: false }, // SU #1: update_status 폴링 (SU1 패킷 요청)
            su2:       { update: true, tdd: false }, // SU #2: su2_status_update 폴링 (SU2 패킷 요청)
            su3:       { update: true, tdd: false }, // SU #3: su3_status_update 폴링 (SU3 패킷 요청)
            su4:       { update: true, tdd: false }, // SU #4: su4_status_update 폴링 (SU4 패킷 요청)
            //alarms:    { update: true,  tdd: false }, // 알람 페이지: update_status만 (알람 상태)
            tddview:   { update: true, tdd: true  }, // sync module 페이지
            packet_info: { update: true, tdd: false }, // Packet Info: update_status만
            //none:      { update: false, tdd: false }, // 폴링 없음 (정보만 표시)
            // 필요시 추가...
        };

        const MODAL_POLL = {
            // TDD 관련 모달들
            '#beaminfo2': { update: false, tdd: false }, // 빔 정보 모달: 둘 다 (빔 정보 + TDD 설정)
            '#beamInfoModal': { update: true, tdd: false }, // DU Beam Control 모달: 폴링 없음
            
            // 상태/설정 관련 모달들
            '#alarmLevelModal': { update: false, tdd: false }, // 알람 레벨 모달: update_status만
            '#alarmHistoryModal': { update: false, tdd: false }, // 알람 히스토리 모달: update_status만
            '#userMgmtModal': { update: false, tdd: false }, // 사용자 관리 모달: update_status만
            '#alarmMaskModal': { update: true, tdd: false }, // 알람 마스크 모달: update_status만
            
            // Initial Setup 모달들
            '#duInitialSetupModal': { update: false, tdd: false }, // Initial Setup: Step 0/7 (메인 시작 모달)
            '#usimCheckModal': { update: false, tdd: false }, // Initial Setup: Step 1/7 (USIM 체크)
            '#apnSetupModal': { update: false, tdd: false }, // Initial Setup: Step 2/7 (APN 설정)
            '#BtapnSetupModal': { update: false, tdd: false }, // Initial Setup: Step 3/7 (B타입 APN 설정)
            '#DeviceSetupModal': { update: false, tdd: false }, // Initial Setup: Step 4/7 (디바이스 설정)
            '#AgcSetupModal': { update: true, tdd: true }, // Initial Setup: Step 5/7 (AGC 설정) - update_status + tdd_status
            '#InitialSetupModal': { update: true, tdd: false }, // Initial Setup: Step 6/7 (초기 설정)
            '#SuSetupModal': { update: true, tdd: false }, // Initial Setup: Step 7/7 (SU 설정)
            '#FinalSetupModal': { update: false, tdd: false }, // Initial Setup: 완료 모달
            '#duHiddenModal': { update: true, tdd: false },
            '#duBeamControlModal': { update: false, tdd: false },
            '#confirmResetModal': { update: false, tdd: false },
            '#infoModal': { update: false, tdd: false },
            // 필요시 추가...
        };

        // 2) 타이머 매니저 (한 종류당 타이머 1개만 유지)
        const PollManager = (() => {
            const timers = {};
            const start = (key, fn, interval=1000) => {
                if (timers[key]) return;
                fn(); // 즉시 1회
                timers[key] = setInterval(fn, interval);
            };
            const stop = (key) => {
                if (!timers[key]) return;
                clearInterval(timers[key]);
                delete timers[key];
            };
            return { start, stop };
        })();

        // 3) 활성 소스(페이지/모달) 집합으로 필요 여부를 계산
        const active = { update: new Set(), tdd: new Set() };
        let currentPage = null;
        let currentPageKeys = { update: null, tdd: null }; // 현재 페이지가 등록한 소스

        // TX 박스 깜빡임 함수
        function pulseTxBox(onDuration = 200) {
            // ON: TX 박스는 초록색으로
                    document.querySelectorAll('.tx-box').forEach(txbox => {
            txbox.style.backgroundColor = 'yellow';  // TX는 노란색 (RX와 동일)
            txbox.style.color = 'black';            // 텍스트는 검정색
        });
            // OFF: 원래색 복원
            setTimeout(() => {
                document.querySelectorAll('.tx-box').forEach(txbox => {
                    // txBoxState가 초기화되지 않았으면 기본값 사용
                    const originalBg = txBoxState.originalBg || '#6c757d';
                    const originalColor = txBoxState.originalColor || 'white';
                    txbox.style.backgroundColor = originalBg;
                    txbox.style.color = originalColor;
                });
            }, onDuration);
        }

        function reconcile() {
            console.log(`🔄 reconcile called. Active sets:`, { update: [...active.update], tdd: [...active.tdd] });
            
            if (active.update.size > 0) {
                PollManager.start('update', () => {
                    // DU(0x30) vs SU1(0x40) 페이로드 선택
                    let payload = { rcv_main_sys: 0x30 }; // 기본: DU 상태
                    const labels = [...active.update];
                    console.log(`📤 Polling update_status. Labels:`, labels);
                    
                    if (labels.length) {
                        const label = labels[0];
                        if (label.startsWith('page:')) {
                            const key = label.slice(5);
                            if (key === 'su1') {
                                payload = { rcv_main_sys: 0x40, rcv_sub_sys: 0x11 };
                                console.log(`🚀 SU1 패킷 요청:`, payload);
                            } else if (key === 'su2') {
                                payload = { rcv_main_sys: 0x40, rcv_sub_sys: 0x12 };
                                console.log(`🚀 SU2 패킷 요청:`, payload);
                            } else if (key === 'su3') {
                                payload = { rcv_main_sys: 0x40, rcv_sub_sys: 0x13 };
                                console.log(`🚀 SU3 패킷 요청:`, payload);
                            } else if (key === 'su4') {
                                payload = { rcv_main_sys: 0x40, rcv_sub_sys: 0x14 };
                                console.log(`🚀 SU4 패킷 요청:`, payload);
                            } else if (key === 'dashboard') {
                                payload = { rcv_main_sys: 0x30 };
                                console.log(`🚀 DU 패킷 요청:`, payload);
                            }
                        }
                    }
                    socket.emit('request_update_status', payload);
                    pulseTxBox();  // 요청 시점에 TX 깜빡
                }, 1000);
            } else {
                PollManager.stop('update');
                console.log(`⏹️ Stopped update polling`);
            }
            if (active.tdd.size > 0) {
                PollManager.start('tdd', () => {
                    socket.emit('request_tdd_status');
                    pulseTxBox();  // 요청 시점에 TX 깜빡
                }, 1000);
            } else {
                PollManager.stop('tdd');
            }
        }

        // 4) 페이지 전환 처리: PAGE_POLL에 따라 active 집합 갱신
        function enterPage(pageKey) {
            console.log(`🔀 enterPage called with: ${pageKey}`);
            currentPage = pageKey;

            // 이전 페이지 기여 제거
            if (currentPageKeys.update) {
                active.update.delete(currentPageKeys.update);
            }
            if (currentPageKeys.tdd) {
                active.tdd.delete(currentPageKeys.tdd);
            }
            currentPageKeys = { update: null, tdd: null };

            const cfg = PAGE_POLL[pageKey] || {};
            console.log(`📋 PAGE_POLL config for ${pageKey}:`, cfg);
            
            if (cfg.update) {
                currentPageKeys.update = `page:${pageKey}`;
                active.update.add(currentPageKeys.update);
                console.log(`✅ Added update polling for ${pageKey}`);
            }
            if (cfg.tdd) {
                currentPageKeys.tdd = `page:${pageKey}`;
                active.tdd.add(currentPageKeys.tdd);
                console.log(`✅ Added tdd polling for ${pageKey}`);
            }
            
            console.log(`🔍 Current active sets:`, { update: [...active.update], tdd: [...active.tdd] });
            reconcile();
        }

        // 5) 모달 열림/닫힘 처리: MODAL_POLL에 따라 active 집합 갱신
        function modalOpened(selector) {
            const cfg = MODAL_POLL[selector] || {};
            
            // 모달이 열릴 때 현재 페이지의 폴링 일시 중지
            if (currentPageKeys.update) {
                active.update.delete(currentPageKeys.update);
            }
            if (currentPageKeys.tdd) {
                active.tdd.delete(currentPageKeys.tdd);
            }
            
            // 모달 폴링 시작
            if (cfg.update) {
                active.update.add(`modal:${selector}`);
            }
            if (cfg.tdd) {
                active.tdd.add(`modal:${selector}`);
            }
            
            reconcile();
        }
        function modalClosed(selector) {
            // 모달 폴링 중지
            active.update.delete(`modal:${selector}`);
            active.tdd.delete(`modal:${selector}`);
            
            // 모달이 닫힐 때 원래 페이지의 폴링 다시 시작
            if (currentPageKeys.update) {
                active.update.add(currentPageKeys.update);
            }
            if (currentPageKeys.tdd) {
                active.tdd.add(currentPageKeys.tdd);
            }
            
            reconcile();
        }

        // 6) 초기 페이지 지정 + 네비게이션/모달 훅 연결
        document.addEventListener('DOMContentLoaded', () => {
            // 초기 페이지 설정: 자동 폴링 시작하지 않음 (사용자가 페이지 클릭할 때만 시작)
            // const activeContent = document.querySelector('.content-section.active') || 
            //                      document.querySelector('#du_content_display');
            // if (activeContent && activeContent.id === 'du_content_display') {
            //     enterPage('dashboard'); // DU 메인화면이 활성화되어 있으면 update_status 폴링 시작
            // }

            // data-page-key 이벤트 리스너 제거 (showScreen에서 enterPage 호출로 통일)

            // Bootstrap 모달 이벤트 리스너 연결
            const modals = [
                'tddModal', 'statusModal', 'alarmLevelModal', 'alarmHistoryModal', 
                'userMgmtModal', 'beaminfo2', 'beamInfoModal', 'alarmMaskModal',
                'duInitialSetupModal', 'usimCheckModal', 'apnSetupModal', 'BtapnSetupModal',
                'DeviceSetupModal', 'AgcSetupModal', 'InitialSetupModal', 'SuSetupModal',
                'FinalSetupModal', 'duHiddenModal', 'duBeamControlModal', 'confirmResetModal', 'infoModal'
            ];

            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.addEventListener('shown.bs.modal',  () => modalOpened(`#${modalId}`));
                    modal.addEventListener('hidden.bs.modal', () => modalClosed(`#${modalId}`));
                }
            });
        });

        // 탭 비활성화되면 모두 정지 / 복귀 시 현재 활성 소스로 재가동
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                PollManager.stop('update');
                PollManager.stop('tdd');
            } else {
                reconcile(); // active 집합 기준으로 재기동
            }
        });

        let autoCloseTimeout;
        let timerInterval;
        let usimTimerInterval;
        let userStarted = false;
        let userModified = false;
        let savedVendor = null;
        let gNB_VendorElement;
        let timer = 10;
        let timeLeft = 300; // 초기 USIM 타이머 값 (초)
        let userClicked = false;

        // 전역 변수로 현재 알람 상태 저장 (초기값 설정)
        let currentDuAlarmStatus = 0; // 0: 정상 (초록색), 1: 알람 (빨간색) - DU 기본값을 0 (초록색)로 설정
        

        // Send_Packet 데이터 정의 (전역 변수로 선언)
        const sendPacketData = {
            'Rcv_Main_Sys': 0x30, // 1 byte
            'Rcv_Sub_Sys': 0x00,  // 1 byte
            'Rcv_Object': 0x10,   // 1 byte
            'Trans_Main_Sys': 0x40, // 1 byte
            'Trans_Sub_Sys': 0x00,  // 1 byte
            'Trans_Object': 0x10,   // 1 byte
            'CMD': 0x00, // 1 byte
            'EQUIP_TYPE': 0x00, // 1 byte
            'RESERVED': 0x0000, // 2 bytes (Uint16 equivalent for 2 bytes)
            'SubData_Size': 0x0000, // 2 bytes (unsigned short 0)
            // Control
            'InitCheckNum': Array(4).fill(0x00), // 4 bytes
            'ConMuFlag': Array(24).fill(0x00), // 24 bytes
            'ConSysTime': Array(7).fill(0x00), // 7 bytes
            'RptMakerCode': 0x00, // 1 byte
            'SysTemperHighLvl': 0x00, // 1 byte
            'SysTemperLowLvl': 0x00, // 1 byte
            'SubInitCheckNum': 0x00, // 1 byte
            'DebugMode': 0x00, // 1 byte
            'SuEnableInfo': Array(12).fill(0x00), // 12 bytes
            'MaskMuAlarm': Array(12).fill(0x00), // 12 bytes
            'MaskSuLinkFail': Array(12).fill(0x00), // 12 bytes
            'MaskSuSumAlarm': Array(12).fill(0x00), // 12 bytes
            'MaskSuRptAlarm': Array(12).fill(0x00), // 12 bytes
            'ConEmsModemReset': 0x00, // 1 byte
            'DownloadPath_GuiOrEms': 0x00, // 1 byte
            'PollingTime': 0x0000, // 2 bytes
            'ApiInitMode': 0x00, // 1 byte
            'AttTestMode': 0x00, // 1 byte
            'SuId': 0x00, // 1 byte
            'DL_UL_TEST': 0x00, // 1 byte
            'LocalInfo': Array(60).fill(0x00), // 60 bytes
            'SuOpticalEnStatus': 0x00, // 1 byte
            'PreStaAlarm': Array(12).fill(0x00), // 12 bytes
            'Mu_Su_Buadrate': 0x00, // 1 byte
            'ModemOnOff': 0x00, // 1 byte
            'RsrpOffset': 0x00, // 1 byte
            // RF 제어
            'ALC_DL0_SISO_Mode': 0x00, // 1 byte
            'ALC_DL1_MIMO_Mode': 0x00, // 1 byte
            'ALC_UL0_SISO_Mode': 0x00, // 1 byte
            'ALC_UL1_MIMO_Mode': 0x00, // 1 byte
            'ALC_DL0_SISO_Level': 0x0000, // 2 bytes
            'ALC_DL1_MIMO_Level': 0x0000, // 2 bytes
            'ALC_UL0_SISO_Level': 0x0000, // 2 bytes
            'ALC_UL1_MIMO_Level': 0x0000, // 2 bytes
            'SISO_RF_DET_DL0_OUT_High': 0x0000, // 2 bytes
            'SISO_RF_DET_UL0_OUT_High': 0x0000, // 2 bytes
            'MIMO_RF_DET_DL1_OUT_High': 0x0000, // 2 bytes
            'MIMO_RF_DET_UL1_OUT_High': 0x0000, // 2 bytes
            'LD1_DET_DL0_SISO_Low': 0x0000, // 2 bytes
            'LD2_DET_DL1_MIMO_Low': 0x0000, // 2 bytes
            'PD1_DET_UL0_SISO_Low': 0x0000, // 2 bytes
            'PD2_DET_UL1_MIMO_Low': 0x0000, // 2 bytes
            'LD3_DET_DL0_SISO_Low': 0x0000, // 2 bytes
            'LD4_DET_DL1_MIMO_Low': 0x0000, // 2 bytes
            'PD3_DET_UL0_SISO_Low': 0x0000, // 2 bytes
            'PD4_DET_UL1_MIMO_Low': 0x0000, // 2 bytes
            'LD1_DET_DL0_SISO_Offset': 0x0000, // 2 bytes
            'LD2_DET_DL1_MIMO_Offset': 0x0000, // 2 bytes
            'PD1_DET_UL0_SISO_Offset': 0x0000, // 2 bytes
            'PD2_DET_UL1_MIMO_Offset': 0x0000, // 2 bytes
            'LD3_DET_DL0_SISO_Offset': 0x0000, // 2 bytes
            'LD4_DET_DL1_MIMO_Offset': 0x0000, // 2 bytes
            'PD3_DET_UL0_SISO_Offset': 0x0000, // 2 bytes
            'PD4_DET_UL1_MIMO_Offset': 0x0000, // 2 bytes
            'DU_DlManualAtten_SISO': 0x00, // 1 byte
            'DU_DlSubAtten_SISO': 0x00, // 1 byte
            'DU_DlManualAtten_MIMO': 0x00, // 1 byte
            'DU_DlSubAtten_MIMO': 0x00, // 1 byte
            'DU_UlManualAtten_SISO': 0x00, // 1 byte
            'DU_UlSubAtten_SISO': 0x00, // 1 byte
            'DU_UlIsoAtten_SISO': 0x00, // 1 byte
            'DU_UlManualAtten_MIMO': 0x00, // 1 byte
            'DU_UlSubAtten_MIMO': 0x00, // 1 byte
            'DU_UlIsoAtten_MIMO': 0x00, // 1 byte
            'SU_DlManualAtten_SISO': 0x00, // 1 byte
            'SU_DlSubAtten_SISO': 0x00, // 1 byte
            'SU_DlManualAtten_MIMO': 0x00, // 1 byte
            'SU_DlSubAtten_MIMO': 0x00, // 1 byte
            'SU_UlManualAtten_SISO': 0x00, // 1 byte
            'SU_UlSubAtten_SISO': 0x00, // 1 byte
            'SU_UlManualAtten_MIMO': 0x00, // 1 byte
            'SU_UlSubAtten_MIMO': 0x00, // 1 byte
            'LicPassword': 0x0000, // 2 bytes
            'DL_OutputOffset_SISO': 0x0000, // 2 bytes
            'DL_OutputOffset_MIMO': 0x0000, // 2 bytes
            'UL_InputOffset_SISO': 0x0000, // 2 bytes
            'UL_InputOffset_MIMO': 0x0000, // 2 bytes
            'SU_UlCasSisoAtten_SISO': 0x00, // 1 byte
            'SU_UlCasSisoAtten_MIMO': 0x00, // 1 byte
            'SdOnOffSiso': 0x00, // 1 byte
            'SdOnOffMimo': 0x00, // 1 byte
            'DuFixBeam': 0x00, // 1 byte
            'Reserved4_Local': Array(7).fill(0x00), // 7 bytes
            'Dl_Siso_Att_Test': 0x0000, // 2 bytes
            'Dl_Mimo_Att_Test': 0x0000, // 2 bytes
            'Ul_Siso_Att_Test': 0x0000, // 2 bytes
            'Ul_Mimo_Att_Test': 0x0000, // 2 bytes
            'Reserved10p1': Array(32).fill(0x00), // 32 bytes
            // MVBX 제어
            'Mvbx_BeamSet': 0x00, // 1 byte
            'InstallUseMode': 0x00, // 1 byte
            'Reserved14': 0x0000, // 2 bytes
            'Mvbx_FpagImageSize': 0x00000000, // 4 bytes
            'Mvbx_FpagImageStartAddressOffset': 0x00000000, // 4 bytes
            'Reserved15': Array(16).fill(0x00), // 16 bytes
            'FpgaWriteAddress': 0x0000, // 2 bytes
            'FpgaWriteData': 0x0000, // 2 bytes
            'FpgaReadAddress': 0x0000, // 2 bytes
            'FpgaReadData': 0x0000, // 2 bytes
            'Reserved31': Array(12).fill(0x00), // 12 bytes
            'Mvbx_TddSignalMode': 0x00, // 1 byte
            'Mvbx_RsAgcThreshold': 0x00, // 1 byte
            'Mvbx_RsAgcMode': 0x00, // 1 byte
            'Reserved32': 0x00, // 1 byte
            'Mvbx_Mv2853TxGainSiso': 0x00, // 1 byte
            'Mvbx_Mv2853RxGainSiso': 0x00, // 1 byte
            'Mvbx_Mv2850TxGainSiso': 0x00, // 1 byte
            'Mvbx_Mv2850RxGainSiso': 0x00, // 1 byte
            'Mvbx_Mv2853TxGainMimo': 0x00, // 1 byte
            'Mvbx_Mv2853RxGainMimo': 0x00, // 1 byte
            'Mvbx_Mv2850TxGainMimo': 0x00, // 1 byte
            'Mvbx_Mv2850RxGainMimo': 0x00, // 1 byte
            'Mvbx_TxGainSetSiso': 0x00, // 1 byte
            'Mvbx_RxGainSetSiso': 0x00, // 1 byte
            'Mvbx_TxGainSetMiso': 0x00, // 1 byte
            'Mvbx_RxGainSetMiso': 0x00, // 1 byte
            'beam_info_pss_type': 0x00000000, // 4 bytes
            'beam_info_adc_sel': 0x00000000, // 4 bytes
            'beam_info_spg': 0x00000000, // 4 bytes
            'beam_info_ssbIdx': 0x00000000, // 4 bytes
            'beam_info_beamID': 0x0000, // 2 bytes
            'Reserved34': 0x0000, // 2 bytes
            'beam_info_energy': 0x00000000, // 4 bytes
            'beam_info_rsrp': 0x00000000, // 4 bytes
            'beam_info_snr': 0x00000000, // 4 bytes
            'PllSet': 0x00000000, // 4 bytes
            'IsoMeasSet': 0x00, // 1 byte
            'SuGsOnOff': 0x00, // 1 byte
            'SuIsoAttSet': 0x00, // 1 byte
            'GumStick_OnOff': 0x00, // 1 byte
            'BeamScan_OnOff': 0x00, // 1 byte
            'IsoDetectMode': 0x00, // 1 byte
            'ApiLogLevel': 0x00, // 1 byte
            'ApiAdcSel': 0x00, // 1 byte
            'ApiSyncPathGain': 0x00, // 1 byte
            'ApiDuTimeAdvance': 0x00, // 1 byte
            'ApiSuTimeAdvance': 0x00, // 1 byte
            'TemperCompensationMode': 0x00, // 1 byte
            'ApiVenderFreq': 0x00000000, // 4 bytes
            'ApiGsOutputPowerOffsetSiso': 0x0000, // 2 bytes
            'BeamAntSelect': 0x00, // 1 byte
            'DecodeRecoveryFuncOnOff': 0x00, // 1 byte
            'gNB_ScanOnOff': 0x00, // 1 byte
            'Reserved33': 0x00, // 1 byte
            'ApiGsOutputPowerOffsetMimo': 0x0000, // 2 bytes
            'gNB_Vendor': 0x00, // 1 byte
            'Gs_Gain_Siso': 0x00, // 1 byte
            'Gs_Gain_Mimo': 0x00, // 1 byte
            'ApiInitRetryMode': 0x00, // 1 byte
            'Orientation': 0x0000, // 2 bytes
            'Tilt': 0x0000, // 2 bytes
            'GS_AttenOffset_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_UL_Mimo': 0x00, // 1 byte
            'ConSerialNum': Array(16).fill(0x00), // 16 bytes
            'AomTemperConperMode': 0x00, // 1 byte
            'GS_AttenOffset_30by15_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_30by30_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by15_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by30_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by60_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_30by15_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_30by30_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by15_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by30_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by60_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_30by15_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_30by30_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by15_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by30_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by60_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_30by15_UL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_30by30_UL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by15_UL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by30_UL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by60_UL_Mimo': 0x00, // 1 byte
            'Reserved41': Array(24).fill(0x00), // 24 bytes
            'LowRsrpStillTime': 0x00, // 1 byte
            'LowRsrpLevel': 0x0000, // 2 bytes
            'SU_DlCasSisoAtten_SISO': 0x00, // 1 byte
            'SU_DlCasSisoAtten_MIMO': 0x00, // 1 byte
            'SU_DlCasSisoAttenTest_SISO': 0x00, // 1 byte
            'SU_DlCasSisoAttenTest_MIMO': 0x00, // 1 byte
            'SU_UlCasSisoAttenTest_SISO': 0x00, // 1 byte
            'SU_UlCasSisoAttenTest_MIMO': 0x00, // 1 byte
            'Reserved41p1': Array(3).fill(0x00), // 3 bytes
            'PciResetOnOff': 0x00, // 1 byte
            'PciNo': 0x0000, // 2 bytes
            'PciTime': 0x00, // 1 byte
            'Reserved42': Array(7).fill(0x00), // 7 bytes
        };

        function updateStatusBadge1(elementId, value) {
            const el = document.getElementById(elementId);

            if (value === 0) {
                el.innerText = "FPGA FAIL";
                el.className = "badge bg-danger";
            } else if (value === 1) {
                el.innerText = "FPGA BOOTING";
                el.className = "badge bg-warning text-dark";
            } else if (value === 2) {
                el.innerHTML = "FPGA OK";
                el.className = "badge bg-info text-dark";
            } else {
                el.innerText = "N/A";
                el.className = "badge bg-dark";
            }
        }


        function updateStatusBadge2(elementId, value) {
            const el = document.getElementById(elementId);

            if (value === 0) {
                el.innerText = "INIT WAITING";
                el.className = "badge bg-secondary";
            } else if (value === 1) {
                el.innerText = "INITIALIZING";
                el.className = "badge bg-warning text-dark";
            } else if (value === 2) {
                el.innerText = "INIT OK";
                el.className = "badge bg-info text-dark";
            } else if (value === 3) {
                el.innerText = "BEAM SCANNING";
                el.className = "badge bg-primary";
            } else if (value === 4) {
                el.innerText = "INIT FAIL";
                el.className = "badge bg-danger";
            } else {
                el.innerText = "N/A";
                el.className = "badge bg-dark";
            }
        }


        function updateStatusBadge3(elementId, value) {
            const el = document.getElementById(elementId);

            if (value === 0) {
                el.innerText = "SCAN READY";
                el.className = "badge bg-secondary";
            } else if (value === 1) {
                el.innerText = "SCAN OK";
                el.className = "badge bg-info text-dark";
            } else if (value === 2) {
                el.innerText = "SCAN FAIL";
                el.className = "badge bg-danger";
            } else if (value === 4) {
                el.innerText = "SCAN OFF";
                el.className = "badge bg-dark";
            } else {
                el.innerText = "N/A";
                el.className = "badge bg-warning text-dark";
            }
        }

        // 비트 값 추출 함수 (중복 제거, 최종 버전)
        function getBitFromByteArray(byteArray, bitIndex) {
            const byteIndex = Math.floor(bitIndex / 8);
            const bitOffset = bitIndex % 8;
            return (byteArray[byteIndex] >> bitOffset) & 1;
        }

        // 비트 값에 따라 .status-circle 색상만 바꾸기
        function updateAlarmDotByBit(byteArray, bitIndex, elementId) {
            const el = document.querySelector(`#${elementId} .status-circle`);
            if (!el) return;

            const bit = getBitFromByteArray(byteArray, bitIndex);
            if (bit === 0) {
                el.style.backgroundColor = 'green'; // 정상
            } else if (bit === 1) {
                el.style.backgroundColor = 'red'; // 알람
            } else {
                el.style.backgroundColor = 'gray'; // 기본값
            }
        }

        // 서버에서 계산된 알람 상태로 .status-circle 색상 변경
        function updateAlarmDot(elementId, isActive) {
            console.log(`updateAlarmDot 호출: elementId=${elementId}, isActive=${isActive}`);
            const el = document.querySelector(`#${elementId} .status-circle`);
            console.log(`요소 찾기 결과:`, el);
            if (!el) {
                console.log(`요소를 찾을 수 없음: #${elementId} .status-circle`);
                return;
            }

            if (isActive) {
                el.style.backgroundColor = 'red'; // 알람
                console.log(`색상 변경: 빨간색 (알람)`);
            } else {
                el.style.backgroundColor = 'green'; // 정상
                console.log(`색상 변경: 초록색 (정상)`);
            }
        }

        // =======================================================
        // 1. 데이터 및 전역 변수 설정
        // =======================================================
        const beamData = []; // 생성된 beam path/text 정보 저장
        const centerX = 200;
        const centerY = 200;
        const ringWidth = 36;

        // ✅ 링별 빔 개수: 중앙(1개)을 제외하고 정의합니다.
        // 중앙 원은 별도로 그려지므로 첫 번째 링부터 정의합니다.
        const ringSegments = [6, 12, 17, 22]; // 예: [6, 12, 17, 22] -> 총 4개 링

        // =======================================================
        // 2. BeamBook 그리기 (수정된 함수)
        // =======================================================
        function drawBeamBook() {
            const svg = document.getElementById("beamBook");
            svg.innerHTML = "";
            beamData.length = 0;

            // --- 중앙 원(0번) 그리기 (이전과 동일) ---
            const centerCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            centerCircle.setAttribute("cx", centerX);
            centerCircle.setAttribute("cy", centerY);
            centerCircle.setAttribute("r", ringWidth);
            centerCircle.setAttribute("fill", "dimgray"); // 기본 회색으로 변경
            centerCircle.style.fill = "dimgray"; // CSS 스타일로도 설정
            centerCircle.setAttribute("stroke", "#aaa");
            centerCircle.setAttribute("stroke-width", 1);
            svg.appendChild(centerCircle);

            const centerText = document.createElementNS("http://www.w3.org/2000/svg", "text");
            centerText.setAttribute("x", centerX);
            centerText.setAttribute("y", centerY);
            centerText.setAttribute("text-anchor", "middle");
            centerText.setAttribute("alignment-baseline", "middle");
            centerText.setAttribute("font-size", "12");
            centerText.setAttribute("fill", "white");
            centerText.setAttribute("font-weight", "bold");
            centerText.textContent = "0";
            svg.appendChild(centerText);

            beamData.push({ number: 0, pathEl: centerCircle, textEl: centerText });

            // --- 링 그리기 ---
            let startNum = 1;
            for (let ringIndex = 0; ringIndex < ringSegments.length; ringIndex++) {
                const segments = ringSegments[ringIndex];
                const innerRadius = (ringIndex + 1) * ringWidth;
                const outerRadius = innerRadius + ringWidth;

                for (let i = 0; i < segments; i++) {
                    const anglePerSegment = (2 * Math.PI) / segments;

                    // ✅ [수정된 부분] i 앞에 -를 붙여 방향을 반대로 바꿉니다.
                    const midAngle = -(i * anglePerSegment);
                    
                    const startAngle = midAngle - (anglePerSegment / 2);
                    const endAngle = midAngle + (anglePerSegment / 2);
                    
                    const beamNumber = startNum + i;

                    // Path, Text 생성 부분은 이전과 동일합니다.
                    const path = describeArc(centerX, centerY, innerRadius, outerRadius, startAngle, endAngle);
                    const pathEl = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    pathEl.setAttribute("d", path);
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.setAttribute("stroke", "#aaa");
                    pathEl.setAttribute("stroke-width", 1);
                    svg.appendChild(pathEl);

                    const textRadius = (innerRadius + outerRadius) / 2;
                    const textX = centerX + textRadius * Math.cos(midAngle);
                    const textY = centerY + textRadius * Math.sin(midAngle);
                    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    textEl.setAttribute("x", textX);
                    textEl.setAttribute("y", textY);
                    textEl.setAttribute("text-anchor", "middle");
                    textEl.setAttribute("alignment-baseline", "middle");
                    textEl.setAttribute("font-size", "10");
                    textEl.setAttribute("fill", "white");
                    textEl.textContent = beamNumber;
                    svg.appendChild(textEl);
                    
                    beamData.push({ number: beamNumber, pathEl: pathEl, textEl: textEl });
                }
                startNum += segments;
            }

            // =======================================================
            // ✅ 각도 텍스트 그리기 (사용자 지정 목록 반영)
            // =======================================================

            // ✅ 사용자가 제공한 22개의 각도 레이블 목록 (중복 '164'' 하나 제외)
            const angleLabels = [
                "0'", "16'", "33'", "49'", "65'", "82'", "98'", "115'", "131'", 
                "147'", "164'", "180'", "196'", "213'", "229'", "245'", "262'", 
                "278'", "295'", "311'", "327'", "344'"
            ];

            const lastRingIndex = ringSegments.length - 1;
            const lastRingSegments = ringSegments[lastRingIndex];
            const angleLabelRadius = (ringSegments.length + 1) * ringWidth + 10;

            // 레이블 배열의 개수와 세그먼트 개수가 일치하는지 확인
            if (angleLabels.length !== lastRingSegments) {
                console.error("지정된 각도 레이블의 개수와 마지막 링의 세그먼트 개수가 일치하지 않습니다.");
                return; // 개수가 다르면 충돌 방지를 위해 그리지 않음
            }

            const anglePerSegment = (2 * Math.PI) / lastRingSegments;

            for (let i = 0; i < lastRingSegments; i++) {
                const midAngle = -(i * anglePerSegment); // 위치 계산을 위한 각도는 그대로 사용

                // 텍스트 위치 계산
                const textX = centerX + angleLabelRadius * Math.cos(midAngle);
                const textY = centerY + angleLabelRadius * Math.sin(midAngle);

                // SVG 텍스트 요소 생성
                const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                textEl.setAttribute("x", textX);
                textEl.setAttribute("y", textY);
                textEl.setAttribute("text-anchor", "middle");
                textEl.setAttribute("alignment-baseline", "middle");
                textEl.setAttribute("font-size", "10");
                textEl.setAttribute("font-weight", "bold");
                textEl.setAttribute("fill", "#1374F2");
                
                // ✅ [수정된 부분] 계산된 각도 대신, 배열에서 텍스트를 가져와 설정
                textEl.textContent = angleLabels[i];
                
                svg.appendChild(textEl);
            }
        }

        // =======================================================
        // 3. Path 계산 (수정된 함수)
        // =======================================================
        /**
         * SVG 경로 데이터(d 속성)를 생성하여 부채꼴 조각을 그립니다. (수정된 버전)
         * @param {number} cx - 중심 X 좌표
         * @param {number} cy - 중심 Y 좌표
         * @param {number} r1 - 내부 반지름
         * @param {number} r2 - 외부 반지름
         * @param {number} startAngle - 시작 각도 (라디안)
         * @param {number} endAngle - 끝 각도 (라디안)
         * @returns {string} SVG path의 d 속성에 들어갈 경로 데이터
         */
        function describeArc(cx, cy, r1, r2, startAngle, endAngle) {
            // 1. 부채꼴의 네 꼭짓점 계산
            const outerStart = { x: cx + r2 * Math.cos(startAngle), y: cy + r2 * Math.sin(startAngle) };
            const outerEnd   = { x: cx + r2 * Math.cos(endAngle),   y: cy + r2 * Math.sin(endAngle) };
            const innerStart = { x: cx + r1 * Math.cos(startAngle), y: cy + r1 * Math.sin(startAngle) };
            const innerEnd   = { x: cx + r1 * Math.cos(endAngle),   y: cy + r1 * Math.sin(endAngle) };

            // 2. 호가 180도보다 큰지 여부 판단
            const largeArcFlag = Math.abs(endAngle - startAngle) >= Math.PI ? '1' : '0';

            // 3. 올바른 순서로 경로 데이터 생성
            // (바깥 호 -> 직선 -> 안쪽 호 -> 닫기)
            const d = [
                "M", outerStart.x, outerStart.y, // 시작: 바깥쪽 호의 시작점
                "A", r2, r2, 0, largeArcFlag, 1, outerEnd.x, outerEnd.y, // 바깥쪽 호 그리기
                "L", innerEnd.x, innerEnd.y,     // 안쪽 호의 끝점으로 직선 연결
                "A", r1, r1, 0, largeArcFlag, 0, innerStart.x, innerStart.y, // 안쪽 호를 반대방향으로 그리기
                "Z" // 경로 닫기
            ].join(" ");

            return d;
        }

        // 외부에서 색상 업데이트
        function updateBeamColors({ yellow = [], blue = [] }) {
            for (const beam of beamData) {
                const { number, pathEl } = beam;
                if (yellow.includes(number)) {
                    pathEl.setAttribute("fill", "#F2C029");
                    pathEl.style.fill = "#F2C029"; // CSS 스타일로도 설정
                } else if (blue.includes(number)) {
                    pathEl.setAttribute("fill", "#84D9A9");
                    pathEl.style.fill = "#84D9A9"; // CSS 스타일로도 설정
                } else {
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.style.fill = "dimgray"; // CSS 스타일로도 설정
                }
            }
        }

        // Beam Info 모달이 열릴 때 다이어그램 그리기
        document.addEventListener('DOMContentLoaded', function() {
            const beamInfoModal = document.getElementById('beamInfoModal');
            if (beamInfoModal) {
                beamInfoModal.addEventListener('shown.bs.modal', function() {
                    drawBeamBook();
                    // 초기 색상은 모두 dimgray로 설정됨 (하드코딩된 색상 업데이트 제거)
                });
            }
        });

        // =======================================================
        // SU1 Beam Book 관련 함수들 (DU와 동일한 구조)
        // =======================================================
        let su1BeamData = [];
        const su1CenterX = 200;
        const su1CenterY = 200;
        const su1RingWidth = 30;
        const su1RingSegments = [6, 12, 17, 22]; // 예: [6, 12, 17, 22] -> 총 4개 링

        // SU1 BeamBook 그리기 함수 (DU와 동일한 구조)
        function drawSu1BeamBook() {
            const svg = document.getElementById("su1BeamBook");
            svg.innerHTML = "";
            su1BeamData.length = 0;

            // --- 중앙 원(0번) 그리기 ---
            const centerCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            centerCircle.setAttribute("cx", su1CenterX);
            centerCircle.setAttribute("cy", su1CenterY);
            centerCircle.setAttribute("r", su1RingWidth);
            centerCircle.setAttribute("fill", "dimgray"); // 기본 회색으로 변경
            centerCircle.style.fill = "dimgray"; // CSS 스타일로도 설정
            centerCircle.setAttribute("stroke", "#aaa");
            centerCircle.setAttribute("stroke-width", 1);
            svg.appendChild(centerCircle);

            const centerText = document.createElementNS("http://www.w3.org/2000/svg", "text");
            centerText.setAttribute("x", su1CenterX);
            centerText.setAttribute("y", su1CenterY);
            centerText.setAttribute("text-anchor", "middle");
            centerText.setAttribute("alignment-baseline", "middle");
            centerText.setAttribute("font-size", "12");
            centerText.setAttribute("fill", "white");
            centerText.setAttribute("font-weight", "bold");
            centerText.textContent = "0";
            svg.appendChild(centerText);

            su1BeamData.push({ number: 0, pathEl: centerCircle, textEl: centerText });

            // --- 링 그리기 ---
            let startNum = 1;
            for (let ringIndex = 0; ringIndex < su1RingSegments.length; ringIndex++) {
                const segments = su1RingSegments[ringIndex];
                const innerRadius = (ringIndex + 1) * su1RingWidth;
                const outerRadius = innerRadius + su1RingWidth;

                for (let i = 0; i < segments; i++) {
                    const anglePerSegment = (2 * Math.PI) / segments;

                    // ✅ [수정된 부분] i 앞에 -를 붙여 방향을 반대로 바꿉니다.
                    const midAngle = -(i * anglePerSegment);
                    
                    const startAngle = midAngle - (anglePerSegment / 2);
                    const endAngle = midAngle + (anglePerSegment / 2);
                    
                    const beamNumber = startNum + i;

                    // Path, Text 생성 부분은 이전과 동일합니다.
                    const path = describeArc(su1CenterX, su1CenterY, innerRadius, outerRadius, startAngle, endAngle);
                    const pathEl = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    pathEl.setAttribute("d", path);
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.setAttribute("stroke", "#aaa");
                    pathEl.setAttribute("stroke-width", 1);
                    svg.appendChild(pathEl);

                    const textRadius = (innerRadius + outerRadius) / 2;
                    const textX = su1CenterX + textRadius * Math.cos(midAngle);
                    const textY = su1CenterY + textRadius * Math.sin(midAngle);
                    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    textEl.setAttribute("x", textX);
                    textEl.setAttribute("y", textY);
                    textEl.setAttribute("text-anchor", "middle");
                    textEl.setAttribute("alignment-baseline", "middle");
                    textEl.setAttribute("font-size", "10");
                    textEl.setAttribute("fill", "white");
                    textEl.textContent = beamNumber;
                    svg.appendChild(textEl);
                    
                    su1BeamData.push({ number: beamNumber, pathEl: pathEl, textEl: textEl });
                }
                startNum += segments;
            }

            // =======================================================
            // ✅ 각도 텍스트 그리기 (사용자 지정 목록 반영)
            // =======================================================

            // ✅ 사용자가 제공한 22개의 각도 레이블 목록 (중복 '164'' 하나 제외)
            const angleLabels = [
                "0'", "16'", "33'", "49'", "65'", "82'", "98'", "115'", "131'", 
                "147'", "164'", "180'", "196'", "213'", "229'", "245'", "262'", 
                "278'", "295'", "311'", "327'", "344'"
            ];

            const lastRingIndex = su1RingSegments.length - 1;
            const lastRingSegments = su1RingSegments[lastRingIndex];
            const angleLabelRadius = (su1RingSegments.length + 1) * su1RingWidth + 10;

            // 레이블 배열의 개수와 세그먼트 개수가 일치하는지 확인
            if (angleLabels.length !== lastRingSegments) {
                console.error("지정된 각도 레이블의 개수와 마지막 링의 세그먼트 개수가 일치하지 않습니다.");
                return; // 개수가 다르면 충돌 방지를 위해 그리지 않음
            }

            const anglePerSegment = (2 * Math.PI) / lastRingSegments;

            for (let i = 0; i < lastRingSegments; i++) {
                const midAngle = -(i * anglePerSegment); // 위치 계산을 위한 각도는 그대로 사용

                // 텍스트 위치 계산
                const textX = su1CenterX + angleLabelRadius * Math.cos(midAngle);
                const textY = su1CenterY + angleLabelRadius * Math.sin(midAngle);

                // 각도 레이블 텍스트 생성
                const angleText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                angleText.setAttribute("x", textX);
                angleText.setAttribute("y", textY);
                angleText.setAttribute("text-anchor", "middle");
                angleText.setAttribute("alignment-baseline", "middle");
                angleText.setAttribute("font-size", "8");
                angleText.setAttribute("fill", "#0066cc");
                angleText.setAttribute("font-weight", "bold");
                angleText.textContent = angleLabels[i];
                svg.appendChild(angleText);
            }
        }

        // SU1 외부에서 색상 업데이트 (DU와 동일한 구조)
        function updateSu1BeamColors({ yellow = [], blue = [] }) {
            for (const beam of su1BeamData) {
                const { number, pathEl } = beam;
                if (yellow.includes(number)) {
                    pathEl.setAttribute("fill", "#F2C029");
                    pathEl.style.fill = "#F2C029"; // CSS 스타일로도 설정
                } else if (blue.includes(number)) {
                    pathEl.setAttribute("fill", "#84D9A9");
                    pathEl.style.fill = "#84D9A9"; // CSS 스타일로도 설정
                } else {
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.style.fill = "dimgray"; // CSS 스타일로도 설정
                }
            }
        }

        // SU1 Beam Info 모달이 열릴 때 다이어그램 그리기
        document.addEventListener('DOMContentLoaded', function() {
            const su1BeamInfoModal = document.getElementById('su1BeamInfoModal');
            if (su1BeamInfoModal) {
                su1BeamInfoModal.addEventListener('shown.bs.modal', function() {
                    drawSu1BeamBook();
                    // 초기 색상은 모두 dimgray로 설정됨 (하드코딩된 색상 업데이트 제거)
                });
            }
        });

        // =======================================================
        // SU2 Beam Book 관련 함수들 (DU와 동일한 구조)
        // =======================================================
        let su2BeamData = [];
        const su2CenterX = 200;
        const su2CenterY = 200;
        const su2RingWidth = 30;
        const su2RingSegments = [6, 12, 17, 22]; // 예: [6, 12, 17, 22] -> 총 4개 링

        // SU2 BeamBook 그리기 함수 (DU와 동일한 구조)
        function drawSu2BeamBook() {
            const svg = document.getElementById("su2BeamBook");
            svg.innerHTML = "";
            su2BeamData.length = 0;

            // --- 중앙 원(0번) 그리기 ---
            const centerCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            centerCircle.setAttribute("cx", su2CenterX);
            centerCircle.setAttribute("cy", su2CenterY);
            centerCircle.setAttribute("r", su2RingWidth);
            centerCircle.setAttribute("fill", "dimgray"); // 기본 회색으로 변경
            centerCircle.style.fill = "dimgray"; // CSS 스타일로도 설정
            centerCircle.setAttribute("stroke", "#aaa");
            centerCircle.setAttribute("stroke-width", 1);
            svg.appendChild(centerCircle);

            const centerText = document.createElementNS("http://www.w3.org/2000/svg", "text");
            centerText.setAttribute("x", su2CenterX);
            centerText.setAttribute("y", su2CenterY);
            centerText.setAttribute("text-anchor", "middle");
            centerText.setAttribute("alignment-baseline", "middle");
            centerText.setAttribute("font-size", "12");
            centerText.setAttribute("fill", "white");
            centerText.setAttribute("font-weight", "bold");
            centerText.textContent = "0";
            svg.appendChild(centerText);

            su2BeamData.push({ number: 0, pathEl: centerCircle, textEl: centerText });

            // --- 링 그리기 ---
            let startNum = 1;
            for (let ringIndex = 0; ringIndex < su2RingSegments.length; ringIndex++) {
                const segments = su2RingSegments[ringIndex];
                const innerRadius = (ringIndex + 1) * su2RingWidth;
                const outerRadius = innerRadius + su2RingWidth;

                for (let i = 0; i < segments; i++) {
                    const anglePerSegment = (2 * Math.PI) / segments;

                    // ✅ [수정된 부분] i 앞에 -를 붙여 방향을 반대로 바꿉니다.
                    const midAngle = -(i * anglePerSegment);
                    
                    const startAngle = midAngle - (anglePerSegment / 2);
                    const endAngle = midAngle + (anglePerSegment / 2);
                    
                    const beamNumber = startNum + i;

                    // Path, Text 생성 부분은 이전과 동일합니다.
                    const path = describeArc(su2CenterX, su2CenterY, innerRadius, outerRadius, startAngle, endAngle);
                    const pathEl = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    pathEl.setAttribute("d", path);
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.setAttribute("stroke", "#aaa");
                    pathEl.setAttribute("stroke-width", 1);
                    svg.appendChild(pathEl);

                    const textRadius = (innerRadius + outerRadius) / 2;
                    const textX = su2CenterX + textRadius * Math.cos(midAngle);
                    const textY = su2CenterY + textRadius * Math.sin(midAngle);
                    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    textEl.setAttribute("x", textX);
                    textEl.setAttribute("y", textY);
                    textEl.setAttribute("text-anchor", "middle");
                    textEl.setAttribute("alignment-baseline", "middle");
                    textEl.setAttribute("font-size", "10");
                    textEl.setAttribute("fill", "white");
                    textEl.textContent = beamNumber;
                    svg.appendChild(textEl);
                    
                    su2BeamData.push({ number: beamNumber, pathEl: pathEl, textEl: textEl });
                }
                startNum += segments;
            }

            // =======================================================
            // ✅ 각도 텍스트 그리기 (사용자 지정 목록 반영)
            // =======================================================

            // ✅ 사용자가 제공한 22개의 각도 레이블 목록 (중복 '164'' 하나 제외)
            const angleLabels = [
                "0'", "16'", "33'", "49'", "65'", "82'", "98'", "115'", "131'", 
                "147'", "164'", "180'", "196'", "213'", "229'", "245'", "262'", 
                "278'", "295'", "311'", "327'", "344'"
            ];

            const lastRingIndex = su2RingSegments.length - 1;
            const lastRingSegments = su2RingSegments[lastRingIndex];
            const angleLabelRadius = (su2RingSegments.length + 1) * su2RingWidth + 10;

            // 레이블 배열의 개수와 세그먼트 개수가 일치하는지 확인
            if (angleLabels.length !== lastRingSegments) {
                console.error("지정된 각도 레이블의 개수와 마지막 링의 세그먼트 개수가 일치하지 않습니다.");
                return; // 개수가 다르면 충돌 방지를 위해 그리지 않음
            }

            const anglePerSegment = (2 * Math.PI) / lastRingSegments;

            for (let i = 0; i < lastRingSegments; i++) {
                const midAngle = -(i * anglePerSegment); // 위치 계산을 위한 각도는 그대로 사용

                // 텍스트 위치 계산
                const textX = su2CenterX + angleLabelRadius * Math.cos(midAngle);
                const textY = su2CenterY + angleLabelRadius * Math.sin(midAngle);

                // 각도 레이블 텍스트 생성
                const angleText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                angleText.setAttribute("x", textX);
                angleText.setAttribute("y", textY);
                angleText.setAttribute("text-anchor", "middle");
                angleText.setAttribute("alignment-baseline", "middle");
                angleText.setAttribute("font-size", "8");
                angleText.setAttribute("fill", "#0066cc");
                angleText.setAttribute("font-weight", "bold");
                angleText.textContent = angleLabels[i];
                svg.appendChild(angleText);
            }
        }

        // SU2 외부에서 색상 업데이트 (DU와 동일한 구조)
        function updateSu2BeamColors({ yellow = [], blue = [] }) {
            for (const beam of su2BeamData) {
                const { number, pathEl } = beam;
                if (yellow.includes(number)) {
                    pathEl.setAttribute("fill", "#F2C029");
                    pathEl.style.fill = "#F2C029"; // CSS 스타일로도 설정
                } else if (blue.includes(number)) {
                    pathEl.setAttribute("fill", "#84D9A9");
                    pathEl.style.fill = "#84D9A9"; // CSS 스타일로도 설정
                } else {
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.style.fill = "dimgray"; // CSS 스타일로도 설정
                }
            }
        }

        // SU2 Beam Info 모달이 열릴 때 다이어그램 그리기
        document.addEventListener('DOMContentLoaded', function() {
            const su2BeamInfoModal = document.getElementById('su2BeamInfoModal');
            if (su2BeamInfoModal) {
                su2BeamInfoModal.addEventListener('shown.bs.modal', function() {
                    drawSu2BeamBook();
                    // 초기 색상은 모두 dimgray로 설정됨 (하드코딩된 색상 업데이트 제거)
                });
            }
        });

        // =======================================================
        // SU3 Beam Book 관련 함수들 (DU와 동일한 구조)
        // =======================================================
        let su3BeamData = [];
        const su3CenterX = 200;
        const su3CenterY = 200;
        const su3RingWidth = 30;
        const su3RingSegments = [6, 12, 17, 22]; // 예: [6, 12, 17, 22] -> 총 4개 링

        // SU3 BeamBook 그리기 함수 (DU와 동일한 구조)
        function drawSu3BeamBook() {
            const svg = document.getElementById("su3BeamBook");
            svg.innerHTML = "";
            su3BeamData.length = 0;

            // --- 중앙 원(0번) 그리기 ---
            const centerCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            centerCircle.setAttribute("cx", su3CenterX);
            centerCircle.setAttribute("cy", su3CenterY);
            centerCircle.setAttribute("r", su3RingWidth);
            centerCircle.setAttribute("fill", "dimgray"); // 기본 회색으로 변경
            centerCircle.style.fill = "dimgray"; // CSS 스타일로도 설정
            centerCircle.setAttribute("stroke", "#aaa");
            centerCircle.setAttribute("stroke-width", 1);
            svg.appendChild(centerCircle);

            const centerText = document.createElementNS("http://www.w3.org/2000/svg", "text");
            centerText.setAttribute("x", su3CenterX);
            centerText.setAttribute("y", su3CenterY);
            centerText.setAttribute("text-anchor", "middle");
            centerText.setAttribute("alignment-baseline", "middle");
            centerText.setAttribute("font-size", "12");
            centerText.setAttribute("fill", "white");
            centerText.setAttribute("font-weight", "bold");
            centerText.textContent = "0";
            svg.appendChild(centerText);

            su3BeamData.push({ number: 0, pathEl: centerCircle, textEl: centerText });

            // --- 링 그리기 ---
            let startNum = 1;
            for (let ringIndex = 0; ringIndex < su3RingSegments.length; ringIndex++) {
                const segments = su3RingSegments[ringIndex];
                const innerRadius = (ringIndex + 1) * su3RingWidth;
                const outerRadius = innerRadius + su3RingWidth;

                for (let i = 0; i < segments; i++) {
                    const anglePerSegment = (2 * Math.PI) / segments;

                    // ✅ [수정된 부분] i 앞에 -를 붙여 방향을 반대로 바꿉니다.
                    const midAngle = -(i * anglePerSegment);
                    
                    const startAngle = midAngle - (anglePerSegment / 2);
                    const endAngle = midAngle + (anglePerSegment / 2);
                    
                    const beamNumber = startNum + i;

                    // Path, Text 생성 부분은 이전과 동일합니다.
                    const path = describeArc(su3CenterX, su3CenterY, innerRadius, outerRadius, startAngle, endAngle);
                    const pathEl = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    pathEl.setAttribute("d", path);
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.setAttribute("stroke", "#aaa");
                    pathEl.setAttribute("stroke-width", 1);
                    svg.appendChild(pathEl);

                    const textRadius = (innerRadius + outerRadius) / 2;
                    const textX = su3CenterX + textRadius * Math.cos(midAngle);
                    const textY = su3CenterY + textRadius * Math.sin(midAngle);
                    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    textEl.setAttribute("x", textX);
                    textEl.setAttribute("y", textY);
                    textEl.setAttribute("text-anchor", "middle");
                    textEl.setAttribute("alignment-baseline", "middle");
                    textEl.setAttribute("font-size", "10");
                    textEl.setAttribute("fill", "white");
                    textEl.textContent = beamNumber;
                    svg.appendChild(textEl);
                    
                    su3BeamData.push({ number: beamNumber, pathEl: pathEl, textEl: textEl });
                }
                startNum += segments;
            }

            // =======================================================
            // ✅ 각도 텍스트 그리기 (사용자 지정 목록 반영)
            // =======================================================

            // ✅ 사용자가 제공한 22개의 각도 레이블 목록 (중복 '164'' 하나 제외)
            const angleLabels = [
                "0'", "16'", "33'", "49'", "65'", "82'", "98'", "115'", "131'", 
                "147'", "164'", "180'", "196'", "213'", "229'", "245'", "262'", 
                "278'", "295'", "311'", "327'", "344'"
            ];

            const lastRingIndex = su3RingSegments.length - 1;
            const lastRingSegments = su3RingSegments[lastRingIndex];
            const angleLabelRadius = (su3RingSegments.length + 1) * su3RingWidth + 10;

            // 레이블 배열의 개수와 세그먼트 개수가 일치하는지 확인
            if (angleLabels.length !== lastRingSegments) {
                console.error("지정된 각도 레이블의 개수와 마지막 링의 세그먼트 개수가 일치하지 않습니다.");
                return; // 개수가 다르면 충돌 방지를 위해 그리지 않음
            }

            const anglePerSegment = (2 * Math.PI) / lastRingSegments;

            for (let i = 0; i < lastRingSegments; i++) {
                const midAngle = -(i * anglePerSegment); // 위치 계산을 위한 각도는 그대로 사용

                // 텍스트 위치 계산
                const textX = su3CenterX + angleLabelRadius * Math.cos(midAngle);
                const textY = su3CenterY + angleLabelRadius * Math.sin(midAngle);

                // 각도 레이블 텍스트 생성
                const angleText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                angleText.setAttribute("x", textX);
                angleText.setAttribute("y", textY);
                angleText.setAttribute("text-anchor", "middle");
                angleText.setAttribute("alignment-baseline", "middle");
                angleText.setAttribute("font-size", "8");
                angleText.setAttribute("fill", "#0066cc");
                angleText.setAttribute("font-weight", "bold");
                angleText.textContent = angleLabels[i];
                svg.appendChild(angleText);
            }
        }

        // SU3 외부에서 색상 업데이트 (DU와 동일한 구조)
        function updateSu3BeamColors({ yellow = [], blue = [] }) {
            for (const beam of su3BeamData) {
                const { number, pathEl } = beam;
                if (yellow.includes(number)) {
                    pathEl.setAttribute("fill", "#F2C029");
                    pathEl.style.fill = "#F2C029"; // CSS 스타일로도 설정
                } else if (blue.includes(number)) {
                    pathEl.setAttribute("fill", "#84D9A9");
                    pathEl.style.fill = "#84D9A9"; // CSS 스타일로도 설정
                } else {
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.style.fill = "dimgray"; // CSS 스타일로도 설정
                }
            }
        }

        // SU3 Beam Info 모달이 열릴 때 다이어그램 그리기
        document.addEventListener('DOMContentLoaded', function() {
            const su3BeamInfoModal = document.getElementById('su3BeamInfoModal');
            if (su3BeamInfoModal) {
                su3BeamInfoModal.addEventListener('shown.bs.modal', function() {
                    drawSu3BeamBook();
                    // 초기 색상은 모두 dimgray로 설정됨 (하드코딩된 색상 업데이트 제거)
                });
            }
        });

        // =======================================================
        // SU4 Beam Book 관련 함수들 (DU와 동일한 구조)
        // =======================================================
        let su4BeamData = [];
        const su4CenterX = 200;
        const su4CenterY = 200;
        const su4RingWidth = 30;
        const su4RingSegments = [6, 12, 17, 22]; // 예: [6, 12, 17, 22] -> 총 4개 링

        // SU4 BeamBook 그리기 함수 (DU와 동일한 구조)
        function drawSu4BeamBook() {
            const svg = document.getElementById("su4BeamBook");
            svg.innerHTML = "";
            su4BeamData.length = 0;

            // --- 중앙 원(0번) 그리기 ---
            const centerCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            centerCircle.setAttribute("cx", su4CenterX);
            centerCircle.setAttribute("cy", su4CenterY);
            centerCircle.setAttribute("r", su4RingWidth);
            centerCircle.setAttribute("fill", "dimgray"); // 기본 회색으로 변경
            centerCircle.style.fill = "dimgray"; // CSS 스타일로도 설정
            centerCircle.setAttribute("stroke", "#aaa");
            centerCircle.setAttribute("stroke-width", 1);
            svg.appendChild(centerCircle);

            const centerText = document.createElementNS("http://www.w3.org/2000/svg", "text");
            centerText.setAttribute("x", su4CenterX);
            centerText.setAttribute("y", su4CenterY);
            centerText.setAttribute("text-anchor", "middle");
            centerText.setAttribute("alignment-baseline", "middle");
            centerText.setAttribute("font-size", "12");
            centerText.setAttribute("fill", "white");
            centerText.setAttribute("font-weight", "bold");
            centerText.textContent = "0";
            svg.appendChild(centerText);

            su4BeamData.push({ number: 0, pathEl: centerCircle, textEl: centerText });

            // --- 링 그리기 ---
            let startNum = 1;
            for (let ringIndex = 0; ringIndex < su4RingSegments.length; ringIndex++) {
                const segments = su4RingSegments[ringIndex];
                const innerRadius = (ringIndex + 1) * su4RingWidth;
                const outerRadius = innerRadius + su4RingWidth;

                for (let i = 0; i < segments; i++) {
                    const anglePerSegment = (2 * Math.PI) / segments;

                    // ✅ [수정된 부분] i 앞에 -를 붙여 방향을 반대로 바꿉니다.
                    const midAngle = -(i * anglePerSegment);
                    
                    const startAngle = midAngle - (anglePerSegment / 2);
                    const endAngle = midAngle + (anglePerSegment / 2);
                    
                    const beamNumber = startNum + i;

                    // Path, Text 생성 부분은 이전과 동일합니다.
                    const path = describeArc(su4CenterX, su4CenterY, innerRadius, outerRadius, startAngle, endAngle);
                    const pathEl = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    pathEl.setAttribute("d", path);
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.setAttribute("stroke", "#aaa");
                    pathEl.setAttribute("stroke-width", 1);
                    svg.appendChild(pathEl);

                    const textRadius = (innerRadius + outerRadius) / 2;
                    const textX = su4CenterX + textRadius * Math.cos(midAngle);
                    const textY = su4CenterY + textRadius * Math.sin(midAngle);
                    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    textEl.setAttribute("x", textX);
                    textEl.setAttribute("y", textY);
                    textEl.setAttribute("text-anchor", "middle");
                    textEl.setAttribute("alignment-baseline", "middle");
                    textEl.setAttribute("font-size", "10");
                    textEl.setAttribute("fill", "white");
                    textEl.textContent = beamNumber;
                    svg.appendChild(textEl);
                    
                    su4BeamData.push({ number: beamNumber, pathEl: pathEl, textEl: textEl });
                }
                startNum += segments;
            }

            // =======================================================
            // ✅ 각도 텍스트 그리기 (사용자 지정 목록 반영)
            // =======================================================

            // ✅ 사용자가 제공한 22개의 각도 레이블 목록 (중복 '164'' 하나 제외)
            const angleLabels = [
                "0'", "16'", "33'", "49'", "65'", "82'", "98'", "115'", "131'", 
                "147'", "164'", "180'", "196'", "213'", "229'", "245'", "262'", 
                "278'", "295'", "311'", "327'", "344'"
            ];

            const lastRingIndex = su4RingSegments.length - 1;
            const lastRingSegments = su4RingSegments[lastRingIndex];
            const angleLabelRadius = (su4RingSegments.length + 1) * su4RingWidth + 10;

            // 레이블 배열의 개수와 세그먼트 개수가 일치하는지 확인
            if (angleLabels.length !== lastRingSegments) {
                console.error("지정된 각도 레이블의 개수와 마지막 링의 세그먼트 개수가 일치하지 않습니다.");
                return; // 개수가 다르면 충돌 방지를 위해 그리지 않음
            }

            const anglePerSegment = (2 * Math.PI) / lastRingSegments;

            for (let i = 0; i < lastRingSegments; i++) {
                const midAngle = -(i * anglePerSegment); // 위치 계산을 위한 각도는 그대로 사용

                // 텍스트 위치 계산
                const textX = su4CenterX + angleLabelRadius * Math.cos(midAngle);
                const textY = su4CenterY + angleLabelRadius * Math.sin(midAngle);

                // 각도 레이블 텍스트 생성
                const angleText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                angleText.setAttribute("x", textX);
                angleText.setAttribute("y", textY);
                angleText.setAttribute("text-anchor", "middle");
                angleText.setAttribute("alignment-baseline", "middle");
                angleText.setAttribute("font-size", "8");
                angleText.setAttribute("fill", "#0066cc");
                angleText.setAttribute("font-weight", "bold");
                angleText.textContent = angleLabels[i];
                svg.appendChild(angleText);
            }
        }

        // SU4 외부에서 색상 업데이트 (DU와 동일한 구조)
        function updateSu4BeamColors({ yellow = [], blue = [] }) {
            for (const beam of su4BeamData) {
                const { number, pathEl } = beam;
                if (yellow.includes(number)) {
                    pathEl.setAttribute("fill", "#F2C029");
                    pathEl.style.fill = "#F2C029"; // CSS 스타일로도 설정
                } else if (blue.includes(number)) {
                    pathEl.setAttribute("fill", "#84D9A9");
                    pathEl.style.fill = "#84D9A9"; // CSS 스타일로도 설정
                } else {
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.style.fill = "dimgray"; // CSS 스타일로도 설정
                }
            }
        }

        // SU4 Beam Info 모달이 열릴 때 다이어그램 그리기
        document.addEventListener('DOMContentLoaded', function() {
            const su4BeamInfoModal = document.getElementById('su4BeamInfoModal');
            if (su4BeamInfoModal) {
                su4BeamInfoModal.addEventListener('shown.bs.modal', function() {
                    drawSu4BeamBook();
                    // 초기 색상은 모두 dimgray로 설정됨 (하드코딩된 색상 업데이트 제거)
                });
            }
        });


        function updateTime() {
            let now = new Date();

            // UTC 시간 포맷: DD-MM-YYYY, HH:MM:SS AM/PM
            let utcDay = String(now.getUTCDate()).padStart(2, '0');
            let utcMonth = String(now.getUTCMonth() + 1).padStart(2, '0'); // 월은 0부터 시작하므로 +1
            let utcYear = now.getUTCFullYear();
            let utcHours = now.getUTCHours();
            let utcMinutes = String(now.getUTCMinutes()).padStart(2, '0');
            let utcSeconds = String(now.getUTCSeconds()).padStart(2, '0');

            let utcAmPm = utcHours >= 12 ? 'PM' : 'AM';
            utcHours = utcHours % 12;
            utcHours = utcHours ? String(utcHours).padStart(2, '0') : '12'; // 0시일 경우 12로 표시

            let formattedUtcTime = `${utcDay}-${utcMonth}-${utcYear}, ${utcHours}:${utcMinutes}:${utcSeconds} ${utcAmPm}`;
            document.getElementById("utc-time").innerText = "UTC Time: " + formattedUtcTime;

            // 브라우저 시간 포맷: DD-MM-YYYY, HH:MM:SS AM/PM
            // 브라우저의 현지 시간을 기준으로 날짜와 시간을 가져옵니다.
            let browserDay = String(now.getDate()).padStart(2, '0');
            let browserMonth = String(now.getMonth() + 1).padStart(2, '0');
            let browserYear = now.getFullYear();
            let browserHours = now.getHours();
            let browserMinutes = String(now.getMinutes()).padStart(2, '0');
            let browserSeconds = String(now.getSeconds()).padStart(2, '0');

            let browserAmPm = browserHours >= 12 ? 'PM' : 'AM';
            browserHours = browserHours % 12;
            browserHours = browserHours ? String(browserHours).padStart(2, '0') : '12'; // 0시일 경우 12로 표시

            let formattedBrowserTime = `${browserDay}-${browserMonth}-${browserYear}, ${browserHours}:${browserMinutes}:${browserSeconds} ${browserAmPm}`;
            document.getElementById("browser-time").innerText = "Browser Time: " + formattedBrowserTime;

        }
        setInterval(updateTime, 1000);


        // ✅ 초기 설정 모달 관리
        function startInitialSetup() {
            userStarted = true;
            clearTimeout(autoCloseTimeout);
            timer = 10;
            document.getElementById('setupTimer').textContent = timer;

            timerInterval = setInterval(() => {
                timer--;
                document.getElementById('setupTimer').textContent = timer;

                if (timer <= 0) {
                clearInterval(timerInterval);
                bootstrap.Modal.getInstance(document.getElementById('duInitialSetupModal')).hide();
                console.log('✅ Initial Setup countdown complete. Modal closed.');
                }
            }, 1000);
        }

        // ✅ USIM 타이머 및 모달 흐름
        function startUsimTimer(durationSeconds = 300) {
            timeLeft = durationSeconds;
            usimTimerInterval && clearInterval(usimTimerInterval);
            updateTimerDisplays();

            usimTimerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplays();
                if (timeLeft <= 0) {
                clearInterval(usimTimerInterval);
                ['usimCheckModal', 'apnSetupModal', 'DeviceSetupModal', 'AgcSetupModal']
                    .forEach(id => bootstrap.Modal.getInstance(document.getElementById(id))?.hide());
                }
            }, 1000);
        }

        function updateTimerDisplays() {
            document.getElementById('usimTimer').textContent = timeLeft;
            ['apnTimer', 'DeviceTimer', 'AgcTimer', 'InitialSetupTimer', 'BtapnTimer', 'FinalSetupTimer'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = timeLeft;
            });
        }

        function goToStep2() {
            bootstrap.Modal.getInstance(document.getElementById('usimCheckModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('apnSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep3() {
            bootstrap.Modal.getInstance(document.getElementById('apnSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('DeviceSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep4() {
            bootstrap.Modal.getInstance(document.getElementById('DeviceSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('AgcSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep5() {
            bootstrap.Modal.getInstance(document.getElementById('AgcSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('InitialSetupModal')).show();
            updateTimerDisplays();
        }

        function backToAgcSetup() {
            bootstrap.Modal.getInstance(document.getElementById('InitialSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('AgcSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep6() {
            bootstrap.Modal.getInstance(document.getElementById('InitialSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('SuSetupModal')).show();
            updateTimerDisplays();
        }

        function backToInitialSetup() {
            bootstrap.Modal.getInstance(document.getElementById('SuSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('InitialSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep7() {
            // SuSetupModal을 닫기 (Step 6/7)
            const suModal = bootstrap.Modal.getInstance(document.getElementById('SuSetupModal'));
            if (suModal) {
                suModal.hide();
            }
            
            if (timeLeft <= 0) return;
            
            // FinalSetupModal 열기 (Step 7/7)
            const finalModal = new bootstrap.Modal(document.getElementById('FinalSetupModal'));
            finalModal.show();
            updateTimerDisplays();
        }

        function backToBtapnSetup() {
            // FinalSetupModal을 닫기 (Step 7/7)
            const finalModal = bootstrap.Modal.getInstance(document.getElementById('FinalSetupModal'));
            if (finalModal) {
                finalModal.hide();
            }
            
            if (timeLeft <= 0) return;
            
            // SuSetupModal 열기 (Step 6/7)
            new bootstrap.Modal(document.getElementById('SuSetupModal')).show();
            updateTimerDisplays();
        }

        function goToUsimFromApn() {
            bootstrap.Modal.getInstance(document.getElementById('apnSetupModal'))?.hide();
            new bootstrap.Modal(document.getElementById('usimCheckModal')).show();
            updateTimerDisplays();
        }

        function goToApnFromDevice() {
            bootstrap.Modal.getInstance(document.getElementById('DeviceSetupModal'))?.hide();
            new bootstrap.Modal(document.getElementById('apnSetupModal')).show();
            updateTimerDisplays();
        }

        function goToDeviceFromAgc() {
            bootstrap.Modal.getInstance(document.getElementById('AgcSetupModal'))?.hide();
            new bootstrap.Modal(document.getElementById('DeviceSetupModal')).show();
            updateTimerDisplays();
        }

        function closeSetUpModal() {
            clearInterval(usimTimerInterval);
            usimTimerInterval = null;
        }

        // ✅ DOM 초기화 및 gNB Vendor 이벤트
        document.addEventListener('DOMContentLoaded', function () {
            const modalEl = document.getElementById('duInitialSetupModal');
            const openModalBtn = document.getElementById('openModalBtn'); // 모달 여는 버튼 id 필요
            const agcModeEl = document.getElementById("Mvbx_RsAgcMode");

            
            // 모달이 열리기 시작할 때 (show) 초기화
            modalEl.addEventListener('show.bs.modal', function () {
                userStarted = false;
                timer = 10;
                document.getElementById('setupTimer').textContent = timer;

                // 10초 후 자동 닫힘 예약
                autoCloseTimeout = setTimeout(() => {
                    if (!userStarted) {
                        const modal = bootstrap.Modal.getInstance(modalEl);
                        modal.hide();
                        console.log('Modal auto-closed due to no Start press.');
                    }
                }, 10000);
            });

            // 모달 완전히 열렸을 때 포커스 이동
            modalEl.addEventListener('shown.bs.modal', function () {
                modalEl.focus(); // 모달에 tabindex="-1"이 있어야 포커스 가능
            });

            // 모달이 닫히기 직전 (hide) 포커스 모달 외부 버튼으로 이동
            modalEl.addEventListener('hide.bs.modal', function () {
                if (openModalBtn) {
                    openModalBtn.focus();
                }
            });

            // 모달 완전히 닫힌 후 타이머 정리
            modalEl.addEventListener('hidden.bs.modal', function () {
                clearTimeout(autoCloseTimeout);
                clearInterval(timerInterval);
                timer = 10;
                document.getElementById('setupTimer').textContent = timer;
            });

            if (agcModeEl) {
                agcModeEl.addEventListener("click", () => {
                    userClicked = true;
                    console.log("🖱️ User manually clicked AGC toggle.");
                });
            }

            
        });

        // 네비게이션 점 색상을 현재 알람 상태에 따라 업데이트하는 함수
        function updateNavDotColors() {
            const duNavDot = document.getElementById('du_nav_dot');
            const su1NavDot = document.getElementById('su1_nav_dot');
            const su2NavDot = document.getElementById('su2_nav_dot');
            const su3NavDot = document.getElementById('su3_nav_dot');
            const su4NavDot = document.getElementById('su4_nav_dot');

            // 모든 점에 대해 기존 색상 클래스 초기화
            [duNavDot, su1NavDot, su2NavDot, su3NavDot, su4NavDot].forEach(dot => {
                if (dot) {
                    // 기존 배경색 클래스 제거
                    dot.classList.remove('status-normal', 'status-alarm', 'status-linkfail', 'status-alarm-yellow', 'status-unknown');
                    // 인라인 스타일 초기화 (테두리는 유지)
                    dot.style.backgroundColor = ''; 
                }
            });

            // DU 점 색상 업데이트 - 기본값은 초록색, 알람 시 빨간색
            if (duNavDot) {
                duNavDot.classList.remove('status-normal', 'status-alarm');
                if (currentDuAlarmStatus === 1) {
                    duNavDot.classList.add('status-alarm'); // 알람 시 빨간색
                } else {
                    duNavDot.classList.add('status-normal'); // 정상 시 초록색 (기본값)
                }
            }

            // SU #1, #2, #3, #4 점 색상 업데이트 - SuLinkFailBits 데이터가 있으면 사용, 없으면 기본값
            if (window.currentSuLinkFailBits) {
                const bits = window.currentSuLinkFailBits;
                
                // SU1 링크 알람 (1비트: 0=정상, 1=링크페일알람)
                if (su1NavDot) {
                    su1NavDot.classList.remove('status-normal', 'status-linkfail');
                    if (bits.SU1_LINK_FAIL === 0) {
                        su1NavDot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU1_LINK_FAIL === 1) {
                        su1NavDot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su1NavDot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU2 링크 알람
                if (su2NavDot) {
                    su2NavDot.classList.remove('status-normal', 'status-linkfail');
                    if (bits.SU2_LINK_FAIL === 0) {
                        su2NavDot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU2_LINK_FAIL === 1) {
                        su2NavDot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su2NavDot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU3 링크 알람
                if (su3NavDot) {
                    su3NavDot.classList.remove('status-normal', 'status-linkfail');
                    if (bits.SU3_LINK_FAIL === 0) {
                        su3NavDot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU3_LINK_FAIL === 1) {
                        su3NavDot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su3NavDot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU4 링크 알람
                if (su4NavDot) {
                    su4NavDot.classList.remove('status-normal', 'status-linkfail');
                    if (bits.SU4_LINK_FAIL === 0) {
                        su4NavDot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU4_LINK_FAIL === 1) {
                        su4NavDot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su4NavDot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
            } else {
                // SuLinkFailBits 데이터가 없으면 기본값은 초록색으로 설정 (정상 상태)
                if (su1NavDot) {
                    su1NavDot.classList.remove('status-normal', 'status-linkfail');
                    su1NavDot.classList.add('status-normal');
                }
                if (su2NavDot) {
                    su2NavDot.classList.remove('status-normal', 'status-linkfail');
                    su2NavDot.classList.add('status-normal');
                }
                if (su3NavDot) {
                    su3NavDot.classList.remove('status-normal', 'status-linkfail');
                    su3NavDot.classList.add('status-normal');
                }
                if (su4NavDot) {
                    su4NavDot.classList.remove('status-normal', 'status-linkfail');
                    su4NavDot.classList.add('status-normal');
                }
            }
        }

        // 패킷 요청 함수들 (간단한 래퍼)
        // DU(0x30), SU(0x40) 요청을 payload로 보냄
        function requestUpdateStatus(rcvMainSys = 0x30, rcvSubSys = 0x11) {
            const payload = { rcv_main_sys: rcvMainSys };
            if (rcvMainSys === 0x40) {
                payload.rcv_sub_sys = rcvSubSys;
            }
            socket.emit('request_update_status', payload);
            console.log(`📤 Requested: update_status (Rcv_Main_Sys=0x${rcvMainSys.toString(16)}${rcvMainSys === 0x40 ? `, Rcv_Sub_Sys=0x${rcvSubSys.toString(16)}` : ''})`);
        }

        function requestTddStatus() {
            socket.emit('request_tdd_status');
            console.log('📤 Requested: tdd_status packet');
        }

        function requestSu2Status() {
            requestUpdateStatus(0x40, 0x12);
            console.log('📤 Requested: SU2 status packet');
        }

        function requestSu3Status() {
            requestUpdateStatus(0x40, 0x13);
            console.log('📤 Requested: SU3 status packet');
        }

        function requestSu4Status() {
            requestUpdateStatus(0x40, 0x14);
            console.log('📤 Requested: SU4 status packet');
        }

        // 화면 전환 함수
        function showScreen(screenId) {
            const duContent = document.getElementById('du_content_display');
            const su1Content = document.getElementById('su1_content_display');
            const su2Content = document.getElementById('su2_content_display');
            const su3Content = document.getElementById('su3_content_display');
            const su4Content = document.getElementById('su4_content_display');
            const packetInfoContent = document.getElementById('packet_info_display');
            const syncModuleContent = document.getElementById('sync_module_display');
            const duNavDot = document.getElementById('du_nav_dot');
            const su1NavDot = document.getElementById('su1_nav_dot');
            const su2NavDot = document.getElementById('su2_nav_dot');
            const su3NavDot = document.getElementById('su3_nav_dot');
            const su4NavDot = document.getElementById('su4_nav_dot');

            // 기존 패킷 요청 타이머들 정리 (새로운 구조에서는 자동으로 관리됨)

            // 모든 네비게이션 점을 현재 알람 상태 색상으로 먼저 초기화 (비활성화 상태의 색상)
            updateNavDotColors();

            // 모든 화면 숨김 (기존 방식대로 active 클래스 제거)
            duContent.classList.remove('active');
            su1Content.classList.remove('active');
            su2Content.classList.remove('active');
            su3Content.classList.remove('active');
            su4Content.classList.remove('active');
            if (packetInfoContent) {
                packetInfoContent.classList.remove('active');
                packetInfoContent.style.display = 'none';
            }
            if (syncModuleContent) {
                syncModuleContent.style.display = 'none';
            }

            // 선택된 화면 표시
            if (screenId === 'du_content') {
                duContent.classList.add('active');
                // DU 화면: dashboard 페이지로 설정 (update_status 폴링)
                enterPage('dashboard'); // 자동 폴링 시작 - 주석처리
            } else if (screenId === 'su1_content') {
                su1Content.classList.add('active');
                // SU1 화면: su1 전용 폴링 (폴링 없음)
                enterPage('su1');
                // SU1 진입 시 한 번 SU1 패킷 요청
                requestUpdateStatus(0x40);
            } else if (screenId === 'packet_info') {
                if (packetInfoContent) {
                    packetInfoContent.classList.add('active');
                    packetInfoContent.style.display = 'block';
                }
                // Packet Info 화면: packet_info 전용 폴링
                enterPage('packet_info');
            } else if (screenId === 'sync_module') {
                // Sync Module 화면 표시
                if (syncModuleContent) {
                    syncModuleContent.style.display = 'block';
                }
                // Sync Module 화면: tddview 페이지로 설정 (tdd_status 폴링)
                enterPage('tddview');
            }
             // SU #2 화면이 활성화될 경우
             else if (screenId === 'su2_content') {
                su2Content.classList.add('active');
                // SU2 화면: su2 전용 폴링
                enterPage('su2');
                // SU2 진입 시 한 번 SU2 패킷 요청
                requestSu2Status();
            }
             // SU #3 화면이 활성화될 경우
             else if (screenId === 'su3_content') {
                su3Content.classList.add('active');
                // SU3 화면: su3 전용 폴링
                enterPage('su3');
                // SU3 진입 시 한 번 SU3 패킷 요청
                requestSu3Status();
            }
             // SU #4 화면이 활성화될 경우
             else if (screenId === 'su4_content') {
                su4Content.classList.add('active');
                // SU4 화면: su4 전용 폴링
                enterPage('su4');
                // SU4 진입 시 한 번 SU4 패킷 요청
                requestSu4Status();
            }

            // 화면 전환 시 모든 모달 닫기
            closeAllModals();
        }

        // 모든 모달 닫기 함수
        function closeAllModals() {
            // Bootstrap 모달 인스턴스들 가져오기
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modalElement => {
                const modal = bootstrap.Modal.getInstance(modalElement);
                if (modal) {
                    modal.hide();
                } else {
                    // 모달 인스턴스가 없으면 직접 숨기기
                    modalElement.style.display = 'none';
                    modalElement.classList.remove('show');
                    // backdrop 제거
                    const backdrop = document.querySelector('.modal-backdrop');
                    if (backdrop) {
                        backdrop.remove();
                    }
                }
            });
            
            // body에서 modal-open 클래스 제거
            document.body.classList.remove('modal-open');
            document.body.style.overflow = '';
            document.body.style.paddingRight = '';
        }


        // ✅ Socket.IO 연결
        socket.on('connect', () => console.log('🟢 Connected to Flask Server'));
        socket.on('disconnect', () => console.log('🔴 Disconnected from Flask Server'));
        
        // DU Control 명령 응답 처리
        socket.on('du_control_response', function(response) {
            if (response.status === 'success') {
                console.log('✅ DU Control 명령이 성공적으로 처리되었습니다.');
                // 성공 시 추가 처리 (예: 버튼 상태 변경, 알림 등)
            } else {
                console.error('❌ DU Control 명령 처리 실패:', response.message);
                // 실패 시 추가 처리 (예: 에러 알림, 재시도 등)
            }
        });

        // RX 박스 상태 관리
        let rxBoxState = {
            originalBg: null,
            originalColor: null
        };

        // TX 박스 상태 관리
        let txBoxState = {
            originalBg: null,
            originalColor: null
        };

        // RX/TX 박스 초기 상태 저장
        document.addEventListener('DOMContentLoaded', function() {
            const rxBox = document.querySelector('.rx-box');
            if (rxBox) {
                rxBoxState.originalBg = window.getComputedStyle(rxBox).backgroundColor;
                rxBoxState.originalColor = window.getComputedStyle(rxBox).color;
            }
            
            const txBox = document.querySelector('.tx-box');
            if (txBox) {
                txBoxState.originalBg = window.getComputedStyle(txBox).backgroundColor;
                txBoxState.originalColor = window.getComputedStyle(txBox).color;
            }
            
            // 네비게이션 점 기본값 설정 (초록색)
            updateNavDotColors();
        });

        // ------- SU2 상태 패킷 수신 (필드명은 동일, ID는 su2_ 접두어로 처리) -------
        socket.on("su2_status_update", function (data) {
            console.log("📥 Received su2_status_update:", data.packet);
            console.log("🎯 SU2 패킷 감지! SU2 페이지 업데이트 시작");

            // SU2용 업데이트 함수 정의 (SU1과 동일)
            const updateText = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) el.innerText = value;
            };
            const updateButtonText = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) {
                    if (value === 1) {
                        el.innerText = "ON";
                        el.className = "btn btn-success btn-sm";
                    } else {
                        el.innerText = "OFF";
                        el.className = "btn btn-secondary btn-sm";
                    }
                }
            };
            const updateValue = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) el.value = value;
            };

            // SU2용 텍스트 변수 정의 (SU1과 동일)
            const rtpTypeText = {
                0: "DU_28G",
                1: "DU_39G", 
                2: "DU_26G"
            };
            
            const statusText = {
                0: "NONE",
                1: "ACTIVE", 
                2: "SUCCESS",
                3: "FAIL"
            };

            // SU2 기본 정보 업데이트 (SU1과 동일한 패턴)
            updateText("su2_conserialnum_header", data.packet.ConSerialNum);
            updateText("su2_emsversion2", data.packet.ModEmsFwVer);
            
            // 기본 정보
            updateText("su2_McuSwVer", data.packet.McuSwVer);
            updateText("su2_rptmaker", rtpTypeText[data.packet.RtpKind] || "Unknown");
            
            // 시스템 시간 및 온도
            updateText("su2_curtime", `${data.packet.System_Year} ${data.packet.System_hour}`);
            updateText("su2_systememper", `${data.packet.SysTemper} ℃`);
            
            // SU MODE 업데이트
            if (data.packet.SuModeStatus !== undefined) {
                const suModeText = data.packet.SuModeStatus === 0 ? "Non Cascade" : "Cascade";
                updateText("su2_sumode", suModeText);
            }
            
            // SU ID 업데이트 (Set Mode가 아닐 때만)
            if (data.packet.SuId !== undefined && !SET_MODE_SU2) {
                updateValue("su2_suid", data.packet.SuId);
            }
            updateValue("su2_inittemper", data.packet.SysTemperHighLvl);
            updateValue("su2_templower", data.packet.SysTemperLowLvl);
            
            // Init Status 업데이트
            updateStatusBadge2("su2_fpga_init_status", data.packet.FPGA_Init_Status);
            
            // Cascade Mode 업데이트 (Set Mode가 아닐 때만)
            console.log("🔍 SU2 SuEndMode 체크:", data.packet.SuEndMode, "SET_MODE_SU2:", SET_MODE_SU2);
            if (data.packet.SuEndMode !== undefined) {
                if (SET_MODE_SU2) {
                    console.log("🔒 SU2 Set Mode - Cascade Mode 업데이트 차단");
                    return; // SU2 Set Mode에서 업데이트 차단
                }
                const su2CascadeModeEl = document.getElementById("su2_cascade_mode");
                console.log("🔍 SU2 Cascade Mode 요소:", su2CascadeModeEl);
                if (su2CascadeModeEl) {
                    if (data.packet.SuEndMode === 1) {
                        su2CascadeModeEl.textContent = "ON";
                        su2CascadeModeEl.className = "btn btn-success btn-sm";
                        console.log("✅ SU2 Cascade Mode를 ON으로 설정");
                    } else {
                        su2CascadeModeEl.textContent = "OFF";
                        su2CascadeModeEl.className = "btn btn-secondary btn-sm";
                        console.log("✅ SU2 Cascade Mode를 OFF로 설정");
                    }
                } else {
                    console.log("❌ SU2 Cascade Mode 요소를 찾을 수 없음");
                }
            } else {
                console.log("❌ SU2 SuEndMode가 undefined");
            }
            
            // Modem 상태 (SU1과 동일한 패턴)
            updateText("su2_modstatus", statusText[data.packet.ModStatus] || "Unknown");
            updateText("su2_modimsinum", data.packet.ModIMSINum);
            updateText("su2_modimeinum", data.packet.ModIMEINum);
            updateText("su2_modnum", data.packet.ModPhonNumber);
            updateText("su2_modip", data.packet.ModIpAddress);
            updateText("su2_modrsrp", data.packet.ModRsrp + " [dBm]");
            updateText("su2_modrsrq", data.packet.ModRsrq + " [dBm]");
            updateText("su2_modrssi", data.packet.ModRssi + " [dBm]");
            updateText("su2_modpci", data.packet.ModPci);
            updateText("su2_modsinr", data.packet.ModSinr + " [dB]");
            updateText("su2_modtxpwr", data.packet.ModTxPwr + " [dBm]");
            updateText("su2_modversion", data.packet.ModVersion);
            updateText("su2_gumstick_ver", data.packet.ModEmsFwVer);
            updateText("su2_modlanusemode", data.packet.ModLanUseMode === 1 ? "Enable" : "Disable");
            
            // ISO 상태 (SU1과 동일한 패턴)
            const su2isoStatusText = {
                0: "Ready",
                1: "Measuring", 
                2: "Fail",
                3: "Success"
            };
            updateText("su2_iso_status", su2isoStatusText[data.packet.DU_ISO_STATUS] ?? "N/A");

            // SU2 알람 상태 업데이트 (SU1과 동일한 방식)
            if (data.packet.AlarmStatus) {
                const alarmStatus = data.packet.AlarmStatus;
                console.log('SU2 알람 상태:', alarmStatus);
                
                // 각 알람 상태에 따라 UI 업데이트 (SU1과 동일한 패턴)
                Object.keys(alarmStatus).forEach(alarmId => {
                    const isActive = alarmStatus[alarmId] === 1;
                    console.log(`SU2 알람 업데이트: ${alarmId} = ${isActive}`);
                    updateAlarmDot(alarmId, isActive); // su2_ 접두사 제거
                });
            }

            // SU2 Beam Status 업데이트 (SU1과 동일한 패턴)
            updateText("su2_mvbx_beaminfo_beamid1", data.packet.Mvbx_BeamSet);
            updateText("su2_mvbx_beaminfo_rsrp1", data.packet.MVBX_rsrp);
            updateText("su2_mvbx_beaminfo_snr1", data.packet.MVBX_snr);
            updateText("su2_mvbx_ssb", data.packet.MVBX_ssb);
            updateText("su2_mvbx_beaminfo_pci1", data.packet.MVBX_pci);
            
            // SU2 Ant. Array On/Off 업데이트 (SU1과 동일한 패턴)
            if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
            const su2AntArrayEl = document.getElementById("su2_gumstick_onoff");
            if (su2AntArrayEl) {
                if (data.packet.GumStick_OnOff === 1) {
                    su2AntArrayEl.textContent = "ON";
                    su2AntArrayEl.className = "btn btn-success btn-sm";
                } else {
                    su2AntArrayEl.textContent = "OFF";
                    su2AntArrayEl.className = "btn btn-secondary btn-sm";
                }
            }
            
            // SU2 AGC On/Off 업데이트 - 상태값 업데이트 제거됨
            
            // SU2 AGC Level 업데이트 - 상태값 업데이트 제거됨
            
            // SU2 AGC Input 업데이트 (SU1과 동일한 패턴)
            // SU2 AGC Input, Decoded SSB 정보 업데이트 - 삭제된 요소들의 상태값 업데이트 제거됨
            
            // SU2 AOM & mmWave SISO RF 업데이트 (SU1과 동일한 패턴)
            updateText("su2_dl_input_siso", data.packet.SISO_RF_DET_DL0_OUT + " [dBm]");
            if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
            updateValue("su2_dl_att_siso", data.packet.DU_DlManualAtten_SISO);
            updateValue("su2_dl_alc_level_siso", data.packet.ALC_DL0_SISO_Level);
            if (data.packet.ALC_DL0_SISO_Mode !== undefined) {
                if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
                const su2DlAlcSisoEl = document.getElementById("su2_dl_alc_onoff_siso");
                if (su2DlAlcSisoEl) {
                    if (data.packet.ALC_DL0_SISO_Mode === 1) {
                        su2DlAlcSisoEl.textContent = "ON";
                        su2DlAlcSisoEl.className = "btn btn-success btn-sm";
                    } else {
                        su2DlAlcSisoEl.textContent = "OFF";
                        su2DlAlcSisoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateText("su2_ul_output_siso", data.packet.SISO_RF_DET_UL0_OUT + " [dBm]");
            if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
            updateValue("su2_ul_att_siso", data.packet.DU_UlManualAtten_SISO);
            updateValue("su2_ul_alc_level_siso", data.packet.ALC_UL0_SISO_Level);
            if (data.packet.ALC_UL0_SISO_Mode !== undefined) {
                if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
                const su2UlAlcSisoEl = document.getElementById("su2_ul_alc_onoff_siso");
                if (su2UlAlcSisoEl) {
                    if (data.packet.ALC_UL0_SISO_Mode === 1) {
                        su2UlAlcSisoEl.textContent = "ON";
                        su2UlAlcSisoEl.className = "btn btn-success btn-sm";
                    } else {
                        su2UlAlcSisoEl.textContent = "OFF";
                        su2UlAlcSisoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateValue("su2_mvbx_tx_gain_set_siso", data.packet.Mvbx_TxGainSetSiso);
            updateValue("su2_mvbx_rx_gain_set_siso", data.packet.Mvbx_RxGainSetSiso);
            updateText("su2_dl_iso_att_siso", data.packet.SU_DlIsoAtten_SISO + " [dB]");
            updateText("su2_ul_iso_att_siso", data.packet.DU_UlIsoAtten_SISO + " [dB]");
            
            // SU2 AOM & mmWave MIMO RF 업데이트 (SU1과 동일한 패턴)
            updateText("su2_dl_input_mimo", data.packet.MIMO_RF_DET_DL1_OUT + " [dBm]");
            if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
            updateValue("su2_dl_att_mimo", data.packet.DU_DlManualAtten_MIMO);
            updateValue("su2_dl_alc_level_mimo", data.packet.ALC_DL1_MIMO_Level);
            if (data.packet.ALC_DL1_MIMO_Mode !== undefined) {
                if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
                const su2DlAlcMimoEl = document.getElementById("su2_dl_alc_onoff_mimo");
                if (su2DlAlcMimoEl) {
                    if (data.packet.ALC_DL1_MIMO_Mode === 1) {
                        su2DlAlcMimoEl.textContent = "ON";
                        su2DlAlcMimoEl.className = "btn btn-success btn-sm";
                    } else {
                        su2DlAlcMimoEl.textContent = "OFF";
                        su2DlAlcMimoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateText("su2_ul_output_mimo", data.packet.MIMO_RF_DET_UL1_OUT + " [dBm]");
            if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
            updateValue("su2_ul_att_mimo", data.packet.DU_UlManualAtten_MIMO);
            updateValue("su2_ul_alc_level_mimo", data.packet.ALC_UL1_MIMO_Level);
            if (data.packet.ALC_UL1_MIMO_Mode !== undefined) {
                if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
                const su2UlAlcMimoEl = document.getElementById("su2_ul_alc_onoff_mimo");
                if (su2UlAlcMimoEl) {
                    if (data.packet.ALC_UL1_MIMO_Mode === 1) {
                        su2UlAlcMimoEl.textContent = "ON";
                        su2UlAlcMimoEl.className = "btn btn-success btn-sm";
                    } else {
                        su2UlAlcMimoEl.textContent = "OFF";
                        su2UlAlcMimoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateValue("su2_mvbx_tx_gain_set_mimo", data.packet.Mvbx_TxGainSetMiso);
            updateValue("su2_mvbx_rx_gain_set_mimo", data.packet.Mvbx_RxGainSetMiso);
            updateText("su2_dl_iso_att_mimo", data.packet.SU_DlIsoAtten_MIMO + " [dB]");
            updateText("su2_ul_iso_att_mimo", data.packet.DU_UlIsoAtten_MIMO + " [dB]");
            
            // SU2 AOM & mmWave SISO OPTIC 업데이트 (SU1과 동일한 패턴)
            updateText("su2_ld1_det_dl0_siso", data.packet.LD1_DET_DL0_SISO + " [dBm]");
            updateText("su2_pd1_det_ul0_siso", data.packet.PD1_DET_UL0_SISO + " [dBm]");
            updateText("su2_ld3_det_dl0_siso", data.packet.LD3_DET_DL0_SISO + " [dBm]");
            updateText("su2_pd3_det_ul0_siso", data.packet.PD3_DET_UL0_SISO + " [dBm]");
            if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
            updateValue("su2_ld1_det_dl0_siso_low", data.packet.LD1_DET_DL0_SISO_Low);
            updateValue("su2_pd1_det_ul0_siso_low", data.packet.PD1_DET_UL0_SISO_Low);
            updateValue("su2_ld3_det_dl0_siso_low", data.packet.LD3_DET_DL0_SISO_Low);
            updateValue("su2_pd3_det_ul0_siso_low", data.packet.PD3_DET_UL0_SISO_Low);
            
            // SU2 AOM & mmWave MIMO OPTIC 업데이트 (SU1과 동일한 패턴)
            updateText("su2_ld2_det_dl1_mimo", data.packet.LD2_DET_DL1_MIMO + " [dBm]");
            updateText("su2_pd2_det_ul1_mimo", data.packet.PD2_DET_UL1_MIMO + " [dBm]");
            updateText("su2_ld4_det_dl1_mimo", data.packet.LD4_DET_DL1_MIMO + " [dBm]");
            updateText("su2_pd4_det_ul1_mimo", data.packet.PD4_DET_UL1_MIMO + " [dBm]");
            if (SET_MODE_SU2) return; // SU2 Set Mode에서 업데이트 차단
            updateValue("su2_ld2_det_dl1_mimo_low", data.packet.LD2_DET_DL1_MIMO_Low);
            updateValue("su2_pd2_det_ul1_mimo_low", data.packet.PD2_DET_UL1_MIMO_Low);
            updateValue("su2_ld4_det_dl1_mimo_low", data.packet.LD4_DET_DL1_MIMO_Low);
            updateValue("su2_pd4_det_ul1_mimo_low", data.packet.PD4_DET_UL1_MIMO_Low);

            // SU2 gNB Type (Vendor) 업데이트 - 상태값 업데이트 제거됨

            // SU2 Beam Book 동그라미 색상 업데이트
            console.log("🎯 SU2 Beam Book 업데이트 시도:", data.packet.MVBX_BeamInfo_beamId1, data.packet.MVBX_BeamInfo_beamId2, data.packet.MVBX_BeamInfo_beamId3, data.packet.MVBX_BeamInfo_beamId4);
            // 항상 업데이트 시도 (조건 제거)
            updateSu2BeamColors({
                yellow: [data.packet.MVBX_BeamInfo_beamId1].filter(id => id >= 0),
                blue: [data.packet.MVBX_BeamInfo_beamId2, data.packet.MVBX_BeamInfo_beamId3, data.packet.MVBX_BeamInfo_beamId4].filter(id => id >= 0)
            });
            
            console.log("✅ SU2 Beam Book 색상 업데이트 완료");

            // SU2 Beam Info Orientation/Tilt 업데이트
            updateText('su2Orientation', data.packet.Orientation);
            updateText('su2Tilt', data.packet.Tilt);

            // SU2 Hidden Modal 업데이트
            updateValue("su2DlSubAtten_SISO", data.packet.DU_DlSubAtten_SISO);
            updateValue("su2DL_InputOffset_SISO", data.packet.DL_OutputOffset_SISO);
            updateValue("su2Dl_Att_Test_Siso", data.packet.Dl_Siso_Att_Test);
            updateValue("su2Ant_Out_Offset_Siso", data.packet.ApiGsOutputPowerOffsetSiso);
            updateValue("su2Ant_Output_SISO", data.packet.DsOutputPower_SISO);
            updateValue("su2Ant_Offset_UL_Siso", data.packet.GS_AttenOffset_UL_Siso);
            updateValue("su2UlSubAtten_SISO", data.packet.DU_UlSubAtten_SISO);
            updateValue("su2UL_OutputOffset_SISO", data.packet.UL_InputOffset_SISO);
            updateValue("su2Ul_Att_Test_Siso", data.packet.Ul_Siso_Att_Test);
            updateValue("su2Ant_Gain_Siso", data.packet.Gs_Gain_Siso);
            updateValue("su2Ant_Offset_DL_Siso", data.packet.GS_AttenOffset_DL_Siso);
            
            updateValue("su2DlSubAtten_MIMO", data.packet.DU_DlSubAtten_MIMO);
            updateValue("su2DL_InputOffset_MIMO", data.packet.DL_OutputOffset_MIMO);
            updateValue("su2Dl_Att_Test_Mimo", data.packet.Dl_Mimo_Att_Test);
            updateValue("su2Ant_Out_Offset_Mimo", data.packet.ApiGsOutputPowerOffsetMimo);
            updateValue("su2Ant_Output_MIMO", data.packet.DsOutputPower_MIMO);
            updateValue("su2Ant_Offset_UL_Mimo", data.packet.GS_AttenOffset_UL_Mimo);
            updateValue("su2UlSubAtten_MIMO", data.packet.DU_UlSubAtten_MIMO);
            updateValue("su2UL_OutputOffset_MIMO", data.packet.UL_InputOffset_MIMO);
            updateValue("su2UL_Att_Testl_Mimo", data.packet.Ul_Mimo_Att_Test);
            updateValue("su2Ant_Gain_Mimo", data.packet.Gs_Gain_Mimo);
            updateValue("su2Ant_Offset_DL_Mimo", data.packet.GS_AttenOffset_DL_Mimo);
            
            updateValue("su2LD1_DET_DL0_SISO_Offset", data.packet.LD1_DET_DL0_SISO_Offset);
            updateValue("su2PD1_DET_UL0_SISO_Offset", data.packet.PD1_DET_UL0_SISO_Offset);
            updateValue("su2LD3_DET_DL0_SISO_Offset", data.packet.LD3_DET_DL0_SISO_Offset);
            updateValue("su2PD3_DET_UL0_SISO_Offset", data.packet.PD3_DET_UL0_SISO_Offset);
            updateValue("su2LowRsrpLevel", data.packet.LowRsrpLevel);
            updateValue("su2LowRsrpStillTime", data.packet.LowRsrpStillTime);
            
            updateValue("su2LD2_DET_DL1_MIMO_Offset", data.packet.LD2_DET_DL1_MIMO_Offset);
            updateValue("su2PD2_DET_UL1_MIMO_Offset", data.packet.PD2_DET_UL1_MIMO_Offset);
            updateValue("su2LD4_DET_DL1_MIMO_Offset", data.packet.LD4_DET_DL1_MIMO_Offset);
            updateValue("su2PD4_DET_UL1_MIMO_Offset", data.packet.PD4_DET_UL1_MIMO_Offset);
            
            updateValue("su2conserialnum", data.packet.ConSerialNum);
            
            // Baudrate 업데이트
            let su2BaudrateText = "19200";
            if (data.packet.Mu_Su_Buadrate === 0) su2BaudrateText = "19200";
            else if (data.packet.Mu_Su_Buadrate === 1) su2BaudrateText = "38400";
            else if (data.packet.Mu_Su_Buadrate === 2) su2BaudrateText = "57600";
            else if (data.packet.Mu_Su_Buadrate === 3) su2BaudrateText = "115200";
            updateValue("su2baudrate", su2BaudrateText);
            
            // 토글 버튼 업데이트 (1=ON, 0=OFF)
            const su2AomtempToggle = document.getElementById('su2aomtemp-toggle');
            if (su2AomtempToggle) {
                su2AomtempToggle.textContent = data.packet.AomTempCompensationMode === 1 ? 'On' : 'Off';
                su2AomtempToggle.className = data.packet.AomTempCompensationMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su2AttTestToggle = document.getElementById('su2att-test-toggle');
            if (su2AttTestToggle) {
                su2AttTestToggle.textContent = data.packet.AttTestMode === 1 ? 'On' : 'Off';
                su2AttTestToggle.className = data.packet.AttTestMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su2ApiInitToggle = document.getElementById('su2api-init-toggle');
            if (su2ApiInitToggle) {
                su2ApiInitToggle.textContent = data.packet.ApiInitMode === 1 ? 'On' : 'Off';
                su2ApiInitToggle.className = data.packet.ApiInitMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su2ApiInitRetryToggle = document.getElementById('su2api-init-retry-toggle');
            if (su2ApiInitRetryToggle) {
                su2ApiInitRetryToggle.textContent = data.packet.ApiInitRetryMode === 1 ? 'On' : 'Off';
                su2ApiInitRetryToggle.className = data.packet.ApiInitRetryMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su2DebugToggle = document.getElementById('su2debug-toggle');
            if (su2DebugToggle) {
                su2DebugToggle.textContent = data.packet.DebugMode === 1 ? 'On' : 'Off';
                su2DebugToggle.className = data.packet.DebugMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            // Ant Band: 0이면 Single, 1이면 Tri
            updateText('su2antband', data.packet.ApiOldNewVer === 0 ? "Single" : (data.packet.ApiOldNewVer === 1 ? "Tri" : "N/A"));

            updateNavDotColors();
        });

        // ------- SU3 상태 패킷 수신 (필드명은 동일, ID는 su3_ 접두어로 처리) -------
        socket.on("su3_status_update", function (data) {
            console.log("📥 Received su3_status_update:", data.packet);
            console.log("🎯 SU3 패킷 감지! SU3 페이지 업데이트 시작");
            
            // SU3 Set Mode일 때는 편집 가능한 필드 업데이트 차단 (개별 필드별로 처리)

            // SU3용 업데이트 함수 정의 (SU1, SU2와 동일)
            const updateText = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) el.innerText = value;
            };
            const updateButtonText = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) {
                    if (value === 1) {
                        el.innerText = "ON";
                        el.className = "btn btn-success btn-sm";
                    } else {
                        el.innerText = "OFF";
                        el.className = "btn btn-secondary btn-sm";
                    }
                }
            };
            const updateValue = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) {
                    // SU3 Set Mode에서 편집 가능한 필드만 업데이트 방지
                    const isSu3 = id.startsWith('su3_');
                    const isSync = id.startsWith('tsync_') || id.startsWith('TDD_') || id.startsWith('F_') || id.startsWith('ssb_') || id.startsWith('tdd_');
                    const editLock = (isSu3 ? SET_MODE_SU3 : (isSync ? SYNC_SET_MODE : SET_MODE));
                    
                    if (editLock && el.hasAttribute('data-editable')) {
                        console.log(`🔒 ${isSu3 ? 'SU3' : (isSync ? 'Sync' : 'DU')} Set Mode: ${id} 값 업데이트 차단 (현재 값: ${el.value}, 새 값: ${value})`);
                        return;
                    }
                    
                    console.log(`📝 updateValue: ${id} = ${value} (DU_SET_MODE: ${SET_MODE}, SU3_SET_MODE: ${SET_MODE_SU3})`);
                    el.value = value;
                    // ID 값 출력 시 텍스트 크기 조정
                    el.style.fontSize = '0.85rem';
                }
            };

            // SU3용 텍스트 변수 정의 (SU1, SU2와 동일)
            const rtpTypeText = {
                0: "DU_28G",
                1: "DU_39G", 
                2: "DU_26G"
            };
            
            const statusText = {
                0: "NONE",
                1: "ACTIVE", 
                2: "SUCCESS",
                3: "FAIL"
            };

            // SU3 기본 정보 업데이트 (SU1, SU2와 동일한 패턴)
            updateText("su3_conserialnum_header", data.packet.ConSerialNum);
            updateText("su3_emsversion2", data.packet.ModEmsFwVer);
            
            // 기본 정보
            updateText("su3_McuSwVer", data.packet.McuSwVer);
            updateText("su3_rpttype", rtpTypeText[data.packet.RtpKind] || "Unknown");
            updateText("su3_curtime", `${data.packet.System_Year} ${data.packet.System_hour}`);
            updateText("su3_curtemper", `${data.packet.SysTemper} ℃`);
            
            // SU MODE 업데이트
            if (data.packet.SuModeStatus !== undefined) {
                const suModeText = data.packet.SuModeStatus === 0 ? "Non Cascade" : "Cascade";
                updateText("su3_sumode", suModeText);
            }
            
            // SU ID 업데이트 (Set Mode가 아닐 때만)
            if (data.packet.SuId !== undefined && !SET_MODE_SU3) {
                updateValue("su3_suid", data.packet.SuId);
            }
            
            updateValue("su3_tempupper", data.packet.SysTemperHighLvl);
            updateValue("su3_templower", data.packet.SysTemperLowLvl);
            
            // Init Status 업데이트
            updateStatusBadge2("su3_fpga_init_status", data.packet.FPGA_Init_Status);
            
            // Cascade Mode 업데이트 (Set Mode가 아닐 때만)
            console.log("🔍 SU3 SuEndMode 체크:", data.packet.SuEndMode, "SET_MODE_SU3:", SET_MODE_SU3);
            if (data.packet.SuEndMode !== undefined) {
                if (SET_MODE_SU3) {
                    console.log("🔒 SU3 Set Mode - Cascade Mode 업데이트 차단");
                    return; // SU3 Set Mode에서 업데이트 차단
                }
                const su3CascadeModeEl = document.getElementById("su3_cascade_mode");
                console.log("🔍 SU3 Cascade Mode 요소:", su3CascadeModeEl);
                if (su3CascadeModeEl) {
                    if (data.packet.SuEndMode === 1) {
                        su3CascadeModeEl.textContent = "ON";
                        su3CascadeModeEl.className = "btn btn-success btn-sm";
                        console.log("✅ SU3 Cascade Mode를 ON으로 설정");
                    } else {
                        su3CascadeModeEl.textContent = "OFF";
                        su3CascadeModeEl.className = "btn btn-secondary btn-sm";
                        console.log("✅ SU3 Cascade Mode를 OFF로 설정");
                    }
                } else {
                    console.log("❌ SU3 Cascade Mode 요소를 찾을 수 없음");
                }
            } else {
                console.log("❌ SU3 SuEndMode가 undefined");
            }
            
            // Modem 상태 (SU1, SU2와 동일한 패턴)
            updateText("su3_modstatus", statusText[data.packet.ModStatus] || "Unknown");
            updateText("su3_modimsinum", data.packet.ModIMSINum);
            updateText("su3_modimeinum", data.packet.ModIMEINum);
            updateText("su3_modnum", data.packet.ModPhonNumber);
            updateText("su3_modip", data.packet.ModIpAddress);
            updateText("su3_rsrp", data.packet.ModRsrp + " [dBm]");
            updateText("su3_rsrq", data.packet.ModRsrq + " [dBm]");
            updateText("su3_rssi", data.packet.ModRssi + " [dBm]");
            updateText("su3_pci", data.packet.ModPci);
            updateText("su3_sinr", data.packet.ModSinr + " [dB]");
            updateText("su3_txpwr", data.packet.ModTxPwr + " [dBm]");
            updateText("su3_modversion", data.packet.ModVersion);
            updateText("su3_gumstick_ver", data.packet.ModEmsFwVer);
            updateText("su3_lan", data.packet.ModLanUseMode === 1 ? "Enable" : "Disable");
            // SU3 ISO 상태 (SU1, SU2와 동일한 패턴)
            const su3isoStatusText = {
                0: "Ready",
                1: "Measuring",
                2: "Fail",
                3: "Success"
            };
            updateText("su3_iso_status", su3isoStatusText[data.packet.DU_ISO_STATUS] ?? "N/A");

            // SU3 알람 상태 업데이트 (SU1과 동일한 방식)
            if (data.packet.AlarmStatus) {
                const alarmStatus = data.packet.AlarmStatus;
                console.log('SU3 알람 상태:', alarmStatus);
                
                // 각 알람 상태에 따라 UI 업데이트 (SU1과 동일한 패턴)
                Object.keys(alarmStatus).forEach(alarmId => {
                    const isActive = alarmStatus[alarmId] === 1;
                    console.log(`SU3 알람 업데이트: ${alarmId} = ${isActive}`);
                    updateAlarmDot(alarmId, isActive); // su3_ 접두사 제거
                });
            }

            // SU3 Beam Status 업데이트 (SU1, SU2와 동일한 패턴)
            updateText("su3_mvbx_beaminfo_beamid1", data.packet.Mvbx_BeamSet);
            updateText("su3_mvbx_beaminfo_rsrp1", data.packet.MVBX_rsrp);
            updateText("su3_mvbx_beaminfo_snr1", data.packet.MVBX_snr);
            updateText("su3_mvbx_ssb", data.packet.MVBX_ssb);
            updateText("su3_mvbx_beaminfo_pci1", data.packet.MVBX_pci);

            // SU3 AOM & mmWave 업데이트 (SU1, SU2와 동일한 패턴)
            if (data.packet.GumStick_OnOff !== undefined) {
                const su3GumstickEl = document.getElementById("su3_gumstick_onoff");
                if (su3GumstickEl && !SET_MODE_SU3) { // SU3 Set Mode일 때는 업데이트 차단
                    if (data.packet.GumStick_OnOff === 1) {
                        su3GumstickEl.textContent = "ON";
                        su3GumstickEl.className = "btn btn-success btn-sm";
                    } else {
                        su3GumstickEl.textContent = "OFF";
                        su3GumstickEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            // SU3 AGC On/Off 업데이트 - 상태값 업데이트 제거됨
            // SU3 AGC Level 업데이트 - 상태값 업데이트 제거됨
            // SU3 AGC Input, Decoded SSB 정보 업데이트 - 삭제된 요소들의 상태값 업데이트 제거됨

            // SU3 AOM & mmWave SISO RF 업데이트 (SU1, SU2와 동일한 패턴)
            updateText("su3_dl_input_siso", data.packet.SISO_RF_DET_DL0_OUT + " [dBm]");
            updateValue("su3_dl_att_siso", data.packet.DU_DlManualAtten_SISO);
            updateValue("su3_dl_alc_level_siso", data.packet.ALC_DL0_SISO_Level);
            if (data.packet.ALC_DL0_SISO_Mode !== undefined) {
                if (SET_MODE_SU3) return; // SU3 Set Mode에서 업데이트 차단
                const su3DlAlcSisoEl = document.getElementById("su3_dl_alc_onoff_siso");
                if (su3DlAlcSisoEl) {
                    if (data.packet.ALC_DL0_SISO_Mode === 1) {
                        su3DlAlcSisoEl.textContent = "ON";
                        su3DlAlcSisoEl.className = "btn btn-success btn-sm";
                    } else {
                        su3DlAlcSisoEl.textContent = "OFF";
                        su3DlAlcSisoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateText("su3_ul_output_siso", data.packet.SISO_RF_DET_UL0_OUT + " [dBm]");
            if (SET_MODE_SU3) return; // SU3 Set Mode에서 업데이트 차단
            updateValue("su3_ul_att_siso", data.packet.DU_UlManualAtten_SISO);
            updateValue("su3_ul_alc_level_siso", data.packet.ALC_UL0_SISO_Level);
            if (data.packet.ALC_UL0_SISO_Mode !== undefined) {
                if (SET_MODE_SU3) return; // SU3 Set Mode에서 업데이트 차단
                const su3UlAlcSisoEl = document.getElementById("su3_ul_alc_onoff_siso");
                if (su3UlAlcSisoEl) {
                    if (data.packet.ALC_UL0_SISO_Mode === 1) {
                        su3UlAlcSisoEl.textContent = "ON";
                        su3UlAlcSisoEl.className = "btn btn-success btn-sm";
                    } else {
                        su3UlAlcSisoEl.textContent = "OFF";
                        su3UlAlcSisoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            updateValue("su3_mvbx_tx_gain_set_siso", data.packet.Mvbx_TxGainSetSiso);
            updateValue("su3_mvbx_rx_gain_set_siso", data.packet.Mvbx_RxGainSetSiso);
            updateText("su3_dl_iso_att_siso", data.packet.SU_DlIsoAtten_SISO + " [dB]");
            updateText("su3_ul_iso_att_siso", data.packet.DU_UlIsoAtten_SISO + " [dB]");

            // SU3 AOM & mmWave MIMO RF 업데이트 (SU1, SU2와 동일한 패턴)
            updateText("su3_dl_input_mimo", data.packet.MIMO_RF_DET_DL1_OUT + " [dBm]");
            updateValue("su3_dl_att_mimo", data.packet.DU_DlManualAtten_MIMO);
            updateValue("su3_dl_alc_level_mimo", data.packet.ALC_DL1_MIMO_Level);
            if (data.packet.ALC_DL1_MIMO_Mode !== undefined) {
                if (SET_MODE_SU3) return; // SU3 Set Mode에서 업데이트 차단
                const su3DlAlcMimoEl = document.getElementById("su3_dl_alc_onoff_mimo");
                if (su3DlAlcMimoEl) {
                    if (data.packet.ALC_DL1_MIMO_Mode === 1) {
                        su3DlAlcMimoEl.textContent = "ON";
                        su3DlAlcMimoEl.className = "btn btn-success btn-sm";
                    } else {
                        su3DlAlcMimoEl.textContent = "OFF";
                        su3DlAlcMimoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateText("su3_ul_output_mimo", data.packet.MIMO_RF_DET_UL1_OUT + " [dBm]");
            if (SET_MODE_SU3) return; // SU3 Set Mode에서 업데이트 차단
            updateValue("su3_ul_att_mimo", data.packet.DU_UlManualAtten_MIMO);
            updateValue("su3_ul_alc_level_mimo", data.packet.ALC_UL1_MIMO_Level);
            if (data.packet.ALC_UL1_MIMO_Mode !== undefined) {
                if (SET_MODE_SU3) return; // SU3 Set Mode에서 업데이트 차단
                const su3UlAlcMimoEl = document.getElementById("su3_ul_alc_onoff_mimo");
                if (su3UlAlcMimoEl) {
                    if (data.packet.ALC_UL1_MIMO_Mode === 1) {
                        su3UlAlcMimoEl.textContent = "ON";
                        su3UlAlcMimoEl.className = "btn btn-success btn-sm";
                    } else {
                        su3UlAlcMimoEl.textContent = "OFF";
                        su3UlAlcMimoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            updateValue("su3_mvbx_tx_gain_set_mimo", data.packet.Mvbx_TxGainSetMiso);
            updateValue("su3_mvbx_rx_gain_set_mimo", data.packet.Mvbx_RxGainSetMiso);
            updateText("su3_dl_iso_att_mimo", data.packet.SU_DlIsoAtten_MIMO + " [dB]");
            updateText("su3_ul_iso_att_mimo", data.packet.DU_UlIsoAtten_MIMO + " [dB]");

            // SU3 AOM & mmWave SISO OPTIC 업데이트 (SU1, SU2와 동일한 패턴)
            updateText("su3_ld1_det_dl0_siso", data.packet.LD1_DET_DL0_SISO + " [dBm]");
            updateText("su3_pd1_det_ul0_siso", data.packet.PD1_DET_UL0_SISO + " [dBm]");
            updateText("su3_ld3_det_dl0_siso", data.packet.LD3_DET_DL0_SISO + " [dBm]");
            updateText("su3_pd3_det_ul0_siso", data.packet.PD3_DET_UL0_SISO + " [dBm]");
            if (SET_MODE_SU3) return; // SU3 Set Mode에서 LOWER 값 업데이트 차단
            updateValue("su3_ld1_det_dl0_siso_low", data.packet.LD1_DET_DL0_SISO_Low);
            updateValue("su3_pd1_det_ul0_siso_low", data.packet.PD1_DET_UL0_SISO_Low);
            updateValue("su3_ld3_det_dl0_siso_low", data.packet.LD3_DET_DL0_SISO_Low);
            updateValue("su3_pd3_det_ul0_siso_low", data.packet.PD3_DET_UL0_SISO_Low);
            
            // SU3 AOM & mmWave MIMO OPTIC 업데이트 (SU1, SU2와 동일한 패턴)
            updateText("su3_ld2_det_dl1_mimo", data.packet.LD2_DET_DL1_MIMO + " [dBm]");
            updateText("su3_pd2_det_ul1_mimo", data.packet.PD2_DET_UL1_MIMO + " [dBm]");
            updateText("su3_ld4_det_dl1_mimo", data.packet.LD4_DET_DL1_MIMO + " [dBm]");
            updateText("su3_pd4_det_ul1_mimo", data.packet.PD4_DET_UL1_MIMO + " [dBm]");
            if (SET_MODE_SU3) return; // SU3 Set Mode에서 LOWER 값 업데이트 차단
            updateValue("su3_ld2_det_dl1_mimo_low", data.packet.LD2_DET_DL1_MIMO_Low);
            updateValue("su3_pd2_det_ul1_mimo_low", data.packet.PD2_DET_UL1_MIMO_Low);
            updateValue("su3_ld4_det_dl1_mimo_low", data.packet.LD4_DET_DL1_MIMO_Low);
            updateValue("su3_pd4_det_ul1_mimo_low", data.packet.PD4_DET_UL1_MIMO_Low);

            // SU3 gNB Type (Vendor) 업데이트 - 상태값 업데이트 제거됨

            // SU3 Beam Book 동그라미 색상 업데이트
            console.log("🎯 SU3 Beam Book 업데이트 시도:", data.packet.MVBX_BeamInfo_beamId1, data.packet.MVBX_BeamInfo_beamId2, data.packet.MVBX_BeamInfo_beamId3, data.packet.MVBX_BeamInfo_beamId4);
            // 항상 업데이트 시도 (조건 제거)
            updateSu3BeamColors({
                yellow: [data.packet.MVBX_BeamInfo_beamId1].filter(id => id >= 0),
                blue: [data.packet.MVBX_BeamInfo_beamId2, data.packet.MVBX_BeamInfo_beamId3, data.packet.MVBX_BeamInfo_beamId4].filter(id => id >= 0)
            });
            
            console.log("✅ SU3 Beam Book 색상 업데이트 완료");

            // SU3 Beam Info Orientation/Tilt 업데이트
            updateText('su3Orientation', data.packet.Orientation);
            updateText('su3Tilt', data.packet.Tilt);

            // SU3 Hidden Modal 업데이트
            updateValue("su3DlSubAtten_SISO", data.packet.DU_DlSubAtten_SISO);
            updateValue("su3DL_InputOffset_SISO", data.packet.DL_OutputOffset_SISO);
            updateValue("su3Dl_Att_Test_Siso", data.packet.Dl_Siso_Att_Test);
            updateValue("su3Ant_Out_Offset_Siso", data.packet.ApiGsOutputPowerOffsetSiso);
            updateValue("su3Ant_Output_SISO", data.packet.DsOutputPower_SISO);
            updateValue("su3Ant_Offset_UL_Siso", data.packet.GS_AttenOffset_UL_Siso);
            updateValue("su3UlSubAtten_SISO", data.packet.DU_UlSubAtten_SISO);
            updateValue("su3UL_OutputOffset_SISO", data.packet.UL_InputOffset_SISO);
            updateValue("su3Ul_Att_Test_Siso", data.packet.Ul_Siso_Att_Test);
            updateValue("su3Ant_Gain_Siso", data.packet.Gs_Gain_Siso);
            updateValue("su3Ant_Offset_DL_Siso", data.packet.GS_AttenOffset_DL_Siso);
            
            updateValue("su3DlSubAtten_MIMO", data.packet.DU_DlSubAtten_MIMO);
            updateValue("su3DL_InputOffset_MIMO", data.packet.DL_OutputOffset_MIMO);
            updateValue("su3Dl_Att_Test_Mimo", data.packet.Dl_Mimo_Att_Test);
            updateValue("su3Ant_Out_Offset_Mimo", data.packet.ApiGsOutputPowerOffsetMimo);
            updateValue("su3Ant_Output_MIMO", data.packet.DsOutputPower_MIMO);
            updateValue("su3Ant_Offset_UL_Mimo", data.packet.GS_AttenOffset_UL_Mimo);
            updateValue("su3UlSubAtten_MIMO", data.packet.DU_UlSubAtten_MIMO);
            updateValue("su3UL_OutputOffset_MIMO", data.packet.UL_InputOffset_MIMO);
            updateValue("su3UL_Att_Testl_Mimo", data.packet.Ul_Mimo_Att_Test);
            updateValue("su3Ant_Gain_Mimo", data.packet.Gs_Gain_Mimo);
            updateValue("su3Ant_Offset_DL_Mimo", data.packet.GS_AttenOffset_DL_Mimo);
            
            updateValue("su3LD1_DET_DL0_SISO_Offset", data.packet.LD1_DET_DL0_SISO_Offset);
            updateValue("su3PD1_DET_UL0_SISO_Offset", data.packet.PD1_DET_UL0_SISO_Offset);
            updateValue("su3LD3_DET_DL0_SISO_Offset", data.packet.LD3_DET_DL0_SISO_Offset);
            updateValue("su3PD3_DET_UL0_SISO_Offset", data.packet.PD3_DET_UL0_SISO_Offset);
            updateValue("su3LowRsrpLevel", data.packet.LowRsrpLevel);
            updateValue("su3LowRsrpStillTime", data.packet.LowRsrpStillTime);
            
            updateValue("su3LD2_DET_DL1_MIMO_Offset", data.packet.LD2_DET_DL1_MIMO_Offset);
            updateValue("su3PD2_DET_UL1_MIMO_Offset", data.packet.PD2_DET_UL1_MIMO_Offset);
            updateValue("su3LD4_DET_DL1_MIMO_Offset", data.packet.LD4_DET_DL1_MIMO_Offset);
            updateValue("su3PD4_DET_UL1_MIMO_Offset", data.packet.PD4_DET_UL1_MIMO_Offset);
            
            updateValue("su3conserialnum", data.packet.ConSerialNum);
            
            // Baudrate 업데이트
            let su3BaudrateText = "19200";
            if (data.packet.Mu_Su_Buadrate === 0) su3BaudrateText = "19200";
            else if (data.packet.Mu_Su_Buadrate === 1) su3BaudrateText = "38400";
            else if (data.packet.Mu_Su_Buadrate === 2) su3BaudrateText = "57600";
            else if (data.packet.Mu_Su_Buadrate === 3) su3BaudrateText = "115200";
            updateValue("su3baudrate", su3BaudrateText);
            
            // 토글 버튼 업데이트 (1=ON, 0=OFF)
            const su3AomtempToggle = document.getElementById('su3aomtemp-toggle');
            if (su3AomtempToggle) {
                su3AomtempToggle.textContent = data.packet.AomTempCompensationMode === 1 ? 'On' : 'Off';
                su3AomtempToggle.className = data.packet.AomTempCompensationMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su3AttTestToggle = document.getElementById('su3att-test-toggle');
            if (su3AttTestToggle) {
                su3AttTestToggle.textContent = data.packet.AttTestMode === 1 ? 'On' : 'Off';
                su3AttTestToggle.className = data.packet.AttTestMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su3ApiInitToggle = document.getElementById('su3api-init-toggle');
            if (su3ApiInitToggle) {
                su3ApiInitToggle.textContent = data.packet.ApiInitMode === 1 ? 'On' : 'Off';
                su3ApiInitToggle.className = data.packet.ApiInitMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su3ApiInitRetryToggle = document.getElementById('su3api-init-retry-toggle');
            if (su3ApiInitRetryToggle) {
                su3ApiInitRetryToggle.textContent = data.packet.ApiInitRetryMode === 1 ? 'On' : 'Off';
                su3ApiInitRetryToggle.className = data.packet.ApiInitRetryMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su3DebugToggle = document.getElementById('su3debug-toggle');
            if (su3DebugToggle) {
                su3DebugToggle.textContent = data.packet.DebugMode === 1 ? 'On' : 'Off';
                su3DebugToggle.className = data.packet.DebugMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            // Ant Band: 0이면 Single, 1이면 Tri
            updateText('su3antband', data.packet.ApiOldNewVer === 0 ? "Single" : (data.packet.ApiOldNewVer === 1 ? "Tri" : "N/A"));

            updateNavDotColors();
        });

        // SU4 Status Update Handler
        socket.on("su4_status_update", function (data) {
            console.log("📥 Received su4_status_update:", data.packet);
            console.log("🎯 SU4 패킷 감지! SU4 페이지 업데이트 시작");

            // SU4 Set Mode일 때는 상태 업데이트 차단
            if (SET_MODE_SU4) {
                console.log("🔒 SU4 Set Mode: 상태 업데이트 차단됨");
                return;
            }

            // SU4용 업데이트 함수 정의 (SU1, SU2, SU3과 동일)
            const updateText = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) el.innerText = value;
            };
            const updateValue = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) {
                    // SU4 Set Mode에서 편집 가능한 필드만 업데이트 방지
                    if (SET_MODE_SU4 && el.hasAttribute('data-editable')) {
                        console.log(`🔒 SU4 Set Mode: ${id} 값 업데이트 차단 (현재 값: ${el.value}, 새 값: ${value})`);
                        return;
                    }
                    el.value = value;
                    el.style.fontSize = '0.85rem';
                }
            };




            const rtpTypeText = {
                0: "DU_28G",
                1: "DU_39G", 
                2: "DU_26G"
            };

            const su4statusText = {
                0: "NONE",
                1: "ACTIVE",
                2: "SUCCESS",
                3: "FAIL"
            };


            const su4isoStatusText = {
                0: "Ready",
                1: "Measuring",
                2: "Fail",
                3: "Success"
            };

            // SU4 기본 정보 업데이트 (SU1과 동일한 패턴)
            updateText("su4_conserialnum_header", data.packet.ConSerialNum);
            updateText("su4_emsversion2", data.packet.ModEmsFwVer);
            
            // 기본 정보
            updateText("su4_McuSwVer", data.packet.McuSwVer);
            updateText("su4_rpttype", rtpTypeText[data.packet.RtpKind] || "Unknown");
            
            // 시스템 시간 및 온도
            updateText("su4_curtime", `${data.packet.System_Year} ${data.packet.System_hour}`);
            updateText("su4_curtemper", `${data.packet.SysTemper} ℃`);
            
            // SU MODE 업데이트
            if (data.packet.SuModeStatus !== undefined) {
                const suModeText = data.packet.SuModeStatus === 0 ? "Non Cascade" : "Cascade";
                updateText("su4_sumode", suModeText);
            }
            
            // SU ID 업데이트 (Set Mode가 아닐 때만)
            if (data.packet.SuId !== undefined && !SET_MODE_SU4) {
                updateValue("su4_suid", data.packet.SuId);
            }
            
            updateValue("su4_tempupper", data.packet.SysTemperHighLvl);
            updateValue("su4_templower", data.packet.SysTemperLowLvl);
            
            // Init Status 업데이트
            updateStatusBadge2("su4_fpga_init_status", data.packet.FPGA_Init_Status);

            // Modem 상태 (SU1과 동일한 패턴)
            updateText("su4_modstatus", su4statusText[data.packet.ModStatus] || "Unknown");
            updateText("su4_modimsi", data.packet.ModIMSINum);
            updateText("su4_modimei", data.packet.ModIMEINum);
            updateText("su4_modnum", data.packet.ModPhonNumber);
            updateText("su4_modip", data.packet.ModIpAddress);
            updateText("su4_rsrp", data.packet.ModRsrp + " [dBm]");
            updateText("su4_rsrq", data.packet.ModRsrq + " [dBm]");
            updateText("su4_rssi", data.packet.ModRssi + " [dBm]");
            updateText("su4_pci", data.packet.ModPci);
            updateText("su4_sinr", data.packet.ModSinr + " [dB]");
            updateText("su4_txpwr", data.packet.ModTxPwr + " [dBm]");
            updateText("su4_modver", data.packet.ModVersion);
            updateText("su4_emsversion", data.packet.ModEmsFwVer);
            updateText("su4_lan", data.packet.ModLanUseMode === 1 ? "Enable" : "Disable");

            // ISO Status
            updateText("su4_iso_status", su4isoStatusText[data.packet.DU_ISO_STATUS] ?? "N/A");

            // SU4 알람 상태 업데이트 (SU1, SU2, SU3와 동일한 방식)
            if (data.packet.AlarmStatus) {
                const alarmStatus = data.packet.AlarmStatus;
                console.log('SU4 알람 상태:', alarmStatus);
                
                // 각 알람 상태에 따라 UI 업데이트 (SU1, SU2, SU3와 동일한 패턴)
                Object.keys(alarmStatus).forEach(alarmId => {
                    const isActive = alarmStatus[alarmId] === 1;
                    console.log(`SU4 알람 업데이트: ${alarmId} = ${isActive}`);
                    updateAlarmDot(alarmId, isActive); // su4_ 접두사 제거
                });
            }


            // SU4 Beam Status 업데이트 - 삭제된 요소들의 상태값 업데이트 제거됨
            
            // SU4 Ant. Array On/Off 업데이트 (SU1과 동일한 패턴)
            const su4AntArrayEl = document.getElementById("su4_gumstick_onoff");
            if (su4AntArrayEl && !SET_MODE_SU4) {
                if (data.packet.GumStick_OnOff === 1) {
                    su4AntArrayEl.textContent = "ON";
                    su4AntArrayEl.className = "btn btn-success btn-sm";
                } else {
                    su4AntArrayEl.textContent = "OFF";
                    su4AntArrayEl.className = "btn btn-secondary btn-sm";
                }
            }
            
            // SU4 AGC On/Off 업데이트 (SU1과 동일한 패턴) - 수정 기능 제거됨
            // const su4AgcEl = document.getElementById("su4_mvbx_rsagc_mode");
            // if (su4AgcEl && !SET_MODE_SU4) {
            //     if (data.packet.Mvbx_RsAgcMode === 1) {
            //         su4AgcEl.textContent = "ON";
            //         su4AgcEl.className = "btn btn-success btn-sm";
            //     } else {
            //         su4AgcEl.textContent = "OFF";
            //         su4AgcEl.className = "btn btn-secondary btn-sm";
            //     }
            // }
            
            // SU4 AGC Level 업데이트 (SU1, SU2, SU3와 동일한 패턴)
            // updateValue("su4_mvbx_rsagc_threshold", data.packet.Mvbx_RsAgcThreshold); // 수정 기능 제거됨
            
            // SU4 AGC Input, Decoded SSB 정보 업데이트 - 삭제된 요소들의 상태값 업데이트 제거됨
            
            // SU4 AOM & mmWave SISO RF 업데이트 (SU1과 동일한 패턴)
            updateText("su4_dl_input_siso", data.packet.SISO_RF_DET_DL0_OUT + " [dBm]");
            updateValue("su4_dl_att_siso", data.packet.DU_DlManualAtten_SISO);
            updateValue("su4_dl_alc_level_siso", data.packet.ALC_DL0_SISO_Level);
            if (data.packet.ALC_DL0_SISO_Mode !== undefined) {
                const su4DlAlcSisoEl = document.getElementById("su4_dl_alc_onoff_siso");
                if (su4DlAlcSisoEl && !SET_MODE_SU4) {
                    if (data.packet.ALC_DL0_SISO_Mode === 1) {
                        su4DlAlcSisoEl.textContent = "ON";
                        su4DlAlcSisoEl.className = "btn btn-success btn-sm";
                    } else {
                        su4DlAlcSisoEl.textContent = "OFF";
                        su4DlAlcSisoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateText("su4_ul_output_siso", data.packet.SISO_RF_DET_UL0_OUT + " [dBm]");
            if (SET_MODE_SU4) return; // SU4 Set Mode에서 업데이트 차단
            updateValue("su4_ul_att_siso", data.packet.DU_UlManualAtten_SISO);
            updateValue("su4_ul_alc_level_siso", data.packet.ALC_UL0_SISO_Level);
            if (data.packet.ALC_UL0_SISO_Mode !== undefined) {
                if (SET_MODE_SU4) return; // SU4 Set Mode에서 업데이트 차단
                const su4UlAlcSisoEl = document.getElementById("su4_ul_alc_onoff_siso");
                if (su4UlAlcSisoEl) {
                    if (data.packet.ALC_UL0_SISO_Mode === 1) {
                        su4UlAlcSisoEl.textContent = "ON";
                        su4UlAlcSisoEl.className = "btn btn-success btn-sm";
                    } else {
                        su4UlAlcSisoEl.textContent = "OFF";
                        su4UlAlcSisoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateValue("su4_mvbx_tx_gain_set_siso", data.packet.Mvbx_TxGainSetSiso);
            updateValue("su4_mvbx_rx_gain_set_siso", data.packet.Mvbx_RxGainSetSiso);
            updateText("su4_dl_iso_att_siso", data.packet.SU_DlIsoAtten_SISO + " [dB]");
            updateText("su4_ul_iso_att_siso", data.packet.DU_UlIsoAtten_SISO + " [dB]");
            
            // SU4 AOM & mmWave MIMO RF 업데이트 (SU1과 동일한 패턴)
            updateText("su4_dl_input_mimo", data.packet.MIMO_RF_DET_DL1_OUT + " [dBm]");
            updateValue("su4_dl_att_mimo", data.packet.DU_DlManualAtten_MIMO);
            updateValue("su4_dl_alc_level_mimo", data.packet.ALC_DL1_MIMO_Level);
            if (data.packet.ALC_DL1_MIMO_Mode !== undefined) {
                const su4DlAlcMimoEl = document.getElementById("su4_dl_alc_onoff_mimo");
                if (su4DlAlcMimoEl && !SET_MODE_SU4) {
                    if (data.packet.ALC_DL1_MIMO_Mode === 1) {
                        su4DlAlcMimoEl.textContent = "ON";
                        su4DlAlcMimoEl.className = "btn btn-success btn-sm";
                    } else {
                        su4DlAlcMimoEl.textContent = "OFF";
                        su4DlAlcMimoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateText("su4_ul_output_mimo", data.packet.MIMO_RF_DET_UL1_OUT + " [dBm]");
            if (SET_MODE_SU4) return; // SU4 Set Mode에서 업데이트 차단
            updateValue("su4_ul_att_mimo", data.packet.DU_UlManualAtten_MIMO);
            updateValue("su4_ul_alc_level_mimo", data.packet.ALC_UL1_MIMO_Level);
            if (data.packet.ALC_UL1_MIMO_Mode !== undefined) {
                if (SET_MODE_SU4) return; // SU4 Set Mode에서 업데이트 차단
                const su4UlAlcMimoEl = document.getElementById("su4_ul_alc_onoff_mimo");
                if (su4UlAlcMimoEl) {
                    if (data.packet.ALC_UL1_MIMO_Mode === 1) {
                        su4UlAlcMimoEl.textContent = "ON";
                        su4UlAlcMimoEl.className = "btn btn-success btn-sm";
                    } else {
                        su4UlAlcMimoEl.textContent = "OFF";
                        su4UlAlcMimoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            }
            
            updateValue("su4_mvbx_tx_gain_set_mimo", data.packet.Mvbx_TxGainSetMiso);
            updateValue("su4_mvbx_rx_gain_set_mimo", data.packet.Mvbx_RxGainSetMiso);
            updateText("su4_dl_iso_att_mimo", data.packet.SU_DlIsoAtten_MIMO + " [dB]");
            updateText("su4_ul_iso_att_mimo", data.packet.DU_UlIsoAtten_MIMO + " [dB]");
            
            // SU4 AOM & mmWave SISO OPTIC 업데이트 (SU1과 동일한 패턴)
            updateText("su4_ld1_det_dl0_siso", data.packet.LD1_DET_DL0_SISO + " [dBm]");
            updateText("su4_pd1_det_ul0_siso", data.packet.PD1_DET_UL0_SISO + " [dBm]");
            updateText("su4_ld3_det_dl0_siso", data.packet.LD3_DET_DL0_SISO + " [dBm]");
            updateText("su4_pd3_det_ul0_siso", data.packet.PD3_DET_UL0_SISO + " [dBm]");
            if (SET_MODE_SU4) return; // SU4 Set Mode에서 LOWER 값 업데이트 차단
            updateValue("su4_ld1_det_dl0_siso_low", data.packet.LD1_DET_DL0_SISO_Low);
            updateValue("su4_pd1_det_ul0_siso_low", data.packet.PD1_DET_UL0_SISO_Low);
            updateValue("su4_ld3_det_dl0_siso_low", data.packet.LD3_DET_DL0_SISO_Low);
            updateValue("su4_pd3_det_ul0_siso_low", data.packet.PD3_DET_UL0_SISO_Low);
            
            // SU4 AOM & mmWave MIMO OPTIC 업데이트 (SU1과 동일한 패턴)
            updateText("su4_ld2_det_dl1_mimo", data.packet.LD2_DET_DL1_MIMO + " [dBm]");
            updateText("su4_pd2_det_ul1_mimo", data.packet.PD2_DET_UL1_MIMO + " [dBm]");
            updateText("su4_ld4_det_dl1_mimo", data.packet.LD4_DET_DL1_MIMO + " [dBm]");
            updateText("su4_pd4_det_ul1_mimo", data.packet.PD4_DET_UL1_MIMO + " [dBm]");
            if (SET_MODE_SU4) return; // SU4 Set Mode에서 LOWER 값 업데이트 차단
            updateValue("su4_ld2_det_dl1_mimo_low", data.packet.LD2_DET_DL1_MIMO_Low);
            updateValue("su4_pd2_det_ul1_mimo_low", data.packet.PD2_DET_UL1_MIMO_Low);
            updateValue("su4_ld4_det_dl1_mimo_low", data.packet.LD4_DET_DL1_MIMO_Low);
            updateValue("su4_pd4_det_ul1_mimo_low", data.packet.PD4_DET_UL1_MIMO_Low);


            // SU4 gNB Type (Vendor) 업데이트 (SU1, SU2, SU3와 동일한 패턴)
            if (typeof data.packet.gNB_Vendor === 'number') {
                let su4GnbVendorText = "Manual";
                if (data.packet.gNB_Vendor === 0) su4GnbVendorText = "Manual";
                else if (data.packet.gNB_Vendor === 1) su4GnbVendorText = "Samsung";
                else if (data.packet.gNB_Vendor === 2) su4GnbVendorText = "Nokia";
                else if (data.packet.gNB_Vendor === 3) su4GnbVendorText = "Ericsson";
                // updateValue("su4_gNB_Vendor", su4GnbVendorText); // 수정 기능 제거됨
            }
            
            // SU4 AGC Input (AGC_Input_Power) - 삭제된 요소의 상태값 업데이트 제거됨

            // SU4 Beam Book 동그라미 색상 업데이트
            console.log("🎯 SU4 Beam Book 업데이트 시도:", data.packet.MVBX_BeamInfo_beamId1, data.packet.MVBX_BeamInfo_beamId2, data.packet.MVBX_BeamInfo_beamId3, data.packet.MVBX_BeamInfo_beamId4);
            // 항상 업데이트 시도 (조건 제거)
            updateSu4BeamColors({
                yellow: [data.packet.MVBX_BeamInfo_beamId1].filter(id => id >= 0),
                blue: [data.packet.MVBX_BeamInfo_beamId2, data.packet.MVBX_BeamInfo_beamId3, data.packet.MVBX_BeamInfo_beamId4].filter(id => id >= 0)
            });
            
            console.log("✅ SU4 Beam Book 색상 업데이트 완료");

            // SU4 Beam Info Orientation/Tilt 업데이트
            updateText('su4Orientation', data.packet.Orientation);
            updateText('su4Tilt', data.packet.Tilt);

            // SU4 Hidden Modal 업데이트
            updateValue("su4DlSubAtten_SISO", data.packet.DU_DlSubAtten_SISO);
            updateValue("su4DL_InputOffset_SISO", data.packet.DL_OutputOffset_SISO);
            updateValue("su4Dl_Att_Test_Siso", data.packet.Dl_Siso_Att_Test);
            updateValue("su4Ant_Out_Offset_Siso", data.packet.ApiGsOutputPowerOffsetSiso);
            updateValue("su4Ant_Output_SISO", data.packet.DsOutputPower_SISO);
            updateValue("su4Ant_Offset_UL_Siso", data.packet.GS_AttenOffset_UL_Siso);
            updateValue("su4UlSubAtten_SISO", data.packet.DU_UlSubAtten_SISO);
            updateValue("su4UL_OutputOffset_SISO", data.packet.UL_InputOffset_SISO);
            updateValue("su4Ul_Att_Test_Siso", data.packet.Ul_Siso_Att_Test);
            updateValue("su4Ant_Gain_Siso", data.packet.Gs_Gain_Siso);
            updateValue("su4Ant_Offset_DL_Siso", data.packet.GS_AttenOffset_DL_Siso);
            
            updateValue("su4DlSubAtten_MIMO", data.packet.DU_DlSubAtten_MIMO);
            updateValue("su4DL_InputOffset_MIMO", data.packet.DL_OutputOffset_MIMO);
            updateValue("su4Dl_Att_Test_Mimo", data.packet.Dl_Mimo_Att_Test);
            updateValue("su4Ant_Out_Offset_Mimo", data.packet.ApiGsOutputPowerOffsetMimo);
            updateValue("su4Ant_Output_MIMO", data.packet.DsOutputPower_MIMO);
            updateValue("su4Ant_Offset_UL_Mimo", data.packet.GS_AttenOffset_UL_Mimo);
            updateValue("su4UlSubAtten_MIMO", data.packet.DU_UlSubAtten_MIMO);
            updateValue("su4UL_OutputOffset_MIMO", data.packet.UL_InputOffset_MIMO);
            updateValue("su4UL_Att_Testl_Mimo", data.packet.Ul_Mimo_Att_Test);
            updateValue("su4Ant_Gain_Mimo", data.packet.Gs_Gain_Mimo);
            updateValue("su4Ant_Offset_DL_Mimo", data.packet.GS_AttenOffset_DL_Mimo);
            
            updateValue("su4LD1_DET_DL0_SISO_Offset", data.packet.LD1_DET_DL0_SISO_Offset);
            updateValue("su4PD1_DET_UL0_SISO_Offset", data.packet.PD1_DET_UL0_SISO_Offset);
            updateValue("su4LD3_DET_DL0_SISO_Offset", data.packet.LD3_DET_DL0_SISO_Offset);
            updateValue("su4PD3_DET_UL0_SISO_Offset", data.packet.PD3_DET_UL0_SISO_Offset);
            updateValue("su4LowRsrpLevel", data.packet.LowRsrpLevel);
            updateValue("su4LowRsrpStillTime", data.packet.LowRsrpStillTime);
            
            updateValue("su4LD2_DET_DL1_MIMO_Offset", data.packet.LD2_DET_DL1_MIMO_Offset);
            updateValue("su4PD2_DET_UL1_MIMO_Offset", data.packet.PD2_DET_UL1_MIMO_Offset);
            updateValue("su4LD4_DET_DL1_MIMO_Offset", data.packet.LD4_DET_DL1_MIMO_Offset);
            updateValue("su4PD4_DET_UL1_MIMO_Offset", data.packet.PD4_DET_UL1_MIMO_Offset);
            
            updateValue("su4conserialnum", data.packet.ConSerialNum);
            
            // Baudrate 업데이트
            let su4BaudrateText = "19200";
            if (data.packet.Mu_Su_Buadrate === 0) su4BaudrateText = "19200";
            else if (data.packet.Mu_Su_Buadrate === 1) su4BaudrateText = "38400";
            else if (data.packet.Mu_Su_Buadrate === 2) su4BaudrateText = "57600";
            else if (data.packet.Mu_Su_Buadrate === 3) su4BaudrateText = "115200";
            updateValue("su4baudrate", su4BaudrateText);
            
            // 토글 버튼 업데이트 (1=ON, 0=OFF)
            const su4AomtempToggle = document.getElementById('su4aomtemp-toggle');
            if (su4AomtempToggle) {
                su4AomtempToggle.textContent = data.packet.AomTempCompensationMode === 1 ? 'On' : 'Off';
                su4AomtempToggle.className = data.packet.AomTempCompensationMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su4AttTestToggle = document.getElementById('su4att-test-toggle');
            if (su4AttTestToggle) {
                su4AttTestToggle.textContent = data.packet.AttTestMode === 1 ? 'On' : 'Off';
                su4AttTestToggle.className = data.packet.AttTestMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su4ApiInitToggle = document.getElementById('su4api-init-toggle');
            if (su4ApiInitToggle) {
                su4ApiInitToggle.textContent = data.packet.ApiInitMode === 1 ? 'On' : 'Off';
                su4ApiInitToggle.className = data.packet.ApiInitMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su4ApiInitRetryToggle = document.getElementById('su4api-init-retry-toggle');
            if (su4ApiInitRetryToggle) {
                su4ApiInitRetryToggle.textContent = data.packet.ApiInitRetryMode === 1 ? 'On' : 'Off';
                su4ApiInitRetryToggle.className = data.packet.ApiInitRetryMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            const su4DebugToggle = document.getElementById('su4debug-toggle');
            if (su4DebugToggle) {
                su4DebugToggle.textContent = data.packet.DebugMode === 1 ? 'On' : 'Off';
                su4DebugToggle.className = data.packet.DebugMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            
            // Ant Band: 0이면 Single, 1이면 Tri
            updateText('su4antband', data.packet.ApiOldNewVer === 0 ? "Single" : (data.packet.ApiOldNewVer === 1 ? "Tri" : "N/A"));

        });

        // RX 박스 켜기
        socket.on("rx_on", function () {
            document.querySelectorAll('.rx-box').forEach(rxbox => {
                rxbox.style.backgroundColor = 'yellow';
                rxbox.style.color = 'black';
            });
            console.log("🟡 RX Box: ON");
        });

        // RX 박스 끄기
        socket.on("rx_off", function () {
            document.querySelectorAll('.rx-box').forEach(rxbox => {
                rxbox.style.backgroundColor = rxBoxState.originalBg;
                rxbox.style.color = rxBoxState.originalColor;
            });
            console.log("⚫ RX Box: OFF");
        });

        // TX 박스 켜기
        socket.on("tx_on", function () {
                    document.querySelectorAll('.tx-box').forEach(txbox => {
            txbox.style.backgroundColor = 'yellow';  // RX와 동일한 노란색
            txbox.style.color = 'black';
        });
            console.log("🟡 TX Box: ON");
        });

        // TX 박스 끄기
        socket.on("tx_off", function () {
            document.querySelectorAll('.tx-box').forEach(txbox => {
                txbox.style.backgroundColor = txBoxState.originalBg;
                txbox.style.color = txBoxState.originalColor;
            });
            console.log("⚫ TX Box: OFF");
        });

        socket.on("tdd_status", function (data) {
            // Set Mode 중이면 실시간 업데이트 중단 (스냅샷만 허용)
            // if (!LIVE_UPDATES && !SNAPSHOT_PENDING) {
            //     console.log('🔒 tdd_status blocked: Set Mode active and no snapshot pending');
            //     return;
            // }

            const updateValue = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) {
                    // Set Mode에서는 값 업데이트 방지 (사용자가 편집 중인 값 덮어쓰기 방지)
                    if (SET_MODE && el.hasAttribute('data-editable')) {
                        console.log(`🔒 Set Mode: ${id} 값 업데이트 차단 (현재 값: ${el.value}, 새 값: ${value})`);
                        return;
                    }
                    
                    console.log(`📝 updateValue: ${id} = ${value} (SET_MODE: ${SET_MODE})`);
                    el.value = value;
                    // ID 값 출력 시 텍스트 크기 조정
                    el.style.fontSize = '0.85rem';
                }
            };

            
            // Sync Module 데이터 업데이트
            updateSyncModuleData(data);
            
            // TDD Setup 업데이트
            // Frequency 업데이트 (서버에서 이미 변환된 값)
            if (data.packet.TDD_Freq) {
                updateValue("TDD_Freq", data.packet.TDD_Freq);
            }

            // ARFCN 업데이트 (Range: 2054166~2104165)
            if (data.packet.TDD_Arfcn) {
                updateValue("TDD_Arfcn", data.packet.TDD_Arfcn);
            }

            // SSB MU 업데이트 (비트값 0이면120K, 1이면240K)
            const ssbMuSelect = document.getElementById("MvbxSsbMu");
            if (ssbMuSelect && data.packet.MvbxSsbMu !== undefined) {
                if (data.packet.MvbxSsbMu === 0) {
                    ssbMuSelect.value = "120K";
                } else if (data.packet.MvbxSsbMu === 1) {
                    ssbMuSelect.value = "240K";
                }
            }

            // TDD Rate 업데이트 (비트값 0이면 3:1, 1이면 4:1)
            const tddRateSelect = document.getElementById("MvbxTddRate");
            if (tddRateSelect && data.packet.MvbxTddRate !== undefined) {
                if (data.packet.MvbxTddRate === 0) {
                    tddRateSelect.value = "3:1";
                } else if (data.packet.MvbxTddRate === 1) {
                    tddRateSelect.value = "4:1";
                }
            }

        });

        // ------- 서버가 보내주는 파싱 완료 패킷 수신 (UI 업데이트) -------
        socket.on("update_status", function (data) {
            // 섹션별 차단은 updateValue에서 처리 (각 필드별로 독립적 차단)
            
            console.log("📥 Received update_status:", data.packet);
            console.log("📊 Packet type - rcvMainSys:", data.packet.rcvMainSys);
            
            // SU1은 기존 방식 그대로 (HTML에서 직접 su1_ 접두어 사용)
            // updateValue는 개별 필드별로 호출되어야 함

            // SuLinkFailBits 처리 (1비트씩)
            if (data.packet.SuLinkFailBits) {
                const bits = data.packet.SuLinkFailBits;
                
                // 전역 변수에 저장하여 updateNavDotColors에서 사용할 수 있도록 함
                window.currentSuLinkFailBits = bits;
                
                // SU1 링크 알람 (1비트: 0=정상, 1=링크페일알람)
                const su1Dot = document.querySelector('#su1-link-dot');
                if (su1Dot) {
                    su1Dot.className = 'status-dot';
                    if (bits.SU1_LINK_FAIL === 0) {
                        su1Dot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU1_LINK_FAIL === 1) {
                        su1Dot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su1Dot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU2 링크 알람
                const su2Dot = document.querySelector('#su2-link-dot');
                if (su2Dot) {
                    su2Dot.className = 'status-dot';
                    if (bits.SU2_LINK_FAIL === 0) {
                        su2Dot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU2_LINK_FAIL === 1) {
                        su2Dot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su2Dot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU3 링크 알람
                const su3Dot = document.querySelector('#su3-link-dot');
                if (su3Dot) {
                    su3Dot.className = 'status-dot';
                    if (bits.SU3_LINK_FAIL === 0) {
                        su3Dot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU3_LINK_FAIL === 1) {
                        su3Dot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su3Dot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU4 링크 알람
                const su4Dot = document.querySelector('#su4-link-dot');
                if (su4Dot) {
                    su4Dot.className = 'status-dot';
                    if (bits.SU4_LINK_FAIL === 0) {
                        su4Dot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU4_LINK_FAIL === 1) {
                        su4Dot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su4Dot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // 네비게이션 점 색상 업데이트
                updateNavDotColors();
                
                // SU Link Fail 버튼 상태 업데이트
                updateSuLinkFailButtons(bits);
            }
            
            // Mask SU Link Fail 버튼 상태 업데이트
            if (data.packet.MaskSuLinkFail) {
                updateSuLinkFailButtons(data.packet.MaskSuLinkFail);
            }
            
            // DL ALC 버튼 상태 업데이트
            if (data.packet.DL_ALC_Bits) {
                updateDLALCButtons(data.packet.DL_ALC_Bits);
            }

            // DET MASK 버튼 상태 업데이트
            if (data.packet.DET_MASK_Bits) {
                updateDETMASKButtons(data.packet.DET_MASK_Bits);
            }

            const updateText = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) el.innerText = value;
            };
            const updateButtonText = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) {
                    if (value === 1) {
                        el.innerText = "ON";
                        el.className = "btn btn-success btn-sm";
                    } else {
                        el.innerText = "OFF";
                        el.className = "btn btn-secondary btn-sm";
                    }
                }
            };
            const updateValue = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) {
                            // 섹션별 Set Mode에서 편집 가능한 필드만 업데이트 방지
        const isSu1 = id.startsWith('su1_');
        const isSync = id.startsWith('tsync_') || id.startsWith('TDD_') || id.startsWith('F_') || id.startsWith('ssb_') || id.startsWith('tdd_');
        const editLock = (isSu1 ? SET_MODE_SU1 : (isSync ? SYNC_SET_MODE : SET_MODE));
        
        if (editLock && el.hasAttribute('data-editable')) {
            console.log(`🔒 ${isSu1 ? 'SU1' : (isSync ? 'Sync' : 'DU')} Set Mode: ${id} 값 업데이트 차단 (현재 값: ${el.value}, 새 값: ${value})`);
            return;
        }
                    
                    console.log(`📝 updateValue: ${id} = ${value} (DU_SET_MODE: ${SET_MODE}, SU1_SET_MODE: ${SET_MODE_SU1})`);
                    el.value = value;
                    // ID 값 출력 시 텍스트 크기 조정
                    el.style.fontSize = '0.85rem';
                }
            };

            const statusText = {
                0: "NONE",
                1: "ACTIVE",
                2: "SUCCESS",
                3: "FAIL"
            };

            /*

            const decodeText = (arr) => {
                try {
                    return new TextDecoder().decode(new Uint8Array(arr)).replace(/\x00/g, "").trim() || "N/A";
                } catch (e) {
                    console.error("Decode Error:", e);
                    return "N/A";
                }
            };

            const parseVersion = (arr) => {
                if (arr && arr.length === 2) {
                    return `${arr[0]}.${arr[1].toString().padStart(2, "0")}`;
                }
                return "N/A";
            };

            */

            // DU System 페이지 업데이트 (rcvMainSys = 0x30)
            updateText("McuSwVer", data.packet.McuSwVer);
            updateText("modipaddress", data.packet.ModIpAddress);

            updateText("McuSwVer2", data.packet.McuSwVer);

            updateText("FPGA_Ver", data.packet.FPGA_Ver);

            const rtpTypeText = {
            0: "DU_28G",
            1: "DU_39G",
            2: "DU_26G"
            };

            updateText("rpttype", rtpTypeText[data.packet.RtpKind] || "Unknown");

            // cur_time, cur_temper

            if (data.packet.System_Year && data.packet.System_hour) {
            updateText("curtime", `${data.packet.System_Year} ${data.packet.System_hour}`);
            }

            if (data.packet.SysTemper !== undefined) {
            updateText("curtemper", `${data.packet.SysTemper} ℃`);
            }
            
                            if (data.packet.SysTemperHighLvl !== undefined) {
                    updateValue("tempupper", data.packet.SysTemperHighLvl);
                }
            
                            if (data.packet.SysTemperLowLvl !== undefined) {
                    updateValue("templower", data.packet.SysTemperLowLvl);
                }

            // SU1 페이지 업데이트 (Rcv_Main_Sys = 0x40)
            if (data.packet.Rcv_Main_Sys === 0x40) {
                console.log("🎯 SU1 패킷 감지! SU1 페이지 업데이트 시작");

                updateText("su1_conserialnum_header", data.packet.ConSerialNum);
                updateText("su1_emsversion2", data.packet.ModEmsFwVer);
                
                // 기본 정보
                updateText("su1_McuSwVer", data.packet.McuSwVer);
                updateText("su1_rpttype", rtpTypeText[data.packet.RtpKind] || "Unknown");
                
                // 시스템 시간 및 온도
                updateText("su1_curtime", `${data.packet.System_Year} ${data.packet.System_hour}`);
                updateText("su1_curtemper", `${data.packet.SysTemper} ℃`);
                updateValue("su1_tempupper", data.packet.SysTemperHighLvl);
                updateValue("su1_templower", data.packet.SysTemperLowLvl);
                
            // SU MODE 업데이트
            if (data.packet.SuModeStatus !== undefined) {
                const suModeText = data.packet.SuModeStatus === 0 ? "Non Cascade" : "Cascade";
                updateText("su1_sumode", suModeText);
            }
            
            // SU ID 업데이트 (Set Mode가 아닐 때만)
            if (data.packet.SuId !== undefined && !SET_MODE_SU1) {
                updateValue("su1_suid", data.packet.SuId);
            }
                
                // Init Status 업데이트
                updateStatusBadge2("su1_InitStatus", data.packet.FPGA_Init_Status);
                
                // Cascade Mode 업데이트 (Set Mode가 아닐 때만)
                console.log("🔍 SU1 SuEndMode 체크:", data.packet.SuEndMode, "SET_MODE_SU1:", SET_MODE_SU1);
                if (data.packet.SuEndMode !== undefined) {
                    if (SET_MODE_SU1) {
                        console.log("🔒 SU1 Set Mode - Cascade Mode 업데이트 차단");
                        return; // SU1 Set Mode에서 업데이트 차단
                    }
                    const su1CascadeModeEl = document.getElementById("su1_cascade_mode");
                    console.log("🔍 SU1 Cascade Mode 요소:", su1CascadeModeEl);
                    if (su1CascadeModeEl) {
                        if (data.packet.SuEndMode === 1) {
                            su1CascadeModeEl.textContent = "ON";
                            su1CascadeModeEl.className = "btn btn-success btn-sm";
                            console.log("✅ SU1 Cascade Mode를 ON으로 설정");
                        } else {
                            su1CascadeModeEl.textContent = "OFF";
                            su1CascadeModeEl.className = "btn btn-secondary btn-sm";
                            console.log("✅ SU1 Cascade Mode를 OFF로 설정");
                        }
                    } else {
                        console.log("❌ SU1 Cascade Mode 요소를 찾을 수 없음");
                    }
                } else {
                    console.log("❌ SU1 SuEndMode가 undefined");
                }
                
                // Modem 상태
                updateText("su1_modstatus", statusText[data.packet.ModStatus] || "Unknown");
                updateText("su1_modimsi", data.packet.ModIMSINum);
                updateText("su1_modimei", data.packet.ModIMEINum);
                updateText("su1_modnum", data.packet.ModPhonNumber);
                updateText("su1_modip", data.packet.ModIpAddress);
                updateText("su1_rsrp", data.packet.ModRsrp + " [dBm]");
                updateText("su1_rsrq", data.packet.ModRsrq + " [dBm]");
                updateText("su1_rssi", data.packet.ModRssi + " [dBm]");
                updateText("su1_pci", data.packet.ModPci);
                updateText("su1_sinr", data.packet.ModSinr + " [dB]");
                updateText("su1_txpwr", data.packet.ModTxPwr + " [dBm]");
                updateText("su1_modver", data.packet.ModVersion);
                updateText("su1_emsversion", data.packet.ModEmsFwVer);
                updateText("su1_lan", data.packet.ModLanUseMode === 1 ? "Enable" : "Disable");
                
                // ISO 상태 (Ready/Measuring/Fail/Success 표시)
                const su1isoStatusText = {
                    0: "Ready",
                    1: "Measuring", 
                    2: "Fail",
                    3: "Success"
                };
                updateText("su1_iso_status", su1isoStatusText[data.packet.DU_ISO_STATUS] ?? "N/A");

                // SU1 알람 상태 업데이트는 alarm_status_update 이벤트에서 처리
            
                
                // SU1 Beam Status 업데이트 - 삭제된 요소들의 상태값 업데이트 제거됨
                
                // SU1 Ant. Array On/Off 업데이트 (DU와 동일한 패턴)
                const antArrayEl = document.getElementById("su1_ant_array_onoff");
                if (antArrayEl) {
                    if (data.packet.Ant_Array_OnOff === 1) {
                        antArrayEl.textContent = "ON";
                        antArrayEl.className = "btn btn-success btn-sm";
                    } else {
                        antArrayEl.textContent = "OFF";
                        antArrayEl.className = "btn btn-secondary btn-sm";
                    }
                }
                
                // SU1 AGC On/Off 업데이트 (DU와 동일한 패턴)
                const agcEl = document.getElementById("su1_agc_onoff");
                if (agcEl) {
                    if (data.packet.AGC_OnOff === 1) {
                        agcEl.textContent = "ON";
                        agcEl.className = "btn btn-success btn-sm";
                    } else {
                        agcEl.textContent = "OFF";
                        agcEl.className = "btn btn-secondary btn-sm";
                    }
                }
                
                // SU1 AGC Level 업데이트 - 상태값 업데이트 제거됨
                
                // SU1 AGC Input, Decoded SSB 정보 업데이트 - 삭제된 요소들의 상태값 업데이트 제거됨
                
                // SU1 AOM & mmWave SISO RF 업데이트 (DU와 동일한 패턴)
                updateText("su1_dl_input_siso", data.packet.SISO_RF_DET_DL0_OUT + " [dBm]");
                updateValue("su1_dl_att_siso", data.packet.DU_DlManualAtten_SISO);
                updateValue("su1_dl_alc_level_siso", data.packet.ALC_DL0_SISO_Level);
                if (data.packet.ALC_DL0_SISO_Mode !== undefined) {
                    if (SET_MODE_SU1) return; // SU1 Set Mode에서 업데이트 차단
                    const dlAlcSisoEl = document.getElementById("su1_dl_alc_onoff_siso");
                    if (dlAlcSisoEl) {
                        if (data.packet.ALC_DL0_SISO_Mode === 1) {
                            dlAlcSisoEl.textContent = "ON";
                            dlAlcSisoEl.className = "btn btn-success btn-sm";
                        } else {
                            dlAlcSisoEl.textContent = "OFF";
                            dlAlcSisoEl.className = "btn btn-secondary btn-sm";
                        }
                    }
                }
                
                updateText("su1_ul_output_siso", data.packet.SISO_RF_DET_UL0_OUT + " [dBm]");
                updateValue("su1_ul_att_siso", data.packet.DU_UlManualAtten_SISO);
                updateValue("su1_ul_alc_level_siso", data.packet.ALC_UL0_SISO_Level);
                if (data.packet.ALC_UL0_SISO_Mode !== undefined) {
                    if (SET_MODE_SU1) return; // SU1 Set Mode에서 업데이트 차단
                    const ulAlcSisoEl = document.getElementById("su1_ul_alc_onoff_siso");
                    if (ulAlcSisoEl) {
                        if (data.packet.ALC_UL0_SISO_Mode === 1) {
                            ulAlcSisoEl.textContent = "ON";
                            ulAlcSisoEl.className = "btn btn-success btn-sm";
                        } else {
                            ulAlcSisoEl.textContent = "OFF";
                            ulAlcSisoEl.className = "btn btn-secondary btn-sm";
                        }
                    }
                }
                
                updateValue("su1_mvbx_tx_gain_set_siso", data.packet.Mvbx_TxGainSetSiso);
                updateValue("su1_mvbx_rx_gain_set_siso", data.packet.Mvbx_RxGainSetSiso);
                updateText("su1_dl_iso_att_siso", data.packet.SU_DlIsoAtten_SISO + " [dB]");
                updateText("su1_ul_iso_att_siso", data.packet.DU_UlIsoAtten_SISO + " [dB]");
                
                // SU1 AOM & mmWave MIMO RF 업데이트 (DU와 동일한 패턴)
                updateText("su1_dl_input_mimo", data.packet.MIMO_RF_DET_DL1_OUT + " [dBm]");
                updateValue("su1_dl_att_mimo", data.packet.DU_DlManualAtten_MIMO);
                updateValue("su1_dl_alc_level_mimo", data.packet.ALC_DL1_MIMO_Level);
                if (data.packet.ALC_DL1_MIMO_Mode !== undefined) {
                    if (SET_MODE_SU1) return; // SU1 Set Mode에서 업데이트 차단
                    const dlAlcMimoEl = document.getElementById("su1_dl_alc_onoff_mimo");
                    if (dlAlcMimoEl) {
                        if (data.packet.ALC_DL1_MIMO_Mode === 1) {
                            dlAlcMimoEl.textContent = "ON";
                            dlAlcMimoEl.className = "btn btn-success btn-sm";
                        } else {
                            dlAlcMimoEl.textContent = "OFF";
                            dlAlcMimoEl.className = "btn btn-secondary btn-sm";
                        }
                    }
                }
                
                updateText("su1_ul_output_mimo", data.packet.MIMO_RF_DET_UL1_OUT + " [dBm]");
                updateValue("su1_ul_att_mimo", data.packet.DU_UlManualAtten_MIMO);
                updateValue("su1_ul_alc_level_mimo", data.packet.ALC_UL1_MIMO_Level);
                if (data.packet.ALC_UL1_MIMO_Mode !== undefined) {
                    if (SET_MODE_SU1) return; // SU1 Set Mode에서 업데이트 차단
                    const ulAlcMimoEl = document.getElementById("su1_ul_alc_onoff_mimo");
                    if (ulAlcMimoEl) {
                        if (data.packet.ALC_UL1_MIMO_Mode === 1) {
                            ulAlcMimoEl.textContent = "ON";
                            ulAlcMimoEl.className = "btn btn-success btn-sm";
                        } else {
                            ulAlcMimoEl.textContent = "OFF";
                            ulAlcMimoEl.className = "btn btn-secondary btn-sm";
                        }
                    }
                }
                
                updateValue("su1_mvbx_tx_gain_set_mimo", data.packet.Mvbx_TxGainSetMiso);
                updateValue("su1_mvbx_rx_gain_set_mimo", data.packet.Mvbx_RxGainSetMiso);
                updateText("su1_dl_iso_att_mimo", data.packet.SU_DlIsoAtten_MIMO + " [dB]");
                updateText("su1_ul_iso_att_mimo", data.packet.DU_UlIsoAtten_MIMO + " [dB]");
                
                // SU1 AOM & mmWave SISO OPTIC 업데이트 (DU와 동일한 패턴)
                updateText("su1_ld1_det_dl0_siso", data.packet.LD1_DET_DL0_SISO + " [dBm]");
                updateText("su1_pd1_det_ul0_siso", data.packet.PD1_DET_UL0_SISO + " [dBm]");
                updateText("su1_ld3_det_dl0_siso", data.packet.LD3_DET_DL0_SISO + " [dBm]");
                updateText("su1_pd3_det_ul0_siso", data.packet.PD3_DET_UL0_SISO + " [dBm]");
                if (SET_MODE_SU1) return; // SU1 Set Mode에서 LOWER 값 업데이트 차단
                updateValue("su1_ld1_det_dl0_siso_low", data.packet.LD1_DET_DL0_SISO_Low);
                updateValue("su1_pd1_det_ul0_siso_low", data.packet.PD1_DET_UL0_SISO_Low);
                updateValue("su1_ld3_det_dl0_siso_low", data.packet.LD3_DET_DL0_SISO_Low);
                updateValue("su1_pd3_det_ul0_siso_low", data.packet.PD3_DET_UL0_SISO_Low);
                
                // SU1 AOM & mmWave MIMO OPTIC 업데이트 (DU와 동일한 패턴)
                updateText("su1_ld2_det_dl1_mimo", data.packet.LD2_DET_DL1_MIMO + " [dBm]");
                updateText("su1_pd2_det_ul1_mimo", data.packet.PD2_DET_UL1_MIMO + " [dBm]");
                updateText("su1_ld4_det_dl1_mimo", data.packet.LD4_DET_DL1_MIMO + " [dBm]");
                updateText("su1_pd4_det_ul1_mimo", data.packet.PD4_DET_UL1_MIMO + " [dBm]");
                if (SET_MODE_SU1) return; // SU1 Set Mode에서 LOWER 값 업데이트 차단
                updateValue("su1_ld2_det_dl1_mimo_low", data.packet.LD2_DET_DL1_MIMO_Low);
                updateValue("su1_pd2_det_ul1_mimo_low", data.packet.PD2_DET_UL1_MIMO_Low);
                updateValue("su1_ld4_det_dl1_mimo_low", data.packet.LD4_DET_DL1_MIMO_Low);
                updateValue("su1_pd4_det_ul1_mimo_low", data.packet.PD4_DET_UL1_MIMO_Low);
                
                // SU1 gNB Type (Vendor) 업데이트 - 상태값 업데이트 제거됨

                // SU1 Ant. Array On/Off (GumStick_OnOff) - DU와 동일 로직
                if (SET_MODE_SU1) return; // SU1 Set Mode에서 업데이트 차단
                const su1GumstickOnOffEl = document.getElementById("su1_gumstick_onoff");
                if (su1GumstickOnOffEl) {
                    if (data.packet.GumStick_OnOff === 1) {
                        su1GumstickOnOffEl.textContent = "ON";
                        su1GumstickOnOffEl.className = "btn btn-success btn-sm";
                    } else {
                        su1GumstickOnOffEl.textContent = "OFF";
                        su1GumstickOnOffEl.className = "btn btn-secondary btn-sm";
                    }
                }

                // SU1 AGC On/Off (Mvbx_RsAgcMode) - 상태값 업데이트 제거됨

                // SU1 AGC Level (Mvbx_RsAgcThreshold) - 상태값 업데이트 제거됨

                // SU1 AGC Input (AGC_Input_Power) - 삭제된 요소의 상태값 업데이트 제거됨

                // SU1 ALC DL0 SISO On/Off (1=ON, 0=OFF) - DU와 동일 로직
                if (SET_MODE_SU1) return; // SU1 Set Mode에서 업데이트 차단
                const su1AlcDl0SisoOnOffEl = document.getElementById("su1_dl_alc_onoff_siso");
                if (su1AlcDl0SisoOnOffEl) {
                    if (data.packet.ALC_DL0_SISO_Mode === 1) {
                        su1AlcDl0SisoOnOffEl.textContent = "On";
                        su1AlcDl0SisoOnOffEl.className = "btn btn-success btn-sm";
                    } else {
                        su1AlcDl0SisoOnOffEl.textContent = "Off";
                        su1AlcDl0SisoOnOffEl.className = "btn btn-secondary btn-sm";
                    }
                }
                
                // SU1 ALC DL1 MIMO On/Off (1=ON, 0=OFF) - DU와 동일 로직
                if (SET_MODE_SU1) return; // SU1 Set Mode에서 업데이트 차단
                const su1AlcDl1MimoOnOffEl = document.getElementById("su1_dl_alc_onoff_mimo");
                if (su1AlcDl1MimoOnOffEl) {
                    if (data.packet.ALC_DL1_MIMO_Mode === 1) {
                        su1AlcDl1MimoOnOffEl.textContent = "On";
                        su1AlcDl1MimoOnOffEl.className = "btn btn-success btn-sm";
                    } else {
                        su1AlcDl1MimoOnOffEl.textContent = "Off";
                        su1AlcDl1MimoOnOffEl.className = "btn btn-secondary btn-sm";
                    }
                }
                
                // SU1 Ant Select 업데이트
                updateValue('su1AntSelect', data.packet.BeamAntSelect);
                
                console.log("✅ SU1 페이지 업데이트 완료");
            }


            //Modem Status 화면

            updateText("modstatus", statusText[data.packet.ModStatus] || "Unknown");
            updateText("modimsi", data.packet.ModIMSINum);
            updateText("modimei", data.packet.ModIMEINum);
            updateText("modnum", data.packet.ModPhonNumber);
            updateText("rsrp", data.packet.ModRsrp + " [dBm]");
            updateText("rsrq", data.packet.ModRsrq + " [dBm]");
            updateText("rssi", data.packet.ModRssi + " [dBm]");
            updateText("pci", data.packet.ModPci);
            updateText("sinr", data.packet.ModSinr + " [dB]");
            updateText("txpwr", data.packet.ModTxPwr + " [dBm]");
            updateText("modver", data.packet.ModVersion);
            updateText("emsversion", data.packet.ModEmsFwVer);
            updateText("emsversion2", data.packet.ModEmsFwVer);
            updateText("emsversion2_packet", data.packet.ModEmsFwVer);
            updateText("modip", data.packet.ModIpAddress);
            updateText("lan", data.packet.ModLanUseMode === 1 ? "Enable" : "Disable");
            
            
            // Baudrate: 0=19200bps, 1=38400bps, 2=57600bps, 3=115200bps
            let baudrateText = "N/A";
            if (data.packet.Mu_Su_Buadrate === 0) baudrateText = "19200";
            else if (data.packet.Mu_Su_Buadrate === 1) baudrateText = "38400";
            else if (data.packet.Mu_Su_Buadrate === 2) baudrateText = "57600";
            else if (data.packet.Mu_Su_Buadrate === 3) baudrateText = "115200";
            updateValue("baudrate", baudrateText);
            
            // Polling Time 업데이트
            updateValue("pollingtime", data.packet.PollingTime);
            
            // Ant Band: 0이면 Single, 1이면 Tri
            updateText("antband", data.packet.ApiOldNewVer === 0 ? "Single" : (data.packet.ApiOldNewVer === 1 ? "Tri" : "N/A"));
            
            // 토글 버튼 업데이트 (1=ON, 0=OFF)
            // AOM Temp
            const aomTempToggle = document.getElementById('aomtemp-toggle');
            if (aomTempToggle) {
                if (data.packet.AomTemperConperMode === 1) {
                    updateText('aomtemp-toggle', 'On');
                    aomTempToggle.className = 'btn-toggle on';
                } else {
                    updateText('aomtemp-toggle', 'Off');
                    aomTempToggle.className = 'btn-toggle off';
                }
            }
            
            // Att Test
            const attTestToggle = document.getElementById('att-test-toggle');
            if (attTestToggle) {
                if (data.packet.AttTestMode === 1) {
                    updateText('att-test-toggle', 'On');
                    attTestToggle.className = 'btn-toggle on';
                } else {
                    updateText('att-test-toggle', 'Off');
                    attTestToggle.className = 'btn-toggle off';
                }
            }
            
            // Api Init
            const apiInitToggle = document.getElementById('api-init-toggle');
            if (apiInitToggle) {
                if (data.packet.ApiInitMode === 1) {
                    updateText('api-init-toggle', 'On');
                    apiInitToggle.className = 'btn-toggle on';
                } else {
                    updateText('api-init-toggle', 'Off');
                    apiInitToggle.className = 'btn-toggle off';
                }
            }
            
            // Api Init Retry
            const apiInitRetryToggle = document.getElementById('api-init-retry-toggle');
            if (apiInitRetryToggle) {
                if (data.packet.ApiInitRetryMode === 1) {
                    updateText('api-init-retry-toggle', 'On');
                    apiInitRetryToggle.className = 'btn-toggle on';
                } else {
                    updateText('api-init-retry-toggle', 'Off');
                    apiInitRetryToggle.className = 'btn-toggle off';
                }
            }
            
            // Debug
            const debugToggle = document.getElementById('debug-toggle');
            if (debugToggle) {
                if (data.packet.DebugMode === 1) {
                    updateText('debug-toggle', 'On');
                    debugToggle.className = 'btn-toggle on';
                } else {
                    updateText('debug-toggle', 'Off');
                    debugToggle.className = 'btn-toggle off';
                }
            }
            // Modem
            const modemToggle = document.getElementById('modem-toggle');
            if (modemToggle) {
                if (data.packet.ModemOnOff === 1) {
                    updateText('modem-toggle', 'On');
                    modemToggle.className = 'btn-toggle on';
                } else {
                    updateText('modem-toggle', 'Off');
                    modemToggle.className = 'btn-toggle off';
                }
            }
            

            /*
            const parseFloat32 = (bytes) => {
                try {
                    if (!Array.isArray(bytes) || bytes.length !== 4) return "N/A";
                    const buffer = new ArrayBuffer(4);
                    const view = new DataView(buffer);
                    for (let i = 0; i < 4; i++) {
                        view.setUint8(i, bytes[i]);
                    }
                    return view.getFloat32(0, true); // little-endian
                } catch (e) {
                    console.error("Float parse error:", e);
                    return "N/A";
                }
            };
            */
        

            updateText("mvbx_beamset", data.packet.Mvbx_BeamSet);
            updateText("mvbx_pci", data.packet.MVBX_pci);
            updateText("mvbx_ssb", data.packet.MVBX_ssb);
            updateText("mvbx_rsrp", data.packet.MVBX_rsrp);
            updateText("mvbx_snr", data.packet.MVBX_snr);

            // SISO RF
            updateText("dl_input_siso", data.packet.SISO_RF_DET_DL0_OUT + " [dBm]");
                            updateValue("dl_att_siso", data.packet.DU_DlManualAtten_SISO);
                updateValue("dl_alc_level_siso", data.packet.ALC_DL0_SISO_Level);
            updateText("ul_input_siso", data.packet.SISO_RF_DET_UL0_OUT + " [dBm]");
                            updateValue("ul_att_siso", data.packet.DU_UlManualAtten_SISO);
                updateValue("ul_iso_level_siso", data.packet.ALC_UL0_SISO_Level);
                            updateValue("mvbx_tx_gain_set_siso", data.packet.Mvbx_TxGainSetSiso);
                console.log("🔍 DU mvbx_rx_gain_set_siso 업데이트:", data.packet.Mvbx_RxGainSetSiso);
                updateValue("mvbx_rx_gain_set_siso", data.packet.Mvbx_RxGainSetSiso);
            updateText("ul_iso_att_siso", data.packet.DU_UlIsoAtten_SISO + " [dB]");

            // MIMO RF
            updateText("dl_input_mimo", data.packet.MIMO_RF_DET_DL1_OUT + " [dBm]");
                            updateValue("dl_att_mimo", data.packet.DU_DlManualAtten_MIMO);
                updateValue("dl_alc_level_mimo", data.packet.ALC_DL1_MIMO_Level);
            updateText("ul_input_mimo", data.packet.MIMO_RF_DET_UL1_OUT + " [dBm]");
                            updateValue("ul_att_mimo", data.packet.DU_UlManualAtten_MIMO);
                updateValue("ul_iso_level_mimo", data.packet.ALC_UL1_MIMO_Level);
                            updateValue("mvbx_tx_gain_set_miso", data.packet.Mvbx_TxGainSetMiso);
                updateValue("mvbx_rx_gain_set_mimo", data.packet.Mvbx_RxGainSetMiso);
            updateText("ul_iso_att_mimo", data.packet.DU_UlIsoAtten_MIMO + " [dB]");

            // RF Configuration Fields Update
            console.log("RF Configuration Data:", data.packet);
            
            // SISO RF Fields
            console.log("DU_DlSubAtten_SISO:", data.packet.DU_DlSubAtten_SISO);
            updateValue("DlSubAtten_SISO", data.packet.DU_DlSubAtten_SISO);
            updateValue("UlSubAtten_SISO", data.packet.DU_UlSubAtten_SISO);
            updateValue("DL_InputOffset_SISO", data.packet.DL_OutputOffset_SISO);
            updateValue("UL_OutputOffset_SISO", data.packet.UL_InputOffset_SISO);
            updateValue("Dl_Att_Test_Siso", data.packet.Dl_Siso_Att_Test);
            updateValue("Ul_Att_Test_Siso", data.packet.Ul_Siso_Att_Test);
            updateValue("Ant_Gain_Siso", data.packet.Gs_Gain_Siso);
            updateValue("Ant_Output_SISO", data.packet.DsOutputPower_SISO);
            updateValue("Ant_Out_Offset_Siso", data.packet.ApiGsOutputPowerOffsetSiso);
            updateValue("Ant_Offset_DL_Siso", data.packet.GS_AttenOffset_DL_Siso);
            updateValue("Ant_Offset_UL_Siso", data.packet.GS_AttenOffset_UL_Siso);

            // MIMO RF Fields
            updateValue("DlSubAtten_MIMO", data.packet.DU_DlSubAtten_MIMO);
            updateValue("UlSubAtten_MIMO", data.packet.DU_UlSubAtten_MIMO);
            updateValue("DL_InputOffset_MIMO", data.packet.DL_OutputOffset_MIMO);
            updateValue("UL_OutputOffset_MIMO", data.packet.UL_InputOffset_MIMO);
            updateValue("Dl_Att_Test_Mimo", data.packet.Dl_Mimo_Att_Test);
            updateValue("U_Att_Testl_Mimo", data.packet.Ul_Mimo_Att_Test);
            updateValue("Ant_Gain_Mimo", data.packet.Gs_Gain_Mimo);
            updateValue("Ant_Output_MIMO", data.packet.DsOutputPower_MIMO);
            updateValue("Ant_Out_Offset_Mimo", data.packet.ApiGsOutputPowerOffsetMimo);
            updateValue("Ant_Offset_DL_Mimo", data.packet.GS_AttenOffset_DL_Mimo);
            updateValue("Ant_Offset_UL_Mimo", data.packet.GS_AttenOffset_UL_Mimo);

            // Optic Configuration Fields Update
            // SISO Optic Fields
            updateValue("LD1_DET_DL0_SISO_Offset", data.packet.LD1_DET_DL0_SISO_Offset);
            updateValue("PD1_DET_UL0_SISO_Offset", data.packet.PD1_DET_UL0_SISO_Offset);
            updateValue("LD3_DET_DL0_SISO_Offset", data.packet.LD3_DET_DL0_SISO_Offset);
            updateValue("PD3_DET_UL0_SISO_Offset", data.packet.PD3_DET_UL0_SISO_Offset);
            updateValue("RsrpOffset", data.packet.RsrpOffset);
            updateValue("LowRsrpLevel", data.packet.LowRsrpLevel);
            updateValue("LowRsrpStillTime", data.packet.LowRsrpStillTime);

            // MIMO Optic Fields
            updateValue("LD2_DET_DL1_MIMO_Offset", data.packet.LD2_DET_DL1_MIMO_Offset);
            updateValue("PD2_DET_UL1_MIMO_Offset", data.packet.PD2_DET_UL1_MIMO_Offset);
            updateValue("LD4_DET_DL1_MIMO_Offset", data.packet.LD4_DET_DL1_MIMO_Offset);
            updateValue("PD4_DET_UL1_MIMO_Offset", data.packet.PD4_DET_UL1_MIMO_Offset);

            

            //siso optic
            updateText("ld1_det_dl0_siso", data.packet.LD1_DET_DL0_SISO + " [dBm]");
            updateText("ld2_det_dl1_mimo", data.packet.LD2_DET_DL1_MIMO + " [dBm]");
            updateText("pd1_det_ul0_siso", data.packet.PD1_DET_UL0_SISO + " [dBm]");
            updateText("pd2_det_ul1_mimo", data.packet.PD2_DET_UL1_MIMO + " [dBm]");
            
            //mimo optic
                            updateValue("ld1_det_dl0_siso_low", data.packet.LD1_DET_DL0_SISO_Low);
                updateValue("ld2_det_dl1_mimo_low", data.packet.LD2_DET_DL1_MIMO_Low);
                updateValue("pd1_det_ul0_siso_low", data.packet.PD1_DET_UL0_SISO_Low);
                updateValue("pd2_det_ul1_mimo_low", data.packet.PD2_DET_UL1_MIMO_Low);


            if (data.packet.AlarmStatus) {
                // 서버에서 계산된 알람 상태 사용
                const alarmStatus = data.packet.AlarmStatus;
                
                // 각 알람 상태에 따라 UI 업데이트
                Object.keys(alarmStatus).forEach(alarmId => {
                    const isActive = alarmStatus[alarmId] === 1;
                    updateAlarmDot(alarmId, isActive);
                });
                
                // DU 알람 상태 계산 (클라이언트에서 계산)
                const hasAnyAlarm = Object.values(alarmStatus).some(status => status === 1);
                currentDuAlarmStatus = hasAnyAlarm ? 1 : 0;
            }

            updateStatusBadge1("FpgaStatus", data.packet.FPGA_Boot_Status);
            updateStatusBadge2("InitStatus", data.packet.FPGA_Init_Status);
            updateStatusBadge3("ScanStatus", data.packet.Beam_Scan_Status);




            updateValue("Mvbx_RsAgcThreshold", data.packet.Mvbx_RsAgcThreshold);
            updateValue("conserialnum", data.packet.ConSerialNum);
            updateText("conserialnum_header", data.packet.ConSerialNum);
            updateText("conserialnum_header_packet", data.packet.ConSerialNum);

            // Decoded SSB 정보 업데이트
            updateText("decoded_ssb_count", data.packet.decoded_ssb_count);
            updateText("decoded_ssb_no_error_count", data.packet.decoded_ssb_no_error_count);
            updateText("DecodedRate", data.packet.DecodedRate + " [%]");

            const duIsoStatusText = {
                0: "Ready",
                1: "Measuring",
                2: "Fail",
                3: "Success"
            };
            


            
            updateText("du_iso_status", duIsoStatusText[data.packet.DU_ISO_STATUS] ?? "N/A");
        

                            // 1. Ant. Array On/Off (GumStick_OnOff)
                if (SET_MODE) return; // Set Mode에서 업데이트 차단
                const gumstickOnOffEl = document.getElementById("gumstick_onoff");
                if (gumstickOnOffEl) {
                    if (data.packet.GumStick_OnOff === 1) {
                        gumstickOnOffEl.textContent = "ON";
                        gumstickOnOffEl.className = "btn btn-success btn-sm";
                    } else {
                        gumstickOnOffEl.textContent = "OFF";
                        gumstickOnOffEl.className = "btn btn-secondary btn-sm";
                    }
                }

                            // 2. AGC On/Off (Mvbx_RsAgcMode)
                if (SET_MODE) return; // Set Mode에서 업데이트 차단
                const mvbxRsagcModeEl = document.getElementById("mvbx_rsagc_mode");
                if (mvbxRsagcModeEl) {
                    if (data.packet.Mvbx_RsAgcMode === 1) {
                        mvbxRsagcModeEl.textContent = "ON";
                        mvbxRsagcModeEl.className = "btn btn-success btn-sm";
                    } else {
                        mvbxRsagcModeEl.textContent = "OFF";
                        mvbxRsagcModeEl.className = "btn btn-secondary btn-sm";
                    }
                }

                            // 3. AGC Level (Mvbx_RsAgcThreshold)
                let agcLevel = data.packet.Mvbx_RsAgcThreshold;
                if (agcLevel === -999) {
                    updateValue("mvbx_rsagc_threshold", "- - -");
                } else {
                    updateValue("mvbx_rsagc_threshold", agcLevel);
                }

            // 4. AGC Input (AGC_Input_Power)
            updateText("agc_input_power", data.packet.AGC_Input_Power + " dBm");

            // ALC DL0 SISO Mode (1=ON, 0=OFF)
                if (SET_MODE) return; // Set Mode에서 업데이트 차단
                const alcDl0SisoEl = document.getElementById("alc_dl0_siso_mode");
                if (alcDl0SisoEl) {
                    if (data.packet.ALC_DL0_SISO_Mode === 1) {
                        alcDl0SisoEl.textContent = "ON";
                        alcDl0SisoEl.className = "btn btn-success btn-sm";
                    } else {
                        alcDl0SisoEl.textContent = "OFF";
                        alcDl0SisoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            
            // ALC DL1 MIMO Mode (1=ON, 0=OFF)
                if (SET_MODE) return; // Set Mode에서 업데이트 차단
                const alcDl1MimoEl = document.getElementById("alc_dl1_mimo_mode");
                if (alcDl1MimoEl) {
                    if (data.packet.ALC_DL1_MIMO_Mode === 1) {
                        alcDl1MimoEl.textContent = "ON";
                        alcDl1MimoEl.className = "btn btn-success btn-sm";
                    } else {
                        alcDl1MimoEl.textContent = "OFF";
                        alcDl1MimoEl.className = "btn btn-secondary btn-sm";
                    }
                }

            // gNB Type: 0=Manual, 1=Samsung, 2=Nokia, 3=Ericsson
            console.log('gNB_Vendor data:', data.packet.gNB_Vendor);
            let gNBVendorText = "Manual"; // 기본값
            if (data.packet.gNB_Vendor === 0) gNBVendorText = "Manual";
            else if (data.packet.gNB_Vendor === 1) gNBVendorText = "Samsung";
            else if (data.packet.gNB_Vendor === 2) gNBVendorText = "Nokia";
            else if (data.packet.gNB_Vendor === 3) gNBVendorText = "Ericsson";
            console.log('gNBVendorText:', gNBVendorText);
            
            // 메인 화면의 gNB_Vendor 업데이트
            updateValue("gNB_Vendor", gNBVendorText);
            
            // 모달의 gNB_Vendor_1 업데이트
            updateValue("gNB_Vendor_1", gNBVendorText);
            
            // AGC On/Off 업데이트 (1=ON, 0=OFF)
            const agcModeEl2 = document.getElementById("Mvbx_RsAgcMode2");
            if (agcModeEl2) {
                if (data.packet.Mvbx_RsAgcMode === 1) {
                    agcModeEl2.textContent = "ON";
                    agcModeEl2.className = "btn btn-success btn-sm w-100";
                } else {
                    agcModeEl2.textContent = "OFF";
                    agcModeEl2.className = "btn btn-secondary btn-sm w-100";
                }
            }
            
            // AGC Level 업데이트 (Range:-60~-100, Step:1)
            updateValue("Mvbx_RsAgcThreshold2", data.packet.Mvbx_RsAgcThreshold);

            

            updateText('antArrayVer', data.packet.Gumstick_Ver);
            // Temper Comp 스위치 업데이트 (1=ON, 0=OFF)
            const temperCompEl = document.getElementById("temperComp");
            if (temperCompEl) {
                if (data.packet.TemperCompensationMode === 1) {
                    temperCompEl.textContent = "ON";
                    temperCompEl.className = "btn btn-sm btn-success";
                } else {
                    temperCompEl.textContent = "OFF";
                    temperCompEl.className = "btn btn-sm btn-secondary";
                }
            }
            updateText('startTemper', data.packet.Gumstick_StartTemper + '℃');
            updateText('curTemper', data.packet.Gumstick_CurTemper + '℃');
            updateText('compensationDL', data.packet.DlTemperCompensation + 'dB');
            updateText('compensationUL', data.packet.UlTemperCompensation + 'dB');
            updateText('mvbxMv2850TxGainSiso', data.packet.Mvbx_Mv2850TxGainSiso);
            updateText('mvbxMv2850RxGainSiso', data.packet.Mvbx_Mv2850RxGainSiso);
            updateText('mvbxMv2853TxGainSiso', data.packet.Mvbx_Mv2853TxGainSiso);
            updateText('mvbxMv2853RxGainSiso', data.packet.Mvbx_Mv2853RxGainSiso);
            updateText('mvbxMv2850TxGainMimo', data.packet.Mvbx_Mv2850TxGainMimo);
            updateText('mvbxMv2850RxGainMimo', data.packet.Mvbx_Mv2850RxGainMimo);
            updateText('mvbxMv2853TxGainMimo', data.packet.Mvbx_Mv2853TxGainMimo);
            updateText('mvbxMv2853RxGainMimo', data.packet.Mvbx_Mv2853RxGainMimo);
            updateText('mvbxBeamInfoBeamId1', data.packet.MVBX_BeamInfo_beamId1);
            updateText('mvbxBeamInfoBeamId2', data.packet.MVBX_BeamInfo_beamId2);
            updateText('mvbxBeamInfoBeamId3', data.packet.MVBX_BeamInfo_beamId3);
            updateText('mvbxBeamInfoBeamId4', data.packet.MVBX_BeamInfo_beamId4);
            updateText('mvbxBeamInfoPci1', data.packet.MVBX_BeamInfo_pci1);
            updateText('mvbxBeamInfoPci2', data.packet.MVBX_BeamInfo_pci2);
            updateText('mvbxBeamInfoPci3', data.packet.MVBX_BeamInfo_pci3);
            updateText('mvbxBeamInfoPci4', data.packet.MVBX_BeamInfo_pci4);
            updateText('mvbxBeamInfoSsbldx1', data.packet.MVBX_BeamInfo_ssbldx1);
            updateText('mvbxBeamInfoSsbldx2', data.packet.MVBX_BeamInfo_ssbldx2);
            updateText('mvbxBeamInfoSsbldx3', data.packet.MVBX_BeamInfo_ssbldx3);
            updateText('mvbxBeamInfoSsbldx4', data.packet.MVBX_BeamInfo_ssbldx4);
            updateText('mvbxBeamInfoEnergy1', data.packet.MVBX_BeamInfo_energy1);
            updateText('mvbxBeamInfoEnergy2', data.packet.MVBX_BeamInfo_energy2);
            updateText('mvbxBeamInfoEnergy3', data.packet.MVBX_BeamInfo_energy3);
            updateText('mvbxBeamInfoEnergy4', data.packet.MVBX_BeamInfo_energy4);
            updateText('mvbxBeamInfoPsstype1', data.packet.MVBX_BeamInfo_psstype1);
            updateText('mvbxBeamInfoPsstype2', data.packet.MVBX_BeamInfo_psstype2);
            updateText('mvbxBeamInfoPsstype3', data.packet.MVBX_BeamInfo_psstype3);
            updateText('mvbxBeamInfoPsstype4', data.packet.MVBX_BeamInfo_psstype4);
            updateText('mvbxBeamInfoSnr1', data.packet.MVBX_BeamInfo_snr1);
            updateText('mvbxBeamInfoSnr2', data.packet.MVBX_BeamInfo_snr2);
            updateText('mvbxBeamInfoSnr3', data.packet.MVBX_BeamInfo_snr3);
            updateText('mvbxBeamInfoSnr4', data.packet.MVBX_BeamInfo_snr4);
            updateText('mvbxBeamInfoRsrp1', data.packet.MVBX_BeamInfo_rsrp1);
            updateText('mvbxBeamInfoRsrp2', data.packet.MVBX_BeamInfo_rsrp2);
            updateText('mvbxBeamInfoRsrp3', data.packet.MVBX_BeamInfo_rsrp3);
            updateText('mvbxBeamInfoRsrp4', data.packet.MVBX_BeamInfo_rsrp4);
            updateText('pllRelockCount', data.packet.PllRelockCount);
            updateValue('centerFrequency', data.packet.ApiVenderFreq);
            updateValue('beamFix', data.packet.DuFixBeam === 0 ? 'AUTO' : 'FIX');
            updateValue('apiLogLevel', data.packet.ApiLogLevel);
            
            // Beam Info Modal 추가 업데이트
            // Beam Retry 스위치 업데이트 (1=ON, 0=OFF)
            const beamRetryEl = document.getElementById("beamRetrySwitch");
            if (beamRetryEl) {
                if (data.packet.BeamScan_OnOff === 1) {
                    beamRetryEl.textContent = "ON";
                    beamRetryEl.className = "btn btn-sm ms-auto btn-success";
                } else {
                    beamRetryEl.textContent = "OFF";
                    beamRetryEl.className = "btn btn-sm ms-auto btn-secondary";
                }
            }
            
            // Decode AGC 스위치 업데이트 (1=ON, 0=OFF)
            const decodeAGCEl = document.getElementById("decodeAGCSwitch");
            if (decodeAGCEl) {
                if (data.packet.DecodeRecoveryFuncOnOff === 1) {
                    decodeAGCEl.textContent = "ON";
                    decodeAGCEl.className = "btn btn-sm ms-auto btn-success";
                } else {
                    decodeAGCEl.textContent = "OFF";
                    decodeAGCEl.className = "btn btn-sm ms-auto btn-secondary";
                }
            }
            updateText('retryCount', data.packet.TryBeamScanCont);
            updateValue('apiAdcSel', data.packet.ApiAdcSel);
            updateValue('syncPathGain', data.packet.ApiSyncPathGain);
            updateValue('duTimeAdvance', data.packet.ApiDuTimeAdvance);
            updateValue('suTimeAdvance', data.packet.ApiSuTimeAdvance);
            updateValue('orientationActual', data.packet.Actual_Orientation);
            updateValue('tiltActual', data.packet.Actual_Tilt);
            updateText('orientation', data.packet.Orientation);
            updateText('tilt', data.packet.Tilt);
            updateText('Actual_Orientation', data.packet.Actual_Orientation);
            updateText('Actual_Tilt', data.packet.Actual_Tilt);
            updateValue('du-name', data.packet.ConSerialNum);

            // Sync Module S/N과 EMS ver 업데이트
            updateText('conserialnum_sync2', data.packet.ConSerialNum);
            updateText('emsversion2_sync2', data.packet.ModEmsFwVer);

        

            // Packet 전송횟수와 응답횟수 업데이트
            if (data.packet.PackSendCount && data.packet.PackErrorCount) {
                // Cascade 1~4 업데이트 (각 cascade당 전송횟수 4바이트, 응답횟수 4바이트)
                for (let i = 1; i <= 4; i++) {
                    const sendCount = data.packet.PackSendCount[i-1] || 0;
                    const errorCount = data.packet.PackErrorCount[i-1] || 0;
                    updateText(`packet_cascade${i}`, `${sendCount} / ${errorCount}`);
                }
            }

                          // SU Enable 버튼 상태 업데이트
              const su1EnableBtn = document.getElementById('su1-enable-btn');
              const su2EnableBtn = document.getElementById('su2-enable-btn');
              const su3EnableBtn = document.getElementById('su3-enable-btn');
              const su4EnableBtn = document.getElementById('su4-enable-btn');
  
              // SU Info 필드들
              const su1NameField = document.getElementById('su1-name');
              const su1LatField = document.getElementById('su1-latitude');
              const su1LonField = document.getElementById('su1-longitude');
              
              const su2NameField = document.getElementById('su2-name');
              const su2LatField = document.getElementById('su2-latitude');
              const su2LonField = document.getElementById('su2-longitude');
              
              const su3NameField = document.getElementById('su3-name');
              const su3LatField = document.getElementById('su3-latitude');
              const su3LonField = document.getElementById('su3-longitude');
              
              const su4NameField = document.getElementById('su4-name');
              const su4LatField = document.getElementById('su4-latitude');
              const su4LonField = document.getElementById('su4-longitude');
  
              if (su1EnableBtn) {
                  su1EnableBtn.textContent = "#1 Enable";
                  su1EnableBtn.className = "btn btn-success btn-sm";
                  if (su1NameField) {
                      su1NameField.disabled = false;
                      su1NameField.style.backgroundColor = "white";
                  }
                  if (su1LatField) {
                      su1LatField.disabled = false;
                      su1LatField.style.backgroundColor = "white";
                  }
                  if (su1LonField) {
                      su1LonField.disabled = false;
                      su1LonField.style.backgroundColor = "white";
                  }
              }
              if (su2EnableBtn) {
                  if (data.packet.SuEnableBits && data.packet.SuEnableBits.SU2_ENABLE === 1) {
                      su2EnableBtn.textContent = "#2 Enable";
                      su2EnableBtn.className = "btn btn-success btn-sm";
                      if (su2NameField) {
                          su2NameField.disabled = false;
                          su2NameField.style.backgroundColor = "white";
                      }
                      if (su2LatField) {
                          su2LatField.disabled = false;
                          su2LatField.style.backgroundColor = "white";
                      }
                      if (su2LonField) {
                          su2LonField.disabled = false;
                          su2LonField.style.backgroundColor = "white";
                      }
                  } else {
                      su2EnableBtn.textContent = "#2 Disable";
                      su2EnableBtn.className = "btn btn-secondary btn-sm";
                      if (su2NameField) {
                          su2NameField.disabled = true;
                          su2NameField.style.backgroundColor = "#e9ecef";
                      }
                      if (su2LatField) {
                          su2LatField.disabled = true;
                          su2LatField.style.backgroundColor = "#e9ecef";
                      }
                      if (su2LonField) {
                          su2LonField.disabled = true;
                          su2LonField.style.backgroundColor = "#e9ecef";
                      }
                  }
              }
              if (su3EnableBtn) {
                  if (data.packet.SuEnableBits && data.packet.SuEnableBits.SU3_ENABLE === 1) {
                      su3EnableBtn.textContent = "#3 Enable";
                      su3EnableBtn.className = "btn btn-success btn-sm";
                      if (su3NameField) {
                          su3NameField.disabled = false;
                          su3NameField.style.backgroundColor = "white";
                      }
                      if (su3LatField) {
                          su3LatField.disabled = false;
                          su3LatField.style.backgroundColor = "white";
                      }
                      if (su3LonField) {
                          su3LonField.disabled = false;
                          su3LonField.style.backgroundColor = "white";
                      }
                  } else {
                      su3EnableBtn.textContent = "#3 Disable";
                      su3EnableBtn.className = "btn btn-secondary btn-sm";
                      if (su3NameField) {
                          su3NameField.disabled = true;
                          su3NameField.style.backgroundColor = "#e9ecef";
                      }
                      if (su3LatField) {
                          su3LatField.disabled = true;
                          su3LatField.style.backgroundColor = "#e9ecef";
                      }
                      if (su3LonField) {
                          su3LonField.disabled = true;
                          su3LonField.style.backgroundColor = "#e9ecef";
                      }
                  }
              }
              if (su4EnableBtn) {
                  if (data.packet.SuEnableBits && data.packet.SuEnableBits.SU4_ENABLE === 1) {
                      su4EnableBtn.textContent = "#4 Enable";
                      su4EnableBtn.className = "btn btn-success btn-sm";
                      if (su4NameField) {
                          su4NameField.disabled = false;
                          su4NameField.style.backgroundColor = "white";
                      }
                      if (su4LatField) {
                          su4LatField.disabled = false;
                          su4LatField.style.backgroundColor = "white";
                      }
                      if (su4LonField) {
                          su4LonField.disabled = false;
                          su4LonField.style.backgroundColor = "white";
                      }
                  } else {
                      su4EnableBtn.textContent = "#4 Disable";
                      su4EnableBtn.className = "btn btn-secondary btn-sm";
                      if (su4NameField) {
                          su4NameField.disabled = true;
                          su4NameField.style.backgroundColor = "#e9ecef";
                      }
                      if (su4LatField) {
                          su4LatField.disabled = true;
                          su4LatField.style.backgroundColor = "#e9ecef";
                      }
                      if (su4LonField) {
                          su4LonField.disabled = true;
                          su4LonField.style.backgroundColor = "#e9ecef";
                      }
                  }
              }
            
        
            
            // Beam Book 동그라미 색상 업데이트 (app.py에서 파싱한 데이터 사용)
            // 항상 업데이트 시도 (조건 제거)
                updateBeamColors({
                yellow: [data.packet.MVBX_BeamInfo_beamId1].filter(id => id >= 0),
                blue: [data.packet.MVBX_BeamInfo_beamId2, data.packet.MVBX_BeamInfo_beamId3, data.packet.MVBX_BeamInfo_beamId4].filter(id => id >= 0)
            });
            

            // SU1 Beam Book 동그라미 색상 업데이트 (SU1용)
            // 항상 업데이트 시도 (조건 제거)
            updateSu1BeamColors({
                yellow: [data.packet.MVBX_BeamInfo_beamId1].filter(id => id >= 0),
                blue: [data.packet.MVBX_BeamInfo_beamId2, data.packet.MVBX_BeamInfo_beamId3, data.packet.MVBX_BeamInfo_beamId4].filter(id => id >= 0)
            });

            // SU1 Hidden Modal 업데이트
            updateValue("su1DlSubAtten_SISO", data.packet.DU_DlSubAtten_SISO);
            updateValue("su1DL_InputOffset_SISO", data.packet.DL_OutputOffset_SISO);
            updateValue("su1Dl_Att_Test_Siso", data.packet.Dl_Siso_Att_Test);
            updateValue("su1Ant_Out_Offset_Siso", data.packet.ApiGsOutputPowerOffsetSiso);
            updateValue("su1Ant_Output_SISO", data.packet.DsOutputPower_SISO);
            updateValue("su1Ant_Offset_UL_Siso", data.packet.GS_AttenOffset_UL_Siso);
            updateValue("su1UlSubAtten_SISO", data.packet.DU_UlSubAtten_SISO);
            updateValue("su1UL_OutputOffset_SISO", data.packet.UL_InputOffset_SISO);
            updateValue("su1Ul_Att_Test_Siso", data.packet.Ul_Siso_Att_Test);
            updateValue("su1Ant_Gain_Siso", data.packet.Gs_Gain_Siso);
            updateValue("su1Ant_Offset_DL_Siso", data.packet.GS_AttenOffset_DL_Siso);
            updateValue("su1DlSubAtten_MIMO", data.packet.DU_DlSubAtten_MIMO);
            updateValue("su1DL_InputOffset_MIMO", data.packet.DL_OutputOffset_MIMO);
            updateValue("su1Dl_Att_Test_Mimo", data.packet.Dl_Mimo_Att_Test);
            updateValue("su1Ant_Out_Offset_Mimo", data.packet.ApiGsOutputPowerOffsetMimo);
            updateValue("su1Ant_Output_MIMO", data.packet.DsOutputPower_MIMO);
            updateValue("su1Ant_Offset_UL_Mimo", data.packet.GS_AttenOffset_UL_Mimo);
            updateValue("su1UlSubAtten_MIMO", data.packet.DU_UlSubAtten_MIMO);
            updateValue("su1UL_OutputOffset_MIMO", data.packet.UL_InputOffset_MIMO);
            updateValue("su1UL_Att_Testl_Mimo", data.packet.Ul_Mimo_Att_Test);
            updateValue("su1Ant_Gain_Mimo", data.packet.Gs_Gain_Mimo);
            updateValue("su1Ant_Offset_DL_Mimo", data.packet.GS_AttenOffset_DL_Mimo);
            updateValue("su1LD1_DET_DL0_SISO_Offset", data.packet.LD1_DET_DL0_SISO_Offset);
            updateValue("su1PD1_DET_UL0_SISO_Offset", data.packet.PD1_DET_UL0_SISO_Offset);
            updateValue("su1LD3_DET_DL0_SISO_Offset", data.packet.LD3_DET_DL0_SISO_Offset);
            updateValue("su1PD3_DET_UL0_SISO_Offset", data.packet.PD3_DET_UL0_SISO_Offset);
            updateValue("su1LowRsrpLevel", data.packet.LowRsrpLevel);
            updateValue("su1LowRsrpStillTime", data.packet.LowRsrpStillTime);
            updateValue("su1LD2_DET_DL1_MIMO_Offset", data.packet.LD2_DET_DL1_MIMO_Offset);
            updateValue("su1PD2_DET_UL1_MIMO_Offset", data.packet.PD2_DET_UL1_MIMO_Offset);
            updateValue("su1LD4_DET_DL1_MIMO_Offset", data.packet.LD4_DET_DL1_MIMO_Offset);
            updateValue("su1PD4_DET_UL1_MIMO_Offset", data.packet.PD4_DET_UL1_MIMO_Offset);
            updateValue("su1conserialnum", data.packet.ConSerialNum);
            updateValue("su1baudrate", data.packet.Mu_Su_Buadrate === 0 ? "19200" : data.packet.Mu_Su_Buadrate === 1 ? "38400" : data.packet.Mu_Su_Buadrate === 2 ? "57600" : "115200");
            
            // SU1 Hidden Modal 토글 버튼 업데이트
            const su1AomtempToggle = document.getElementById('su1aomtemp-toggle');
            if (su1AomtempToggle) {
                su1AomtempToggle.textContent = data.packet.AomTempCompensationMode === 1 ? 'On' : 'Off';
                su1AomtempToggle.className = data.packet.AomTempCompensationMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            const su1AttTestToggle = document.getElementById('su1att-test-toggle');
            if (su1AttTestToggle) {
                su1AttTestToggle.textContent = data.packet.AttTestMode === 1 ? 'On' : 'Off';
                su1AttTestToggle.className = data.packet.AttTestMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            const su1ApiInitToggle = document.getElementById('su1api-init-toggle');
            if (su1ApiInitToggle) {
                su1ApiInitToggle.textContent = data.packet.ApiInitMode === 1 ? 'On' : 'Off';
                su1ApiInitToggle.className = data.packet.ApiInitMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            const su1ApiInitRetryToggle = document.getElementById('su1api-init-retry-toggle');
            if (su1ApiInitRetryToggle) {
                su1ApiInitRetryToggle.textContent = data.packet.ApiInitRetryMode === 1 ? 'On' : 'Off';
                su1ApiInitRetryToggle.className = data.packet.ApiInitRetryMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            const su1DebugToggle = document.getElementById('su1debug-toggle');
            if (su1DebugToggle) {
                su1DebugToggle.textContent = data.packet.DebugMode === 1 ? 'On' : 'Off';
                su1DebugToggle.className = data.packet.DebugMode === 1 ? 'btn-toggle on' : 'btn-toggle off';
            }
            // Ant Band: 0이면 Single, 1이면 Tri
            updateText('su1antband', data.packet.ApiOldNewVer === 0 ? "Single" : (data.packet.ApiOldNewVer === 1 ? "Tri" : "N/A"));

            // SU1 Beam Info Orientation/Tilt 업데이트
            updateText('su1Orientation', data.packet.Orientation);
            updateText('su1Tilt', data.packet.Tilt);


            // SU1 Beam Info Modal 업데이트 (SU1 전용 ID 사용)
            updateText('su1AntArrayVer', data.packet.Gumstick_Ver);
            // SU1 Temper Comp 스위치 업데이트 (1=ON, 0=OFF)
            const su1TemperCompEl = document.getElementById("su1TemperComp");
            if (su1TemperCompEl) {
                if (data.packet.TemperCompensationMode === 1) {
                    su1TemperCompEl.textContent = "ON";
                    su1TemperCompEl.className = "btn btn-sm btn-success";
                } else {
                    su1TemperCompEl.textContent = "OFF";
                    su1TemperCompEl.className = "btn btn-sm btn-secondary";
                }
            }
            updateText('su1StartTemper', data.packet.Gumstick_StartTemper + '℃');
            updateText('su1CurTemper', data.packet.Gumstick_CurTemper + '℃');
            updateText('su1CompensationDL', data.packet.DlTemperCompensation + 'dB');
            updateText('su1CompensationUL', data.packet.UlTemperCompensation + 'dB');

            // SU1 SISO/MIMO Tx/Rx Gain Setting 업데이트
            updateText('su1MvbxMv2850TxGainSiso', data.packet.Mvbx_Mv2850TxGainSiso);
            updateText('su1MvbxMv2850RxGainSiso', data.packet.Mvbx_Mv2850RxGainSiso);
            updateText('su1MvbxMv2853TxGainSiso', data.packet.Mvbx_Mv2853TxGainSiso);
            updateText('su1MvbxMv2853RxGainSiso', data.packet.Mvbx_Mv2853RxGainSiso);
            updateText('su1MvbxMv2850TxGainMimo', data.packet.Mvbx_Mv2850TxGainMimo);
            updateText('su1MvbxMv2850RxGainMimo', data.packet.Mvbx_Mv2850RxGainMimo);
            updateText('su1MvbxMv2853TxGainMimo', data.packet.Mvbx_Mv2853TxGainMimo);
            updateText('su1MvbxMv2853RxGainMimo', data.packet.Mvbx_Mv2853RxGainMimo);

            // SU1 Beam Info 테이블 업데이트
            updateText('su1MvbxBeamInfoBeamId1', data.packet.MVBX_BeamInfo_beamId1);
            updateText('su1MvbxBeamInfoBeamId2', data.packet.MVBX_BeamInfo_beamId2);
            updateText('su1MvbxBeamInfoBeamId3', data.packet.MVBX_BeamInfo_beamId3);
            updateText('su1MvbxBeamInfoBeamId4', data.packet.MVBX_BeamInfo_beamId4);
            updateText('su1MvbxBeamInfoPci1', data.packet.MVBX_BeamInfo_pci1);
            updateText('su1MvbxBeamInfoPci2', data.packet.MVBX_BeamInfo_pci2);
            updateText('su1MvbxBeamInfoPci3', data.packet.MVBX_BeamInfo_pci3);
            updateText('su1MvbxBeamInfoPci4', data.packet.MVBX_BeamInfo_pci4);
            updateText('su1MvbxBeamInfoSsbldx1', data.packet.MVBX_BeamInfo_ssbldx1);
            updateText('su1MvbxBeamInfoSsbldx2', data.packet.MVBX_BeamInfo_ssbldx2);
            updateText('su1MvbxBeamInfoSsbldx3', data.packet.MVBX_BeamInfo_ssbldx3);
            updateText('su1MvbxBeamInfoSsbldx4', data.packet.MVBX_BeamInfo_ssbldx4);
            updateText('su1MvbxBeamInfoEnergy1', data.packet.MVBX_BeamInfo_energy1);
            updateText('su1MvbxBeamInfoEnergy2', data.packet.MVBX_BeamInfo_energy2);
            updateText('su1MvbxBeamInfoEnergy3', data.packet.MVBX_BeamInfo_energy3);
            updateText('su1MvbxBeamInfoEnergy4', data.packet.MVBX_BeamInfo_energy4);
            updateText('su1MvbxBeamInfoPsstype1', data.packet.MVBX_BeamInfo_psstype1);
            updateText('su1MvbxBeamInfoPsstype2', data.packet.MVBX_BeamInfo_psstype2);
            updateText('su1MvbxBeamInfoPsstype3', data.packet.MVBX_BeamInfo_psstype3);
            updateText('su1MvbxBeamInfoPsstype4', data.packet.MVBX_BeamInfo_psstype4);
            updateText('su1MvbxBeamInfoSnr1', data.packet.MVBX_BeamInfo_snr1);
            updateText('su1MvbxBeamInfoSnr2', data.packet.MVBX_BeamInfo_snr2);
            updateText('su1MvbxBeamInfoSnr3', data.packet.MVBX_BeamInfo_snr3);
            updateText('su1MvbxBeamInfoSnr4', data.packet.MVBX_BeamInfo_snr4);
            updateText('su1MvbxBeamInfoRsrp1', data.packet.MVBX_BeamInfo_rsrp1);
            updateText('su1MvbxBeamInfoRsrp2', data.packet.MVBX_BeamInfo_rsrp2);
            updateText('su1MvbxBeamInfoRsrp3', data.packet.MVBX_BeamInfo_rsrp3);
            updateText('su1MvbxBeamInfoRsrp4', data.packet.MVBX_BeamInfo_rsrp4);

            // SU1 Beam Scan 카드 업데이트
            updateText('su1PllRelockCount', data.packet.PllRelockCount);
            updateValue('su1CenterFrequency', data.packet.ApiVenderFreq);
            updateValue('su1BeamFix', data.packet.DuFixBeam === 0 ? 'AUTO' : 'FIX');
            updateValue('su1ApiLogLevel', data.packet.ApiLogLevel);
            updateValue('su1OrientationActual', data.packet.Actual_Orientation);
            updateValue('su1TiltActual', data.packet.Actual_Tilt);

            // SU2 Beam Info Modal 업데이트 (SU2 전용 ID 사용)
            updateText('su2AntArrayVer', data.packet.Gumstick_Ver);
            // SU2 Temper Comp 스위치 업데이트 (1=ON, 0=OFF)
            const su2TemperCompEl = document.getElementById("su2TemperComp");
            if (su2TemperCompEl) {
                if (data.packet.TemperCompensationMode === 1) {
                    su2TemperCompEl.textContent = "ON";
                    su2TemperCompEl.className = "btn btn-sm btn-success";
                } else {
                    su2TemperCompEl.textContent = "OFF";
                    su2TemperCompEl.className = "btn btn-sm btn-secondary";
                }
            }
            updateText('su2StartTemper', data.packet.Gumstick_StartTemper + '℃');
            updateText('su2CurTemper', data.packet.Gumstick_CurTemper + '℃');
            updateText('su2CompensationDL', data.packet.DlTemperCompensation + 'dB');
            updateText('su2CompensationUL', data.packet.UlTemperCompensation + 'dB');

            // SU2 SISO/MIMO Tx/Rx Gain Setting 업데이트
            updateText('su2MvbxMv2850TxGainSiso', data.packet.Mvbx_Mv2850TxGainSiso);
            updateText('su2MvbxMv2850RxGainSiso', data.packet.Mvbx_Mv2850RxGainSiso);
            updateText('su2MvbxMv2853TxGainSiso', data.packet.Mvbx_Mv2853TxGainSiso);
            updateText('su2MvbxMv2853RxGainSiso', data.packet.Mvbx_Mv2853RxGainSiso);
            updateText('su2MvbxMv2850TxGainMimo', data.packet.Mvbx_Mv2850TxGainMimo);
            updateText('su2MvbxMv2850RxGainMimo', data.packet.Mvbx_Mv2850RxGainMimo);
            updateText('su2MvbxMv2853TxGainMimo', data.packet.Mvbx_Mv2853TxGainMimo);
            updateText('su2MvbxMv2853RxGainMimo', data.packet.Mvbx_Mv2853RxGainMimo);

            // SU2 Beam Info 테이블 업데이트
            updateText('su2MvbxBeamInfoBeamId1', data.packet.MVBX_BeamInfo_beamId1);
            updateText('su2MvbxBeamInfoBeamId2', data.packet.MVBX_BeamInfo_beamId2);
            updateText('su2MvbxBeamInfoBeamId3', data.packet.MVBX_BeamInfo_beamId3);
            updateText('su2MvbxBeamInfoBeamId4', data.packet.MVBX_BeamInfo_beamId4);
            updateText('su2MvbxBeamInfoPci1', data.packet.MVBX_BeamInfo_pci1);
            updateText('su2MvbxBeamInfoPci2', data.packet.MVBX_BeamInfo_pci2);
            updateText('su2MvbxBeamInfoPci3', data.packet.MVBX_BeamInfo_pci3);
            updateText('su2MvbxBeamInfoPci4', data.packet.MVBX_BeamInfo_pci4);
            updateText('su2MvbxBeamInfoSsbldx1', data.packet.MVBX_BeamInfo_ssbldx1);
            updateText('su2MvbxBeamInfoSsbldx2', data.packet.MVBX_BeamInfo_ssbldx2);
            updateText('su2MvbxBeamInfoSsbldx3', data.packet.MVBX_BeamInfo_ssbldx3);
            updateText('su2MvbxBeamInfoSsbldx4', data.packet.MVBX_BeamInfo_ssbldx4);
            updateText('su2MvbxBeamInfoEnergy1', data.packet.MVBX_BeamInfo_energy1);
            updateText('su2MvbxBeamInfoEnergy2', data.packet.MVBX_BeamInfo_energy2);
            updateText('su2MvbxBeamInfoEnergy3', data.packet.MVBX_BeamInfo_energy3);
            updateText('su2MvbxBeamInfoEnergy4', data.packet.MVBX_BeamInfo_energy4);
            updateText('su2MvbxBeamInfoPsstype1', data.packet.MVBX_BeamInfo_psstype1);
            updateText('su2MvbxBeamInfoPsstype2', data.packet.MVBX_BeamInfo_psstype2);
            updateText('su2MvbxBeamInfoPsstype3', data.packet.MVBX_BeamInfo_psstype3);
            updateText('su2MvbxBeamInfoPsstype4', data.packet.MVBX_BeamInfo_psstype4);
            updateText('su2MvbxBeamInfoSnr1', data.packet.MVBX_BeamInfo_snr1);
            updateText('su2MvbxBeamInfoSnr2', data.packet.MVBX_BeamInfo_snr2);
            updateText('su2MvbxBeamInfoSnr3', data.packet.MVBX_BeamInfo_snr3);
            updateText('su2MvbxBeamInfoSnr4', data.packet.MVBX_BeamInfo_snr4);
            updateText('su2MvbxBeamInfoRsrp1', data.packet.MVBX_BeamInfo_rsrp1);
            updateText('su2MvbxBeamInfoRsrp2', data.packet.MVBX_BeamInfo_rsrp2);
            updateText('su2MvbxBeamInfoRsrp3', data.packet.MVBX_BeamInfo_rsrp3);
            updateText('su2MvbxBeamInfoRsrp4', data.packet.MVBX_BeamInfo_rsrp4);

            // SU2 Beam Scan 카드 업데이트
            updateText('su2PllRelockCount', data.packet.PllRelockCount);
            updateValue('su2CenterFrequency', data.packet.ApiVenderFreq);
            updateValue('su2BeamFix', data.packet.DuFixBeam === 0 ? 'AUTO' : 'FIX');
            updateValue('su2ApiLogLevel', data.packet.ApiLogLevel);
            updateValue('su2OrientationActual', data.packet.Actual_Orientation);
            updateValue('su2TiltActual', data.packet.Actual_Tilt);

            // SU3 Beam Info Modal 업데이트 (SU3 전용 ID 사용)
            updateText('su3AntArrayVer', data.packet.Gumstick_Ver);
            // SU3 Temper Comp 스위치 업데이트 (1=ON, 0=OFF)
            const su3TemperCompEl = document.getElementById("su3TemperComp");
            if (su3TemperCompEl) {
                if (data.packet.TemperCompensationMode=== 1) {
                    su3TemperCompEl.textContent = "ON";
                    su3TemperCompEl.className = "btn btn-sm btn-success";
                } else {
                    su3TemperCompEl.textContent = "OFF";
                    su3TemperCompEl.className = "btn btn-sm btn-secondary";
                }
            }
            updateText('su3StartTemper', data.packet.Gumstick_StartTemper + '℃');
            updateText('su3CurTemper', data.packet.Gumstick_CurTemper + '℃');
            updateText('su3CompensationDL', data.packet.DlTemperCompensation + 'dB');
            updateText('su3CompensationUL', data.packet.UlTemperCompensation + 'dB');

            // SU3 SISO/MIMO Tx/Rx Gain Setting 업데이트
            updateText('su3MvbxMv2850TxGainSiso', data.packet.Mvbx_Mv2850TxGainSiso);
            updateText('su3MvbxMv2850RxGainSiso', data.packet.Mvbx_Mv2850RxGainSiso);
            updateText('su3MvbxMv2853TxGainSiso', data.packet.Mvbx_Mv2853TxGainSiso);
            updateText('su3MvbxMv2853RxGainSiso', data.packet.Mvbx_Mv2853RxGainSiso);
            updateText('su3MvbxMv2850TxGainMimo', data.packet.Mvbx_Mv2850TxGainMimo);
            updateText('su3MvbxMv2850RxGainMimo', data.packet.Mvbx_Mv2850RxGainMimo);
            updateText('su3MvbxMv2853TxGainMimo', data.packet.Mvbx_Mv2853TxGainMimo);
            updateText('su3MvbxMv2853RxGainMimo', data.packet.Mvbx_Mv2853RxGainMimo);

            // SU3 Beam Info 테이블 업데이트
            updateText('su3MvbxBeamInfoBeamId1', data.packet.MVBX_BeamInfo_beamId1);
            updateText('su3MvbxBeamInfoBeamId2', data.packet.MVBX_BeamInfo_beamId2);
            updateText('su3MvbxBeamInfoBeamId3', data.packet.MVBX_BeamInfo_beamId3);
            updateText('su3MvbxBeamInfoBeamId4', data.packet.MVBX_BeamInfo_beamId4);
            updateText('su3MvbxBeamInfoPci1', data.packet.MVBX_BeamInfo_pci1);
            updateText('su3MvbxBeamInfoPci2', data.packet.MVBX_BeamInfo_pci2);
            updateText('su3MvbxBeamInfoPci3', data.packet.MVBX_BeamInfo_pci3);
            updateText('su3MvbxBeamInfoPci4', data.packet.MVBX_BeamInfo_pci4);
            updateText('su3MvbxBeamInfoSsbldx1', data.packet.MVBX_BeamInfo_ssbldx1);
            updateText('su3MvbxBeamInfoSsbldx2', data.packet.MVBX_BeamInfo_ssbldx2);
            updateText('su3MvbxBeamInfoSsbldx3', data.packet.MVBX_BeamInfo_ssbldx3);
            updateText('su3MvbxBeamInfoSsbldx4', data.packet.MVBX_BeamInfo_ssbldx4);
            updateText('su3MvbxBeamInfoEnergy1', data.packet.MVBX_BeamInfo_energy1);
            updateText('su3MvbxBeamInfoEnergy2', data.packet.MVBX_BeamInfo_energy2);
            updateText('su3MvbxBeamInfoEnergy3', data.packet.MVBX_BeamInfo_energy3);
            updateText('su3MvbxBeamInfoEnergy4', data.packet.MVBX_BeamInfo_energy4);
            updateText('su3MvbxBeamInfoPsstype1', data.packet.MVBX_BeamInfo_psstype1);
            updateText('su3MvbxBeamInfoPsstype2', data.packet.MVBX_BeamInfo_psstype2);
            updateText('su3MvbxBeamInfoPsstype3', data.packet.MVBX_BeamInfo_psstype3);
            updateText('su3MvbxBeamInfoPsstype4', data.packet.MVBX_BeamInfo_psstype4);
            updateText('su3MvbxBeamInfoSnr1', data.packet.MVBX_BeamInfo_snr1);
            updateText('su3MvbxBeamInfoSnr2', data.packet.MVBX_BeamInfo_snr2);
            updateText('su3MvbxBeamInfoSnr3', data.packet.MVBX_BeamInfo_snr3);
            updateText('su3MvbxBeamInfoSnr4', data.packet.MVBX_BeamInfo_snr4);
            updateText('su3MvbxBeamInfoRsrp1', data.packet.MVBX_BeamInfo_rsrp1);
            updateText('su3MvbxBeamInfoRsrp2', data.packet.MVBX_BeamInfo_rsrp2);
            updateText('su3MvbxBeamInfoRsrp3', data.packet.MVBX_BeamInfo_rsrp3);
            updateText('su3MvbxBeamInfoRsrp4', data.packet.MVBX_BeamInfo_rsrp4);

            // SU3 Beam Scan 카드 업데이트
            updateText('su3PllRelockCount', data.packet.PllRelockCount);
            updateValue('su3CenterFrequency', data.packet.ApiVenderFreq);
            updateValue('su3BeamFix', data.packet.DuFixBeam === 0 ? 'AUTO' : 'FIX');
            updateValue('su3ApiLogLevel', data.packet.ApiLogLevel);
            updateValue('su3OrientationActual', data.packet.Actual_Orientation);
            updateValue('su3TiltActual', data.packet.Actual_Tilt);

            // SU4 Beam Info Modal 업데이트 (SU4 전용 ID 사용)
            updateText('su4AntArrayVer', data.packet.Gumstick_Ver);
            // SU4 Temper Comp 스위치 업데이트 (1=ON, 0=OFF)
            const su4TemperCompEl = document.getElementById("su4TemperComp");
            if (su4TemperCompEl) {
                if (data.packet.TemperCompensationMode === 1) {
                    su4TemperCompEl.textContent = "ON";
                    su4TemperCompEl.className = "btn btn-sm btn-success";
                } else {
                    su4TemperCompEl.textContent = "OFF";
                    su4TemperCompEl.className = "btn btn-sm btn-secondary";
                }
            }
            updateText('su4StartTemper', data.packet.Gumstick_StartTemper + '℃');
            updateText('su4CurTemper', data.packet.Gumstick_CurTemper + '℃');
            updateText('su4CompensationDL', data.packet.DlTemperCompensation + 'dB');
            updateText('su4CompensationUL', data.packet.UlTemperCompensation + 'dB');

            // SU4 SISO/MIMO Tx/Rx Gain Setting 업데이트
            updateText('su4MvbxMv2850TxGainSiso', data.packet.Mvbx_Mv2850TxGainSiso);
            updateText('su4MvbxMv2850RxGainSiso', data.packet.Mvbx_Mv2850RxGainSiso);
            updateText('su4MvbxMv2853TxGainSiso', data.packet.Mvbx_Mv2853TxGainSiso);
            updateText('su4MvbxMv2853RxGainSiso', data.packet.Mvbx_Mv2853RxGainSiso);
            updateText('su4MvbxMv2850TxGainMimo', data.packet.Mvbx_Mv2850TxGainMimo);
            updateText('su4MvbxMv2850RxGainMimo', data.packet.Mvbx_Mv2850RxGainMimo);
            updateText('su4MvbxMv2853TxGainMimo', data.packet.Mvbx_Mv2853TxGainMimo);
            updateText('su4MvbxMv2853RxGainMimo', data.packet.Mvbx_Mv2853RxGainMimo);

            // SU4 Beam Info 테이블 업데이트
            updateText('su4MvbxBeamInfoBeamId1', data.packet.MVBX_BeamInfo_beamId1);
            updateText('su4MvbxBeamInfoBeamId2', data.packet.MVBX_BeamInfo_beamId2);
            updateText('su4MvbxBeamInfoBeamId3', data.packet.MVBX_BeamInfo_beamId3);
            updateText('su4MvbxBeamInfoBeamId4', data.packet.MVBX_BeamInfo_beamId4);
            updateText('su4MvbxBeamInfoPci1', data.packet.MVBX_BeamInfo_pci1);
            updateText('su4MvbxBeamInfoPci2', data.packet.MVBX_BeamInfo_pci2);
            updateText('su4MvbxBeamInfoPci3', data.packet.MVBX_BeamInfo_pci3);
            updateText('su4MvbxBeamInfoPci4', data.packet.MVBX_BeamInfo_pci4);
            updateText('su4MvbxBeamInfoSsbldx1', data.packet.MVBX_BeamInfo_ssbldx1);
            updateText('su4MvbxBeamInfoSsbldx2', data.packet.MVBX_BeamInfo_ssbldx2);
            updateText('su4MvbxBeamInfoSsbldx3', data.packet.MVBX_BeamInfo_ssbldx3);
            updateText('su4MvbxBeamInfoSsbldx4', data.packet.MVBX_BeamInfo_ssbldx4);
            updateText('su4MvbxBeamInfoEnergy1', data.packet.MVBX_BeamInfo_energy1);
            updateText('su4MvbxBeamInfoEnergy2', data.packet.MVBX_BeamInfo_energy2);
            updateText('su4MvbxBeamInfoEnergy3', data.packet.MVBX_BeamInfo_energy3);
            updateText('su4MvbxBeamInfoEnergy4', data.packet.MVBX_BeamInfo_energy4);
            updateText('su4MvbxBeamInfoPsstype1', data.packet.MVBX_BeamInfo_psstype1);
            updateText('su4MvbxBeamInfoPsstype2', data.packet.MVBX_BeamInfo_psstype2);
            updateText('su4MvbxBeamInfoPsstype3', data.packet.MVBX_BeamInfo_psstype3);
            updateText('su4MvbxBeamInfoPsstype4', data.packet.MVBX_BeamInfo_psstype4);
            updateText('su4MvbxBeamInfoSnr1', data.packet.MVBX_BeamInfo_snr1);
            updateText('su4MvbxBeamInfoSnr2', data.packet.MVBX_BeamInfo_snr2);
            updateText('su4MvbxBeamInfoSnr3', data.packet.MVBX_BeamInfo_snr3);
            updateText('su4MvbxBeamInfoSnr4', data.packet.MVBX_BeamInfo_snr4);
            updateText('su4MvbxBeamInfoRsrp1', data.packet.MVBX_BeamInfo_rsrp1);
            updateText('su4MvbxBeamInfoRsrp2', data.packet.MVBX_BeamInfo_rsrp2);
            updateText('su4MvbxBeamInfoRsrp3', data.packet.MVBX_BeamInfo_rsrp3);
            updateText('su4MvbxBeamInfoRsrp4', data.packet.MVBX_BeamInfo_rsrp4);

            // SU4 Beam Scan 카드 업데이트
            updateText('su4PllRelockCount', data.packet.PllRelockCount);
            updateValue('su4CenterFrequency', data.packet.ApiVenderFreq);
            updateValue('su4BeamFix', data.packet.DuFixBeam === 0 ? 'AUTO' : 'FIX');
            updateValue('su4ApiLogLevel', data.packet.ApiLogLevel);
            updateValue('su4OrientationActual', data.packet.Actual_Orientation);
            updateValue('su4TiltActual', data.packet.Actual_Tilt);

            // 네비게이션 점 색상 업데이트
            updateNavDotColors();

            // 현재 활성화된 화면의 점은 알람 상태를 유지 (추가 표시 없음)
            const activeScreenId = document.querySelector('.content-area > div.active')?.id;
            // 활성화된 화면의 점에 대한 추가 표시 제거
            
            // SU Enable 상태 처리
            if (data.packet.SuEnableBits) {
                const enableBits = data.packet.SuEnableBits;
                
                // SU1 Enable 상태 (항상 Enable로 설정)
                const su1EnableBadge = document.getElementById('su1-enable-badge');
                if (su1EnableBadge) {
                    su1EnableBadge.textContent = "#1 Enable";
                    su1EnableBadge.className = "badge bg-success";
                }
                
                // SU2 Enable 상태
                const su2EnableBadge = document.getElementById('su2-enable-badge');
                if (su2EnableBadge) {
                    if (enableBits.SU2_ENABLE === 1) {
                        su2EnableBadge.textContent = "#2 Enable";
                        su2EnableBadge.className = "badge bg-success";
                    } else {
                        su2EnableBadge.textContent = "#2 Disable";
                        su2EnableBadge.className = "badge bg-secondary";
                    }
                }
                
                // SU3 Enable 상태
                const su3EnableBadge = document.getElementById('su3-enable-badge');
                if (su3EnableBadge) {
                    if (enableBits.SU3_ENABLE === 1) {
                        su3EnableBadge.textContent = "#3 Enable";
                        su3EnableBadge.className = "badge bg-success";
                    } else {
                        su3EnableBadge.textContent = "#3 Disable";
                        su3EnableBadge.className = "badge bg-secondary";
                    }
                }
                
                // SU4 Enable 상태
                const su4EnableBadge = document.getElementById('su4-enable-badge');
                if (su4EnableBadge) {
                    if (enableBits.SU4_ENABLE === 1) {
                        su4EnableBadge.textContent = "#4 Enable";
                        su4EnableBadge.className = "badge bg-success";
                    } else {
                        su4EnableBadge.textContent = "#4 Disable";
                        su4EnableBadge.className = "badge bg-secondary";
                    }
                }
                
                // SU Link 컨테이너 표시/숨김 처리
                const su1LinkContainer = document.getElementById('su1-link-container');
                const su2LinkContainer = document.getElementById('su2-link-container');
                const su3LinkContainer = document.getElementById('su3-link-container');
                const su4LinkContainer = document.getElementById('su4-link-container');
                
                // SU1은 항상 표시 (Enable)
                if (su1LinkContainer) {
                    su1LinkContainer.style.display = 'block';
                }
                
                // SU2 Enable 상태에 따라 표시/숨김
                if (su2LinkContainer) {
                    su2LinkContainer.style.display = enableBits.SU2_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU3 Enable 상태에 따라 표시/숨김
                if (su3LinkContainer) {
                    su3LinkContainer.style.display = enableBits.SU3_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU4 Enable 상태에 따라 표시/숨김
                if (su4LinkContainer) {
                    su4LinkContainer.style.display = enableBits.SU4_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU Navigation 항목 표시/숨김 처리
                const su1NavItem = document.getElementById('nav_su1');
                const su2NavItem = document.getElementById('nav_su2');
                const su3NavItem = document.getElementById('nav_su3');
                const su4NavItem = document.getElementById('nav_su4');
                
                // SU1은 항상 표시 (Enable)
                if (su1NavItem) {
                    su1NavItem.style.display = 'block';
                }
                
                // SU2 Enable 상태에 따라 표시/숨김
                if (su2NavItem) {
                    su2NavItem.style.display = enableBits.SU2_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU3 Enable 상태에 따라 표시/숨김
                if (su3NavItem) {
                    su3NavItem.style.display = enableBits.SU3_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU4 Enable 상태에 따라 표시/숨김
                if (su4NavItem) {
                    su4NavItem.style.display = enableBits.SU4_ENABLE === 1 ? 'block' : 'none';
                }
            }

            
        });

        // Bootstrap Modal을 사용하여 정보 메시지 표시 (alert() 대체)
        function showInfoModal(message) {
            const modalHtml = `
                <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="infoModalLabel">정보</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                ${message}
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            // 모달이 이미 존재하면 제거 (여러 번 클릭 시 중복 생성 방지)
            const existingModal = document.getElementById('infoModal');
            if (existingModal) existingModal.remove();

            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const infoModal = new bootstrap.Modal(document.getElementById('infoModal'));
            infoModal.show();
        }

        // Alarm Level 모달을 여는 함수
        function openAlarmLevelModal() {
            // Alarm Level 모달: update_status 패킷 요청 시작 (알람 상태 정보)
            modalOpened('#alarmLevelModal');
            
            const modalElement = document.getElementById('alarmLevelModal');
            if (modalElement) {
                // 기존 모달 인스턴스가 있다면 제거
                const existingModal = bootstrap.Modal.getInstance(modalElement);
                if (existingModal) {
                    existingModal.dispose();
                }
                
                // 새로운 모달 인스턴스 생성
                const modal = new bootstrap.Modal(modalElement, {
                    backdrop: 'static',
                    keyboard: false
                });
                
                modal.show();
            }
        }

        // Alarm History 모달을 여는 함수
        function openAlarmHistoryModal() {
            // Alarm History 모달: update_status 패킷 요청 시작 (알람 히스토리 정보)
            modalOpened('#alarmHistoryModal');
            
            const modalElement = document.getElementById('alarmHistoryModal');
            if (modalElement) {
                // 기존 모달 인스턴스가 있다면 제거
                const existingModal = bootstrap.Modal.getInstance(modalElement);
                if (existingModal) {
                    existingModal.dispose();
                }
                
                // 새로운 모달 인스턴스 생성
                const modal = new bootstrap.Modal(modalElement, {
                    backdrop: 'static',
                    keyboard: false
                });
                
                modal.show();
            }
        }





        // ConMuFlag 전체 초기화 함수
        function resetConMuFlag() {
            if (sendPacketData.ConMuFlag) {
                sendPacketData.ConMuFlag = sendPacketData.ConMuFlag.map(() => 0x00);
            }
        }

        // Reset 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleResetConfirmation(confirmed) {
            if (confirmed) {
                console.log('DU Reset이 확인되었습니다. Reset 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[0] 바이트를 1로 수정
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x01; // 10진수 1 또는 16진수 0x01
                    console.log('sendPacketData.ConMuFlag[0] set to 1:', sendPacketData.ConMuFlag[0]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is empty.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('DU Reset packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x00; // 0번 바이트 전체 초기화
                }
            }
        }

        // Modem Reset 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleModemResetConfirmation(confirmed) {
            if (confirmed) {
                console.log('Modem Reset이 확인되었습니다. Reset 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConEmsModemReset 개별 초기화 (이 함수에서 사용하므로)
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x00;
                }

                // ConEmsModemReset 필드를 0x01로 설정 (Modem reset)
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x01; // 0x01 = Modem reset
                    console.log('sendPacketData.ConEmsModemReset set to 0x01 (Modem reset):', sendPacketData.ConEmsModemReset);
                } else {
                    console.error('sendPacketData.ConEmsModemReset is not defined.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('Modem Reset packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 필드만 초기화
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x00;
                }
            }
        }

        // EMS Reset 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleEmsResetConfirmation(confirmed) {
            if (confirmed) {
                console.log('EMS Reset이 확인되었습니다. Reset 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConEmsModemReset 개별 초기화 (이 함수에서 사용하므로)
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x00;
                }

                // ConEmsModemReset 필드를 0x02로 설정 (EMS reset)
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x02; // 0x02 = EMS reset
                    console.log('sendPacketData.ConEmsModemReset set to 0x02 (EMS reset):', sendPacketData.ConEmsModemReset);
                } else {
                    console.error('sendPacketData.ConEmsModemReset is not defined.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('EMS Reset packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 필드만 초기화
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x00;
                }
            }
        }

        // RSRP Req 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleRsrpReqConfirmation(confirmed) {
            if (confirmed) {
                console.log('RSRP Request가 확인되었습니다. RSRP 요청을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[14] (packet[594])의 5번 비트를 1로 설정
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 14) {
                    sendPacketData.ConMuFlag[14] |= 0x20; // 0x20 = 32 = 2^5 (5번 비트)
                    console.log('sendPacketData.ConMuFlag[14] set to:', sendPacketData.ConMuFlag[14]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is too short.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('RSRP Request packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 14) {
                    sendPacketData.ConMuFlag[14] = 0x00; // 14번 바이트 전체 초기화
                }
            }
        }

        // PLL Relock 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handlePllRelockConfirmation(confirmed) {
            if (confirmed) {
                console.log('PLL Relock이 확인되었습니다. PLL Relock 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[0] (packet[580])의 7번 비트를 1로 설정
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] |= 0x80; // 0x80 = 128 = 2^7 (7번 비트)
                    console.log('sendPacketData.ConMuFlag[0] set to:', sendPacketData.ConMuFlag[0]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is empty.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('PLL Relock packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x00; // 0번 바이트 전체 초기화
                }
            }
        }

        // SU1 PLL Relock 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleSu1PllRelockConfirmation(confirmed) {
            if (confirmed) {
                console.log('SU1 PLL Relock이 확인되었습니다. SU1 PLL Relock 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[0]의 7번 비트를 1로 설정 (PLL Relock 명령)
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] |= 0x80; // 0x80 = 128 = 2^7 (7번 비트)
                    console.log('SU1 sendPacketData.ConMuFlag[0] set to:', sendPacketData.ConMuFlag[0]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is empty.');
                }

                // Socket.IO를 통해 SU1 전용 이벤트로 전송
                if (socket) {
                    socket.emit('su1_Ctrl_packet', sendPacketData);
                    console.log('SU1 PLL Relock packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x00; // 0번 바이트 전체 초기화
                }
            }
        }

        // SU2 PLL Relock 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleSu2PllRelockConfirmation(confirmed) {
            if (confirmed) {
                console.log('SU2 PLL Relock이 확인되었습니다. SU2 PLL Relock 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[0]의 7번 비트를 1로 설정 (PLL Relock 명령)
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] |= 0x80; // 0x80 = 128 = 2^7 (7번 비트)
                    console.log('SU2 sendPacketData.ConMuFlag[0] set to:', sendPacketData.ConMuFlag[0]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is empty.');
                }

                // Socket.IO를 통해 SU2 전용 이벤트로 전송
                if (socket) {
                    socket.emit('su2_Ctrl_packet', sendPacketData);
                    console.log('SU2 PLL Relock packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x00; // 0번 바이트 전체 초기화
                }
            }
        }

        // SU3 PLL Relock 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleSu3PllRelockConfirmation(confirmed) {
            if (confirmed) {
                console.log('SU3 PLL Relock이 확인되었습니다. SU3 PLL Relock 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[0]의 7번 비트를 1로 설정 (PLL Relock 명령)
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] |= 0x80; // 0x80 = 128 = 2^7 (7번 비트)
                    console.log('SU3 sendPacketData.ConMuFlag[0] set to:', sendPacketData.ConMuFlag[0]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is empty.');
                }

                // Socket.IO를 통해 SU3 전용 이벤트로 전송
                if (socket) {
                    socket.emit('su3_Ctrl_packet', sendPacketData);
                    console.log('SU3 PLL Relock packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x00; // 0번 바이트 전체 초기화
                }
            }
        }

        // SU4 PLL Relock 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleSu4PllRelockConfirmation(confirmed) {
            if (confirmed) {
                console.log('SU4 PLL Relock이 확인되었습니다. SU4 PLL Relock 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[0]의 7번 비트를 1로 설정 (PLL Relock 명령)
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] |= 0x80; // 0x80 = 128 = 2^7 (7번 비트)
                    console.log('SU4 sendPacketData.ConMuFlag[0] set to:', sendPacketData.ConMuFlag[0]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is empty.');
                }

                // Socket.IO를 통해 SU4 전용 이벤트로 전송
                if (socket) {
                    socket.emit('su4_Ctrl_packet', sendPacketData);
                    console.log('SU4 PLL Relock packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x00; // 0번 바이트 전체 초기화
                }
            }
        }

        // Beam Scan 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleBeamScanConfirmation(confirmed) {
            if (confirmed) {
                console.log('Beam Scan이 확인되었습니다. Beam Scan 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[14] (packet[594])의 6번 비트를 1로 설정
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 14) {
                    sendPacketData.ConMuFlag[14] |= 0x40; // 0x40 = 64 = 2^6 (6번 비트)
                    console.log('sendPacketData.ConMuFlag[14] set to:', sendPacketData.ConMuFlag[14]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is too short.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('Beam Scan packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 14) {
                    sendPacketData.ConMuFlag[14] = 0x00; // 14번 바이트 전체 초기화
                }
            }
        }

        // Packet Info 화면을 표시하는 함수
        function showPacketInfo() {
            // showScreen 함수를 사용하여 화면 전환
            showScreen('packet_info');
        }

        // Sync Module 화면을 표시하는 함수
        function showSyncModule() {
            // showScreen 함수를 사용하여 화면 전환
            showScreen('sync_module');
        }

        // Slot Format 토글 함수
        function toggleSlotFormat() {
            const content = document.getElementById('slot-format-content');
            const icon = document.getElementById('slot-format-icon');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                icon.className = 'fas fa-chevron-down me-2';
            } else {
                content.style.display = 'none';
                icon.className = 'fas fa-chevron-right me-2';
            }
        }

        // Slot 3gpp Format 토글 함수
        function toggleSlot3gppFormat() {
            const content = document.getElementById('slot-3gpp-format-content');
            const icon = document.getElementById('slot-3gpp-format-icon');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                icon.className = 'fas fa-chevron-down me-2';
            } else {
                content.style.display = 'none';
                icon.className = 'fas fa-chevron-right me-2';
            }
        }

        // 알람 버튼 상태 업데이트 함수 (DU용)
        function updateAlarmButtons(alarmStatus) {
            if (!alarmStatus) return;
            
            // 각 알람 버튼의 상태를 업데이트
            const alarmButtons = {
                'alarm_mask_madc': document.getElementById('alarm_mask_madc'),
                'alarm_mask_ac': document.getElementById('alarm_mask_ac'),
                'alarm_mask_temp': document.getElementById('alarm_mask_temp'),
                'alarm_mask_bat': document.getElementById('alarm_mask_bat'),
                'alarm_mask_fpga_link': document.getElementById('alarm_mask_fpga_link'),
                'alarm_mask_if_pll': document.getElementById('alarm_mask_if_pll'),
                'alarm_mask_sync_pll': document.getElementById('alarm_mask_sync_pll'),
                'alarm_mask_tsync_link': document.getElementById('alarm_mask_tsync_link'),
                'alarm_mask_decoding': document.getElementById('alarm_mask_decoding'),
                'alarm_mask_aa_link': document.getElementById('alarm_mask_aa_link')
            };

            // 각 버튼의 상태를 비트값에 따라 업데이트
            Object.keys(alarmButtons).forEach(alarmId => {
                const button = alarmButtons[alarmId];
                if (button && alarmStatus.hasOwnProperty(alarmId)) {
                    const isOn = alarmStatus[alarmId] === 1;
                    if (isOn) {
                        button.textContent = 'On';
                        button.style.backgroundColor = '#28a745'; // 녹색
                    } else {
                        button.textContent = 'Off';
                        button.style.backgroundColor = '#666'; // 회색
                    }
                }
            });
        }

        // SU1 알람 점 업데이트는 DU의 updateAlarmDot 함수를 재사용
        // (별도 함수 불필요 - updateAlarmDot('su1_alarm_dc', isActive) 형태로 호출)

        // Socket.IO 이벤트 리스너에서 알람 상태 업데이트
        socket.on('alarm_status_update', function(data) {
            if (data && data.AlarmStatus) {
                // DU 알람 버튼 업데이트
                updateAlarmButtons(data.AlarmStatus);
                
                const alarmStatus = data.AlarmStatus;
                console.log('alarm_status_update 이벤트:', alarmStatus);
                
                // SU1 알람 점 업데이트 (SU1 페이지가 활성화된 경우)
                if (document.getElementById('su1_content_display').classList.contains('active')) {
                    console.log('SU1 페이지 활성화됨 - 알람 업데이트');
                    Object.keys(alarmStatus).forEach(alarmId => {
                        const isActive = alarmStatus[alarmId] === 1;
                        console.log(`SU1 alarm_status_update: ${alarmId} = ${isActive}`);
                        updateAlarmDot(alarmId, isActive); // 접두사 제거
                    });
                }
                
                // SU2 알람 점 업데이트 (SU2 페이지가 활성화된 경우)
                if (document.getElementById('su2_content_display').classList.contains('active')) {
                    console.log('SU2 페이지 활성화됨 - 알람 업데이트');
                    Object.keys(alarmStatus).forEach(alarmId => {
                        const isActive = alarmStatus[alarmId] === 1;
                        console.log(`SU2 alarm_status_update: ${alarmId} = ${isActive}`);
                        updateAlarmDot(alarmId, isActive); // 접두사 제거
                    });
                }
                
                // SU3 알람 점 업데이트 (SU3 페이지가 활성화된 경우)
                if (document.getElementById('su3_content_display').classList.contains('active')) {
                    console.log('SU3 페이지 활성화됨 - 알람 업데이트');
                    Object.keys(alarmStatus).forEach(alarmId => {
                        const isActive = alarmStatus[alarmId] === 1;
                        console.log(`SU3 alarm_status_update: ${alarmId} = ${isActive}`);
                        updateAlarmDot(alarmId, isActive); // 접두사 제거
                    });
                }
                
                // SU4 알람 점 업데이트 (SU4 페이지가 활성화된 경우)
                if (document.getElementById('su4_content_display').classList.contains('active')) {
                    console.log('SU4 페이지 활성화됨 - 알람 업데이트');
                    Object.keys(alarmStatus).forEach(alarmId => {
                        const isActive = alarmStatus[alarmId] === 1;
                        console.log(`SU4 alarm_status_update: ${alarmId} = ${isActive}`);
                        updateAlarmDot(alarmId, isActive); // 접두사 제거
                    });
                }
            }
        });

        // Socket.IO 이벤트 리스너에서 Mask 알람 상태 업데이트
        socket.on('mask_alarm_status_update', function(data) {
            if (data && data.MaskAlarmStatus) {
                // DU 알람 버튼 업데이트
                updateAlarmButtons(data.MaskAlarmStatus);
                
                // SU1 알람 점 업데이트 (SU1 페이지가 활성화된 경우)
                if (document.getElementById('su1_content_display').classList.contains('active')) {
                    const alarmStatus = data.MaskAlarmStatus;
                    Object.keys(alarmStatus).forEach(alarmId => {
                        const isActive = alarmStatus[alarmId] === 1;
                        updateAlarmDot(alarmId, isActive); // 접두사 제거
                    });
                }
            }
        });

        // DL ALC 버튼 상태 업데이트 함수
        function updateDLALCButtons(dlAlcStatus) {
            if (!dlAlcStatus) return;
            
            // 각 DL ALC 버튼의 상태를 업데이트
            const dlAlcButtons = {
                'SISO_MASK_DL_ALC': document.getElementById('SISO_MASK_DL_ALC'),
                'MIMO_MASK_DL_ALC': document.getElementById('MIMO_MASK_DL_ALC'),
                'EMS_DU_Link_MASK': document.getElementById('EMS_DU_Link_MASK')
            };

            // 각 버튼의 상태를 비트값에 따라 업데이트
            Object.keys(dlAlcButtons).forEach(dlAlcId => {
                const button = dlAlcButtons[dlAlcId];
                if (button && dlAlcStatus.hasOwnProperty(dlAlcId)) {
                    const isOn = dlAlcStatus[dlAlcId] === 1;
                    if (isOn) {
                        button.textContent = 'On';
                        button.style.backgroundColor = '#28a745'; // 녹색
                    } else {
                        button.textContent = 'Off';
                        button.style.backgroundColor = '#666'; // 회색
                    }
                }
            });
        }

        // DET MASK 버튼 상태 업데이트 함수
        function updateDETMASKButtons(detMaskStatus) {
            if (!detMaskStatus) return;
            
            // 각 DET MASK 버튼의 상태를 업데이트
            const detMaskButtons = {
                'LD1_DET_DL0_SISO_MASK': document.getElementById('LD1_DET_DL0_SISO_MASK'),
                'LD2_DET_DL1_MIMO_MASK': document.getElementById('LD2_DET_DL1_MIMO_MASK'),
                'PD1_DET_UL0_SISO_MASK': document.getElementById('PD1_DET_UL0_SISO_MASK'),
                'PD2_DET_UL1_MIMO_MASK': document.getElementById('PD2_DET_UL1_MIMO_MASK')
            };

            // 각 버튼의 상태를 비트값에 따라 업데이트
            Object.keys(detMaskButtons).forEach(detMaskId => {
                const button = detMaskButtons[detMaskId];
                if (button && detMaskStatus.hasOwnProperty(detMaskId)) {
                    const isOn = detMaskStatus[detMaskId] === 1;
                    if (isOn) {
                        button.textContent = 'ON';
                        button.style.backgroundColor = '#28a745'; // 녹색
                    } else {
                        button.textContent = 'OFF';
                        button.style.backgroundColor = '#666'; // 회색
                    }
                }
            });
        }



        // SU Link Fail 버튼 상태 업데이트 함수
        function updateSuLinkFailButtons(suLinkFailStatus) {
            if (!suLinkFailStatus) return;
            
            // 각 SU Link Fail 버튼의 상태를 업데이트
            const suLinkFailButtons = {
                'SU1_MASK_LINK_FAIL': document.getElementById('SU1_MASK_LINK_FAIL'),
                'SU2_MASK_LINK_FAIL': document.getElementById('SU2_MASK_LINK_FAIL'),
                'SU3_MASK_LINK_FAIL': document.getElementById('SU3_MASK_LINK_FAIL'),
                'SU4_MASK_LINK_FAIL': document.getElementById('SU4_MASK_LINK_FAIL')
            };

            // 각 버튼의 상태를 비트값에 따라 업데이트
            Object.keys(suLinkFailButtons).forEach(suLinkFailId => {
                const button = suLinkFailButtons[suLinkFailId];
                if (button && suLinkFailStatus.hasOwnProperty(suLinkFailId)) {
                    const isOn = suLinkFailStatus[suLinkFailId] === 1;
                    if (isOn) {
                        button.textContent = 'ON';
                        button.style.backgroundColor = '#28a745'; // 녹색
                    } else {
                        button.textContent = 'OFF';
                        button.style.backgroundColor = '#666'; // 회색
                    }
                }
            });
        }

        // Packet Info 데이터 업데이트 함수
        function updatePacketInfoData() {
            // Packet Info 화면에서 사용할 데이터 업데이트 로직
            console.log('Packet Info 데이터 업데이트');
        }

        // Sync Module 데이터 업데이트 함수
        function updateSyncModuleData(data) {
            if (!data || !data.packet) {
                console.log('Sync Module 데이터가 없습니다.');
                return;
            }

            // Set Mode일 때는 수정 가능한 필드 업데이트 차단
            if (SYNC_SET_MODE) {
                console.log('🔧 Sync Module Set Mode: 데이터 업데이트 차단됨');
                return;
            }

            console.log('Sync Module 데이터 업데이트:', data.packet);

            // Channel 1 업데이트
            updateSyncValue('ttg_ctrl_1', data.packet.TTG_CTRL1, 'us');
            updateSyncValue('rtg_ctrl_1', data.packet.RTG_CTRL1, 'us');
            updateSyncValue('tsync_delay_1', data.packet.TSYNC_DELAY1, 'us');
            updateSyncSelect('tsync_out_sel_1', data.packet.TSYNC_OUT_SEL1);
            updateSyncSelect('tsync_out_mode_1', data.packet.TSYNC_OUT_SEL1);

            // Channel 2 업데이트
            updateSyncValue('ttg_ctrl_2', data.packet.TTG_CTRL2, 'us');
            updateSyncValue('rtg_ctrl_2', data.packet.RTG_CTRL2, 'us');
            updateSyncValue('tsync_delay_2', data.packet.TSYNC_DELAY2, 'us');
            updateSyncSelect('tsync_out_sel_2', data.packet.TSYNC_OUT_SEL2);
            updateSyncSelect('tsync_out_mode_2', data.packet.TSYNC_OUT_SEL2);

            // Channel 3 업데이트
            updateSyncValue('ttg_ctrl_3', data.packet.TTG_CTRL3, 'us');
            updateSyncValue('rtg_ctrl_3', data.packet.RTG_CTRL3, 'us');
            updateSyncValue('tsync_delay_3', data.packet.TSYNC_DELAY3, 'us');
            updateSyncSelect('tsync_out_sel_3', data.packet.TSYNC_OUT_SEL3);
            updateSyncSelect('tsync_out_mode_3', data.packet.TSYNC_OUT_SEL3);

            // Frequency, ARFCN, F_Mode 업데이트
            updateSyncValue('TDD_Freq2', data.packet.TDD_Freq);
            updateSyncValue('TDD_Arfcn2', data.packet.TDD_Arfcn);
            updateSyncSelect('F_Mode', data.packet.F_Mode);

            // Slot Format 업데이트 (160개)
            if (data.packet.TDD_Slot_Format) {
                // ArrayBuffer를 Uint8Array로 변환
                const slotFormatArray = new Uint8Array(data.packet.TDD_Slot_Format);
                updateSlotFormat(Array.from(slotFormatArray));
            }

            // Slot 3gpp Format 업데이트 (56x14 = 784개)
            if (data.packet.TDD_3gpp_table) {
                // ArrayBuffer를 Uint8Array로 변환
                const slot3gppArray = new Uint8Array(data.packet.TDD_3gpp_table);
                updateSlot3gppFormat(Array.from(slot3gppArray));
            }
        }

        // Sync Module 값 업데이트 헬퍼 함수
        function updateSyncValue(elementId, value, unit = '') {
            const element = document.getElementById(elementId);
            if (element) {
                if (value === -999 || value === undefined) {
                    if (element.tagName === 'INPUT') {
                        element.value = unit ? `N/A [${unit}]` : 'N/A';
                    } else {
                        element.textContent = unit ? `N/A [${unit}]` : 'N/A';
                    }
                } else {
                    // app.py에서 이미 변환된 값 사용, 단위 유지
                    if (element.tagName === 'INPUT') {
                        element.value = unit ? `${value} [${unit}]` : value;
                    } else {
                        element.textContent = unit ? `${value} [${unit}]` : value;
                    }
                }
            }
        }

        // Sync Module select 업데이트 헬퍼 함수
        function updateSyncSelect(elementId, value) {
            const element = document.getElementById(elementId);
            if (element) {
                if (value === -999 || value === undefined) {
                    element.selectedIndex = 0; // 기본값
                } else {
                    // TSYNC_OUT_SEL: Bit[1:0] 처리
                    if (elementId.includes('tsync_out_sel')) {
                        const selValue = value & 0x03; // Bit[1:0]만 추출
                        element.value = selValue.toString();
                    }
                    // TSYNC_OUT_MODE: Bit 7 처리
                    else if (elementId.includes('tsync_out_mode')) {
                        const modeValue = (value >> 7) & 0x01; // Bit 7만 추출
                        element.value = modeValue.toString();
                    }
                    // F_Mode 처리 (0=DL, 1=UL)
                    else if (elementId === 'F_Mode') {
                        element.value = value.toString();
                    }
                }
            }
        }

        // Sync Module input 업데이트 헬퍼 함수
        function updateSyncInput(elementId, value) {
            const element = document.getElementById(elementId);
            if (element) {
                if (value === -999 || value === undefined) {
                    element.value = 'N/A';
                } else {
                    element.value = value;
                }
            }
        }

        // Slot Format 업데이트 헬퍼 함수 (160개)
        function updateSlotFormat(slotFormatData) {
            for (let i = 0; i < 160; i++) {
                const element = document.getElementById(`slot_format_${i}`);
                if (element && slotFormatData[i] !== undefined) {
                    element.value = slotFormatData[i];
                }
            }
        }

        // Slot 3gpp Format 업데이트 헬퍼 함수 (56x14 = 784개)
        function updateSlot3gppFormat(slot3gppData) {
            for (let row = 0; row < 56; row++) {
                for (let col = 0; col < 14; col++) {
                    const index = row * 14 + col;
                    const element = document.getElementById(`slot_3gpp_format_${row}_${col}`);
                    if (element && slot3gppData[index] !== undefined) {
                        // 0=D, 1=U, 2=F
                        element.value = slot3gppData[index].toString();
                    }
                }
            }
        }

        // User Management Modal 열기 함수
        function openUserManagementModal() {
            // User Management 모달: update_status 패킷 요청 시작 (사용자 관리 정보)
            modalOpened('#userMgmtModal');
            
            const modalElement = document.getElementById('userMgmtModal');
            if (modalElement) {
                // 기존 모달 인스턴스가 있다면 제거
                const existingModal = bootstrap.Modal.getInstance(modalElement);
                if (existingModal) {
                    existingModal.dispose();
                }
                
                // 새로운 모달 인스턴스 생성
                const modal = new bootstrap.Modal(modalElement, {
                    backdrop: 'static',
                    keyboard: false
                });
                
                modal.show();
                
                // 모달이 열린 후 이벤트 리스너 설정 (중복 방지)
                setTimeout(function() {
                    console.log('openUserManagementModal에서 setupUserManagementEvents 호출');
                    setupUserManagementEvents();
                }, 100);
            }
        }

        // ===== User Management Config =====
        var PAGE_SIZE   = 12;  // 한 페이지 행 수 (스크린샷처럼 널찍)
        var WINDOW_SIZE = 3;   // 페이지 버튼 3개만 표시

        // ===== Dummy Users (60명 생성) =====
        var levels = ['Super Admin','Admin','User'];
        function z(n){return (n<10?'0':'')+n;}
        var USERS = [];
        for(var i=1;i<=60;i++){
            USERS.push({
                id: 'user'+z(i),
                name: 'user'+z(i),
                level: levels[i%3],
                email: (i%4===0?'':'user'+z(i)+'@mail.com'),
                recv: (i%5===0?'Y':'N'),
                tel: (i%6===0? '010-'+z(i)+z(i)+'-'+z(70+i)+z(10+i) : ''),
                remark: (i%7===0? 'note '+i : ''),
                updated: (i%2===0? 'admin':'primaer')
            });
        }

        // ===== State =====
        var current = 1;
        var filterField = 'id';
        var term = '';

        // ===== Elements =====
        var body, pager, status, search, fieldMenu, fieldLabel;

        // ===== Helpers =====
        function filtered(){
            if(!term) {
                console.log('User Management - filtered: 검색어 없음, 전체 사용자 반환:', USERS.length);
                return USERS;
            }
            var t = term.toLowerCase();
            var filteredUsers = USERS.filter(function(u){
                return String(u[filterField]||'').toLowerCase().indexOf(t) !== -1;
            });
            console.log('User Management - filtered: 검색어 "' + term + '", 결과:', filteredUsers.length);
            return filteredUsers;
        }
        function pageCount(){ 
            var filteredData = filtered();
            var count = Math.max(1, Math.ceil(filteredData.length / PAGE_SIZE));
            console.log('User Management - pageCount:', {filteredLength: filteredData.length, PAGE_SIZE, count});
            return count;
        }

        function renderTable(){
            // body 요소를 다시 찾기 (전역 변수 참조 문제 해결)
            var bodyElement = document.getElementById('userBody');
            
            if (!bodyElement) {
                console.error('User Management - renderTable: body 요소를 찾을 수 없음', {
                    bodyId: 'userBody'
                });
                return;
            }
            
            var data = filtered();
            var start = (current-1)*PAGE_SIZE;
            var slice = data.slice(start, start+PAGE_SIZE);
            
            console.log('User Management - renderTable 실행:', {dataLength: data.length, start, sliceLength: slice.length});
            
            bodyElement.innerHTML = slice.map(function(u){
                return '<tr>'+
                    '<td>'+u.id+'</td>'+
                    '<td>'+u.name+'</td>'+
                    '<td>'+u.level+'</td>'+
                    '<td>'+u.email+'</td>'+
                    '<td>'+u.recv+'</td>'+
                    '<td>'+u.tel+'</td>'+
                    '<td>'+u.remark+'</td>'+
                    '<td>'+u.updated+'</td>'+
                '</tr>';
            }).join('') || '<tr><td colspan="8" class="text-center text-muted">No data</td></tr>';
        }

        function renderPager(){
            // status 요소를 다시 찾기 (전역 변수 참조 문제 해결)
            var statusElement = document.getElementById('userStatus');
            
            if (!pager || !statusElement) {
                console.error('User Management - renderPager: pager 또는 status 요소를 찾을 수 없음', {
                    pager: !!pager, 
                    status: !!statusElement,
                    statusId: 'userStatus'
                });
                return;
            }
            
            var total = pageCount();
            current = Math.min(current, total);

            console.log('User Management - renderPager 실행:', {current, total, pager: !!pager, status: !!statusElement});

            // 좌/우 버튼 상태
            var first = pager.querySelector('[data-act="first"]').parentElement;
            var prev  = pager.querySelector('[data-act="prev"]').parentElement;
            var next  = pager.querySelector('[data-act="next"]').parentElement;
            var last  = pager.querySelector('[data-act="last"]').parentElement;
            first.classList.toggle('disabled', current===1);
            prev .classList.toggle('disabled', current===1);
            next .classList.toggle('disabled', current===total);
            last .classList.toggle('disabled', current===total);

            // 기존 숫자 버튼 제거
            [].slice.call(pager.querySelectorAll('a[data-page]')).forEach(function(a){ a.parentElement.remove(); });

            // 윈도우 계산 (3개)
            var start = Math.max(1, Math.min(current - Math.floor(WINDOW_SIZE/2), total - WINDOW_SIZE + 1));
            var end   = Math.min(total, start + WINDOW_SIZE - 1);

            // prev 뒤에 삽입
            var anchor = pager.querySelector('[data-act="prev"]').parentElement;
            for(var p=start; p<=end; p++){
                var li = document.createElement('li');
                li.className = 'page-item' + (p===current?' active':'');
                li.innerHTML = '<a class="page-link" href="#" data-page="'+p+'">'+p+'</a>';
                anchor.after(li);
                anchor = li;
            }

            // 상태 텍스트 업데이트 - 중요!
            statusElement.textContent = 'Showing ' + current + ' of ' + total + ' pages';
            console.log('User Management - 상태 업데이트 완료:', current, 'of', total);
            
            // 실제 DOM에 반영되었는지 확인
            console.log('DOM 상태 확인:', {
                statusText: statusElement.textContent,
                statusInnerHTML: statusElement.innerHTML,
                statusVisible: statusElement.offsetParent !== null
            });
        }

        // User Management 이벤트 리스너 설정 함수
        function setupUserManagementEvents() {
            console.log('=== User Management 초기화 시작 ===');
            
            // 중복 초기화 방지
            if (window.userManagementInitialized) {
                console.log('User Management 이미 초기화됨, 중복 실행 방지');
                return;
            }
            
            // 요소들 다시 가져오기
            body = document.getElementById('userBody');
            pager = document.getElementById('userPager');
            status = document.getElementById('userStatus');
            search = document.getElementById('userSearch');
            fieldMenu = document.getElementById('userFilterFieldMenu');
            fieldLabel = document.getElementById('userFilterFieldLabel');
            
            console.log('DOM 요소 검색 결과:', {
                body: body ? '찾음' : '못찾음',
                pager: pager ? '찾음' : '못찾음', 
                status: status ? '찾음' : '못찾음',
                search: search ? '찾음' : '못찾음',
                fieldMenu: fieldMenu ? '찾음' : '못찾음',
                fieldLabel: fieldLabel ? '찾음' : '못찾음'
            });
            
            // 상태 초기화
            current = 1;
            term = '';
            
            if (pager) {
                console.log('페이지네이션 이벤트 리스너 추가 중...');
                pager.addEventListener('click', function(e){
                    var a = e.target.closest('a.page-link'); if(!a){return;}
                    e.preventDefault();
                    var act = a.getAttribute('data-act');
                    var num = a.getAttribute('data-page');
                    var total = pageCount();

                    if(act==='first') current = 1;
                    else if(act==='prev') current = Math.max(1, current-1);
                    else if(act==='next') current = Math.min(total, current+1);
                    else if(act==='last') current = total;
                    else if(num){ current = parseInt(num,10); }

                    console.log('User Management - 페이지 변경:', act || num, '현재:', current, '총:', total);
                    renderTable(); 
                    renderPager();
                });
                console.log('페이지네이션 이벤트 리스너 추가 완료');
            } else {
                console.error('페이지네이션 요소를 찾을 수 없음!');
            }

            // 검색/필드 변경 이벤트 리스너
            if (search) {
                search.addEventListener('input', function(){ 
                    term = this.value.trim(); 
                    current = 1; 
                    renderTable(); 
                    renderPager(); 
                });
            }

            if (fieldMenu) {
                fieldMenu.addEventListener('click', function(e){
                    var a = e.target.closest('[data-field]'); if(!a) return;
                    e.preventDefault();
                    filterField = a.getAttribute('data-field');
                    fieldLabel.textContent = a.textContent;
                    current = 1; 
                    renderTable(); 
                    renderPager(); 
                });
            }

            // 초기 렌더
            console.log('초기 렌더 시작...');
            if (body && pager) {
                console.log('renderTable() 호출...');
                renderTable();
                console.log('renderPager() 호출...');
                renderPager();
                console.log('초기 렌더 완료');
                
                // 초기화 완료 표시
                window.userManagementInitialized = true;
            } else {
                console.error('초기 렌더 실패: body 또는 pager가 없음');
            }
            
            console.log('=== User Management 초기화 완료 ===');
        }

        // ===== Beam Info Modal Functions =====
        function openBeamInfoModal() {
            // Beam Info 모달: update_status + tdd_status 패킷 요청 시작 (빔 정보 + 동기화 모듈)
            modalOpened('#beaminfo2');
            
            const modal = new bootstrap.Modal(document.getElementById('beaminfo2'));
            modal.show();
        }

        function closeModal(modalId) {
            const modalElement = document.getElementById(modalId);
            if (modalElement) {
                const modal = bootstrap.Modal.getInstance(modalElement);
                if (modal) {
                    modal.hide();
                }
            }
        }

        // Close modal when clicking outside (Bootstrap handles this automatically)
        // No need for custom window.onclick handler

        // Save button event listener
        document.addEventListener('DOMContentLoaded', function() {
            const saveBtn = document.getElementById('beamSaveBtn');
            if (saveBtn) {
                saveBtn.addEventListener('click', function() {
                    // 여기에 저장 로직을 추가할 수 있습니다
                    closeModal('beaminfo2');
                });
            }

            // beaminfo2 모달 이벤트 리스너 추가 (새로운 구조에서는 자동으로 관리됨)
            const beaminfo2Modal = document.getElementById('beaminfo2');
            if (beaminfo2Modal) {
                beaminfo2Modal.addEventListener('hidden.bs.modal', function() {
                    // 모달이 닫힐 때 새로운 구조에서 자동으로 관리됨
                    console.log('[UI] 🔒 beaminfo2 modal closed');
                });
            }
        });

    </script>

    <!-- Beam Info Modal -->
    <div id="beaminfo2" class="modal fade" tabindex="-1" aria-labelledby="beaminfo2Label" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog" style="width: 800px;">
            <div class="modal-content" style="border-radius: 8px; overflow: hidden; border: none;">

                <!-- Modal Header -->
                <div class="modal-header" style="background-color: #888; color: white; padding: 10px; border-radius: 8px 8px 0 0; margin: 0;">
                    <span><i class="bi bi-plus-square"></i> Beam Info</span>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="color: white;"></button>
                </div>

                <!-- Modal Body -->
                <div class="modal-body" style="background-color: #e0e0e0; padding: 20px;">

                    <!-- DU Section -->
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px; border: none;">
                        <tr>
                            <td colspan="4" style="font-weight: bold; border-bottom: 1px dashed #999; padding-bottom: 5px; border: none;">
                                <i class="bi bi-folder"></i> DU
                            </td>
                        </tr>
                        <tr style="border: none;">
                            <td style="width: 80px; border: none; padding: 5px;">Latitude</td>
                            <td style="border: none; padding: 5px;"><input type="text" style="width: 100%; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></td>
                            <td style="width: 80px; border: none; padding: 5px;">Longitude</td>
                            <td style="border: none; padding: 5px;"><input type="text" style="width: 100%; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></td>
                        </tr>
                        <tr style="border: none;">
                            <td style="border: none; padding: 5px;">Azimuth:</td>
                            <td style="border: none; padding: 5px;">Orientation [ 0 ]</td>
                            <td style="border: none; padding: 5px;">Tilt</td>
                            <td style="border: none; padding: 5px;">[ 0 ]</td>
                        </tr>
                    </table>

                    <!-- SU Section -->
                    <table style="width: 100%; border-collapse: collapse; border: none;">
                        <tr>
                            <td colspan="4" style="font-weight: bold; border-bottom: 1px dashed #999; padding-bottom: 5px; border: none;">
                                <i class="bi bi-folder"></i> SU
                            </td>
                        </tr>
                        <tr style="border: none;">
                            <td style="border: none; padding: 5px;">SU#1</td>
                            <td style="border: none; padding: 5px;">Latitude <input type="text" style="width: 80px; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></td>
                            <td style="border: none; padding: 5px;">Longitude <input type="text" style="width: 80px; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></td>
                            <td style="border: none; padding: 5px;"></td>
                        </tr>
                        <tr style="border: none;">
                            <td style="border: none; padding: 5px;">Azimuth:</td>
                            <td style="border: none; padding: 5px;">Orientation [ ]</td>
                            <td style="border: none; padding: 5px;">Tilt</td>
                            <td style="border: none; padding: 5px;">[ ]</td>
                        </tr>
                        <tr style="border: none;">
                            <td style="border: none; padding: 5px;">Remark</td>
                            <td colspan="3" style="border: none; padding: 5px;">
                                <textarea style="width: 100%; height: 60px; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></textarea>
                            </td>
                        </tr>
                    </table>

                </div>

                <!-- Modal Footer -->
                <!-- Footer buttons (Bootstrap 5) -->
                <div class="d-flex justify-content-center py-4" style="gap:8px;">
                    <button type="button" class="btn" data-bs-dismiss="modal"
                            style="background:#6b7280; color:#fff; font-weight:700; padding:.6rem 1.6rem; border-radius:8px;">
                        Cancel
                    </button>
                    <button type="button" id="beamSaveBtn" class="btn"
                            style="background:#667089; color:#fff; font-weight:700; padding:.6rem 1.6rem; border-radius:8px;">
                        Save
                    </button>
                </div>

            </div>
        </div>
    </div>
                    
    <!-- User Management Modal -->
    <div class="modal fade" id="userMgmtModal" tabindex="-1" data-bs-backdrop="static" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content" style="background:#efefef; border:0;">
                <!-- Title bar -->
                <div class="d-flex align-items-center justify-content-between px-3 py-2"
                     style="background:#7a7f82; color:#fff; border-radius:8px 8px 0 0;">
                    <div class="d-flex align-items-center">
                        <span style="width:22px;height:22px;border:2px solid #fff;border-radius:4px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;margin-right:10px;">+</span>
                        <span style="font-size:1.1rem;">User Management</span>
                    </div>
                    <button type="button" class="btn-close text-white m-0 p-0" data-bs-dismiss="modal" aria-label="Close" style="font-size:28px; line-height:1;"></button>
                </div>

                <div class="px-3 pt-3 pb-0">
                    <!-- Search row -->
                    <div class="d-flex align-items-center mb-3" style="gap:14px;">
                        <div class="dropdown">
                            <button class="btn btn-light dropdown-toggle d-flex align-items-center"
                                    type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                    style="min-width:180px; justify-content:space-between;">
                                <span id="userFilterFieldLabel">User ID</span>
                    </button>
                            <ul class="dropdown-menu" id="userFilterFieldMenu">
                                <li><a class="dropdown-item" href="#" data-field="id">User ID</a></li>
                                <li><a class="dropdown-item" href="#" data-field="name">Name</a></li>
                                <li><a class="dropdown-item" href="#" data-field="level">Level Name</a></li>
                                <li><a class="dropdown-item" href="#" data-field="email">E-mail</a></li>
                            </ul>
                </div>

                        <div class="position-relative" style="flex:1 1 auto; max-width:540px;">
                            <input type="text" id="userSearch" class="form-control" placeholder="Search…" style="padding-right:42px;">
                            <span style="position:absolute; right:12px; top:50%; transform:translateY(-50%); opacity:.6;">🔍</span>
                        </div>

                        <div class="ml-auto d-flex" style="gap:10px;">
                            <button class="btn btn-success">Add</button>
                            <button class="btn btn-primary">Modify</button>
                            <button class="btn btn-danger">Delete</button>
            </div>
        </div>

                    <!-- Table -->
                    <div class="bg-white rounded" style="border:1px solid #cfd3d8;">
                        <div class="table-responsive" style="max-height:58vh; overflow:auto;">
                            <table class="table table-sm mb-0" style="font-size: 0.75rem;">
                                <thead style="background:#74767a; color:#fff; position:sticky; top:0; z-index:2; font-size: 0.8rem;">
                                    <tr>
                                        <th style="min-width:120px; padding: 0.4rem 0.3rem; text-align: center;">ID</th>
                                        <th style="min-width:120px; padding: 0.4rem 0.3rem; text-align: center;">Name</th>
                                        <th style="min-width:140px; padding: 0.4rem 0.3rem; text-align: center;">Level Name</th>
                                        <th style="min-width:180px; padding: 0.4rem 0.3rem; text-align: center;">E-mail</th>
                                        <th style="min-width:80px; padding: 0.4rem 0.3rem; text-align: center;">Recv Y/N</th>
                                        <th style="min-width:120px; padding: 0.4rem 0.3rem; text-align: center;">Tel</th>
                                        <th style="min-width:200px; padding: 0.4rem 0.3rem; text-align: center;">Remark</th>
                                        <th style="min-width:120px; padding: 0.4rem 0.3rem; text-align: center;">Update ID</th>
                                    </tr>
                                </thead>
                                <tbody id="userBody" style="font-size: 0.75rem;">
                                    <!-- JS renders -->
                                </tbody>
                                <style>
                                    #userBody tr td {
                                        padding: 0.3rem 0.2rem !important;
                                        vertical-align: middle;
                                        text-align: center !important;
                                    }
                                    #userBody tr:hover {
                                        background-color: #f8f9fa;
                                    }
                                </style>
                            </table>
                        </div>
                    </div>

                    <!-- Footer: status + pagination + Cancel -->
                    <div class="d-flex align-items-center justify-content-between mt-3 mb-4">
                        <div class="text-muted small ms-1" id="userStatus" style="min-width: 150px; font-weight: bold; color: #666 !important;">Loading...</div>

                        <ul id="userPager" class="pagination pagination-sm mb-0">
                            <li class="page-item"><a class="page-link" href="#" data-act="first">&laquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="prev">&lsaquo;</a></li>
                            <!-- windowed page buttons (3 visible) will be injected here -->
                            <li class="page-item"><a class="page-link" href="#" data-act="next">&rsaquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="last">&raquo;</a></li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-center pb-4">
                        <button class="btn" data-bs-dismiss="modal"
                                style="background:#6b7280; color:#fff; font-weight:700; padding:.6rem 1.6rem; border-radius:8px;">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Alarm Level Modal -->
    <div class="modal fade" id="alarmLevelModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content" style="background:#d9d9db; border:0;">
                <!-- 상단 타이틀 바 -->
                <div class="d-flex align-items-center justify-content-between px-3 py-2"
                     style="background:#7a7f82; color:#fff; border-radius:12px 12px 0 0;">
                    <div class="d-flex align-items-center">
                        <span style="width:20px;height:20px;border:2px solid #fff;border-radius:4px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;margin-right:8px;">+</span>
                        <span style="font-size:1.05rem;">Alarm Level</span>
                    </div>
                    <!-- BS5 닫기 버튼 -->
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <!-- 본문 -->
                <div class="px-3 pt-2 pb-0" style="background:#eeeeef;">
                    <!-- 우상단 버튼 -->
                    <div class="d-flex justify-content-end my-2">
                        <button class="btn btn-primary btn-sm me-2">Modify</button>
                        <button class="btn btn-success btn-sm">Config</button>
                    </div>

                    <!-- 테이블 컨테이너 -->
                    <div class="bg-white rounded" style="border:1px solid #c9c9cf;">
                        <div class="table-wrap" style="max-height:58vh; overflow:auto; position:relative;">
                            <table class="table table-sm m-0 text-center">
                                <thead style="position:sticky; top:0; z-index:2; background:#f8f9fa; box-shadow:0 1px 0 #ddd;">
                                    <tr>
                                        <th style="min-width:110px; text-align:center;">Equip</th>
                                        <th style="min-width:140px; text-align:center;">Alarm Level</th>
                                        <th style="min-width:140px; text-align:center;">Module Name</th>
                                        <th style="min-width:160px; text-align:center;">Sub Module Name</th>
                                        <th style="min-width:220px; text-align:center;">Item Name</th>
                                        <th style="min-width:140px; text-align:center;">Alarm Mask</th>
                                        <th style="min-width:140px; text-align:center;">Update ID</th>
                                    </tr>
                                    <!-- 필터 행 (보기만) -->
                                    <tr>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- 하드코딩 데이터 시작 -->
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">MIMO</td><td style="text-align:center;">DL ALC Level</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">SISO</td><td style="text-align:center;">DL ALC Level</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Warning</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">EMS DU LINK</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">FPGA LINK</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Ant. Array Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">IF PLL</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">SISO</td><td style="text-align:center;">DL LD Lower</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">MIMO</td><td style="text-align:center;">DL LD Lower</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">SU#1 Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">SU#2 Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">SU#3 Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">SU#4 Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">SISO</td><td style="text-align:center;">UL PD Lower</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">MIMO</td><td style="text-align:center;">UL PD Lower</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Decoding</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Sync PLL</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">TSYNC LINK</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">AC</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">BAT</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">DC</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Minor</td><td style="text-align:center;">Download</td><td style="text-align:center;"></td><td style="text-align:center;">Download</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Minor</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Temp</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">MIMO</td><td style="text-align:center;">DL ALC Level</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">SISO</td><td style="text-align:center;">DL ALC Level</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">DU LINK</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Ant. Array Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">IF PLL</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <!-- 필요시 더 추가 -->
                                    <!-- 하드코딩 데이터 끝 -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 하단 푸터 -->
                    <div class="d-flex justify-content-center py-3" style="background:#eeeeef; border-radius:0 0 12px 12px;">
                        <button class="btn btn-secondary px-4" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Alarm History Modal -->
    <div class="modal fade" id="alarmHistoryModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content" style="background:#d9d9db; border:0;">
                <!-- Title bar -->
                <div class="d-flex align-items-center justify-content-between px-3 py-2"
                     style="background:#7a7f82; color:#fff; border-radius:12px 12px 0 0;">
                    <div class="d-flex align-items-center">
                        <span style="width:20px;height:20px;border:2px solid #fff;border-radius:4px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;margin-right:8px;">+</span>
                        <span style="font-size:1.05rem;">Alarm History</span>
                    </div>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="px-3 pt-2 pb-0" style="background:#eeeeef;">
                    <!-- Right action buttons -->
                    <div class="d-flex justify-content-end my-2">
                        <button class="btn btn-danger btn-sm me-2">Delete</button>
                        <button class="btn btn-success btn-sm">Excel</button>
                    </div>

                    <!-- Table -->
                    <div class="bg-white rounded" style="border:1px solid #c9c9cf;">
                        <div class="table-wrap" style="max-height:58vh; overflow:auto; position:relative;">
                            <table class="table table-sm m-0" style="font-size: 0.75rem;">
                                <thead style="position:sticky; top:0; z-index:2; background:#f8f9fa; box-shadow:0 1px 0 #ddd; font-size: 0.8rem;">
                                    <tr>
                                        <th style="min-width:150px; text-align: center; padding: 0.4rem 0.3rem;">Alarm Level</th>
                                        <th style="min-width:380px; text-align: center; padding: 0.4rem 0.3rem;">Alarm Message</th>
                                        <th style="min-width:180px; text-align: center; padding: 0.4rem 0.3rem;">Alarm Date</th>
                                        <th style="min-width:120px; text-align: center; padding: 0.4rem 0.3rem;">Clear Y/N</th>
                                        <th style="min-width:180px; text-align: center; padding: 0.4rem 0.3rem;">Clear Date</th>
                                    </tr>
                                </thead>
                                <tbody id="histBody" style="font-size: 0.75rem;">
                                    <!-- JS가 렌더링 -->
                                </tbody>
                                <style>
                                    #histBody tr td {
                                        padding: 0.3rem 0.2rem !important;
                                        vertical-align: middle;
                                        text-align: center !important;
                                    }
                                    #histBody tr:hover {
                                        background-color: #f8f9fa;
                                    }
                                </style>
                            </table>
                        </div>
                    </div>

                    <!-- Footer: status + pagination + cancel -->
                    <div class="d-flex align-items-center justify-content-between py-3" style="background:#eeeeef;">
                        <div id="histPageStatus" class="text-muted small ms-1" style="min-width: 150px; font-weight: bold; color: #666 !important;">Loading...</div>

                        <ul id="histPager" class="pagination pagination-sm mb-0">
                            <li class="page-item"><a class="page-link" href="#" data-act="first">&laquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="prev">&lsaquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="1">1</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="2">2</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="3">3</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="next">&rsaquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="last">&raquo;</a></li>
                        </ul>

                        <button class="btn btn-secondary px-4" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Set Mode JavaScript -->
    <script>
    //==== 전역 상태 ====
    let SET_MODE = false;

    //==== UI id ↔ 데이터 필드 매핑 ====
    const FIELD_MAP = {
      // DU System
      tempupper:       { key:'SysTemperHighLvl',      type:'i8',    min:-128, max:127 },
      templower:       { key:'SysTemperLowLvl',       type:'i8',    min:-128, max:127 },

      // Beam Status
      gumstick_onoff:  { key:'GumStick_OnOff',        type:'u8',    min:0, max:1 },
      mvbx_rsagc_mode: { key:'Mvbx_RsAgcMode',        type:'u8',    min:0, max:1 },
      mvbx_rsagc_threshold: { key:'Mvbx_RsAgcThreshold', type:'i8', min:-128, max:127 },
      gNB_Vendor:      { key:'gNB_Vendor',            type:'u8',    min:0, max:255 },

      // SISO RF
      dl_att_siso:     { key:'DU_DlManualAtten_SISO', type:'u8',    min:0, max:255 },
      dl_alc_level_siso: { key:'ALC_DL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      alc_dl0_siso_mode: { key:'ALC_DL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      mvbx_tx_gain_set_siso: { key:'Mvbx_TxGainSetSiso', type:'u8', min:0, max:255 },
      ul_att_siso:     { key:'DU_UlManualAtten_SISO', type:'u8',    min:0, max:255 },
      ul_iso_level_siso: { key:'ALC_UL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      mvbx_rx_gain_set_siso: { key:'Mvbx_RxGainSetSiso', type:'u8', min:0, max:255 },

      // MIMO RF
      dl_att_mimo:     { key:'DU_DlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      dl_alc_level_mimo: { key:'ALC_DL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      alc_dl1_mimo_mode: { key:'ALC_DL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      mvbx_tx_gain_set_miso: { key:'Mvbx_TxGainSetMiso', type:'u8', min:0, max:255 },
      ul_att_mimo:     { key:'DU_UlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      ul_iso_level_mimo: { key:'ALC_UL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      mvbx_rx_gain_set_miso: { key:'Mvbx_RxGainSetMiso', type:'u8', min:0, max:255 },

      // OPTIC
      ld1_det_dl0_siso_low: { key:'LD1_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      pd1_det_ul0_siso_low: { key:'PD1_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      ld2_det_dl1_mimo_low: { key:'LD2_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      pd2_det_ul1_mimo_low: { key:'PD2_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },


    };

    //==== SU1 필드 매핑 ====
    const SU1_FIELD_MAP = {
      // SU1 System
      su1_tempupper:       { key:'SU1_SysTemperHighLvl',      type:'i8',    min:-128, max:127 },
      su1_templower:       { key:'SU1_SysTemperLowLvl',       type:'i8',    min:-128, max:127 },
      su1_suid:            { key:'SU1_SuId',                  type:'u8',    min:1, max:4 },
      su1_cascade_mode:    { key:'SU1_SuEndMode',             type:'u8',    min:0, max:1 },
      
      // SU1 Beam Status
      su1_gumstick_onoff:  { key:'SU1_GumStick_OnOff',        type:'u8',    min:0, max:1 },

      // SU1 SISO RF
      su1_dl_att_siso:     { key:'SU1_DlManualAtten_SISO', type:'u8',    min:0, max:255 },
      su1_dl_alc_level_siso: { key:'SU1_ALC_DL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      su1_dl_alc_onoff_siso: { key:'SU1_ALC_DL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      su1_mvbx_tx_gain_set_siso: { key:'SU1_Mvbx_TxGainSetSiso', type:'u8', min:0, max:255 },
      su1_ul_att_siso:     { key:'SU1_UlManualAtten_SISO', type:'u8',    min:0, max:255 },
      su1_ul_alc_level_siso: { key:'SU1_ALC_UL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      su1_ul_alc_onoff_siso: { key:'SU1_ALC_UL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      su1_mvbx_rx_gain_set_siso: { key:'SU1_Mvbx_RxGainSetSiso', type:'u8', min:0, max:255 },

      // SU1 MIMO RF
      su1_dl_att_mimo:     { key:'SU1_DlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      su1_dl_alc_level_mimo: { key:'SU1_ALC_DL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      su1_dl_alc_onoff_mimo: { key:'SU1_ALC_DL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      su1_mvbx_tx_gain_set_mimo: { key:'SU1_Mvbx_TxGainSetMimo', type:'u8', min:0, max:255 },
      su1_ul_att_mimo:     { key:'SU1_UlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      su1_ul_alc_level_mimo: { key:'SU1_ALC_UL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      su1_ul_alc_onoff_mimo: { key:'SU1_ALC_UL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      su1_mvbx_rx_gain_set_mimo: { key:'SU1_Mvbx_RxGainSetMimo', type:'u8', min:0, max:255 },

      // SU1 OPTIC
      su1_ld1_det_dl0_siso_low: { key:'SU1_LD1_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su1_pd1_det_ul0_siso_low: { key:'SU1_PD1_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su1_ld2_det_dl1_mimo_low: { key:'SU1_LD2_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su1_pd2_det_ul1_mimo_low: { key:'SU1_PD2_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su1_ld3_det_dl0_siso_low: { key:'SU1_LD3_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su1_pd3_det_ul0_siso_low: { key:'SU1_PD3_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su1_ld4_det_dl1_mimo_low: { key:'SU1_LD4_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su1_pd4_det_ul1_mimo_low: { key:'SU1_PD4_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },
    };

    //==== SU2 필드 매핑 ====
    const SU2_FIELD_MAP = {
      // SU2 System
      su2_inittemper:       { key:'SU2_SysTemperHighLvl',      type:'i8',    min:-128, max:127 },
      su2_templower:        { key:'SU2_SysTemperLowLvl',       type:'i8',    min:-128, max:127 },
      su2_suid:             { key:'SU2_SuId',                  type:'u8',    min:1, max:4 },
      su2_cascade_mode:     { key:'SU2_SuEndMode',             type:'u8',    min:0, max:1 },
      
      // SU2 Beam Status
      su2_gumstick_onoff:  { key:'SU2_GumStick_OnOff',        type:'u8',    min:0, max:1 },

      // SU2 SISO RF
      su2_dl_att_siso:     { key:'SU2_DlManualAtten_SISO', type:'u8',    min:0, max:255 },
      su2_dl_alc_level_siso: { key:'SU2_ALC_DL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      su2_dl_alc_onoff_siso: { key:'SU2_ALC_DL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      su2_mvbx_tx_gain_set_siso: { key:'SU2_Mvbx_TxGainSetSiso', type:'u8', min:0, max:255 },
      su2_ul_att_siso:     { key:'SU2_UlManualAtten_SISO', type:'u8',    min:0, max:255 },
      su2_ul_alc_level_siso: { key:'SU2_ALC_UL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      su2_ul_alc_onoff_siso: { key:'SU2_ALC_UL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      su2_mvbx_rx_gain_set_siso: { key:'SU2_Mvbx_RxGainSetSiso', type:'u8', min:0, max:255 },

      // SU2 MIMO RF
      su2_dl_att_mimo:     { key:'SU2_DlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      su2_dl_alc_level_mimo: { key:'SU2_ALC_DL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      su2_dl_alc_onoff_mimo: { key:'SU2_ALC_DL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      su2_mvbx_tx_gain_set_mimo: { key:'SU2_Mvbx_TxGainSetMimo', type:'u8', min:0, max:255 },
      su2_ul_att_mimo:     { key:'SU2_UlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      su2_ul_alc_level_mimo: { key:'SU2_ALC_UL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      su2_ul_alc_onoff_mimo: { key:'SU2_ALC_UL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      su2_mvbx_rx_gain_set_mimo: { key:'SU2_Mvbx_RxGainSetMimo', type:'u8', min:0, max:255 },

      // SU2 OPTIC
      su2_ld1_det_dl0_siso_low: { key:'SU2_LD1_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su2_pd1_det_ul0_siso_low: { key:'SU2_PD1_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su2_ld2_det_dl1_mimo_low: { key:'SU2_LD2_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su2_pd2_det_ul1_mimo_low: { key:'SU2_PD2_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su2_ld3_det_dl0_siso_low: { key:'SU2_LD3_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su2_pd3_det_ul0_siso_low: { key:'SU2_PD3_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su2_ld4_det_dl1_mimo_low: { key:'SU2_LD4_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su2_pd4_det_ul1_mimo_low: { key:'SU2_PD4_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },
    };

    //==== SU3 필드 매핑 ====
    const SU3_FIELD_MAP = {
      // SU3 System
      su3_tempupper:       { key:'SU3_SysTemperHighLvl',      type:'i8',    min:-128, max:127 },
      su3_templower:        { key:'SU3_SysTemperLowLvl',       type:'i8',    min:-128, max:127 },
      su3_suid:             { key:'SU3_SuId',                  type:'u8',    min:1, max:4 },
      su3_cascade_mode:     { key:'SU3_SuEndMode',             type:'u8',    min:0, max:1 },
      
      // SU3 Beam Status
      su3_gumstick_onoff:  { key:'SU3_GumStick_OnOff',        type:'u8',    min:0, max:1 },

      // SU3 SISO RF
      su3_dl_att_siso:     { key:'SU3_DlManualAtten_SISO', type:'u8',    min:0, max:255 },
      su3_dl_alc_level_siso: { key:'SU3_ALC_DL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      su3_dl_alc_onoff_siso: { key:'SU3_ALC_DL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      su3_mvbx_tx_gain_set_siso: { key:'SU3_Mvbx_TxGainSetSiso', type:'u8', min:0, max:255 },
      su3_ul_att_siso:     { key:'SU3_UlManualAtten_SISO', type:'u8',    min:0, max:255 },
      su3_ul_alc_level_siso: { key:'SU3_ALC_UL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      su3_ul_alc_onoff_siso: { key:'SU3_ALC_UL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      su3_mvbx_rx_gain_set_siso: { key:'SU3_Mvbx_RxGainSetSiso', type:'u8', min:0, max:255 },

      // SU3 MIMO RF
      su3_dl_att_mimo:     { key:'SU3_DlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      su3_dl_alc_level_mimo: { key:'SU3_ALC_DL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      su3_dl_alc_onoff_mimo: { key:'SU3_ALC_DL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      su3_mvbx_tx_gain_set_mimo: { key:'SU3_Mvbx_TxGainSetMimo', type:'u8', min:0, max:255 },
      su3_ul_att_mimo:     { key:'SU3_UlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      su3_ul_alc_level_mimo: { key:'SU3_ALC_UL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      su3_ul_alc_onoff_mimo: { key:'SU3_ALC_UL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      su3_mvbx_rx_gain_set_mimo: { key:'SU3_Mvbx_RxGainSetMimo', type:'u8', min:0, max:255 },

      // SU3 OPTIC
      su3_ld1_det_dl0_siso_low: { key:'SU3_LD1_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su3_pd1_det_ul0_siso_low: { key:'SU3_PD1_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su3_ld2_det_dl1_mimo_low: { key:'SU3_LD2_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su3_pd2_det_ul1_mimo_low: { key:'SU3_PD2_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su3_ld3_det_dl0_siso_low: { key:'SU3_LD3_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su3_pd3_det_ul0_siso_low: { key:'SU3_PD3_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su3_ld4_det_dl1_mimo_low: { key:'SU3_LD4_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su3_pd4_det_ul1_mimo_low: { key:'SU3_PD4_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },
    };

    //==== SU4 필드 매핑 ====
    const SU4_FIELD_MAP = {
      // SU4 System
      su4_tempupper:       { key:'SU4_SysTemperHighLvl',      type:'i8',    min:-128, max:127 },
      su4_templower:        { key:'SU4_SysTemperLowLvl',       type:'i8',    min:-128, max:127 },
      su4_suid:             { key:'SU4_SuId',                  type:'u8',    min:1, max:4 },
      
      // SU4 Beam Status
      su4_gumstick_onoff:  { key:'SU4_GumStick_OnOff',        type:'u8',    min:0, max:1 },

      // SU4 SISO RF
      su4_dl_att_siso:     { key:'SU4_DlManualAtten_SISO', type:'u8',    min:0, max:255 },
      su4_dl_alc_level_siso: { key:'SU4_ALC_DL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      su4_dl_alc_onoff_siso: { key:'SU4_ALC_DL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      su4_mvbx_tx_gain_set_siso: { key:'SU4_Mvbx_TxGainSetSiso', type:'u8', min:0, max:255 },
      su4_ul_att_siso:     { key:'SU4_UlManualAtten_SISO', type:'u8',    min:0, max:255 },
      su4_ul_alc_level_siso: { key:'SU4_ALC_UL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      su4_ul_alc_onoff_siso: { key:'SU4_ALC_UL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      su4_mvbx_rx_gain_set_siso: { key:'SU4_Mvbx_RxGainSetSiso', type:'u8', min:0, max:255 },

      // SU4 MIMO RF
      su4_dl_att_mimo:     { key:'SU4_DlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      su4_dl_alc_level_mimo: { key:'SU4_ALC_DL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      su4_dl_alc_onoff_mimo: { key:'SU4_ALC_DL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      su4_mvbx_tx_gain_set_mimo: { key:'SU4_Mvbx_TxGainSetMimo', type:'u8', min:0, max:255 },
      su4_ul_att_mimo:     { key:'SU4_UlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      su4_ul_alc_level_mimo: { key:'SU4_ALC_UL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      su4_ul_alc_onoff_mimo: { key:'SU4_ALC_UL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      su4_mvbx_rx_gain_set_mimo: { key:'SU4_Mvbx_RxGainSetMimo', type:'u8', min:0, max:255 },

      // SU4 OPTIC
      su4_ld1_det_dl0_siso_low: { key:'SU4_LD1_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su4_pd1_det_ul0_siso_low: { key:'SU4_PD1_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su4_ld2_det_dl1_mimo_low: { key:'SU4_LD2_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su4_pd2_det_ul1_mimo_low: { key:'SU4_PD2_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su4_ld3_det_dl0_siso_low: { key:'SU4_LD3_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su4_pd3_det_ul0_siso_low: { key:'SU4_PD3_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      su4_ld4_det_dl1_mimo_low: { key:'SU4_LD4_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      su4_pd4_det_ul1_mimo_low: { key:'SU4_PD4_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },
    };

    //==== Sync Module 필드 매핑 ====
    const SYNC_FIELD_MAP = {
      // TSYNC OUT SEL/MODE #1
      tsync_out_sel_1: { key: 'TSYNC_OUT_SEL1', type: 'u8', min: 0, max: 255 },
      
      // TSYNC OUT SEL/MODE #2
      tsync_out_sel_2: { key: 'TSYNC_OUT_SEL2', type: 'u8', min: 0, max: 255 },
      
      // TSYNC OUT SEL/MODE #3
      tsync_out_sel_3: { key: 'TSYNC_OUT_SEL3', type: 'u8', min: 0, max: 255 },
      
      // Frequency (HTML에서 실제 사용하는 ID)
      TDD_Freq2: { key: 'TDD_Freq', type: 'u32', min: 0, max: 4294967295 },
      
      // ARFCN (HTML에서 실제 사용하는 ID)
      TDD_Arfcn2: { key: 'TDD_Arfcn', type: 'u16', min: 0, max: 65535 },
      
      // F Mode (HTML에서 실제 사용하는 ID)
      F_Mode: { key: 'F_Mode', type: 'u8', min: 0, max: 255 },
      
      // SSB MU (HTML에서 실제 사용하는 ID)
      ssb_mu: { key: 'MVBX_SSB_MU', type: 'u8', min: 0, max: 255 },
      
      // TDD Rate (HTML에서 실제 사용하는 ID)
      tdd_rate: { key: 'MVBX_TDD_RATE', type: 'u8', min: 0, max: 255 },
    };

    //==== 기존 호환성을 위한 CONTROL_BITS (DU_CONTROL_BITS와 동일) ====
    const CONTROL_BITS = {
      // Temp Upper/Lower
      SysTemperHighLvl: [0, 3],        // packet[580]의 bit3 → index 0
      SysTemperLowLvl: [0, 3],         // packet[580]의 bit3 → index 0
      
      // Beam Status
      GumStick_OnOff: [7, 1],          // packet[587]의 bit1 → index 7
      Mvbx_RsAgcMode: [16, 5],         // packet[596]의 bit5 → index 16
      Mvbx_RsAgcThreshold: [16, 4],    // packet[596]의 bit4 → index 16
      gNB_Vendor: [14, 2],              // packet[594]의 bit2 → index 14
      
      // SISO RF
      DU_DlManualAtten_SISO: [4, 0],   // packet[584]의 bit0 → index 4
      ALC_DL0_SISO_Level: [7, 4],      // packet[587]의 bit4 → index 7
      ALC_DL0_SISO_Mode: [3, 2],       // packet[583]의 bit2 → index 3
      Mvbx_TxGainSetSiso: [16, 0],     // packet[596]의 bit0 → index 16
      DU_UlManualAtten_SISO: [4, 4],   // packet[584]의 bit4 → index 4
      ALC_UL0_SISO_Level: [7, 6],      // packet[587]의 bit6 → index 7
      Mvbx_RxGainSetSiso: [16, 1],     // packet[596]의 bit1 → index 16
      
      // MIMO RF
      DU_DlManualAtten_MIMO: [4, 2],   // packet[584]의 bit2 → index 4
      ALC_DL1_MIMO_Level: [7, 5],      // packet[587]의 bit5 → index 7
      ALC_DL1_MIMO_Mode: [3, 3],       // packet[583]의 bit3 → index 3
      Mvbx_TxGainSetMiso: [16, 2],     // packet[596]의 bit2 → index 16
      DU_UlManualAtten_MIMO: [4, 7],   // packet[584]의 bit7 → index 4
      ALC_UL1_MIMO_Level: [7, 7],      // packet[587]의 bit7 → index 7
      Mvbx_RxGainSetMiso: [16, 3],     // packet[596]의 bit3 → index 16
      
      // SISO OPTIC
      LD1_DET_DL0_SISO_Low: [8, 0],   // packet[588]의 bit0 → index 8
      PD1_DET_UL0_SISO_Low: [8, 2],   // packet[588]의 bit2 → index 8
      
      // MIMO OPTIC
      LD2_DET_DL1_MIMO_Low: [8, 1],   // packet[588]의 bit1 → index 8
      PD2_DET_UL1_MIMO_Low: [8, 3],   // packet[588]의 bit3 → index 8
    };

    //==== DU System 컨트롤 비트 (24바이트, packet[580:604]을 index 0으로, [상대인덱스, bit]) ====
    const DU_CONTROL_BITS = {
      // Temp Upper/Lower
      SysTemperHighLvl: [0, 3],        // packet[580]의 bit3 → index 0
      SysTemperLowLvl: [0, 3],         // packet[580]의 bit3 → index 0
      
      // Beam Status
      GumStick_OnOff: [7, 1],          // packet[587]의 bit1 → index 7
      Mvbx_RsAgcMode: [16, 5],         // packet[596]의 bit5 → index 16
      Mvbx_RsAgcThreshold: [16, 4],    // packet[596]의 bit4 → index 16
      gNB_Vendor: [14, 2],              // packet[594]의 bit2 → index 14
      
      // SISO RF
      DU_DlManualAtten_SISO: [4, 0],   // packet[584]의 bit0 → index 4
      ALC_DL0_SISO_Level: [7, 4],      // packet[587]의 bit4 → index 7
      ALC_DL0_SISO_Mode: [3, 2],       // packet[583]의 bit2 → index 3
      Mvbx_TxGainSetSiso: [16, 0],     // packet[596]의 bit0 → index 16
      DU_UlManualAtten_SISO: [4, 4],   // packet[584]의 bit4 → index 4
      ALC_UL0_SISO_Level: [7, 6],      // packet[587]의 bit6 → index 7
      Mvbx_RxGainSetSiso: [16, 1],     // packet[596]의 bit1 → index 16
      
      // MIMO RF
      DU_DlManualAtten_MIMO: [4, 2],   // packet[584]의 bit2 → index 4
      ALC_DL1_MIMO_Level: [7, 5],      // packet[587]의 bit5 → index 7
      ALC_DL1_MIMO_Mode: [3, 3],       // packet[583]의 bit3 → index 3
      Mvbx_TxGainSetMiso: [16, 2],     // packet[596]의 bit2 → index 16
      DU_UlManualAtten_MIMO: [4, 7],   // packet[584]의 bit7 → index 4
      ALC_UL1_MIMO_Level: [7, 7],      // packet[587]의 bit7 → index 7
      Mvbx_RxGainSetMiso: [16, 3],     // packet[596]의 bit3 → index 16
      
      // SISO OPTIC
      LD1_DET_DL0_SISO_Low: [8, 0],   // packet[588]의 bit0 → index 8
      PD1_DET_UL0_SISO_Low: [8, 2],   // packet[588]의 bit2 → index 8
      
      // MIMO OPTIC
      LD2_DET_DL1_MIMO_Low: [8, 1],   // packet[588]의 bit1 → index 8
      PD2_DET_UL1_MIMO_Low: [8, 3],   // packet[588]의 bit3 → index 8
    };

    //==== SU1 System 컨트롤 비트 (24바이트, packet[580:604]을 index 0으로, [상대인덱스, bit]) ====
    const SU1_CONTROL_BITS = {
      // Temp Upper/Lower
      SU1_SysTemperHighLvl: [0, 3],        // packet[580]의 bit3 → index 0
      SU1_SysTemperLowLvl: [0, 3],         // packet[580]의 bit3 → index 0
      SU1_SuId: [3, 0],                    // packet[583]의 bit0 → index 3
      SU1_SuEndMode: [14, 3],              // packet[594]의 bit3 → index 14
      
      // Beam Status
      SU1_GumStick_OnOff: [7, 1],          // packet[587]의 bit1 → index 7
      
      // SISO RF
      SU1_DlManualAtten_SISO: [4, 0],      // packet[584]의 bit0 → index 4
      SU1_ALC_DL0_SISO_Level: [7, 4],      // packet[587]의 bit4 → index 7
      SU1_ALC_DL0_SISO_Mode: [3, 2],       // packet[583]의 bit2 → index 3
      SU1_Mvbx_TxGainSetSiso: [16, 0],     // packet[596]의 bit0 → index 16
      SU1_UlManualAtten_SISO: [4, 4],      // packet[584]의 bit4 → index 4
      SU1_ALC_UL0_SISO_Level: [7, 6],      // packet[587]의 bit6 → index 7
      SU1_ALC_UL0_SISO_Mode: [3, 4],       // packet[583]의 bit4 → index 3
      SU1_Mvbx_RxGainSetSiso: [16, 1],     // packet[596]의 bit1 → index 16
      
      // MIMO RF
      SU1_DlManualAtten_MIMO: [4, 2],      // packet[584]의 bit2 → index 4
      SU1_ALC_DL1_MIMO_Level: [7, 5],      // packet[587]의 bit5 → index 7
      SU1_ALC_DL1_MIMO_Mode: [3, 3],       // packet[583]의 bit3 → index 3
      SU1_Mvbx_TxGainSetMimo: [16, 2],     // packet[596]의 bit2 → index 16
      SU1_UlManualAtten_MIMO: [4, 7],      // packet[584]의 bit7 → index 4
      SU1_ALC_UL1_MIMO_Level: [7, 7],      // packet[587]의 bit7 → index 7
      SU1_ALC_UL1_MIMO_Mode: [3, 5],       // packet[583]의 bit5 → index 3
      SU1_Mvbx_RxGainSetMimo: [16, 3],     // packet[596]의 bit3 → index 16
      
      // SISO OPTIC
      SU1_LD1_DET_DL0_SISO_Low: [8, 0],   // packet[588]의 bit0 → index 8
      SU1_PD1_DET_UL0_SISO_Low: [8, 2],   // packet[588]의 bit2 → index 8
      SU1_LD3_DET_DL0_SISO_Low: [8, 4],   // packet[588]의 bit4 → index 8
      SU1_PD3_DET_UL0_SISO_Low: [8, 6],   // packet[588]의 bit6 → index 8
      
      // MIMO OPTIC
      SU1_LD2_DET_DL1_MIMO_Low: [8, 1],   // packet[588]의 bit1 → index 8
      SU1_PD2_DET_UL1_MIMO_Low: [8, 3],   // packet[588]의 bit3 → index 8
      SU1_LD4_DET_DL1_MIMO_Low: [8, 5],   // packet[588]의 bit5 → index 8
      SU1_PD4_DET_UL1_MIMO_Low: [8, 7],   // packet[588]의 bit7 → index 8
    };

    //==== SU2 System 컨트롤 비트 (24바이트, packet[580:604]을 index 0으로, [상대인덱스, bit]) ====
    const SU2_CONTROL_BITS = {
      // Temp Upper/Lower
      SU2_SysTemperHighLvl: [0, 3],        // packet[580]의 bit3 → index 0
      SU2_SysTemperLowLvl: [0, 3],         // packet[580]의 bit3 → index 0
      SU2_SuId: [3, 0],                    // packet[583]의 bit0 → index 3
      SU2_SuEndMode: [14, 3],              // packet[594]의 bit3 → index 14
      
      // Beam Status
      SU2_GumStick_OnOff: [7, 1],          // packet[587]의 bit1 → index 7
      
      // SISO RF
      SU2_DlManualAtten_SISO: [4, 0],      // packet[584]의 bit0 → index 4
      SU2_ALC_DL0_SISO_Level: [7, 4],      // packet[587]의 bit4 → index 7
      SU2_ALC_DL0_SISO_Mode: [3, 2],       // packet[583]의 bit2 → index 3
      SU2_Mvbx_TxGainSetSiso: [16, 0],     // packet[596]의 bit0 → index 16
      SU2_UlManualAtten_SISO: [4, 4],      // packet[584]의 bit4 → index 4
      SU2_ALC_UL0_SISO_Level: [7, 6],      // packet[587]의 bit6 → index 7
      SU2_ALC_UL0_SISO_Mode: [3, 4],       // packet[583]의 bit4 → index 3
      SU2_Mvbx_RxGainSetSiso: [16, 1],     // packet[596]의 bit1 → index 16
      
      // MIMO RF
      SU2_DlManualAtten_MIMO: [4, 2],      // packet[584]의 bit2 → index 4
      SU2_ALC_DL1_MIMO_Level: [7, 5],      // packet[587]의 bit5 → index 7
      SU2_ALC_DL1_MIMO_Mode: [3, 3],       // packet[583]의 bit3 → index 3
      SU2_Mvbx_TxGainSetMimo: [16, 2],     // packet[596]의 bit2 → index 16
      SU2_UlManualAtten_MIMO: [4, 7],      // packet[584]의 bit7 → index 4
      SU2_ALC_UL1_MIMO_Level: [7, 7],      // packet[587]의 bit7 → index 7
      SU2_ALC_UL1_MIMO_Mode: [3, 5],       // packet[583]의 bit5 → index 3
      SU2_Mvbx_RxGainSetMimo: [16, 3],     // packet[596]의 bit3 → index 16
      
      // SISO OPTIC
      SU2_LD1_DET_DL0_SISO_Low: [8, 0],   // packet[588]의 bit0 → index 8
      SU2_PD1_DET_UL0_SISO_Low: [8, 2],   // packet[588]의 bit2 → index 8
      
      // MIMO OPTIC
      SU2_LD2_DET_DL1_MIMO_Low: [8, 1],   // packet[588]의 bit1 → index 8
      SU2_PD2_DET_UL1_MIMO_Low: [8, 3],   // packet[588]의 bit3 → index 8
    };

    //==== SU3 System 컨트롤 비트 (24바이트, packet[580:604]을 index 0으로, [상대인덱스, bit]) ====
    const SU3_CONTROL_BITS = {
      // Temp Upper/Lower
      SU3_SysTemperHighLvl: [0, 3],        // packet[580]의 bit3 → index 0
      SU3_SysTemperLowLvl: [0, 3],         // packet[580]의 bit3 → index 0
      SU3_SuId: [3, 0],                    // packet[583]의 bit0 → index 3
      SU3_SuEndMode: [14, 3],              // packet[594]의 bit3 → index 14
      
      // Beam Status
      SU3_GumStick_OnOff: [7, 1],          // packet[587]의 bit1 → index 7
      
      // SISO RF
      SU3_DlManualAtten_SISO: [4, 0],      // packet[584]의 bit0 → index 4
      SU3_ALC_DL0_SISO_Level: [7, 4],      // packet[587]의 bit4 → index 7
      SU3_ALC_DL0_SISO_Mode: [3, 2],       // packet[583]의 bit2 → index 3
      SU3_Mvbx_TxGainSetSiso: [16, 0],     // packet[596]의 bit0 → index 16
      SU3_UlManualAtten_SISO: [4, 4],      // packet[584]의 bit4 → index 4
      SU3_ALC_UL0_SISO_Level: [7, 6],      // packet[587]의 bit6 → index 7
      SU3_ALC_UL0_SISO_Mode: [3, 4],       // packet[583]의 bit4 → index 3
      SU3_Mvbx_RxGainSetSiso: [16, 1],     // packet[596]의 bit1 → index 16
      
      // MIMO RF
      SU3_DlManualAtten_MIMO: [4, 2],      // packet[584]의 bit2 → index 4
      SU3_ALC_DL1_MIMO_Level: [7, 5],      // packet[587]의 bit5 → index 7
      SU3_ALC_DL1_MIMO_Mode: [3, 3],       // packet[583]의 bit3 → index 3
      SU3_Mvbx_TxGainSetMimo: [16, 2],     // packet[596]의 bit2 → index 16
      SU3_UlManualAtten_MIMO: [4, 7],      // packet[584]의 bit7 → index 4
      SU3_ALC_UL1_MIMO_Level: [7, 7],      // packet[587]의 bit7 → index 7
      SU3_ALC_UL1_MIMO_Mode: [3, 5],       // packet[583]의 bit5 → index 3
      SU3_Mvbx_RxGainSetMimo: [16, 3],     // packet[596]의 bit3 → index 16
      
      // SISO OPTIC
      SU3_LD1_DET_DL0_SISO_Low: [8, 0],   // packet[588]의 bit0 → index 8
      SU3_PD1_DET_UL0_SISO_Low: [8, 2],   // packet[588]의 bit2 → index 8
      
      // MIMO OPTIC
      SU3_LD2_DET_DL1_MIMO_Low: [8, 1],   // packet[588]의 bit1 → index 8
      SU3_PD2_DET_UL1_MIMO_Low: [8, 3],   // packet[588]의 bit3 → index 8
    };

    //==== SU4 System 컨트롤 비트 (24바이트, packet[580:604]을 index 0으로, [상대인덱스, bit]) ====
    const SU4_CONTROL_BITS = {
      // Temp Upper/Lower
      SU4_SysTemperHighLvl: [0, 3],        // packet[580]의 bit3 → index 0
      SU4_SysTemperLowLvl: [0, 3],         // packet[580]의 bit3 → index 0
      SU4_SuId: [3, 0],                    // packet[583]의 bit0 → index 3
      SU4_SuEndMode: [14, 3],              // packet[594]의 bit3 → index 14
      
      // Beam Status
      SU4_GumStick_OnOff: [7, 1],          // packet[587]의 bit1 → index 7
      
      // SISO RF
      SU4_DlManualAtten_SISO: [4, 0],      // packet[584]의 bit0 → index 4
      SU4_ALC_DL0_SISO_Level: [7, 4],      // packet[587]의 bit4 → index 7
      SU4_ALC_DL0_SISO_Mode: [3, 2],       // packet[583]의 bit2 → index 3
      SU4_Mvbx_TxGainSetSiso: [16, 0],     // packet[596]의 bit0 → index 16
      SU4_UlManualAtten_SISO: [4, 4],      // packet[584]의 bit4 → index 4
      SU4_ALC_UL0_SISO_Level: [7, 6],      // packet[587]의 bit6 → index 7
      SU4_ALC_UL0_SISO_Mode: [3, 4],       // packet[583]의 bit4 → index 3
      SU4_Mvbx_RxGainSetSiso: [16, 1],     // packet[596]의 bit1 → index 16
      
      // MIMO RF
      SU4_DlManualAtten_MIMO: [4, 2],      // packet[584]의 bit2 → index 4
      SU4_ALC_DL1_MIMO_Level: [7, 5],      // packet[587]의 bit5 → index 7
      SU4_ALC_DL1_MIMO_Mode: [3, 3],       // packet[583]의 bit3 → index 3
      SU4_Mvbx_TxGainSetMimo: [16, 2],     // packet[596]의 bit2 → index 16
      SU4_UlManualAtten_MIMO: [4, 7],      // packet[584]의 bit7 → index 4
      SU4_ALC_UL1_MIMO_Level: [7, 7],      // packet[587]의 bit7 → index 7
      SU4_ALC_UL1_MIMO_Mode: [3, 5],       // packet[583]의 bit5 → index 3
      SU4_Mvbx_RxGainSetMimo: [16, 3],     // packet[596]의 bit3 → index 16
      
      // SISO OPTIC
      SU4_LD1_DET_DL0_SISO_Low: [8, 0],   // packet[588]의 bit0 → index 8
      SU4_PD1_DET_UL0_SISO_Low: [8, 2],   // packet[588]의 bit2 → index 8
      
      // MIMO OPTIC
      SU4_LD2_DET_DL1_MIMO_Low: [8, 1],   // packet[588]의 bit1 → index 8
      SU4_PD2_DET_UL1_MIMO_Low: [8, 3],   // packet[588]의 bit3 → index 8
    };

    //==== Sync Module 컨트롤 비트 (packet[12:16]을 index 0으로, [상대인덱스, bit]) ====
    const SYNC_CONTROL_BITS = {
      // TSYNC OUT SEL/MODE #1 (packet[12]의 Bit3)
      TSYNC_OUT_SEL1: [0, 3],
      
      // TSYNC OUT SEL/MODE #2 (packet[12]의 Bit7)  
      TSYNC_OUT_SEL2: [0, 7],
      
      // TSYNC OUT SEL/MODE #3 (packet[13]의 Bit3)
      TSYNC_OUT_SEL3: [1, 3],
      
      // Slot Format (packet[13]의 Bit4)
      TDD_SLOT_FORMAT: [1, 4],
      
      // Slot 3GPP Format (packet[13]의 Bit5)
      TDD_FORMAT_3GPP_TABLE: [1, 5],
      
      // Frequency (packet[13]의 Bit6)
      TDD_Freq: [1, 6],
      
      // ARFCN (packet[13]의 Bit7)
      TDD_Arfcn: [1, 7],
      
      // SSB MU (packet[14]의 Bit0)
      MVBX_SSB_MU: [2, 0],
      
      // TDD Rate (packet[14]의 Bit3)
      MVBX_TDD_RATE: [2, 3],
      
      // F Mode (packet[14]의 Bit4)
      F_Mode: [2, 4],
    };

    //==== 값 업데이트 함수 ====
    function updateValue(id, value) {
        // 첫 번째 매개변수가 객체이고 두 번째 매개변수가 문자열인 경우 (SU2 방식: updateValue(data, 'su2_'))
        if (typeof id === 'object' && id !== null && typeof value === 'string') {
            console.log(`🔄 updateValue called with object and prefix: ${value}`);
            for (const [key, val] of Object.entries(id)) {
                // HTML ID 생성 (접두어 + 필드명을 소문자로 변환)
                const htmlId = value + key.toLowerCase();
                console.log(`📝 Updating: ${key} -> ${htmlId} = ${val}`);
                updateSingleValue(htmlId, val);
            }
            return;
        }
        
        // 기존 방식 (단일 값 업데이트: updateValue("fieldname", value))
        updateSingleValue(id, value);
    }
    
    function updateSingleValue(id, value) {
        const el = document.getElementById(id);
        if (!el) {
            console.log(`❌ Element not found: ${id}`);
            return;
        }
        console.log(`✅ Found element: ${id}, updating to: ${value}`);
        
        // 섹션별 Set Mode 차단 (사용자가 편집 중인 값 덮어쓰기 방지)
        const isSu1 = id.startsWith('su1_');
        const isSu2 = id.startsWith('su2_');
        const isSu3 = id.startsWith('su3_');
        const isSu4 = id.startsWith('su4_');
        const editLock = (isSu1 ? SET_MODE_SU1 : (isSu2 ? SET_MODE_SU2 : (isSu3 ? SET_MODE_SU3 : (isSu4 ? SET_MODE_SU4 : SET_MODE))));
        
        if (editLock && el.hasAttribute('data-editable')) {
            const section = isSu1 ? 'SU1' : (isSu2 ? 'SU2' : (isSu3 ? 'SU3' : (isSu4 ? 'SU4' : 'DU')));
            console.log(`🔒 ${section} Set Mode: ${id} 값 업데이트 차단 (현재 값: ${el.value}, 새 값: ${value})`);
            return;
        }
        
        console.log(`📝 updateValue: ${id} = ${value} (SET_MODE: ${SET_MODE}, SET_MODE_SU1: ${SET_MODE_SU1}, SET_MODE_SU2: ${SET_MODE_SU2})`);
        
        if (el.type === 'button') {
            el.textContent = value;
            el.className = value === 'On' ? 'btn btn-success btn-sm' : 'btn btn-secondary btn-sm';
        } else if (el.tagName === 'SELECT') {
            el.value = value;
        } else {
            el.value = value;
        }
    }

    //==== UI 모드 토글 ====
    function applyUiMode(){
      console.log(`🔧 applyUiMode: SET_MODE=${SET_MODE}`);
      
      // Set Mode 관련 버튼들 토글
      document.getElementById('btnSetMode').classList.toggle('d-none', SET_MODE);
      document.getElementById('btnApply').classList.toggle('d-none', !SET_MODE);
      document.getElementById('btnStatusMode').classList.toggle('d-none', !SET_MODE);
      
      // DU 화면의 모달 버튼들만 숨김/표시 (DU Set Mode일 때만)
      const duModalButtons = [
        'initialSetupBtn', 'apnBtn', 'resetBtn', 'openModalBtn', 
        'beamInfoBtn', 'alarmMaskBtn'
      ];
      duModalButtons.forEach(id => {
        const btn = document.getElementById(id);
        if (btn) btn.classList.toggle('d-none', SET_MODE);
      });
      
      // DU 화면의 data-bs-toggle 속성이 있는 버튼들만 숨김 (DU Set Mode일 때만)
      const duModalToggleButtons = document.querySelectorAll('#du_content_display [data-bs-toggle="modal"]');
      duModalToggleButtons.forEach(el=>{
        el.classList.toggle('d-none', SET_MODE);
      });
      console.log(`🔧 DU Modal buttons: ${SET_MODE ? 'Hidden' : 'Shown'}`);

      // DU 편집 가능한 필드들 토글
      const duEditableFields = document.querySelectorAll('#du_content_display [data-editable="true"]');
      duEditableFields.forEach(el=>{
        if (el.type==='checkbox') el.disabled = !SET_MODE;
        else el.toggleAttribute('readonly', !SET_MODE);
        // on/off 버튼들은 editable-on 클래스 적용하지 않음
        if (el.type !== 'button') {
          el.classList.toggle('editable-on', SET_MODE);
        }
      });
      console.log(`🔧 Toggled ${duEditableFields.length} DU editable fields`);
    }

    //==== 상태 수신: 섹션별 차단은 updateValue에서 처리 ====
    socket.on("tdd_status", ({packet})=>{
      // 예시: updateValue('temp_upper', packet.SysTemperHighLvl); 등
    });
    
    //==== SU1 Set Mode 응답 수신 ====
    socket.on("su1_set_mode_ack", (data) => {
      console.log('🔧 SU1 Set Mode acknowledged:', data);
    });
    
    socket.on("su1_status_mode_ack", (data) => {
      console.log('🔧 SU1 Status Mode acknowledged:', data);
    });
    
    socket.on("su1_apply_ack", (data) => {
      console.log('🔧 SU1 Apply acknowledged:', data);
      if (data.ok) {
        console.log('✅ SU1 values applied successfully');
      } else {
        console.error('❌ SU1 values apply failed:', data.error);
        alert('SU1 값 적용 실패: ' + data.error);
      }
    });

    //==== SU2 Set Mode 응답 수신 ====
    socket.on("su2_set_mode_ack", (data) => {
      console.log('🔧 SU2 Set Mode acknowledged:', data);
    });
    
    socket.on("su2_status_mode_ack", (data) => {
      console.log('🔧 SU2 Status Mode acknowledged:', data);
    });
    
    socket.on("su2_apply_ack", (data) => {
      console.log('🔧 SU2 Apply acknowledged:', data);
      if (data.ok) {
        console.log('✅ SU2 values applied successfully');
      } else {
        console.error('❌ SU2 values apply failed:', data.error);
        alert('SU2 값 적용 실패: ' + data.error);
      }
    });

    //==== 컨트롤비트 빌드(24바이트) ====
    function buildConMuFlag(enable=true){
      const bytes = new Array(24).fill(0);
      if (!enable) return bytes;
      for (const [key,[idx,bit]] of Object.entries(CONTROL_BITS)){
        bytes[idx] |= (1<<bit);
      }
      return bytes;
    }

    //==== DU System 컨트롤비트 빌드(24바이트) ====
    function buildDuConMuFlag(modifiedFields = {}){
      const bytes = new Array(24).fill(0);
      
      // 수정된 필드에 해당하는 비트만 1로 설정
      for (const [key,[idx,bit]] of Object.entries(DU_CONTROL_BITS)){
        if (modifiedFields.hasOwnProperty(key)) {
          bytes[idx] |= (1<<bit);
        }
      }
      
      return bytes;
    }

    //==== SU1 System 컨트롤비트 빌드(24바이트) ====
    function buildSu1ConMuFlag(modifiedFields = {}){
      const bytes = new Array(24).fill(0);
      
      // 수정된 필드에 해당하는 비트만 1로 설정
      for (const [key,[idx,bit]] of Object.entries(SU1_CONTROL_BITS)){
        if (modifiedFields.hasOwnProperty(key)) {
          bytes[idx] |= (1<<bit);
        }
      }
      
      return bytes;
    }

    //==== SU2 System 컨트롤비트 빌드(24바이트) ====
    function buildSu2ConMuFlag(modifiedFields = {}){
      const bytes = new Array(24).fill(0);
      
      // 수정된 필드에 해당하는 비트만 1로 설정
      for (const [key,[idx,bit]] of Object.entries(SU2_CONTROL_BITS)){
        if (modifiedFields.hasOwnProperty(key)) {
          bytes[idx] |= (1<<bit);
        }
      }
      
      return bytes;
    }

    //==== SU3 컨트롤비트 빌드(24바이트) ====
    function buildSu3ConMuFlag(modifiedFields = {}){
      const bytes = new Array(24).fill(0);
      
      // 수정된 필드에 해당하는 비트만 1로 설정
      for (const [key,[idx,bit]] of Object.entries(SU3_CONTROL_BITS)){
        if (modifiedFields.hasOwnProperty(key)) {
          bytes[idx] |= (1<<bit);
        }
      }
      
      return bytes;
    }

    //==== SU4 컨트롤비트 빌드(24바이트) ====
    function buildSu4ConMuFlag(modifiedFields = {}){
      const bytes = new Array(24).fill(0);
      
      // 수정된 필드에 해당하는 비트만 1로 설정
      for (const [key,[idx,bit]] of Object.entries(SU4_CONTROL_BITS)){
        if (modifiedFields.hasOwnProperty(key)) {
          bytes[idx] |= (1<<bit);
        }
      }
      
      return bytes;
    }

    //==== Sync Module 컨트롤비트 빌드(4바이트) ====
    function buildSyncConMuFlag(modifiedFields = {}){
      const bytes = new Array(4).fill(0);
      
      console.log('🔧 buildSyncConMuFlag - modifiedFields:', modifiedFields);
      
      // 수정된 필드에 해당하는 비트만 1로 설정
      for (const [key,[idx,bit]] of Object.entries(SYNC_CONTROL_BITS)){
        if (modifiedFields.hasOwnProperty(key)) {
          bytes[idx] |= (1<<bit);
          console.log(`🔧 비트 설정: ${key} → [${idx}, ${bit}] → bytes[${idx}] |= (1<<${bit})`);
        }
      }
      
      console.log('🔧 최종 ConMuFlag:', bytes);
      return bytes;
    }

    //==== 값 수집/검증 ====
    function collectFields(){
      const out = {};
      const modifiedFields = {};  // 수정된 필드 추적
      
      for (const [id, spec] of Object.entries(FIELD_MAP)){
        // DU 필드만 수집 (su1_ 접두사가 없는 필드들)
        if (id.startsWith('su1_')) continue;
        
        const el = document.getElementById(id);
        if (!el) continue;
        
        let v;
        if (el.type === 'checkbox') {
          // 체크박스: 체크되면 1, 아니면 0
          v = el.checked ? 1 : 0;
        } else if (el.tagName === 'SELECT') {
          // 드롭다운: 텍스트 값을 숫자로 매핑
          v = getDropdownNumericValue(id, el.value);
        } else if (el.type === 'button') {
          // 버튼: On/Off 텍스트를 숫자로 변환
          v = el.textContent === 'ON' ? 1 : 0;
        } else {
          // 일반 입력 필드: 숫자로 변환
          v = Number(el.value);
        }
        
        if (Number.isNaN(v)) throw new Error(`${id} 값이 숫자가 아닙니다`);
        if (spec.min!==undefined && v<spec.min) throw new Error(`${id} 최소 ${spec.min}`);
        if (spec.max!==undefined && v>spec.max) throw new Error(`${id} 최대 ${spec.max}`);
        
        out[spec.key] = v;
        
        // 실제로 수정된 경우에만 비트 설정
        if (el.hasAttribute('data-original-value')) {
          const originalValue = el.getAttribute('data-original-value');
          // 원본값이 이미 숫자인 경우 그대로 사용, 문자열인 경우 숫자로 변환
          const originalValueNum = typeof originalValue === 'number' ? originalValue : Number(originalValue);
          
          // NaN 체크 및 안전한 비교
          if (!Number.isNaN(originalValueNum) && !Number.isNaN(v) && v !== originalValueNum) {
            modifiedFields[spec.key] = true;
          }
        }
      }
      
      // ConMuFlag 추가 (수정된 필드에 해당하는 비트만 1로 설정)
      out['ConMuFlag'] = buildDuConMuFlag(modifiedFields);
      
      return out;
    }
    
    //==== 드롭다운 텍스트 값을 16진수로 변환 ====
    function getDropdownNumericValue(id, textValue) {
      // textValue가 없거나 빈 문자열인 경우 기본값 반환
      if (!textValue || textValue === '') {
        return 0;
      }
      
      switch(id) {
        case 'gNB_Vendor':
          switch(textValue) {
            case 'Manual': return 0x00;
            case 'Samsung': return 0x01;
            case 'Nokia': return 0x02;
            case 'Ericsson': return 0x03;
            default: return 0x00;
          }
        // 다른 드롭다운들도 여기에 추가
        default:
          const numValue = Number(textValue);
          if (Number.isNaN(numValue)) {
            return 0;
          }
          return numValue;
      }
    }
    
    //==== On/Off 버튼 토글 함수 ====
    function toggleOnOffButton(buttonId) {
      if (!SET_MODE) return; // Set Mode가 아니면 토글 불가
      
      const button = document.getElementById(buttonId);
      if (!button) return;
      
      const currentState = button.textContent;
      if (currentState === 'ON') {
        button.textContent = 'OFF';
        button.className = 'btn btn-secondary btn-sm';
      } else {
        button.textContent = 'ON';
        button.className = 'btn btn-success btn-sm';
      }
      
      console.log(`🔘 ${buttonId} 토글: ${currentState} → ${button.textContent}`);
    }
    
    //==== SU1 On/Off 버튼 토글 함수 ====
    function toggleOnOffButtonSu1(buttonId) {
      if (!SET_MODE_SU1) return; // SU1 Set Mode가 아니면 토글 불가
      
      const button = document.getElementById(buttonId);
      if (!button) return;
      
      const currentState = button.textContent;
      if (currentState === 'ON') {
        button.textContent = 'OFF';
        button.className = 'btn btn-secondary btn-sm';
      } else {
        button.textContent = 'ON';
        button.className = 'btn btn-success btn-sm';
      }
      
      console.log(`🔘 SU1 ${buttonId} 토글: ${currentState} → ${button.textContent}`);
    }

    //==== SU2 On/Off 버튼 토글 함수 ====
    function toggleOnOffButtonSu2(buttonId) {
      if (!SET_MODE_SU2) return; // SU2 Set Mode가 아니면 토글 불가
      
      const button = document.getElementById(buttonId);
      if (!button) return;
      
      const currentState = button.textContent;
      if (currentState === 'ON') {
        button.textContent = 'OFF';
        button.className = 'btn btn-secondary btn-sm';
      } else {
        button.textContent = 'ON';
        button.className = 'btn btn-success btn-sm';
      }
      
      console.log(`🔘 SU2 ${buttonId} 토글: ${currentState} → ${button.textContent}`);
    }

    //==== SU3 UI 모드 적용 ====
    function applyUiModeSu3(){
      console.log(`🔧 applyUiModeSu3: SET_MODE_SU3=${SET_MODE_SU3}`);
      
      // Set Mode 관련 버튼들 토글
      document.getElementById('btnSetModeSu3').classList.toggle('d-none', SET_MODE_SU3);
      document.getElementById('btnApplySu3').classList.toggle('d-none', !SET_MODE_SU3);
      document.getElementById('btnStatusModeSu3').classList.toggle('d-none', !SET_MODE_SU3);
      
      // SU3 화면의 모달 버튼들만 숨김/표시 (SU3 Set Mode일 때만)
      const su3ModalButtons = [
        'initialSetupBtn', 'apnBtn', 'resetBtn', 'openModalBtn', 
        'beamInfoBtn', 'alarmMaskBtn'
      ];
      su3ModalButtons.forEach(id => {
        const btn = document.getElementById(id);
        if (btn) btn.classList.toggle('d-none', SET_MODE_SU3);
      });
      
      // SU3 화면의 data-bs-toggle 속성이 있는 버튼들만 숨김 (SU3 Set Mode일 때만)
      const su3ModalToggleButtons = document.querySelectorAll('#su3_content_display [data-bs-toggle="modal"]');
      su3ModalToggleButtons.forEach(el=>{
        el.classList.toggle('d-none', SET_MODE_SU3);
      });
      console.log(`🔧 SU3 Modal buttons: ${SET_MODE_SU3 ? 'Hidden' : 'Shown'}`);

      // SU3 편집 가능한 필드들 토글
      const su3EditableFields = document.querySelectorAll('#su3_content_display [data-editable="true"]');
      su3EditableFields.forEach(el=>{
        if (el.type==='checkbox') el.disabled = !SET_MODE_SU3;
        else el.toggleAttribute('readonly', !SET_MODE_SU3);
        // on/off 버튼들은 editable-on 클래스 적용하지 않음
        if (el.type!=='button') {
          el.classList.toggle('editable-on', SET_MODE_SU3);
        }
      });
      console.log(`🔧 SU3 Editable fields: ${SET_MODE_SU3 ? 'Enabled' : 'Disabled'}`);
    }

    //==== SU4 UI 모드 적용 ====
    function applyUiModeSu4(){
      console.log(`🔧 applyUiModeSu4: SET_MODE_SU4=${SET_MODE_SU4}`);
      
      // Set Mode 관련 버튼들 토글
      document.getElementById('btnSetModeSu4').classList.toggle('d-none', SET_MODE_SU4);
      document.getElementById('btnApplySu4').classList.toggle('d-none', !SET_MODE_SU4);
      document.getElementById('btnStatusModeSu4').classList.toggle('d-none', !SET_MODE_SU4);
      
      // SU4 화면의 모달 버튼들만 숨김/표시 (SU4 Set Mode일 때만)
      const su4ModalButtons = [
        'initialSetupBtn', 'apnBtn', 'resetBtn', 'openModalBtn', 
        'beamInfoBtn', 'alarmMaskBtn'
      ];
      su4ModalButtons.forEach(id => {
        const btn = document.getElementById(id);
        if (btn) btn.classList.toggle('d-none', SET_MODE_SU4);
      });
      
      // SU4 화면의 data-bs-toggle 속성이 있는 버튼들만 숨김 (SU4 Set Mode일 때만)
      const su4ModalToggleButtons = document.querySelectorAll('#su4_content_display [data-bs-toggle="modal"]');
      su4ModalToggleButtons.forEach(el=>{
        el.classList.toggle('d-none', SET_MODE_SU4);
      });
      console.log(`🔧 SU4 Modal buttons: ${SET_MODE_SU4 ? 'Hidden' : 'Shown'}`);

      // SU4 편집 가능한 필드들 토글
      const su4EditableFields = document.querySelectorAll('#su4_content_display [data-editable="true"]');
      su4EditableFields.forEach(el=>{
        if (el.type==='checkbox') el.disabled = !SET_MODE_SU4;
        else el.toggleAttribute('readonly', !SET_MODE_SU4);
        // on/off 버튼들은 editable-on 클래스 적용하지 않음
        if (el.type!=='button') {
          el.classList.toggle('editable-on', SET_MODE_SU4);
        }
      });
      console.log(`🔧 SU4 Editable fields: ${SET_MODE_SU4 ? 'Enabled' : 'Disabled'}`);
    }

    //==== SU3 On/Off 버튼 토글 함수 ====
    function toggleOnOffButtonSu3(buttonId) {
      if (!SET_MODE_SU3) return; // SU3 Set Mode가 아니면 토글 불가
      
      const button = document.getElementById(buttonId);
      if (!button) return;
      
      const currentState = button.textContent;
      if (currentState === 'ON') {
        button.textContent = 'OFF';
        button.className = 'btn btn-secondary btn-sm';
      } else {
        button.textContent = 'ON';
        button.className = 'btn btn-success btn-sm';
      }
      
      console.log(`🔘 SU3 ${buttonId} 토글: ${currentState} → ${button.textContent}`);
    }

    //==== SU4 On/Off 버튼 토글 함수 ====
    function toggleOnOffButtonSu4(buttonId) {
      if (!SET_MODE_SU4) return; // SU4 Set Mode가 아니면 토글 불가
      
      const button = document.getElementById(buttonId);
      if (!button) return;
      
      const currentState = button.textContent;
      if (currentState === 'ON') {
        button.textContent = 'OFF';
        button.className = 'btn btn-secondary btn-sm';
      } else {
        button.textContent = 'ON';
        button.className = 'btn btn-success btn-sm';
      }
      
      console.log(`🔘 SU4 ${buttonId} 토글: ${currentState} → ${button.textContent}`);
    }

    //==== 전역 상태 ====
    let SET_MODE_SU1 = false;
    let SET_MODE_SU2 = false;
    let SET_MODE_SU3 = false;
    let SET_MODE_SU4 = false;

    // SU4 On/Off 버튼 토글 함수 (SU1, SU2와 동일)
    function toggleOnOffButtonSu4(buttonId, fieldName) {
        const button = document.getElementById(buttonId);
        if (!button) return;

        const currentValue = button.textContent.trim();
        const newValue = currentValue === "ON" ? 0 : 1;
        
        // 버튼 상태 업데이트
        if (newValue === 1) {
            button.textContent = "ON";
            button.className = "btn btn-success btn-sm";
        } else {
            button.textContent = "OFF";
            button.className = "btn btn-secondary btn-sm";
        }

        // 서버에 값 전송
        socket.emit("su4_Ctrl_packet", {
            field: fieldName,
            value: newValue
        });
    }
    let SYNC_SET_MODE = false;
    
    //==== SU1 UI 모드 토글 ====
    function applyUiModeSu1(){
      console.log(`🔧 applyUiModeSu1: SET_MODE_SU1=${SET_MODE_SU1}`);
      
      // Set Mode 관련 버튼들 토글
      document.getElementById('btnSetModeSu1').classList.toggle('d-none', SET_MODE_SU1);
      document.getElementById('btnApplySu1').classList.toggle('d-none', !SET_MODE_SU1);
      document.getElementById('btnStatusModeSu1').classList.toggle('d-none', !SET_MODE_SU1);
      
      // SU1 화면의 모달 버튼들만 숨김/표시 (SU1 Set Mode일 때만)
      const su1ModalButtons = [
        'initialSetupBtn', 'apnBtn', 'resetBtn', 'openModalBtn', 
        'beamInfoBtn', 'alarmMaskBtn'
      ];
      su1ModalButtons.forEach(id => {
        const btn = document.getElementById(id);
        if (btn) btn.classList.toggle('d-none', SET_MODE_SU1);
      });
      
      // SU1 화면의 data-bs-toggle 속성이 있는 버튼들만 숨김 (SU1 Set Mode일 때만)
      const su1ModalToggleButtons = document.querySelectorAll('#su1_content_display [data-bs-toggle="modal"]');
      su1ModalToggleButtons.forEach(el=>{
        el.classList.toggle('d-none', SET_MODE_SU1);
      });
      console.log(`🔧 SU1 Modal buttons: ${SET_MODE_SU1 ? 'Hidden' : 'Shown'}`);

      // SU1 편집 가능한 필드들 토글
      const su1EditableFields = document.querySelectorAll('#su1_content_display [data-editable="true"]');
      su1EditableFields.forEach(el=>{
        if (el.type==='checkbox') el.disabled = !SET_MODE_SU1;
        else el.toggleAttribute('readonly', !SET_MODE_SU1);
        // on/off 버튼들은 editable-on 클래스 적용하지 않음
        if (el.type !== 'button') {
          el.classList.toggle('editable-on', SET_MODE_SU1);
        }
      });
      console.log(`🔧 Toggled ${su1EditableFields.length} SU1 editable fields`);
    }
    
    //==== SU2 UI 모드 토글 ====
    function applyUiModeSu2(){
      console.log(`🔧 applyUiModeSu2: SET_MODE_SU2=${SET_MODE_SU2}`);
      
      // Set Mode 관련 버튼들 토글
      document.getElementById('btnSetModeSu2').classList.toggle('d-none', SET_MODE_SU2);
      document.getElementById('btnApplySu2').classList.toggle('d-none', !SET_MODE_SU2);
      document.getElementById('btnStatusModeSu2').classList.toggle('d-none', !SET_MODE_SU2);
      
      // SU2 화면의 모달 버튼들만 숨김/표시 (SU2 Set Mode일 때만)
      const su2ModalButtons = [
        'initialSetupBtn', 'apnBtn', 'resetBtn', 'openModalBtn', 
        'beamInfoBtn', 'alarmMaskBtn'
      ];
      su2ModalButtons.forEach(id => {
        const btn = document.getElementById(id);
        if (btn) btn.classList.toggle('d-none', SET_MODE_SU2);
      });
      
      // SU2 화면의 data-bs-toggle 속성이 있는 버튼들만 숨김 (SU2 Set Mode일 때만)
      const su2ModalToggleButtons = document.querySelectorAll('#su2_content_display [data-bs-toggle="modal"]');
      su2ModalToggleButtons.forEach(el=>{
        el.classList.toggle('d-none', SET_MODE_SU2);
      });
      console.log(`🔧 SU2 Modal buttons: ${SET_MODE_SU2 ? 'Hidden' : 'Shown'}`);

      // SU2 편집 가능한 필드들 토글
      const su2EditableFields = document.querySelectorAll('#su2_content_display [data-editable="true"]');
      su2EditableFields.forEach(el=>{
        if (el.type==='checkbox') el.disabled = !SET_MODE_SU2;
        else el.toggleAttribute('readonly', !SET_MODE_SU2);
        // on/off 버튼들은 editable-on 클래스 적용하지 않음
        if (el.type !== 'button') {
          el.classList.toggle('editable-on', SET_MODE_SU2);
        }
      });
      console.log(`🔧 Toggled ${su2EditableFields.length} SU2 editable fields`);
    }
    
    //==== SU1 값 수집/검증 ====
    function collectFieldsSu1(){
      const out = {};
      const modifiedFields = {};  // 수정된 필드 추적
      
      for (const [id, spec] of Object.entries(SU1_FIELD_MAP)){
        
        const el = document.getElementById(id);
        if (!el) continue;
        
        let v;
        if (el.type === 'checkbox') {
          v = el.checked ? 1 : 0;
        } else if (el.tagName === 'SELECT') {
          v = getDropdownNumericValue(id, el.value);
        } else if (el.type === 'button') {
          v = el.textContent === 'ON' ? 1 : 0;
        } else {
          v = Number(el.value);
        }
        
        if (Number.isNaN(v)) throw new Error(`${id} 값이 숫자가 아닙니다`);
        if (spec.min!==undefined && v<spec.min) throw new Error(`${id} 최소 ${spec.min}`);
        if (spec.max!==undefined && v>spec.max) throw new Error(`${id} 최대 ${spec.max}`);
        
        out[spec.key] = v;
        
        // 실제로 수정된 경우에만 비트 설정
        if (el.hasAttribute('data-original-value')) {
          const originalValue = el.getAttribute('data-original-value');
          // 원본값이 이미 숫자인 경우 그대로 사용, 문자열인 경우 숫자로 변환
          const originalValueNum = typeof originalValue === 'number' ? 
            originalValue : Number(originalValue);
          
          // NaN 체크 및 안전한 비교
          if (!Number.isNaN(originalValueNum) && !Number.isNaN(v) && 
              v !== originalValueNum) {
            modifiedFields[spec.key] = true;
          }
        }
      }
      
      // ConMuFlag 추가 (수정된 필드에 해당하는 비트만 1로 설정)
      out['ConMuFlag'] = buildSu1ConMuFlag(modifiedFields);
      
      return out;
    }

    //==== SU2 값 수집/검증 ====
    function collectFieldsSu2(){
      const out = {};
      const modifiedFields = {};  // 수정된 필드 추적
      
      console.log('🔍 SU2 collectFieldsSu2 시작');
      
      for (const [id, spec] of Object.entries(SU2_FIELD_MAP)){
        
        const el = document.getElementById(id);
        if (!el) {
          console.log(`⚠️ SU2 요소를 찾을 수 없음: ${id}`);
          continue;
        }
        
        let v;
        if (el.type === 'checkbox') {
          v = el.checked ? 1 : 0;
        } else if (el.tagName === 'SELECT') {
          v = getDropdownNumericValue(id, el.value);
        } else if (el.type === 'button') {
          v = el.textContent === 'ON' ? 1 : 0;
        } else {
          v = Number(el.value);
        }
        
        if (Number.isNaN(v)) throw new Error(`${id} 값이 숫자가 아닙니다`);
        if (spec.min!==undefined && v<spec.min) throw new Error(`${id} 최소 ${spec.min}`);
        if (spec.max!==undefined && v>spec.max) throw new Error(`${id} 최대 ${spec.max}`);
        
        out[spec.key] = v;
        
        // 실제로 수정된 경우에만 비트 설정
        if (el.hasAttribute('data-original-value')) {
          const originalValue = el.getAttribute('data-original-value');
          // 원본값이 이미 숫자인 경우 그대로 사용, 문자열인 경우 숫자로 변환
          const originalValueNum = typeof originalValue === 'number' ? 
            originalValue : Number(originalValue);
          
          console.log(`🔍 SU2 필드 비교: ${id} (${spec.key}) - 원본: ${originalValue} (${originalValueNum}), 현재: ${v}`);
          
          // NaN 체크 및 안전한 비교
          if (!Number.isNaN(originalValueNum) && !Number.isNaN(v) && 
              v !== originalValueNum) {
            modifiedFields[spec.key] = true;
            console.log(`✅ SU2 필드 수정 감지: ${spec.key} - ${originalValueNum} → ${v}`);
          }
        } else {
          console.log(`⚠️ SU2 필드 data-original-value 없음: ${id} (${spec.key})`);
        }
      }
      
      console.log('🔍 SU2 수정된 필드들:', modifiedFields);
      
      // ConMuFlag 추가 (수정된 필드에 해당하는 비트만 1로 설정)
      out['ConMuFlag'] = buildSu2ConMuFlag(modifiedFields);
      
      console.log('🔍 SU2 ConMuFlag:', out['ConMuFlag']);
      
      return out;
    }

    //==== SU3 값 수집/검증 ====
    function collectFieldsSu3(){
      const out = {};
      const modifiedFields = {};  // 수정된 필드 추적
      
      console.log('🔍 SU3 collectFieldsSu3 시작');
      
      for (const [id, spec] of Object.entries(SU3_FIELD_MAP)){
        
        const el = document.getElementById(id);
        if (!el) {
          console.log(`⚠️ SU3 요소를 찾을 수 없음: ${id}`);
          continue;
        }
        
        let v;
        if (el.type === 'checkbox') {
          v = el.checked ? 1 : 0;
        } else if (el.tagName === 'SELECT') {
          v = getDropdownNumericValue(id, el.value);
        } else if (el.type === 'button') {
          v = el.textContent === 'ON' ? 1 : 0;
        } else {
          v = Number(el.value);
        }
        
        if (Number.isNaN(v)) throw new Error(`${id} 값이 숫자가 아닙니다`);
        if (spec.min!==undefined && v<spec.min) throw new Error(`${id} 최소 ${spec.min}`);
        if (spec.max!==undefined && v>spec.max) throw new Error(`${id} 최대 ${spec.max}`);
        
        out[spec.key] = v;
        
        // 실제로 수정된 경우에만 비트 설정
        if (el.hasAttribute('data-original-value')) {
          const originalValue = el.getAttribute('data-original-value');
          // 원본값이 이미 숫자인 경우 그대로 사용, 문자열인 경우 숫자로 변환
          const originalValueNum = typeof originalValue === 'number' ? 
            originalValue : Number(originalValue);
          
          console.log(`🔍 SU3 필드 비교: ${id} (${spec.key}) - 원본: ${originalValue} (${originalValueNum}), 현재: ${v}`);
          
          // NaN 체크 및 안전한 비교
          if (!Number.isNaN(originalValueNum) && !Number.isNaN(v) && 
              v !== originalValueNum) {
            modifiedFields[spec.key] = true;
            console.log(`✅ SU3 필드 수정 감지: ${spec.key} - ${originalValueNum} → ${v}`);
          }
        } else {
          console.log(`⚠️ SU3 필드 data-original-value 없음: ${id} (${spec.key})`);
        }
      }
      
      console.log('🔍 SU3 수정된 필드들:', modifiedFields);
      
      // ConMuFlag 추가 (수정된 필드에 해당하는 비트만 1로 설정)
      out['ConMuFlag'] = buildSu3ConMuFlag(modifiedFields);
      
      console.log('🔍 SU3 ConMuFlag:', out['ConMuFlag']);
      
      return out;
    }

    //==== SU4 값 수집/검증 ====
    function collectFieldsSu4(){
      const out = {};
      const modifiedFields = {};  // 수정된 필드 추적
      
      console.log('🔍 SU4 collectFieldsSu4 시작');
      
      for (const [id, spec] of Object.entries(SU4_FIELD_MAP)){
        
        const el = document.getElementById(id);
        if (!el) {
          console.log(`⚠️ SU4 요소를 찾을 수 없음: ${id}`);
          continue;
        }
        
        let v;
        if (el.type === 'checkbox') {
          v = el.checked ? 1 : 0;
        } else if (el.tagName === 'SELECT') {
          v = getDropdownNumericValue(id, el.value);
        } else if (el.type === 'button') {
          v = el.textContent === 'ON' ? 1 : 0;
        } else {
          v = Number(el.value);
        }
        
        if (Number.isNaN(v)) throw new Error(`${id} 값이 숫자가 아닙니다`);
        if (spec.min!==undefined && v<spec.min) throw new Error(`${id} 최소 ${spec.min}`);
        if (spec.max!==undefined && v>spec.max) throw new Error(`${id} 최대 ${spec.max}`);
        
        out[spec.key] = v;
        
        // 실제로 수정된 경우에만 비트 설정
        if (el.hasAttribute('data-original-value')) {
          const originalValue = el.getAttribute('data-original-value');
          // 원본값이 이미 숫자인 경우 그대로 사용, 문자열인 경우 숫자로 변환
          const originalNum = typeof originalValue === 'number' ? originalValue : Number(originalValue);
          if (originalNum !== v) {
            modifiedFields[spec.key] = v;
            console.log(`🔧 SU4 수정된 필드: ${spec.key} (${originalNum} → ${v})`);
          }
        }
      }
      
      // ConMuFlag 추가 (수정된 필드에 해당하는 비트만 1로 설정)
      out['ConMuFlag'] = buildSu4ConMuFlag(modifiedFields);
      
      console.log('🔍 SU4 ConMuFlag:', out['ConMuFlag']);
      
      return out;
    }
    
    //==== 버튼 핸들러 ====
    function enterSetMode(){
      console.log('🔧 Entering Set Mode...');
      SET_MODE = true;
      console.log(`🔧 State: SET_MODE=${SET_MODE}`);
      
      // 모든 DU 필드의 원본 값 저장
      saveDuOriginalValues();
      
      applyUiMode();
      socket.emit('enter_set_mode');
      console.log('🔧 Set Mode activated');
    }
    function leaveSetMode(){
      console.log('🔧 Leaving Set Mode...');
      SET_MODE = false;
      console.log(`🔧 State: SET_MODE=${SET_MODE}`);
      applyUiMode();
      socket.emit('leave_set_mode');
      console.log('🔧 Status Mode activated');
    }
    function applySet(){
      try{
        const fields = collectFields();
        // ConMuFlag가 포함된 fields를 직접 전송
        socket.emit('apply_du_values', fields);
        console.log('🔧 Applying DU values with ConMuFlag:', fields);
      }catch(e){ alert('입력 오류: ' + e.message); }
    }
    
    //==== SU1 버튼 핸들러 ====
    function enterSetModeSu1(){
      console.log('🔧 Entering SU1 Set Mode...');
      SET_MODE_SU1 = true;
      console.log(`🔧 State: SET_MODE_SU1=${SET_MODE_SU1}`);
      
      // 모든 SU1 필드의 원본 값 저장
      saveSu1OriginalValues();
      
      applyUiModeSu1();
      socket.emit('enter_su1_set_mode');
      console.log('🔧 SU1 Set Mode activated');
    }
    function leaveSetModeSu1(){
      console.log('🔧 Leaving SU1 Set Mode...');
      SET_MODE_SU1 = false;
      console.log(`🔧 State: SET_MODE_SU1=${SET_MODE_SU1}`);
      applyUiModeSu1();
      socket.emit('leave_su1_set_mode');
      console.log('🔧 SU1 Status Mode activated');
    }
    function applySetSu1(){
      try{
        const fields = collectFieldsSu1();
        // ConMuFlag가 포함된 fields를 직접 전송
        socket.emit('apply_su1_values', fields);
        console.log('🔧 Applying SU1 values with ConMuFlag:', fields);
      }catch(e){ alert('SU1 입력 오류: ' + e.message); }
    }

    //==== SU2 버튼 핸들러 ====
    function enterSetModeSu2(){
      console.log('🔧 Entering SU2 Set Mode...');
      SET_MODE_SU2 = true;
      console.log(`🔧 State: SET_MODE_SU2=${SET_MODE_SU2}`);
      
      // 모든 SU2 필드의 원본 값 저장
      console.log('🔧 SU2 원본값 저장 함수 호출 시작');
      saveSu2OriginalValues();
      console.log('🔧 SU2 원본값 저장 함수 호출 완료');
      
      applyUiModeSu2();
      socket.emit('enter_su2_set_mode');
      console.log('🔧 SU2 Set Mode activated');
    }
    function leaveSetModeSu2(){
      console.log('🔧 Leaving SU2 Set Mode...');
      SET_MODE_SU2 = false;
      console.log(`🔧 State: SET_MODE_SU2=${SET_MODE_SU2}`);
      applyUiModeSu2();
      socket.emit('leave_su2_set_mode');
      console.log('🔧 SU2 Status Mode activated');
    }
    function applySetSu2(){
      try{
        const fields = collectFieldsSu2();
        // ConMuFlag가 포함된 fields를 직접 전송
        socket.emit('apply_su2_values', fields);
        console.log('🔧 Applying SU2 values with ConMuFlag:', fields);
      }catch(e){ alert('SU2 입력 오류: ' + e.message); }
    }

    //==== SU3 버튼 핸들러 ====
    function enterSetModeSu3(){
      console.log('🔧 Entering SU3 Set Mode...');
      SET_MODE_SU3 = true;
      console.log(`🔧 State: SET_MODE_SU3=${SET_MODE_SU3}`);
      
      // 모든 SU3 필드의 원본 값 저장
      saveSu3OriginalValues();
      
      applyUiModeSu3();
      socket.emit('enter_su3_set_mode');
      console.log('🔧 SU3 Set Mode activated');
    }
    function leaveSetModeSu3(){
      console.log('🔧 Leaving SU3 Set Mode...');
      SET_MODE_SU3 = false;
      console.log(`🔧 State: SET_MODE_SU3=${SET_MODE_SU3}`);
      applyUiModeSu3();
      socket.emit('leave_su3_set_mode');
      console.log('🔧 SU3 Status Mode activated');
    }
    function applySetSu3(){
      try{
        const fields = collectFieldsSu3();
        // ConMuFlag가 포함된 fields를 직접 전송
        socket.emit('apply_su3_values', fields);
        console.log('🔧 Applying SU3 values with ConMuFlag:', fields);
      }catch(e){ alert('SU3 입력 오류: ' + e.message); }
    }

    //==== SU4 Set Mode 핸들러 ====
    function enterSetModeSu4(){
      console.log('🔧 Entering SU4 Set Mode...');
      SET_MODE_SU4 = true;
      console.log(`🔧 State: SET_MODE_SU4=${SET_MODE_SU4}`);
      
      // 모든 SU4 필드의 원본 값 저장
      saveSu4OriginalValues();
      
      applyUiModeSu4();
      socket.emit('enter_su4_set_mode');
      console.log('🔧 SU4 Set Mode activated');
    }
    function leaveSetModeSu4(){
      console.log('🔧 Leaving SU4 Set Mode...');
      SET_MODE_SU4 = false;
      console.log(`🔧 State: SET_MODE_SU4=${SET_MODE_SU4}`);
      applyUiModeSu4();
      socket.emit('leave_su4_set_mode');
      console.log('🔧 SU4 Status Mode activated');
    }
    function applySetSu4(){
      try{
        const fields = collectFieldsSu4();
        // ConMuFlag가 포함된 fields를 직접 전송
        socket.emit('apply_su4_values', fields);
        console.log('🔧 Applying SU4 values with ConMuFlag:', fields);
      }catch(e){ alert('SU4 입력 오류: ' + e.message); }
    }

    //==== 버튼 바인딩 ====
    // 메인 화면의 Set Mode 버튼에만 이벤트 연결 (1127라인)
    document.querySelector('button[id="btnSetMode"]:not([style*="visibility"])')?.addEventListener('click', enterSetMode);
    document.getElementById('btnStatusMode')?.addEventListener('click', leaveSetMode);
    document.getElementById('btnApply')?.addEventListener('click', applySet);
    
    //==== SU1 Set Mode 버튼 바인딩 ====
    document.getElementById('btnSetModeSu1')?.addEventListener('click', enterSetModeSu1);
    document.getElementById('btnStatusModeSu1')?.addEventListener('click', leaveSetModeSu1);
    document.getElementById('btnApplySu1')?.addEventListener('click', applySetSu1);
    
    //==== SU2 Set Mode 버튼 바인딩 ====
    document.getElementById('btnSetModeSu2')?.addEventListener('click', enterSetModeSu2);
    document.getElementById('btnStatusModeSu2')?.addEventListener('click', leaveSetModeSu2);
    document.getElementById('btnApplySu2')?.addEventListener('click', applySetSu2);
    
    //==== SU3 Set Mode 버튼 바인딩 ====
    document.getElementById('btnSetModeSu3')?.addEventListener('click', enterSetModeSu3);
    document.getElementById('btnStatusModeSu3')?.addEventListener('click', leaveSetModeSu3);
    document.getElementById('btnApplySu3')?.addEventListener('click', applySetSu3);
    
    //==== SU4 Set Mode 버튼 바인딩 ====
    document.getElementById('btnSetModeSu4')?.addEventListener('click', enterSetModeSu4);
    document.getElementById('btnStatusModeSu4')?.addEventListener('click', leaveSetModeSu4);
    document.getElementById('btnApplySu4')?.addEventListener('click', applySetSu4);
    
    //==== Sync Module Set Mode 버튼 바인딩 ====
    document.getElementById('sync_set_mode_btn')?.addEventListener('click', enterSyncSetMode);
    document.getElementById('sync_status_mode_btn')?.addEventListener('click', leaveSyncSetMode);
    document.getElementById('sync_apply_btn')?.addEventListener('click', applySyncSet);
    
    //==== DU System Set Mode 응답 수신 ====
    socket.on("du_set_mode_ack", (data) => {
      console.log('🔧 DU Set Mode acknowledged:', data);
    });
    
    socket.on("du_status_mode_ack", (data) => {
      console.log('🔧 DU Status Mode acknowledged:', data);
    });
    
    socket.on("du_apply_ack", (data) => {
      console.log('🔧 DU Apply acknowledged:', data);
      if (data.ok) {
        console.log('✅ DU values applied successfully');
      } else {
        console.error('❌ DU values apply failed:', data.error);
        alert('DU 값 적용 실패: ' + data.error);
      }
    });

    //==== Sync Module Set Mode 응답 수신 ====
    socket.on("sync_set_mode_ack", (data) => {
      console.log('🔧 Sync Module Set Mode acknowledged:', data);
    });
    
    socket.on("sync_status_mode_ack", (data) => {
      console.log('🔧 Sync Module Status Mode acknowledged:', data);
    });
    
    socket.on("sync_apply_ack", (data) => {
      console.log('🔧 Sync Module Apply acknowledged:', data);
      if (data.ok) {
        console.log('✅ Sync Module values applied successfully');
      } else {
        console.error('❌ Sync Module values apply failed:', data.error);
        alert('Sync Module 값 적용 실패: ' + data.error);
      }
    });
    
    //==== On/Off 버튼 토글 이벤트 연결 ====
    // Set Mode에서만 작동하는 On/Off 버튼들
    const onOffButtons = [
      'gumstick_onoff', 'mvbx_rsagc_mode', 'alc_dl0_siso_mode', 'alc_dl1_mimo_mode'
    ];
    
    onOffButtons.forEach(buttonId => {
      const button = document.getElementById(buttonId);
      if (button) {
        button.addEventListener('click', () => toggleOnOffButton(buttonId));
      }
    });
    
    //==== SU1 On/Off 버튼 토글 이벤트 연결 ====
    const su1OnOffButtons = [
      'su1_gumstick_onoff', 'su1_dl_alc_onoff_siso', 'su1_dl_alc_onoff_mimo', 'su1_ul_alc_onoff_siso', 'su1_ul_alc_onoff_mimo', 'su1_cascade_mode'
    ];
    
    su1OnOffButtons.forEach(buttonId => {
      const button = document.getElementById(buttonId);
      if (button) {
        button.addEventListener('click', () => toggleOnOffButtonSu1(buttonId));
        console.log(`✅ SU1 On/Off 버튼 이벤트 연결: ${buttonId}`);
      } else {
        console.log(`⚠️ SU1 On/Off 버튼을 찾을 수 없음: ${buttonId}`);
      }
    });

    //==== SU2 On/Off 버튼 토글 이벤트 연결 ====
    const su2OnOffButtons = [
      'su2_gumstick_onoff', 'su2_dl_alc_onoff_siso', 'su2_dl_alc_onoff_mimo', 'su2_ul_alc_onoff_siso', 'su2_ul_alc_onoff_mimo', 'su2_cascade_mode'
    ];
    
    su2OnOffButtons.forEach(buttonId => {
      const button = document.getElementById(buttonId);
      if (button) {
        button.addEventListener('click', () => toggleOnOffButtonSu2(buttonId));
      }
    });

    //==== SU3 On/Off 버튼 토글 이벤트 연결 ====
    const su3OnOffButtons = [
      'su3_gumstick_onoff', 'su3_dl_alc_onoff_siso', 'su3_dl_alc_onoff_mimo', 'su3_ul_alc_onoff_siso', 'su3_ul_alc_onoff_mimo', 'su3_cascade_mode'
    ];
    
    su3OnOffButtons.forEach(buttonId => {
      const button = document.getElementById(buttonId);
      if (button) {
        button.addEventListener('click', () => toggleOnOffButtonSu3(buttonId));
      }
    });

    //==== SU4 On/Off 버튼 토글 이벤트 연결 ====
    const su4OnOffButtons = [
      'su4_gumstick_onoff', 'su4_dl_alc_onoff_siso', 'su4_dl_alc_onoff_mimo', 'su4_ul_alc_onoff_siso', 'su4_ul_alc_onoff_mimo'
    ];
    
    su4OnOffButtons.forEach(buttonId => {
      const button = document.getElementById(buttonId);
      if (button) {
        button.addEventListener('click', () => toggleOnOffButtonSu4(buttonId));
      }
    });

    //==== Sync Module Set Mode 핸들러 ====
    function enterSyncSetMode() {
      console.log('🔧 Entering Sync Module Set Mode...');
      SYNC_SET_MODE = true;
      console.log(`🔧 State: SYNC_SET_MODE=${SYNC_SET_MODE}`);
      
      // 모든 필드의 원본 값 저장
      saveOriginalValues();
      
      applySyncUiMode();
      socket.emit('enter_sync_set_mode');
      socket.emit('request_tdd_status'); // 스냅샷 1회
      console.log('🔧 Sync Module Set Mode activated');
    }
    
    function leaveSyncSetMode() {
      console.log('🔧 Leaving Sync Module Set Mode...');
      SYNC_SET_MODE = false;
      console.log(`🔧 State: SYNC_SET_MODE=${SYNC_SET_MODE}`);
      applySyncUiMode();
      socket.emit('leave_sync_set_mode');
      console.log('🔧 Sync Module Status Mode activated');
    }
    
    function applySyncSet() {
      try {
        // Sync Module 값 수집 및 적용
        const fields = collectSyncFields();
        // ConMuFlag가 포함된 fields를 직접 전송
        socket.emit('apply_sync_values', fields);
        console.log('🔧 Applying Sync Module values with ConMuFlag:', fields);
      } catch(e) { 
        alert('Sync Module 입력 오류: ' + e.message); 
      }
    }
    
    //==== DU System 필드들의 원본 값 저장 ====
    function saveDuOriginalValues() {
      // FIELD_MAP을 기반으로 DU 필드들의 원본 값 저장
      for (const [id, spec] of Object.entries(FIELD_MAP)) {
        // DU 필드만 처리 (su1_ 접두사가 없는 필드들)
        if (id.startsWith('su1_')) continue;
        
        const el = document.getElementById(id);
        if (el) {
          let originalValue;
          if (el.type === 'checkbox') {
            originalValue = el.checked ? '1' : '0';
          } else if (el.tagName === 'SELECT') {
            // 드롭다운의 경우 value가 없으면 첫 번째 옵션 사용
            if (el.value && el.value !== '') {
              // 드롭다운 값을 숫자로 변환해서 저장
              originalValue = getDropdownNumericValue(id, el.value);
            } else if (el.options.length > 0) {
              originalValue = getDropdownNumericValue(id, el.options[0].value);
            } else {
              originalValue = 0; // 기본값 (숫자)
            }
          } else if (el.type === 'button') {
            originalValue = el.textContent === 'ON' ? '1' : '0';
          } else {
            originalValue = el.value || '0';
          }
          
          el.setAttribute('data-original-value', originalValue);
        }
      }
    }

    //==== SU1 System 필드들의 원본 값 저장 ====
    function saveSu1OriginalValues() {
      // SU1_FIELD_MAP을 기반으로 SU1 필드들의 원본 값 저장
      for (const [id, spec] of Object.entries(SU1_FIELD_MAP)) {
        
        const el = document.getElementById(id);
        if (el) {
          let originalValue;
          if (el.type === 'checkbox') {
            originalValue = el.checked ? '1' : '0';
          } else if (el.tagName === 'SELECT') {
            // 드롭다운의 경우 value가 없으면 첫 번째 옵션 사용
            if (el.value && el.value !== '') {
              // 드롭다운 값을 숫자로 변환해서 저장
              originalValue = getDropdownNumericValue(id, el.value);
            } else if (el.options.length > 0) {
              originalValue = getDropdownNumericValue(id, el.options[0].value);
            } else {
              originalValue = 0; // 기본값 (숫자)
            }
          } else if (el.type === 'button') {
            originalValue = el.textContent === 'ON' ? '1' : '0';
          } else {
            originalValue = el.value || '0';
          }
          
          el.setAttribute('data-original-value', originalValue);
        }
      }
    }

    //==== SU2 System 필드들의 원본 값 저장 ====
    function saveSu2OriginalValues() {
      console.log('🔍 SU2 saveSu2OriginalValues 시작');
      let savedCount = 0;
      
      // SU2_FIELD_MAP을 기반으로 SU2 필드들의 원본 값 저장
      for (const [id, spec] of Object.entries(SU2_FIELD_MAP)) {
        
        const el = document.getElementById(id);
        if (el) {
          let originalValue;
          if (el.type === 'checkbox') {
            originalValue = el.checked ? '1' : '0';
          } else if (el.tagName === 'SELECT') {
            // 드롭다운의 경우 value가 없으면 첫 번째 옵션 사용
            if (el.value && el.value !== '') {
              // 드롭다운 값을 숫자로 변환해서 저장
              originalValue = getDropdownNumericValue(id, el.value);
            } else if (el.options.length > 0) {
              originalValue = getDropdownNumericValue(id, el.options[0].value);
            } else {
              originalValue = 0; // 기본값 (숫자)
            }
          } else if (el.type === 'button') {
            originalValue = el.textContent === 'ON' ? '1' : '0';
          } else {
            originalValue = el.value || '0';
          }
          
          el.setAttribute('data-original-value', originalValue);
          console.log(`💾 SU2 원본값 저장: ${id} = ${originalValue}`);
          savedCount++;
        } else {
          console.log(`⚠️ SU2 요소 없음: ${id}`);
        }
      }
      
      console.log(`🔍 SU2 원본값 저장 완료: ${savedCount}개 필드`);
    }

    //==== SU3 System 필드들의 원본 값 저장 ====
    function saveSu3OriginalValues() {
      console.log('🔍 SU3 saveSu3OriginalValues 시작');
      let savedCount = 0;
      
      // SU3_FIELD_MAP을 기반으로 SU3 필드들의 원본 값 저장
      for (const [id, spec] of Object.entries(SU3_FIELD_MAP)) {
        
        const el = document.getElementById(id);
        if (el) {
          let originalValue;
          if (el.type === 'checkbox') {
            originalValue = el.checked ? '1' : '0';
          } else if (el.tagName === 'SELECT') {
            // 드롭다운의 경우 value가 없으면 첫 번째 옵션 사용
            if (el.value && el.value !== '') {
              // 드롭다운 값을 숫자로 변환해서 저장
              originalValue = getDropdownNumericValue(id, el.value);
            } else if (el.options.length > 0) {
              originalValue = getDropdownNumericValue(id, el.options[0].value);
            } else {
              originalValue = 0; // 기본값 (숫자)
            }
          } else if (el.type === 'button') {
            originalValue = el.textContent === 'ON' ? '1' : '0';
          } else {
            originalValue = el.value || '0';
          }
          
          el.setAttribute('data-original-value', originalValue);
          console.log(`💾 SU3 원본값 저장: ${id} = ${originalValue}`);
          savedCount++;
        } else {
          console.log(`⚠️ SU3 요소 없음: ${id}`);
        }
      }
      
      console.log(`🔍 SU3 원본값 저장 완료: ${savedCount}개 필드`);
    }

    //==== SU4 System 필드들의 원본 값 저장 ====
    function saveSu4OriginalValues() {
      console.log('🔍 SU4 saveSu4OriginalValues 시작');
      let savedCount = 0;
      
      // SU4_FIELD_MAP을 기반으로 SU4 필드들의 원본 값 저장
      for (const [id, spec] of Object.entries(SU4_FIELD_MAP)) {
        
        const el = document.getElementById(id);
        if (el) {
          let originalValue;
          if (el.type === 'checkbox') {
            originalValue = el.checked ? '1' : '0';
          } else if (el.tagName === 'SELECT') {
            // 드롭다운의 경우 value가 없으면 첫 번째 옵션 사용
            if (el.value && el.value !== '') {
              // 드롭다운 값을 숫자로 변환해서 저장
              originalValue = getDropdownNumericValue(id, el.value);
            } else if (el.options.length > 0) {
              originalValue = getDropdownNumericValue(id, el.options[0].value);
            } else {
              originalValue = 0; // 기본값 (숫자)
            }
          } else if (el.type === 'button') {
            originalValue = el.textContent === 'ON' ? '1' : '0';
          } else {
            originalValue = el.value || '0';
          }
          
          el.setAttribute('data-original-value', originalValue);
          console.log(`💾 SU4 원본값 저장: ${id} = ${originalValue}`);
          savedCount++;
        } else {
          console.log(`⚠️ SU4 요소 없음: ${id}`);
        }
      }
      
      console.log(`🔍 SU4 원본값 저장 완료: ${savedCount}개 필드`);
    }

    // Sync Module 필드들의 원본 값 저장
    function saveOriginalValues() {
      console.log('🔧 Saving original values for Sync Module fields...');
      
      // Slot Format 필드들 (160개)
      for (let i = 0; i < 160; i++) {
        const el = document.getElementById(`slot_format_${i}`);
        if (el && el.value !== undefined) {
          el.setAttribute('data-original-value', el.value);
        }
      }
      
      // TSYNC OUT SEL 필드들 (3개)
      for (let i = 1; i <= 3; i++) {
        const el = document.getElementById(`tsync_out_sel_${i}`);
        if (el && el.value !== undefined) {
          el.setAttribute('data-original-value', el.value);
        }
      }
      
      // TSYNC OUT MODE 필드들 (3개)
      for (let i = 1; i <= 3; i++) {
        const el = document.getElementById(`tsync_out_mode_${i}`);
        if (el && el.value !== undefined) {
          el.setAttribute('data-original-value', el.value);
        }
      }
      
      // Frequency, ARFCN 필드들
      const freqEl = document.getElementById('TDD_Freq2');
      if (freqEl && freqEl.value !== undefined) {
        freqEl.setAttribute('data-original-value', freqEl.value);
      }
      
      const arfcnEl = document.getElementById('TDD_Arfcn2');
      if (arfcnEl && arfcnEl.value !== undefined) {
        arfcnEl.setAttribute('data-original-value', arfcnEl.value);
      }
      
      // F Mode, SSB MU, TDD Rate 필드들
      const fModeEl = document.getElementById('F_Mode');
      if (fModeEl && fModeEl.value !== undefined) {
        fModeEl.setAttribute('data-original-value', fModeEl.value);
      }
      
      const ssbMuEl = document.getElementById('ssb_mu');
      if (ssbMuEl && ssbMuEl.value !== undefined) {
        ssbMuEl.setAttribute('data-original-value', ssbMuEl.value);
      }
      
      const tddRateEl = document.getElementById('tdd_rate');
      if (tddRateEl && tddRateEl.value !== undefined) {
        tddRateEl.setAttribute('data-original-value', tddRateEl.value);
      }
      
      // Slot 3gpp Format 필드들 (784개)
      for (let row = 0; row < 56; row++) {
        for (let col = 0; col < 14; col++) {
          const el = document.getElementById(`slot_3gpp_format_${row}_${col}`);
          if (el && el.value !== undefined) {
            el.setAttribute('data-original-value', el.value);
          }
        }
      }
      
      console.log('🔧 Original values saved for all Sync Module fields');
    }

    // Sync Module 필드 값 수집 함수
    function collectSyncFields() {
      const out = {};
      const modifiedFields = {};  // 수정된 필드 추적
      
      // Slot Format 필드들 (160개) - 실제 수정된 것만 감지
      let slotFormatModified = false;
      for (let i = 0; i < 160; i++) {
        const el = document.getElementById(`slot_format_${i}`);
        if (el && el.value !== undefined) {
          const v = Number(el.value);
          if (!Number.isNaN(v)) {
            out[`slot_format_${i}`] = v;
            // 실제로 수정된 경우에만 비트 설정
            if (el.hasAttribute('data-original-value')) {
              const originalValue = Number(el.getAttribute('data-original-value'));
              if (v !== originalValue) {
                slotFormatModified = true;
              }
            }
          }
        }
      }
      if (slotFormatModified) {
        modifiedFields['TDD_SLOT_FORMAT'] = true;
      }
      
      // TSYNC OUT SEL 필드들 (3개) - 실제 수정된 것만 감지
      for (let i = 1; i <= 3; i++) {
        const el = document.getElementById(`tsync_out_sel_${i}`);
        if (el && el.value !== undefined) {
          const v = Number(el.value);
          if (!Number.isNaN(v)) {
            out[`tsync_out_sel_${i}`] = v;
            // 실제로 수정된 경우에만 비트 설정
            if (el.hasAttribute('data-original-value')) {
              const originalValue = Number(el.getAttribute('data-original-value'));
              if (v !== originalValue) {
                if (i === 1) modifiedFields['TSYNC_OUT_SEL1'] = true;
                else if (i === 2) modifiedFields['TSYNC_OUT_SEL2'] = true;
                else if (i === 3) modifiedFields['TSYNC_OUT_SEL3'] = true;
              }
            }
          }
        }
      }
      
      // TSYNC OUT MODE 필드들 (3개) - 실제 수정된 것만 감지
      for (let i = 1; i <= 3; i++) {
        const el = document.getElementById(`tsync_out_mode_${i}`);
        if (el && el.value !== undefined) {
          const v = Number(el.value);
          if (!Number.isNaN(v)) {
            out[`tsync_out_mode_${i}`] = v;
            // 실제로 수정된 경우에만 비트 설정 (SEL과 동일한 비트 사용)
            if (el.hasAttribute('data-original-value')) {
              const originalValue = Number(el.getAttribute('data-original-value'));
              if (v !== originalValue) {
                if (i === 1) modifiedFields['TSYNC_OUT_SEL1'] = true;
                else if (i === 2) modifiedFields['TSYNC_OUT_SEL2'] = true;
                else if (i === 3) modifiedFields['TSYNC_OUT_SEL3'] = true;
              }
            }
          }
        }
      }
      
      // Frequency, ARFCN 필드들 - 실제 수정된 것만 감지
      const freqEl = document.getElementById('TDD_Freq2');
      if (freqEl && freqEl.value !== undefined) {
        const v = Number(freqEl.value);
        if (!Number.isNaN(v)) {
          out['TDD_Freq'] = v;
          // 실제로 수정된 경우에만 비트 설정
          if (freqEl.hasAttribute('data-original-value')) {
            const originalValue = Number(freqEl.getAttribute('data-original-value'));
            if (v !== originalValue) {
              modifiedFields['TDD_Freq'] = true;
            }
          }
        }
      }
      
      const arfcnEl = document.getElementById('TDD_Arfcn2');
      if (arfcnEl && arfcnEl.value !== undefined) {
        const v = Number(arfcnEl.value);
        if (!Number.isNaN(v)) {
          out['TDD_Arfcn'] = v;
          // 실제로 수정된 경우에만 비트 설정
          if (arfcnEl.hasAttribute('data-original-value')) {
            const originalValue = Number(arfcnEl.getAttribute('data-original-value'));
            if (v !== originalValue) {
              modifiedFields['TDD_Arfcn'] = true;
            }
          }
        }
      }
      
      // F Mode, SSB MU, TDD Rate 필드들 - 실제 수정된 것만 감지
      const fModeEl = document.getElementById('F_Mode');
      if (fModeEl && fModeEl.value !== undefined) {
        const v = Number(fModeEl.value);
        if (!Number.isNaN(v)) {
          out['F_Mode'] = v;
          // 실제로 수정된 경우에만 비트 설정
          if (fModeEl.hasAttribute('data-original-value')) {
            const originalValue = Number(fModeEl.getAttribute('data-original-value'));
            if (v !== originalValue) {
              modifiedFields['F_Mode'] = true;
            }
          }
        }
      }
      
      const ssbMuEl = document.getElementById('ssb_mu');
      if (ssbMuEl && ssbMuEl.value !== undefined) {
        const v = Number(ssbMuEl.value);
        if (!Number.isNaN(v)) {
          out['ssb_mu'] = v;
          // 실제로 수정된 경우에만 비트 설정
          if (ssbMuEl.hasAttribute('data-original-value')) {
            const originalValue = Number(ssbMuEl.getAttribute('data-original-value'));
            if (v !== originalValue) {
              modifiedFields['MVBX_SSB_MU'] = true;
            }
          }
        }
      }
      
      const tddRateEl = document.getElementById('tdd_rate');
      if (tddRateEl && tddRateEl.value !== undefined) {
        const v = Number(tddRateEl.value);
        if (!Number.isNaN(v)) {
          out['tdd_rate'] = v;
          // 실제로 수정된 경우에만 비트 설정
          if (tddRateEl.hasAttribute('data-original-value')) {
            const originalValue = Number(tddRateEl.getAttribute('data-original-value'));
            if (v !== originalValue) {
              modifiedFields['MVBX_TDD_RATE'] = true;
            }
          }
        }
      }
      
      // Slot 3gpp Format 필드들 (784개) - 실제 수정된 것만 감지
      let slot3gppFormatModified = false;
      for (let row = 0; row < 56; row++) {
        for (let col = 0; col < 14; col++) {
          const el = document.getElementById(`slot_3gpp_format_${row}_${col}`);
          if (el && el.value !== undefined) {
            const v = Number(el.value);
            if (!Number.isNaN(v)) {
              out[`slot_3gpp_format_${row}_${col}`] = v;
              // 실제로 수정된 경우에만 비트 설정
              if (el.hasAttribute('data-original-value')) {
                const originalValue = Number(el.getAttribute('data-original-value'));
                if (v !== originalValue) {
                  slot3gppFormatModified = true;
                }
              }
            }
          }
        }
      }
      if (slot3gppFormatModified) {
        modifiedFields['TDD_FORMAT_3GPP_TABLE'] = true;
      }
      
      // ConMuFlag 추가 (수정된 필드에 해당하는 비트만 1로 설정)
      out['ConMuFlag'] = buildSyncConMuFlag(modifiedFields);
      
      console.log('🔧 Collected Sync Module fields:', out);
      console.log('🔧 Modified fields for ConMuFlag:', modifiedFields);
      return out;
    }
    
    function applySyncUiMode() {
      console.log(`🔧 applySyncUiMode: SYNC_SET_MODE=${SYNC_SET_MODE}`);
      
      // Set Mode 버튼 표시/숨김
      document.getElementById('sync_set_mode_btn').classList.toggle('d-none', SYNC_SET_MODE);
      document.getElementById('sync_status_mode_btn').classList.toggle('d-none', !SYNC_SET_MODE);
      document.getElementById('sync_apply_btn').classList.toggle('d-none', !SYNC_SET_MODE);
      
      // 4개 Format 버튼들 표시/숨김 (Set Mode일 때만 표시)
      document.getElementById('sync_3gpp_form_btn').classList.toggle('d-none', !SYNC_SET_MODE);
      document.getElementById('sync_slot_form_btn').classList.toggle('d-none', !SYNC_SET_MODE);
      document.getElementById('sync_3gpp_load_btn').classList.toggle('d-none', !SYNC_SET_MODE);
      document.getElementById('sync_slot_load_btn').classList.toggle('d-none', !SYNC_SET_MODE);
      
      // 모든 입력 요소 활성화/비활성화
      document.querySelectorAll('.sync-input').forEach(el => {
        if (SYNC_SET_MODE) {
          el.readOnly = false;
          el.style.backgroundColor = '#fff';
        } else {
          el.readOnly = true;
          el.style.backgroundColor = '#f8f9fa';
        }
      });
      
      document.querySelectorAll('.sync-select').forEach(el => {
        el.disabled = !SYNC_SET_MODE;
      });
      
      console.log(`🔧 Toggled ${document.querySelectorAll('.sync-input, .sync-select').length} Sync Module editable fields`);
    }

    // 엑셀 다운로드 함수들
    function downloadSlotFormatExcel() {
      console.log('📊 Downloading Slot Format Excel (Corrected)...');
      
      // 1. 워크북 생성
      const wb = XLSX.utils.book_new();
      const data = [];
      
      // 2. 첫 번째 행 (제목)
      // 원본 파일과 유사하게 B1 셀에 제목을 넣도록 수정
      const titleRow = Array(21).fill('');
      titleRow[1] = 'Slot Format'; // B1 셀 (index 1)
      data.push(titleRow);
      
      // 3. 총 8개의 그룹 (0~159) 생성
      // (슬롯 번호 행 -> 값 행) 순서로 8번 반복
      for (let group = 0; group < 8; group++) {
        
        // (1) 슬롯 번호 행 생성 (0~19, 20~39, ...)
        const slotRow = ['']; // A열은 항상 비워둠
        const startNumber = group * 20; // 그룹 시작 번호 (0, 20, 40, ...)
        for (let col = 0; col < 20; col++) {
          slotRow.push(startNumber + col);
        }
        data.push(slotRow);
        
        // (2) 값 행 생성 ('Range:0-55' 와 0들)
        const rangeRow = ['Range:0-55'];
        for (let col = 0; col < 20; col++) {
          rangeRow.push(0);
        }
        data.push(rangeRow);
      }
      
      // 4. 워크시트 생성 및 파일 다운로드
      const ws = XLSX.utils.aoa_to_sheet(data);
      
      // 컬럼 너비 설정 (21개 컬럼)
      ws['!cols'] = [
        { width: 15 }, // A열 (Range:0-55)
        ...Array(20).fill({ width: 8 }) // B~U열 (0~19)
      ];
      
      // 워크북에 워크시트 추가
      XLSX.utils.book_append_sheet(wb, ws, 'Slot Format');
      
      // 파일 다운로드
      const fileName = `slot_format_${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.xlsx`;
      XLSX.writeFile(wb, fileName);
      
      console.log('📊 Slot Format Excel downloaded successfully');
    }

    function download3gppFormatExcel() {
      console.log('📊 Downloading 3GPP Format Excel (Fixed Template)...');
      
      // 1. 워크북 생성
      const wb = XLSX.utils.book_new();
      const data = [];
      
      // 2. 제목 행 (F1~M1에 "Slot 3Gpp Format")
      // 원본 파일에 제목이 없으므로, 필요 없다면 이 부분을 주석 처리하거나 삭제해도 됩니다.
      const titleRow = ['', '', '', '', '', 'Slot 3Gpp Format', '', '', '', '', '', '', '', ''];
      data.push(titleRow);
      
      // 3. 설명 행 (N2에 "D : 0 // U :1 // F : 2")
      const descRow = ['', '', '', '', '', '', '', '', '', '', '', '', '', 'D : 0 // U :1 // F : 2'];
      data.push(descRow);
      
      // 4. 컬럼 헤더 행 (B열부터 0~13)
      const headerRow = ['', 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13];
      data.push(headerRow);
      
      // 5. 데이터 생성 (핵심 수정 부분)
      // 웹 페이지 값 대신, 모든 값을 0으로 고정하여 56x14 데이터를 생성합니다.
      for (let row = 0; row < 56; row++) {
        const rowData = [row.toString()]; // 첫 번째 컬럼(A열)은 행 번호 (0~55)
        
        // B열부터 O열까지 14개의 데이터 값을 모두 '0'으로 채웁니다.
        for (let col = 0; col < 14; col++) {
          rowData.push(0); 
        }
        
        data.push(rowData);
      }
      
      // 6. 워크시트 생성 및 파일 다운로드
      const ws = XLSX.utils.aoa_to_sheet(data);
      
      // 컬럼 너비 설정
      ws['!cols'] = [
        { width: 8 },  // A열
        ...Array(14).fill({ width: 8 }) // B~O열
      ];
      
      XLSX.utils.book_append_sheet(wb, ws, '3GPP Format');
      const fileName = `3gpp_format_template_${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.xlsx`;
      XLSX.writeFile(wb, fileName);
      
      console.log('📊 3GPP Format Excel downloaded successfully');
    }

    //==== 3Gpp Format Load 함수 ====
    function load3GppFormatFromExcel() {
      console.log('📁 Loading 3GPP Format from Excel...');
      
      // 파일 입력 요소 클릭하여 파일 선택 다이얼로그 열기
      const fileInput = document.getElementById('sync_3gpp_file_input');
      if (fileInput) {
        fileInput.click();
      }
    }

    //==== Slot Format Load 함수 ====
    function loadSlotFormatFromExcel() {
      console.log('📁 Loading Slot Format from Excel...');
      
      // 파일 입력 요소 클릭하여 파일 선택 다이얼로그 열기
      const fileInput = document.getElementById('sync_slot_file_input');
      if (fileInput) {
        fileInput.click();
      }
    }

    //==== 3Gpp Format 파일 처리 함수 ====
    function handle3GppFormatFileUpload(event) {
      const file = event.target.files[0];
      if (!file) {
        console.log('❌ No file selected');
        return;
      }

      console.log(`📁 Processing file: ${file.name}`);
      console.log(`📁 File size: ${file.size} bytes`);
      console.log(`📁 File type: ${file.type}`);
      
      // 파일 확장자 검증
      const fileName = file.name.toLowerCase();
      if (!fileName.endsWith('.xlsx') && !fileName.endsWith('.xls') && !fileName.endsWith('.csv')) {
        alert('지원하지 않는 파일 형식입니다.\n\n지원 형식: .xlsx, .xls, .csv\n\n다운로드된 템플릿 파일(.xlsx)을 사용하시는 것을 권장합니다.');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const data = new Uint8Array(e.target.result);
          console.log(`📊 File data length: ${data.length} bytes`);
          
          const workbook = XLSX.read(data, { type: 'array' });
          console.log(`📊 Workbook sheets: ${workbook.SheetNames.join(', ')}`);
          
          // 첫 번째 워크시트 가져오기
          const worksheet = workbook.Sheets[workbook.SheetNames[0]];
          console.log(`📊 Worksheet: ${workbook.SheetNames[0]}`);
          
          // 워크시트를 JSON으로 변환 (헤더 포함)
          const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });
          
          console.log('📊 Excel data loaded:', jsonData);
          console.log(`📊 Data rows: ${jsonData.length}`);
          
          if (jsonData.length > 0) {
            console.log(`📊 First row: ${jsonData[0]}`);
            console.log(`📊 First row length: ${jsonData[0].length}`);
            
            // 파일 구조 검증
            if (jsonData.length < 4) {
              alert('파일이 너무 짧습니다.\n\n다운로드된 템플릿 파일을 사용하시거나, 최소 4행 이상의 데이터가 필요합니다.');
              return;
            }
            
            // 첫 번째 행이 제목 행인지 확인
            if (jsonData[0] && jsonData[0].length > 0 && 
                jsonData[0][5] === 'Slot 3Gpp Format') {
              console.log('✅ Valid template file detected');
            } else {
              console.log('⚠️ Template format not detected, but continuing...');
            }
          }
          
          // 데이터를 화면에 반영
          apply3GppFormatToTable(jsonData);
          
        } catch (error) {
          console.error('❌ Error processing Excel file:', error);
          alert('엑셀 파일 처리 중 오류가 발생했습니다: ' + error.message);
        }
      };
      
      reader.onerror = function(error) {
        console.error('❌ File reading error:', error);
        alert('파일 읽기 중 오류가 발생했습니다.');
      };
      
      reader.readAsArrayBuffer(file);
    }

    //==== Slot Format 파일 처리 함수 ====
    function handleSlotFormatFileUpload(event) {
      const file = event.target.files[0];
      if (!file) {
        console.log('❌ No file selected');
        return;
      }

      console.log(`📁 Processing Slot Format file: ${file.name}`);
      console.log(`📁 File size: ${file.size} bytes`);
      console.log(`📁 File type: ${file.type}`);
      
      // 파일 확장자 검증
      const fileName = file.name.toLowerCase();
      if (!fileName.endsWith('.xlsx') && !fileName.endsWith('.xls') && !fileName.endsWith('.csv')) {
        alert('지원하지 않는 파일 형식입니다.\n\n지원 형식: .xlsx, .xls, .csv\n\n다운로드된 템플릿 파일(.xlsx)을 사용하시는 것을 권장합니다.');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const data = new Uint8Array(e.target.result);
          console.log(`📊 File data length: ${data.length} bytes`);
          
          const workbook = XLSX.read(data, { type: 'array' });
          console.log(`📊 Workbook sheets: ${workbook.SheetNames.join(', ')}`);
          
          // 첫 번째 워크시트 가져오기
          const worksheet = workbook.Sheets[workbook.SheetNames[0]];
          console.log(`📊 Worksheet: ${workbook.SheetNames[0]}`);
          
          // 워크시트를 JSON으로 변환 (헤더 포함)
          const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });
          
          console.log('📊 Slot Format Excel data loaded:', jsonData);
          console.log(`📊 Data rows: ${jsonData.length}`);
          
          if (jsonData.length > 0) {
            console.log(`📊 First row: ${jsonData[0]}`);
            console.log(`📊 First row length: ${jsonData[0].length}`);
            
            // 파일 구조 검증
            if (jsonData.length < 3) {
              alert('파일이 너무 짧습니다.\n\n다운로드된 템플릿 파일을 사용하시거나, 최소 3행 이상의 데이터가 필요합니다.');
              return;
            }
            
            // 첫 번째 행이 제목 행인지 확인
            if (jsonData[0] && jsonData[0].length > 0 && 
                jsonData[0][1] === 'Slot Format') {
              console.log('✅ Valid Slot Format template file detected');
            } else {
              console.log('⚠️ Slot Format template format not detected, but continuing...');
            }
          }
          
          // 데이터를 화면에 반영
          applySlotFormatToTable(jsonData);
          
        } catch (error) {
          console.error('❌ Error processing Slot Format Excel file:', error);
          alert('Slot Format 엑셀 파일 처리 중 오류가 발생했습니다: ' + error.message);
        }
      };
      
      reader.onerror = function(error) {
        console.error('❌ File reading error:', error);
        alert('파일 읽기 중 오류가 발생했습니다.');
      };
      
      reader.readAsArrayBuffer(file);
    }

    //==== 3Gpp Format 데이터를 테이블에 적용 ====
    function apply3GppFormatToTable(excelData) {
      console.log('🔄 Applying 3GPP Format data to table...');
      console.log('📊 Raw Excel data:', excelData);
      
      let appliedCount = 0;
      let validRows = 0;
      
      // 다운로드된 엑셀 파일 구조에 맞춰 처리:
      // Row 0: 제목 행 (무시)
      // Row 1: 설명 행 (무시) 
      // Row 2: 헤더 행 (무시)
      // Row 3~58: 실제 데이터 (슬롯 0~55)
      
      for (let rowIndex = 3; rowIndex < excelData.length; rowIndex++) {
        const row = excelData[rowIndex];
        
        // 행이 존재하고 데이터가 있는지 확인
        if (row && Array.isArray(row) && row.length >= 15) { // A~O열 (15개 컬럼)
          console.log(`📝 Row ${rowIndex}:`, row);
          
          // 첫 번째 컬럼(A열)이 0~55 범위의 숫자인지 확인
          const firstColValue = row[0];
          if (firstColValue !== undefined && firstColValue !== null && 
              !isNaN(parseInt(firstColValue)) && 
              parseInt(firstColValue) >= 0 && parseInt(firstColValue) <= 55) {
            
            const slotIndex = parseInt(firstColValue);
            console.log(`🔍 Processing slot index: ${slotIndex}`);
            
            // B열부터 O열까지의 데이터를 처리 (14개 컬럼)
            for (let colIndex = 1; colIndex <= 14; colIndex++) {
              const value = row[colIndex];
              
              // 값이 숫자인 경우만 처리 (0, 1, 2는 유효한 값)
              if (value !== undefined && value !== null && value !== '' && 
                  !isNaN(parseInt(value)) && 
                  parseInt(value) >= 0 && parseInt(value) <= 2) {
                
                // 3Gpp Format 테이블의 해당 셀 찾기
                // 실제 HTML 테이블의 셀 ID: slot_3gpp_format_${row}_${col}
                const cellId = `slot_3gpp_format_${slotIndex}_${colIndex - 1}`;
                const cellElement = document.getElementById(cellId);
                
                if (cellElement) {
                  // 셀 값 업데이트
                  cellElement.value = parseInt(value);
                  appliedCount++;
                  console.log(`✅ Updated ${cellId} = ${value} (Slot ${slotIndex}, Col ${colIndex-1})`);
                } else {
                  console.log(`⚠️ Cell not found: ${cellId}`);
                }
              } else {
                console.log(`⚠️ Invalid value at row ${rowIndex}, col ${colIndex}: ${value} (should be 0, 1, or 2)`);
              }
            }
            validRows++;
          } else {
            console.log(`⚠️ Row ${rowIndex} first column is not a valid slot number (0-55): ${firstColValue}`);
          }
        } else {
          console.log(`⚠️ Row ${rowIndex} is empty or invalid (need 15 columns):`, row);
        }
      }
      
      console.log(`📊 Summary: ${validRows} valid rows, ${appliedCount} values applied`);
      
      if (appliedCount > 0) {
        alert(`3GPP Format 테이블에 ${appliedCount}개의 값이 성공적으로 적용되었습니다.\n\n적용된 슬롯: ${validRows}개 (0~${validRows-1})`);
      } else {
        alert(`적용할 수 있는 데이터가 없습니다.\n\n파일 형식 확인사항:\n1. 첫 번째 열(A열)에 0~55의 슬롯 번호가 있어야 합니다\n2. B~O열에 0, 1, 2 등의 값이 있어야 합니다\n3. 현재 파일의 데이터 구조: ${validRows}개 유효 행, ${excelData.length}개 전체 행\n\n다운로드된 템플릿 파일을 사용하시는 것을 권장합니다.`);
      }
    }

    //==== Slot Format 데이터를 테이블에 적용 ====
    function applySlotFormatToTable(excelData) {
      console.log('🔄 Applying Slot Format data to table...');
      console.log('📊 Raw Slot Format Excel data:', excelData);
      
      let appliedCount = 0;
      let validGroups = 0;
      
      // 다운로드된 엑셀 파일 구조에 맞춰 처리:
      // Row 0: 제목 행 (무시)
      // Row 1~16: 8개 그룹 (슬롯 번호 행 + 값 행)
      //   - 홀수 행: 슬롯 번호 (0~19, 20~39, 40~59, 60~79, 80~99, 100~119, 120~139, 140~159)
      //   - 짝수 행: 값들 (Range:0-55와 0들)
      
      for (let groupIndex = 0; groupIndex < 8; groupIndex++) {
        const slotRowIndex = 1 + (groupIndex * 2);     // 슬롯 번호 행 (1, 3, 5, 7, 9, 11, 13, 15)
        const valueRowIndex = 1 + (groupIndex * 2) + 1; // 값 행 (2, 4, 6, 8, 10, 12, 14, 16)
        
        const slotRow = excelData[slotRowIndex];
        const valueRow = excelData[valueRowIndex];
        
        if (slotRow && valueRow && Array.isArray(slotRow) && Array.isArray(valueRow)) {
          console.log(`📝 Group ${groupIndex}: Slot row ${slotRowIndex} = ${slotRow}, Value row ${valueRowIndex} = ${valueRow}`);
          
          // 슬롯 번호 행에서 B열부터 U열까지 (20개 컬럼)
          for (let colIndex = 1; colIndex <= 20 && colIndex < slotRow.length; colIndex++) {
            const slotNumber = slotRow[colIndex];
            const value = valueRow[colIndex];
            
            // 슬롯 번호가 유효하고 값도 유효한 경우
            if (slotNumber !== undefined && slotNumber !== null && !isNaN(parseInt(slotNumber)) &&
                value !== undefined && value !== null && !isNaN(parseInt(value))) {
              
              const slotIndex = parseInt(slotNumber);
              const slotValue = parseInt(value);
              
              // 0~159 범위의 슬롯 번호인지 확인
              if (slotIndex >= 0 && slotIndex <= 159) {
                // Slot Format 테이블의 해당 셀 찾기
                const cellId = `slot_format_${slotIndex}`;
                const cellElement = document.getElementById(cellId);
                
                if (cellElement) {
                  // 셀 값 업데이트
                  cellElement.value = slotValue;
                  appliedCount++;
                  console.log(`✅ Updated ${cellId} = ${slotValue} (Slot ${slotIndex})`);
                } else {
                  console.log(`⚠️ Cell not found: ${cellId}`);
                }
              } else {
                console.log(`⚠️ Invalid slot number: ${slotIndex} (should be 0-159)`);
              }
            } else {
              console.log(`⚠️ Invalid data at group ${groupIndex}, col ${colIndex}: slot=${slotRow[colIndex]}, value=${valueRow[colIndex]}`);
            }
          }
          validGroups++;
        } else {
          console.log(`⚠️ Invalid rows at group ${groupIndex}: slotRow=${slotRow}, valueRow=${valueRow}`);
        }
      }
      
      console.log(`📊 Summary: ${validGroups} valid groups, ${appliedCount} values applied`);
      
      if (appliedCount > 0) {
        alert(`Slot Format 테이블에 ${appliedCount}개의 값이 성공적으로 적용되었습니다.\n\n적용된 그룹: ${validGroups}개`);
      } else {
        alert(`적용할 수 있는 데이터가 없습니다.\n\n파일 형식 확인사항:\n1. 첫 번째 행(B1)에 "Slot Format" 제목이 있어야 합니다\n2. 8개 그룹의 슬롯 번호와 값이 있어야 합니다\n3. 현재 파일의 데이터 구조: ${validGroups}개 유효 그룹, ${excelData.length}개 전체 행\n\n다운로드된 템플릿 파일을 사용하시는 것을 권장합니다.`);
      }
    }

    // 버튼 이벤트 리스너 추가
    document.addEventListener('DOMContentLoaded', function() {
      // 3Gpp Format Form 버튼 이벤트
      const sync3gppFormBtn = document.getElementById('sync_3gpp_form_btn');
      if (sync3gppFormBtn) {
        sync3gppFormBtn.addEventListener('click', download3gppFormatExcel);
      }
      
      // 3Gpp Format Load 버튼 이벤트
      const sync3gppLoadBtn = document.getElementById('sync_3gpp_load_btn');
      if (sync3gppLoadBtn) {
        sync3gppLoadBtn.addEventListener('click', load3GppFormatFromExcel);
      }
      
      // 3Gpp Format 파일 입력 이벤트
      const sync3gppFileInput = document.getElementById('sync_3gpp_file_input');
      if (sync3gppFileInput) {
        sync3gppFileInput.addEventListener('change', handle3GppFormatFileUpload);
      }
      
      // Slot Format Form 버튼 이벤트
      const syncSlotFormBtn = document.getElementById('sync_slot_form_btn');
      if (syncSlotFormBtn) {
        syncSlotFormBtn.addEventListener('click', downloadSlotFormatExcel);
      }
      
      // Slot Format Load 버튼 이벤트
      const syncSlotLoadBtn = document.getElementById('sync_slot_load_btn');
      if (syncSlotLoadBtn) {
        syncSlotLoadBtn.addEventListener('click', loadSlotFormatFromExcel);
      }
      
      // Slot Format 파일 입력 이벤트
      const syncSlotFileInput = document.getElementById('sync_slot_file_input');
      if (syncSlotFileInput) {
        syncSlotFileInput.addEventListener('change', handleSlotFormatFileUpload);
      }
    });
    </script>


    <!-- SU1 Reset Modal -->
                <div class="modal fade" id="su1ResetModal" tabindex="-1" aria-labelledby="su1ResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to SU1 Reset it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleSU1ResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleSU1ResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

    <!-- SU2 Reset Modal -->
                <div class="modal fade" id="su2ResetModal" tabindex="-1" aria-labelledby="su2ResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to SU2 Reset it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleSU2ResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleSU2ResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

    <!-- SU3 Reset Modal -->
                <div class="modal fade" id="su3ResetModal" tabindex="-1" aria-labelledby="su3ResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to SU3 Reset it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleSU3ResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleSU3ResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

    <!-- SU4 Reset Modal -->
                <div class="modal fade" id="su4ResetModal" tabindex="-1" aria-labelledby="su4ResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to SU4 Reset it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleSU4ResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleSU4ResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


    <!-- SU1 Beam Info Modal -->
    <div class="modal fade" id="su1BeamInfoModal" tabindex="-1" aria-labelledby="su1BeamInfoModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 95%; width: 95%;"> <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">

                <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                    <h5 class="modal-title" id="beamInfoModalLabel" style="font-weight: bold;">
                        <i class="fas fa-info-circle"></i> SU1 Beam Control
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                    <div class="card mb-3">
                        <div class="card-header">Evn</div>
                        <div class="card-body">
                            <div class="row align-items-center justify-content-between">
                                <div class="col-auto">
                                    <small class="text-muted">Ant. Array Ver</small>
                                    <small id="su1AntArrayVer">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Temper Comp</small>
                                </div>
                                <div class="col-auto">
                                    <button class="btn btn-sm btn-on" id="su1TemperComp">N/A</button>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Start Temper</small>
                                    <small id="su1StartTemper">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Cur Temper</small>
                                    <small id="su1CurTemper">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <div class="text-end">
                                        <small class="text-muted">Compensation DL</small>
                                        <small id="su1CompensationDL">N/A</small>
                                    </div>
                                    <div class="text-end mt-1">
                                        <small class="text-muted">Compensation UL</small>
                                        <small id="su1CompensationUL">N/A</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">SISO Tx/Rx Gain Setting</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Front End
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su1MvbxMv2850TxGainSiso">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su1MvbxMv2850RxGainSiso">N/A</span>
                                            </div>
                                        </div>
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Mixer
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su1MvbxMv2853TxGainSiso">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su1MvbxMv2853RxGainSiso">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">MIMO Tx/Rx Gain Setting</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Front End
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su1MvbxMv2850TxGainMimo">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su1MvbxMv2850RxGainMimo">N/A</span>
                                            </div>
                                        </div>
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Mixer
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su1MvbxMv2853TxGainMimo">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su1MvbxMv2853RxGainMimo">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">Beam Book</div>
                                <div class="card-body text-center">

                                    <svg id="su1BeamBook" width="360" height="360" viewBox="0 0 400 400"></svg>


                                    <div class="text-end mt-3">
                                        <small class="text-muted">Orientation</small> <span class="ms-2" id="su1Orientation">0</span><br>
                                        <small class="text-muted">Tilt</small> <span class="ms-4" id="su1Tilt">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3 beam-info-card" style="position: sticky; top: 0; z-index: 100;">
                                <div class="card-header">Beam Info</div>
                                <div class="card-body p-0">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-sm mb-0 small-text text-center">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Rank</th>
                                                    <th scope="col">Beam ID</th>
                                                    <th scope="col">PCI</th>
                                                    <th scope="col">SSB</th>
                                                    <th scope="col">Energy</th>
                                                    <th scope="col">PSS</th>
                                                    <th scope="col">SNR(dB)</th>
                                                    <th scope="col">RSRP(dBm)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td style="background-color: #F2C029; color: white; font-weight: bold;">1st</td>
                                                    <td id="su1MvbxBeamInfoBeamId1">N/A</td>
                                                    <td id="su1MvbxBeamInfoPci1">N/A</td>
                                                    <td id="su1MvbxBeamInfoSsbldx1">N/A</td>
                                                    <td id="su1MvbxBeamInfoEnergy1">N/A</td>
                                                    <td id="su1MvbxBeamInfoPsstype1">N/A</td>
                                                    <td id="su1MvbxBeamInfoSnr1">N/A</td>
                                                    <td id="su1MvbxBeamInfoRsrp1">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">2nd</td>
                                                    <td id="su1MvbxBeamInfoBeamId2">N/A</td>
                                                    <td id="su1MvbxBeamInfoPci2">N/A</td>
                                                    <td id="su1MvbxBeamInfoSsbldx2">N/A</td>
                                                    <td id="su1MvbxBeamInfoEnergy2">N/A</td>
                                                    <td id="su1MvbxBeamInfoPsstype2">N/A</td>
                                                    <td id="su1MvbxBeamInfoSnr2">N/A</td>
                                                    <td id="su1MvbxBeamInfoRsrp2">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">3rd</td>
                                                    <td id="su1MvbxBeamInfoBeamId3">N/A</td>
                                                    <td id="su1MvbxBeamInfoPci3">N/A</td>
                                                    <td id="su1MvbxBeamInfoSsbldx3">N/A</td>
                                                    <td id="su1MvbxBeamInfoEnergy3">N/A</td>
                                                    <td id="su1MvbxBeamInfoPsstype3">N/A</td>
                                                    <td id="su1MvbxBeamInfoSnr3">N/A</td>
                                                    <td id="su1MvbxBeamInfoRsrp3">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">4th</td>
                                                    <td id="su1MvbxBeamInfoBeamId4">N/A</td>
                                                    <td id="su1MvbxBeamInfoPci4">N/A</td>
                                                    <td id="su1MvbxBeamInfoSsbldx4">N/A</td>
                                                    <td id="su1MvbxBeamInfoEnergy4">N/A</td>
                                                    <td id="su1MvbxBeamInfoPsstype4">N/A</td>
                                                    <td id="su1MvbxBeamInfoSnr4">N/A</td>
                                                    <td id="su1MvbxBeamInfoRsrp4">N/A</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card mb-3">
                                <div class="card-header">Beam Scan</div>
                                <div class="card-body">
                                    <div class="row g-4">
                                        <div class="col-md-6">
                                            <div class="beam-scan-field">
                                                <label for="su1PllRelockCount">PLL Relock Count</label>
                                                <span class="ms-auto" id="su1PllRelockCount">N/A</span>
                                            </div>
                                            <div class="beam-scan-field">
                                                <label for="su1CenterFrequency">Center Frequency</label>
                                                <div class="input-group input-group-sm ms-auto" style="width: 120px;">
                                                    <input type="text" class="form-control" id="su1CenterFrequency" value="N/A">
                                                    <span class="input-group-text">KHz</span>
                                                </div>
                                            </div>
                                            <div class="beam-scan-field">
                                                <label for="su1AntSelect">Ant Select</label>
                                                <select class="form-select form-select-sm ms-auto" id="su1AntSelect" style="width: 100px; font-size: 0.6rem; padding: 0.1rem 0.2rem;">
                                                    <option value="0">30:15</option>
                                                    <option value="1">30:30</option>
                                                    <option value="2">60:15</option>
                                                    <option value="3">60:30</option>
                                                    <option value="4">60:60</option>
                                                </select>
                                            </div>
                                            <div class="beam-scan-field">
                                                <label for="su1BeamFix">Beam Fix</label>
                                                <select class="form-select form-select-sm ms-auto" id="su1BeamFix" style="width: 80px; font-size: 0.6rem; padding: 0.1rem 0.2rem;">
                                                    <option value="AUTO">AUTO</option>
                                                    <option value="FIX">FIX</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="beam-scan-field">
                                                <label for="su1ApiLogLevel">API Log Level [2~6]</label>
                                                <input type="text" class="form-control form-control-sm ms-auto w-25" id="su1ApiLogLevel" value="N/A">
                                            </div>
                                            <div class="beam-scan-field">
                                                <table class="table table-sm table-borderless mb-0" style="border: none;">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;"></th>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;">[Actual]</th>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;">[Adjust]</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <small class="text-muted">Orientation</small>
                                                            </td>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <input type="text" class="form-control form-control-sm" id="su1OrientationActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                            </td>
                                                            <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <small class="text-muted">Tilt</small>
                                                            </td>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <input type="text" class="form-control form-control-sm" id="su1TiltActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                            </td>
                                                            <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>                             <div class="modal-footer justify-content-center" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal" style="visibility: visible; opacity: 1;">Cancel</button>
                    <button class="btn btn-primary" id="btnSetModeModal" style="visibility: visible; opacity: 1;">Set Mode</button>
                    <button class="btn btn-success d-none" id="btnApply">Apply</button>
                    <button class="btn btn-secondary d-none" id="btnStatusMode">Status Mode</button>
                </div>

            </div>
        </div>
    </div>

    <!-- SU2 Beam Info Modal -->
    <div class="modal fade" id="su2BeamInfoModal" tabindex="-1" aria-labelledby="su2BeamInfoModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 95%; width: 95%;"> <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">

                <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                    <h5 class="modal-title" id="beamInfoModalLabel" style="font-weight: bold;">
                        <i class="fas fa-info-circle"></i> SU2 Beam Control
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                    <div class="card mb-3">
                        <div class="card-header">Evn</div>
                        <div class="card-body">
                            <div class="row align-items-center justify-content-between">
                                <div class="col-auto">
                                    <small class="text-muted">Ant. Array Ver</small>
                                    <small id="su2AntArrayVer">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Temper Comp</small>
                                </div>
                                <div class="col-auto">
                                    <button class="btn btn-sm btn-on" id="su2TemperComp">N/A</button>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Start Temper</small>
                                    <small id="su2StartTemper">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Cur Temper</small>
                                    <small id="su2CurTemper">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <div class="text-end">
                                        <small class="text-muted">Compensation DL</small>
                                        <small id="su2CompensationDL">N/A</small>
                                    </div>
                                    <div class="text-end mt-1">
                                        <small class="text-muted">Compensation UL</small>
                                        <small id="su2CompensationUL">N/A</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">SISO Tx/Rx Gain Setting</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Front End
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su2MvbxMv2850TxGainSiso">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su2MvbxMv2850RxGainSiso">N/A</span>
                                            </div>
                                        </div>
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Mixer
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su2MvbxMv2853TxGainSiso">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su2MvbxMv2853RxGainSiso">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">MIMO Tx/Rx Gain Setting</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Front End
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su2MvbxMv2850TxGainMimo">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su2MvbxMv2850RxGainMimo">N/A</span>
                                            </div>
                                        </div>
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Mixer
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su2MvbxMv2853TxGainMimo">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su2MvbxMv2853RxGainMimo">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">Beam Book</div>
                                <div class="card-body text-center">

                                    <svg id="su2BeamBook" width="360" height="360" viewBox="0 0 400 400"></svg>


                                    <div class="text-end mt-3">
                                        <small class="text-muted">Orientation</small> <span class="ms-2" id="su2Orientation">N/A</span><br>
                                        <small class="text-muted">Tilt</small> <span class="ms-4" id="su2Tilt">N/A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3 beam-info-card" style="position: sticky; top: 0; z-index: 100;">
                                <div class="card-header">Beam Info</div>
                                <div class="card-body p-0">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-sm mb-0 small-text text-center">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Rank</th>
                                                    <th scope="col">Beam ID</th>
                                                    <th scope="col">PCI</th>
                                                    <th scope="col">SSB</th>
                                                    <th scope="col">Energy</th>
                                                    <th scope="col">PSS</th>
                                                    <th scope="col">SNR(dB)</th>
                                                    <th scope="col">RSRP(dBm)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td style="background-color: #F2C029; color: white; font-weight: bold;">1st</td>
                                                    <td id="su2MvbxBeamInfoBeamId1">N/A</td>
                                                    <td id="su2MvbxBeamInfoPci1">N/A</td>
                                                    <td id="su2MvbxBeamInfoSsbldx1">N/A</td>
                                                    <td id="su2MvbxBeamInfoEnergy1">N/A</td>
                                                    <td id="su2MvbxBeamInfoPsstype1">N/A</td>
                                                    <td id="su2MvbxBeamInfoSnr1">N/A</td>
                                                    <td id="su2MvbxBeamInfoRsrp1">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">2nd</td>
                                                    <td id="su2MvbxBeamInfoBeamId2">N/A</td>
                                                    <td id="su2MvbxBeamInfoPci2">N/A</td>
                                                    <td id="su2MvbxBeamInfoSsbldx2">N/A</td>
                                                    <td id="su2MvbxBeamInfoEnergy2">N/A</td>
                                                    <td id="su2MvbxBeamInfoPsstype2">N/A</td>
                                                    <td id="su2MvbxBeamInfoSnr2">N/A</td>
                                                    <td id="su2MvbxBeamInfoRsrp2">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">3rd</td>
                                                    <td id="su2MvbxBeamInfoBeamId3">N/A</td>
                                                    <td id="su2MvbxBeamInfoPci3">N/A</td>
                                                    <td id="su2MvbxBeamInfoSsbldx3">N/A</td>
                                                    <td id="su2MvbxBeamInfoEnergy3">N/A</td>
                                                    <td id="su2MvbxBeamInfoPsstype3">N/A</td>
                                                    <td id="su2MvbxBeamInfoSnr3">N/A</td>
                                                    <td id="su2MvbxBeamInfoRsrp3">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">4th</td>
                                                    <td id="su2MvbxBeamInfoBeamId4">N/A</td>
                                                    <td id="su2MvbxBeamInfoPci4">N/A</td>
                                                    <td id="su2MvbxBeamInfoSsbldx4">N/A</td>
                                                    <td id="su2MvbxBeamInfoEnergy4">N/A</td>
                                                    <td id="su2MvbxBeamInfoPsstype4">N/A</td>
                                                    <td id="su2MvbxBeamInfoSnr4">N/A</td>
                                                    <td id="su2MvbxBeamInfoRsrp4">N/A</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card mb-3">
                                <div class="card-header">Beam Scan</div>
                                <div class="card-body">
                                    <div class="row g-4">
                                        <div class="col-md-6">
                                            <div class="beam-scan-field">
                                                <label for="su2PllRelockCount">PLL Relock Count</label>
                                                <span class="ms-auto" id="su2PllRelockCount">N/A</span>
                                            </div>
                                            <div class="beam-scan-field">
                                                <label for="su2CenterFrequency">Center Frequency</label>
                                                <div class="input-group input-group-sm ms-auto" style="width: 120px;">
                                                    <input type="text" class="form-control" id="su2CenterFrequency" value="N/A">
                                                    <span class="input-group-text">KHz</span>
                                                </div>
                                            </div>
                                            <div class="beam-scan-field">
                                                <label for="su2BeamFix">Beam Fix</label>
                                                <select class="form-select form-select-sm ms-auto" id="su2BeamFix" style="width: 80px; font-size: 0.6rem; padding: 0.1rem 0.2rem;">
                                                    <option value="AUTO">AUTO</option>
                                                    <option value="FIX">FIX</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="beam-scan-field">
                                                <label for="su2ApiLogLevel">API Log Level [2~6]</label>
                                                <input type="text" class="form-control form-control-sm ms-auto w-25" id="su2ApiLogLevel" value="N/A">
                                            </div>
                                            <div class="beam-scan-field">
                                                <table class="table table-sm table-borderless mb-0" style="border: none;">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;"></th>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;">[Actual]</th>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;">[Adjust]</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <small class="text-muted">Orientation</small>
                                                            </td>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <input type="text" class="form-control form-control-sm" id="su2OrientationActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                            </td>
                                                            <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <small class="text-muted">Tilt</small>
                                                            </td>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <input type="text" class="form-control form-control-sm" id="su2TiltActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                            </td>
                                                            <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>                             <div class="modal-footer justify-content-center" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal" style="visibility: visible; opacity: 1;">Cancel</button>
                    <button class="btn btn-primary" id="btnSetModeModal" style="visibility: visible; opacity: 1;">Set Mode</button>
                    <button class="btn btn-success d-none" id="btnApply">Apply</button>
                    <button class="btn btn-secondary d-none" id="btnStatusMode">Status Mode</button>
                </div>

            </div>
        </div>
    </div>

    <!-- SU3 Beam Info Modal -->
    <div class="modal fade" id="su3BeamInfoModal" tabindex="-1" aria-labelledby="su3BeamInfoModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 95%; width: 95%;"> <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">

                <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                    <h5 class="modal-title" id="beamInfoModalLabel" style="font-weight: bold;">
                        <i class="fas fa-info-circle"></i> SU3 Beam Control
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                    <div class="card mb-3">
                        <div class="card-header">Evn</div>
                        <div class="card-body">
                            <div class="row align-items-center justify-content-between">
                                <div class="col-auto">
                                    <small class="text-muted">Ant. Array Ver</small>
                                    <small id="su3AntArrayVer">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Temper Comp</small>
                                </div>
                                <div class="col-auto">
                                    <button class="btn btn-sm btn-on" id="su3TemperComp">N/A</button>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Start Temper</small>
                                    <small id="su3StartTemper">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Cur Temper</small>
                                    <small id="su3CurTemper">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <div class="text-end">
                                        <small class="text-muted">Compensation DL</small>
                                        <small id="su3CompensationDL">N/A</small>
                                    </div>
                                    <div class="text-end mt-1">
                                        <small class="text-muted">Compensation UL</small>
                                        <small id="su3CompensationUL">N/A</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">SISO Tx/Rx Gain Setting</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Front End
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su3MvbxMv2850TxGainSiso">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su3MvbxMv2850RxGainSiso">N/A</span>
                                            </div>
                                        </div>
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Mixer
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su3MvbxMv2853TxGainSiso">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su3MvbxMv2853RxGainSiso">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">MIMO Tx/Rx Gain Setting</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Front End
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su3MvbxMv2850TxGainMimo">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su3MvbxMv2850RxGainMimo">N/A</span>
                                            </div>
                                        </div>
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Mixer
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su3MvbxMv2853TxGainMimo">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su3MvbxMv2853RxGainMimo">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">Beam Book</div>
                                <div class="card-body text-center">

                                    <svg id="su3BeamBook" width="360" height="360" viewBox="0 0 400 400"></svg>


                                    <div class="text-end mt-3">
                                        <small class="text-muted">Orientation</small> <span class="ms-2" id="su3Orientation">N/A</span><br>
                                        <small class="text-muted">Tilt</small> <span class="ms-4" id="su3Tilt">N/A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3 beam-info-card" style="position: sticky; top: 0; z-index: 100;">
                                <div class="card-header">Beam Info</div>
                                <div class="card-body p-0">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-sm mb-0 small-text text-center">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Rank</th>
                                                    <th scope="col">Beam ID</th>
                                                    <th scope="col">PCI</th>
                                                    <th scope="col">SSB</th>
                                                    <th scope="col">Energy</th>
                                                    <th scope="col">PSS</th>
                                                    <th scope="col">SNR(dB)</th>
                                                    <th scope="col">RSRP(dBm)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td style="background-color: #F2C029; color: white; font-weight: bold;">1st</td>
                                                    <td id="su3MvbxBeamInfoBeamId1">N/A</td>
                                                    <td id="su3MvbxBeamInfoPci1">N/A</td>
                                                    <td id="su3MvbxBeamInfoSsbldx1">N/A</td>
                                                    <td id="su3MvbxBeamInfoEnergy1">N/A</td>
                                                    <td id="su3MvbxBeamInfoPsstype1">N/A</td>
                                                    <td id="su3MvbxBeamInfoSnr1">N/A</td>
                                                    <td id="su3MvbxBeamInfoRsrp1">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">2nd</td>
                                                    <td id="su3MvbxBeamInfoBeamId2">N/A</td>
                                                    <td id="su3MvbxBeamInfoPci2">N/A</td>
                                                    <td id="su3MvbxBeamInfoSsbldx2">N/A</td>
                                                    <td id="su3MvbxBeamInfoEnergy2">N/A</td>
                                                    <td id="su3MvbxBeamInfoPsstype2">N/A</td>
                                                    <td id="su3MvbxBeamInfoSnr2">N/A</td>
                                                    <td id="su3MvbxBeamInfoRsrp2">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">3rd</td>
                                                    <td id="su3MvbxBeamInfoBeamId3">N/A</td>
                                                    <td id="su3MvbxBeamInfoPci3">N/A</td>
                                                    <td id="su3MvbxBeamInfoSsbldx3">N/A</td>
                                                    <td id="su3MvbxBeamInfoEnergy3">N/A</td>
                                                    <td id="su3MvbxBeamInfoPsstype3">N/A</td>
                                                    <td id="su3MvbxBeamInfoSnr3">N/A</td>
                                                    <td id="su3MvbxBeamInfoRsrp3">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">4th</td>
                                                    <td id="su3MvbxBeamInfoBeamId4">N/A</td>
                                                    <td id="su3MvbxBeamInfoPci4">N/A</td>
                                                    <td id="su3MvbxBeamInfoSsbldx4">N/A</td>
                                                    <td id="su3MvbxBeamInfoEnergy4">N/A</td>
                                                    <td id="su3MvbxBeamInfoPsstype4">N/A</td>
                                                    <td id="su3MvbxBeamInfoSnr4">N/A</td>
                                                    <td id="su3MvbxBeamInfoRsrp4">N/A</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card mb-3">
                                <div class="card-header">Beam Scan</div>
                                <div class="card-body">
                                    <div class="row g-4">
                                        <div class="col-md-6">
                                            <div class="beam-scan-field">
                                                <label for="su3PllRelockCount">PLL Relock Count</label>
                                                <span class="ms-auto" id="su3PllRelockCount">N/A</span>
                                            </div>
                                            <div class="beam-scan-field">
                                                <label for="su3CenterFrequency">Center Frequency</label>
                                                <div class="input-group input-group-sm ms-auto" style="width: 120px;">
                                                    <input type="text" class="form-control" id="su3CenterFrequency" value="N/A">
                                                    <span class="input-group-text">KHz</span>
                                                </div>
                                            </div>
                                            <div class="beam-scan-field">
                                                <label for="su3BeamFix">Beam Fix</label>
                                                <select class="form-select form-select-sm ms-auto" id="su3BeamFix" style="width: 80px; font-size: 0.6rem; padding: 0.1rem 0.2rem;">
                                                    <option value="AUTO">AUTO</option>
                                                    <option value="FIX">FIX</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="beam-scan-field">
                                                <label for="su3ApiLogLevel">API Log Level [2~6]</label>
                                                <input type="text" class="form-control form-control-sm ms-auto w-25" id="su3ApiLogLevel" value="N/A">
                                            </div>
                                            <div class="beam-scan-field">
                                                <table class="table table-sm table-borderless mb-0" style="border: none;">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;"></th>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;">[Actual]</th>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;">[Adjust]</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <small class="text-muted">Orientation</small>
                                                            </td>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <input type="text" class="form-control form-control-sm" id="su3OrientationActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                            </td>
                                                            <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <small class="text-muted">Tilt</small>
                                                            </td>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <input type="text" class="form-control form-control-sm" id="su3TiltActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                            </td>
                                                            <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>                             <div class="modal-footer justify-content-center" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal" style="visibility: visible; opacity: 1;">Cancel</button>
                    <button class="btn btn-primary" id="btnSetModeModal" style="visibility: visible; opacity: 1;">Set Mode</button>
                    <button class="btn btn-success d-none" id="btnApply">Apply</button>
                    <button class="btn btn-secondary d-none" id="btnStatusMode">Status Mode</button>
                </div>

            </div>
        </div>
    </div>

    <!-- SU4 Beam Info Modal -->
    <div class="modal fade" id="su4BeamInfoModal" tabindex="-1" aria-labelledby="su4BeamInfoModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 95%; width: 95%;"> <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">

                <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                    <h5 class="modal-title" id="beamInfoModalLabel" style="font-weight: bold;">
                        <i class="fas fa-info-circle"></i> SU4 Beam Control
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                    <div class="card mb-3">
                        <div class="card-header">Evn</div>
                        <div class="card-body">
                            <div class="row align-items-center justify-content-between">
                                <div class="col-auto">
                                    <small class="text-muted">Ant. Array Ver</small>
                                    <small id="su4AntArrayVer">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Temper Comp</small>
                                </div>
                                <div class="col-auto">
                                    <button class="btn btn-sm btn-on" id="su4TemperComp">N/A</button>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Start Temper</small>
                                    <small id="su4StartTemper">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <small class="text-muted">Cur Temper</small>
                                    <small id="su4CurTemper">N/A</small>
                                </div>
                                <div class="col-auto">
                                    <div class="text-end">
                                        <small class="text-muted">Compensation DL</small>
                                        <small id="su4CompensationDL">N/A</small>
                                    </div>
                                    <div class="text-end mt-1">
                                        <small class="text-muted">Compensation UL</small>
                                        <small id="su4CompensationUL">N/A</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">SISO Tx/Rx Gain Setting</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Front End
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su4MvbxMv2850TxGainSiso">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su4MvbxMv2850RxGainSiso">N/A</span>
                                            </div>
                                        </div>
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Mixer
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su4MvbxMv2853TxGainSiso">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su4MvbxMv2853RxGainSiso">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">MIMO Tx/Rx Gain Setting</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Front End
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su4MvbxMv2850TxGainMimo">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su4MvbxMv2850RxGainMimo">N/A</span>
                                            </div>
                                        </div>
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="me-2 plus-icon">
                                                <span>+</span>
                                            </div> Mixer
                                            <div class="ms-auto d-flex align-items-center">
                                                <span class="me-2 text-muted">Tx Gain Idx</span>
                                                <span class="me-3" style="width: 50px;" id="su4MvbxMv2853TxGainMimo">N/A</span>
                                                <span class="me-2 text-muted">Rx Gain Idx</span>
                                                <span style="width: 50px;" id="su4MvbxMv2853RxGainMimo">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">Beam Book</div>
                                <div class="card-body text-center">

                                    <svg id="su4BeamBook" width="360" height="360" viewBox="0 0 400 400"></svg>


                                    <div class="text-end mt-3">
                                        <small class="text-muted">Orientation</small> <span class="ms-2" id="su4Orientation">N/A</span><br>
                                        <small class="text-muted">Tilt</small> <span class="ms-4" id="su4Tilt">N/A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3 beam-info-card" style="position: sticky; top: 0; z-index: 100;">
                                <div class="card-header">Beam Info</div>
                                <div class="card-body p-0">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-sm mb-0 small-text text-center">
                                            <thead>
                                                <tr>
                                                    <th scope="col">Rank</th>
                                                    <th scope="col">Beam ID</th>
                                                    <th scope="col">PCI</th>
                                                    <th scope="col">SSB</th>
                                                    <th scope="col">Energy</th>
                                                    <th scope="col">PSS</th>
                                                    <th scope="col">SNR(dB)</th>
                                                    <th scope="col">RSRP(dBm)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td style="background-color: #F2C029; color: white; font-weight: bold;">1st</td>
                                                    <td id="su4MvbxBeamInfoBeamId1">N/A</td>
                                                    <td id="su4MvbxBeamInfoPci1">N/A</td>
                                                    <td id="su4MvbxBeamInfoSsbldx1">N/A</td>
                                                    <td id="su4MvbxBeamInfoEnergy1">N/A</td>
                                                    <td id="su4MvbxBeamInfoPsstype1">N/A</td>
                                                    <td id="su4MvbxBeamInfoSnr1">N/A</td>
                                                    <td id="su4MvbxBeamInfoRsrp1">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">2nd</td>
                                                    <td id="su4MvbxBeamInfoBeamId2">N/A</td>
                                                    <td id="su4MvbxBeamInfoPci2">N/A</td>
                                                    <td id="su4MvbxBeamInfoSsbldx2">N/A</td>
                                                    <td id="su4MvbxBeamInfoEnergy2">N/A</td>
                                                    <td id="su4MvbxBeamInfoPsstype2">N/A</td>
                                                    <td id="su4MvbxBeamInfoSnr2">N/A</td>
                                                    <td id="su4MvbxBeamInfoRsrp2">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">3rd</td>
                                                    <td id="su4MvbxBeamInfoBeamId3">N/A</td>
                                                    <td id="su4MvbxBeamInfoPci3">N/A</td>
                                                    <td id="su4MvbxBeamInfoSsbldx3">N/A</td>
                                                    <td id="su4MvbxBeamInfoEnergy3">N/A</td>
                                                    <td id="su4MvbxBeamInfoPsstype3">N/A</td>
                                                    <td id="su4MvbxBeamInfoSnr3">N/A</td>
                                                    <td id="su4MvbxBeamInfoRsrp3">N/A</td>
                                                </tr>
                                                <tr>
                                                    <td style="background-color: #84D9A9; color: white; font-weight: bold;">4th</td>
                                                    <td id="su4MvbxBeamInfoBeamId4">N/A</td>
                                                    <td id="su4MvbxBeamInfoPci4">N/A</td>
                                                    <td id="su4MvbxBeamInfoSsbldx4">N/A</td>
                                                    <td id="su4MvbxBeamInfoEnergy4">N/A</td>
                                                    <td id="su4MvbxBeamInfoPsstype4">N/A</td>
                                                    <td id="su4MvbxBeamInfoSnr4">N/A</td>
                                                    <td id="su4MvbxBeamInfoRsrp4">N/A</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card mb-3">
                                <div class="card-header">Beam Scan</div>
                                <div class="card-body">
                                    <div class="row g-4">
                                        <div class="col-md-6">
                                            <div class="beam-scan-field">
                                                <label for="su4PllRelockCount">PLL Relock Count</label>
                                                <span class="ms-auto" id="su4PllRelockCount">N/A</span>
                                            </div>
                                            <div class="beam-scan-field">
                                                <label for="su4CenterFrequency">Center Frequency</label>
                                                <div class="input-group input-group-sm ms-auto" style="width: 120px;">
                                                    <input type="text" class="form-control" id="su4CenterFrequency" value="N/A">
                                                    <span class="input-group-text">KHz</span>
                                                </div>
                                            </div>
                                            <div class="beam-scan-field">
                                                <label for="su4BeamFix">Beam Fix</label>
                                                <select class="form-select form-select-sm ms-auto" id="su4BeamFix" style="width: 80px; font-size: 0.6rem; padding: 0.1rem 0.2rem;">
                                                    <option value="AUTO">AUTO</option>
                                                    <option value="FIX">FIX</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="beam-scan-field">
                                                <label for="su4ApiLogLevel">API Log Level [2~6]</label>
                                                <input type="text" class="form-control form-control-sm ms-auto w-25" id="su4ApiLogLevel" value="N/A">
                                            </div>
                                            <div class="beam-scan-field">
                                                <table class="table table-sm table-borderless mb-0" style="border: none;">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;"></th>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;">[Actual]</th>
                                                            <th scope="col" class="text-center" style="border: none; padding: 8px;">[Adjust]</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <small class="text-muted">Orientation</small>
                                                            </td>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <input type="text" class="form-control form-control-sm" id="su4OrientationActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                            </td>
                                                            <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <small class="text-muted">Tilt</small>
                                                            </td>
                                                            <td class="text-center" style="border: none; padding: 8px;">
                                                                <input type="text" class="form-control form-control-sm" id="su4TiltActual" value="N/A" style="width: 60px; margin-left: 20px;">
                                                            </td>
                                                            <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>                             <div class="modal-footer justify-content-center" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal" style="visibility: visible; opacity: 1;">Cancel</button>
                    <button class="btn btn-primary" id="btnSetModeModal" style="visibility: visible; opacity: 1;">Set Mode</button>
                    <button class="btn btn-success d-none" id="btnApply">Apply</button>
                    <button class="btn btn-secondary d-none" id="btnStatusMode">Status Mode</button>
                </div>

            </div>
        </div>
    </div>


    <!-- SU1 Alarm Mask Modal -->
    <div class="modal fade" id="su1AlarmMaskModal" tabindex="-1" aria-labelledby="su1AlarmMaskModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 90%; width: 90%;">
            <div class="modal-content" style="background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 10px;">
                <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title text-white" id="su1AlarmMaskModalLabel">
                        <i class="fas fa-plus me-2"></i>SU1 Alarm Mask
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="padding: 1.5rem;">
                    <div class="row g-3">
                        <!-- Alarm Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>Alarm
                                </h6>
                                <div class="row g-2">
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">DC</small>
                                            <button id="alarm_mask_madc" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">AC</small>
                                            <button id="alarm_mask_ac" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">FPGA Link</small>
                                            <button id="alarm_mask_fpga_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">EMS Link</small>
                                            <button id="EMS_DU_Link_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Temp</small>
                                            <button id="alarm_mask_temp" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">BAT</small>
                                            <button id="alarm_mask_bat" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">IF PLL</small>
                                            <button id="alarm_mask_if_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Sync PLL</small>
                                            <button id="alarm_mask_sync_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">TSync Link</small>
                                            <button id="alarm_mask_tsync_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Decoding</small>
                                            <button id="alarm_mask_decoding" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Ant Link</small>
                                            <button id="alarm_mask_aa_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SU FAIL Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SU FAIL
                                </h6>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-center gap-4">
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">CASCADE</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#1</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#2</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#3</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#4</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-center gap-4">
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">PATH#0</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU1_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU2_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU3_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU4_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SISO RF Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SISO RF
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">DL</small>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">UL</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex align-items-center">
                                        <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                        <button id="SISO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- MIMO RF Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>MIMO RF
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">DL</small>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">UL</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex align-items-center">
                                        <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                        <button id="MIMO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SISO OPTIC Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SISO OPTIC
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">DL LD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="LD1_DET_DL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">UL PD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="PD1_DET_UL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- MIMO OPTIC Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>MIMO OPTIC
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">DL LD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="LD2_DET_DL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">UL PD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="PD2_DET_UL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-center" style="background-color: #f5f5f5; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" style="background-color: #007bff; border: none;">Set</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SU2 Alarm Mask Modal -->
    <div class="modal fade" id="su2AlarmMaskModal" tabindex="-1" aria-labelledby="su2AlarmMaskModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 90%; width: 90%;">
            <div class="modal-content" style="background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 10px;">
                <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title text-white" id="su2AlarmMaskModalLabel">
                        <i class="fas fa-plus me-2"></i>SU2 Alarm Mask
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="padding: 1.5rem;">
                    <div class="row g-3">
                        <!-- Alarm Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>Alarm
                                </h6>
                                <div class="row g-2">
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">DC</small>
                                            <button id="alarm_mask_madc" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">AC</small>
                                            <button id="alarm_mask_ac" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">FPGA Link</small>
                                            <button id="alarm_mask_fpga_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">EMS Link</small>
                                            <button id="EMS_DU_Link_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Temp</small>
                                            <button id="alarm_mask_temp" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">BAT</small>
                                            <button id="alarm_mask_bat" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">IF PLL</small>
                                            <button id="alarm_mask_if_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Sync PLL</small>
                                            <button id="alarm_mask_sync_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">TSync Link</small>
                                            <button id="alarm_mask_tsync_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Decoding</small>
                                            <button id="alarm_mask_decoding" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Ant Link</small>
                                            <button id="alarm_mask_aa_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SU FAIL Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SU FAIL
                                </h6>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-center gap-4">
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">CASCADE</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#1</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#2</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#3</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#4</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-center gap-4">
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">PATH#0</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU1_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU2_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU3_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU4_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SISO RF Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SISO RF
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">DL</small>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">UL</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex align-items-center">
                                        <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                        <button id="SISO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- MIMO RF Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>MIMO RF
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">DL</small>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">UL</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex align-items-center">
                                        <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                        <button id="MIMO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SISO OPTIC Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SISO OPTIC
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">DL LD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="LD1_DET_DL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">UL PD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="PD1_DET_UL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- MIMO OPTIC Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>MIMO OPTIC
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">DL LD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="LD2_DET_DL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">UL PD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="PD2_DET_UL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-center" style="background-color: #f5f5f5; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" style="background-color: #007bff; border: none;">Set</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SU3 Alarm Mask Modal -->
    <div class="modal fade" id="su3AlarmMaskModal" tabindex="-1" aria-labelledby="su3AlarmMaskModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 90%; width: 90%;">
            <div class="modal-content" style="background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 10px;">
                <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title text-white" id="su3AlarmMaskModalLabel">
                        <i class="fas fa-plus me-2"></i>SU3 Alarm Mask
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="padding: 1.5rem;">
                    <div class="row g-3">
                        <!-- Alarm Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>Alarm
                                </h6>
                                <div class="row g-2">
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">DC</small>
                                            <button id="alarm_mask_madc" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">AC</small>
                                            <button id="alarm_mask_ac" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">FPGA Link</small>
                                            <button id="alarm_mask_fpga_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">EMS Link</small>
                                            <button id="EMS_DU_Link_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Temp</small>
                                            <button id="alarm_mask_temp" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">BAT</small>
                                            <button id="alarm_mask_bat" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">IF PLL</small>
                                            <button id="alarm_mask_if_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Sync PLL</small>
                                            <button id="alarm_mask_sync_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">TSync Link</small>
                                            <button id="alarm_mask_tsync_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Decoding</small>
                                            <button id="alarm_mask_decoding" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Ant Link</small>
                                            <button id="alarm_mask_aa_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SU FAIL Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SU FAIL
                                </h6>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-center gap-4">
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">CASCADE</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#1</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#2</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#3</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#4</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-center gap-4">
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">PATH#0</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU1_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU2_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU3_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU4_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SISO RF Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SISO RF
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">DL</small>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">UL</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex align-items-center">
                                        <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                        <button id="SISO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- MIMO RF Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>MIMO RF
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">DL</small>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">UL</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex align-items-center">
                                        <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                        <button id="MIMO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SISO OPTIC Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SISO OPTIC
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">DL LD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="LD1_DET_DL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">UL PD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="PD1_DET_UL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- MIMO OPTIC Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>MIMO OPTIC
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">DL LD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="LD2_DET_DL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">UL PD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="PD2_DET_UL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-center" style="background-color: #f5f5f5; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" style="background-color: #007bff; border: none;">Set</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SU4 Alarm Mask Modal -->
    <div class="modal fade" id="su4AlarmMaskModal" tabindex="-1" aria-labelledby="su4AlarmMaskModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 90%; width: 90%;">
            <div class="modal-content" style="background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 10px;">
                <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0;">
                    <h5 class="modal-title text-white" id="su4AlarmMaskModalLabel">
                        <i class="fas fa-plus me-2"></i>SU4 Alarm Mask
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="padding: 1.5rem;">
                    <div class="row g-3">
                        <!-- Alarm Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>Alarm
                                </h6>
                                <div class="row g-2">
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">DC</small>
                                            <button id="alarm_mask_madc" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">AC</small>
                                            <button id="alarm_mask_ac" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">FPGA Link</small>
                                            <button id="alarm_mask_fpga_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">EMS Link</small>
                                            <button id="EMS_DU_Link_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Temp</small>
                                            <button id="alarm_mask_temp" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">BAT</small>
                                            <button id="alarm_mask_bat" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">IF PLL</small>
                                            <button id="alarm_mask_if_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Sync PLL</small>
                                            <button id="alarm_mask_sync_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;"></small>
                                            <div style="height: 22px;"></div>
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">TSync Link</small>
                                            <button id="alarm_mask_tsync_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Decoding</small>
                                            <button id="alarm_mask_decoding" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                        <div class="mb-2 d-flex flex-column align-items-center">
                                            <small style="font-size: 9px;">Ant Link</small>
                                            <button id="alarm_mask_aa_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">OFF</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SU FAIL Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SU FAIL
                                </h6>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-center gap-4">
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">CASCADE</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#1</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#2</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#3</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">#4</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-center gap-4">
                                        <div class="text-center" style="width: 80px;">
                                            <small style="font-size: 13px;">PATH#0</small>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU1_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU2_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU3_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                        <div class="text-center" style="width: 80px;">
                                            <button id="SU4_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SISO RF Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SISO RF
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">DL</small>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">UL</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex align-items-center">
                                        <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                        <button id="SISO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- MIMO RF Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>MIMO RF
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">DL</small>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                <small style="font-size: 13px;">UL</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex align-items-center">
                                        <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                        <button id="MIMO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">OFF</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SISO OPTIC Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>SISO OPTIC
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">DL LD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="LD1_DET_DL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">UL PD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="PD1_DET_UL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- MIMO OPTIC Section -->
                        <div class="col-md-6">
                            <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                    <i class="fas fa-folder me-2"></i>MIMO OPTIC
                                </h6>
                                <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                <div class="mb-3">
                                    <div class="row g-2">
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">DL LD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="LD2_DET_DL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <small style="font-size: 11px;">UL PD Lower</small>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <div class="d-flex align-items-center justify-content-center">
                                                <button id="PD2_DET_UL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">OFF</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-center" style="background-color: #f5f5f5; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" style="background-color: #007bff; border: none;">Set</button>
                </div>
            </div>
        </div>
    </div>


    <!-- SU1 Hidden Modal -->
    <div class="modal fade" id="su1HiddenModal" tabindex="-1" aria-labelledby="su1HiddenModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                    <h5 class="modal-title" id="su1HiddenModalLabel" style="font-weight: bold;">
                        <i class="fas fa-plus me-2"></i>SU1 HIDDEN
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                    <!-- Main Grid Layout -->
                    <div class="row">
                        <div class="col-md-6">
                            <!-- SISO RF Section -->
                            <div class="card mb-3">
                                <div class="card-header">SISO RF</div>
                                <div class="card-body">
                            <div class="rf-content">
                                <!-- DL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> DL
                                    </h6>
                                    <!-- DL Top Section -->
                                    <div class="input-item">
                                        <label>DL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1DlSubAtten_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL Output Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1DL_InputOffset_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL SD Status</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                            <span class="unit"></span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>DL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Dl_Att_Test_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Out Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ant_Out_Offset_Siso" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS Output</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly id="su1Ant_Output_SISO" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ant_Offset_UL_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- UL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> UL
                                    </h6>
                                    <!-- UL Top Section -->
                                    <div class="input-item">
                                        <label>UL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1UlSubAtten_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>UL Input Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1UL_OutputOffset_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    
                                    <!-- UL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>UL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ul_Att_Test_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- UL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Gain</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ant_Gain_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ant_Offset_DL_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- MIMO RF Section -->
                            <div class="card mb-3">
                                <div class="card-header">MIMO RF</div>
                                <div class="card-body">
                            <div class="rf-content">
                                <!-- DL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> DL
                                    </h6>
                                    <!-- DL Top Section -->
                                    <div class="input-item">
                                        <label>DL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1DlSubAtten_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL Output Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1DL_InputOffset_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL SD Status</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                            <span class="unit"></span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>DL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Dl_Att_Test_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Out Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ant_Out_Offset_Mimo" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS Output</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ant_Output_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ant_Offset_UL_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- UL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> UL
                                    </h6>
                                    <!-- UL Top Section -->
                                    <div class="input-item">
                                        <label>UL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1UlSubAtten_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>UL Input Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1UL_OutputOffset_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    
                                    <!-- UL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>UL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1UL_Att_Testl_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- UL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Gain</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ant_Gain_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su1Ant_Offset_DL_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- SISO OPTIC Section -->
                            <div class="card mb-3">
                                <div class="card-header">SISO OPTIC</div>
                                <div class="card-body">
                            <div class="optic-content">
                                <div class="input-item">
                                    <label>LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1LD1_DET_DL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1PD1_DET_UL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1LD3_DET_DL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1PD3_DET_UL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>RSRQ Low Level</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1LowRsrpLevel" />
                                        <span class="unit">[dBm]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>RSRQ Still Time</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1LowRsrpStillTime" />
                                        <span class="unit">[sec]</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- MIMO OPTIC Section -->
                            <div class="card mb-3">
                                <div class="card-header">MIMO OPTIC</div>
                                <div class="card-body">
                            <div class="optic-content">
                                <div class="input-item">
                                    <label>LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1LD2_DET_DL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1PD2_DET_UL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1LD4_DET_DL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su1PD4_DET_UL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Section (S/N, Polling Time, Baudrate, Toggles) -->
                    <div class="card mb-3">
                        <div class="card-header">System Settings</div>
                        <div class="card-body">
                            <div class="bottom-content">
                                <!-- Left Block -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">S/N</label>
                                        <input type="text" id="su1conserialnum" value="N/A" class="form-control form-control-sm" />
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Baudrate</label>
                                        <select id="su1baudrate" class="form-select form-select-sm" style="width: 80px; font-size: 0.65rem; padding: 0.1rem 0.2rem;">
                                            <option value="19200">19200</option>
                                            <option value="38400">38400</option>
                                            <option value="57600">57600</option>
                                            <option value="115200">115200</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Middle Block (Toggles) -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">AOM Temp</label>
                                        <button id="su1aomtemp-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Att Test</label>
                                        <button id="su1att-test-toggle" class="btn-toggle off">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Api Init.</label>
                                        <button id="su1api-init-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Api Init. Retry</label>
                                        <button id="su1api-init-retry-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                </div>

                                <!-- Right Block (More Toggles) -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">Debug</label>
                                        <button id="su1debug-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Ant Band</label>
                                        <span id ="su1antband">N/A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="modal-footer" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; justify-content: center; gap: 10px;">
                    <button type="button" class="btn btn-custom-blue-lg" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-custom-blue-lg">Set</button>
                </div>
            </div>
        </div>
    </div>    

    <!-- SU2 Hidden Modal -->
    <div class="modal fade" id="su2HiddenModal" tabindex="-1" aria-labelledby="su2HiddenModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                    <h5 class="modal-title" id="su2HiddenModalLabel" style="font-weight: bold;">
                        <i class="fas fa-plus me-2"></i>SU2 HIDDEN
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                    <!-- Main Grid Layout -->
                    <div class="row">
                        <div class="col-md-6">
                            <!-- SISO RF Section -->
                            <div class="card mb-3">
                                <div class="card-header">SISO RF</div>
                                <div class="card-body">
                            <div class="rf-content">
                                <!-- DL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> DL
                                    </h6>
                                    <!-- DL Top Section -->
                                    <div class="input-item">
                                        <label>DL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2DlSubAtten_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL Output Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2DL_InputOffset_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL SD Status</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                            <span class="unit"></span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>DL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Dl_Att_Test_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Out Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ant_Out_Offset_Siso" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS Output</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly id="su2Ant_Output_SISO" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ant_Offset_UL_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- UL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> UL
                                    </h6>
                                    <!-- UL Top Section -->
                                    <div class="input-item">
                                        <label>UL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2UlSubAtten_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>UL Input Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2UL_OutputOffset_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    
                                    <!-- UL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>UL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ul_Att_Test_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- UL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Gain</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ant_Gain_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ant_Offset_DL_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- MIMO RF Section -->
                            <div class="card mb-3">
                                <div class="card-header">MIMO RF</div>
                                <div class="card-body">
                            <div class="rf-content">
                                <!-- DL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> DL
                                    </h6>
                                    <!-- DL Top Section -->
                                    <div class="input-item">
                                        <label>DL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2DlSubAtten_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL Output Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2DL_InputOffset_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL SD Status</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                            <span class="unit"></span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>DL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Dl_Att_Test_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Out Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ant_Out_Offset_Mimo" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS Output</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ant_Output_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ant_Offset_UL_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- UL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> UL
                                    </h6>
                                    <!-- UL Top Section -->
                                    <div class="input-item">
                                        <label>UL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2UlSubAtten_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>UL Input Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2UL_OutputOffset_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    
                                    <!-- UL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>UL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2UL_Att_Testl_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- UL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Gain</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ant_Gain_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su2Ant_Offset_DL_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- SISO OPTIC Section -->
                            <div class="card mb-3">
                                <div class="card-header">SISO OPTIC</div>
                                <div class="card-body">
                            <div class="optic-content">
                                <div class="input-item">
                                    <label>LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2LD1_DET_DL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2PD1_DET_UL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2LD3_DET_DL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2PD3_DET_UL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>RSRQ Low Level</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2LowRsrpLevel" />
                                        <span class="unit">[dBm]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>RSRQ Still Time</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2LowRsrpStillTime" />
                                        <span class="unit">[sec]</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- MIMO OPTIC Section -->
                            <div class="card mb-3">
                                <div class="card-header">MIMO OPTIC</div>
                                <div class="card-body">
                            <div class="optic-content">
                                <div class="input-item">
                                    <label>LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2LD2_DET_DL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2PD2_DET_UL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2LD4_DET_DL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su2PD4_DET_UL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Section (S/N, Polling Time, Baudrate, Toggles) -->
                    <div class="card mb-3">
                        <div class="card-header">System Settings</div>
                        <div class="card-body">
                            <div class="bottom-content">
                                <!-- Left Block -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">S/N</label>
                                        <input type="text" id="su2conserialnum" value="N/A" class="form-control form-control-sm" />
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Baudrate</label>
                                        <select id="su2baudrate" class="form-select form-select-sm" style="width: 80px; font-size: 0.65rem; padding: 0.1rem 0.2rem;">
                                            <option value="19200">19200</option>
                                            <option value="38400">38400</option>
                                            <option value="57600">57600</option>
                                            <option value="115200">115200</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Middle Block (Toggles) -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">AOM Temp</label>
                                        <button id="su2aomtemp-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Att Test</label>
                                        <button id="su2att-test-toggle" class="btn-toggle off">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Api Init.</label>
                                        <button id="su2api-init-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Api Init. Retry</label>
                                        <button id="su2api-init-retry-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                </div>

                                <!-- Right Block (More Toggles) -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">Debug</label>
                                        <button id="su2debug-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Ant Band</label>
                                        <span id ="su2antband">N/A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="modal-footer" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; justify-content: center; gap: 10px;">
                    <button type="button" class="btn btn-custom-blue-lg" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-custom-blue-lg">Set</button>
                </div>
            </div>
        </div>
    </div>   

    <!-- SU3 Hidden Modal -->
    <div class="modal fade" id="su3HiddenModal" tabindex="-1" aria-labelledby="su3HiddenModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                    <h5 class="modal-title" id="su3HiddenModalLabel" style="font-weight: bold;">
                        <i class="fas fa-plus me-2"></i>SU3 HIDDEN
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                    <!-- Main Grid Layout -->
                    <div class="row">
                        <div class="col-md-6">
                            <!-- SISO RF Section -->
                            <div class="card mb-3">
                                <div class="card-header">SISO RF</div>
                                <div class="card-body">
                            <div class="rf-content">
                                <!-- DL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> DL
                                    </h6>
                                    <!-- DL Top Section -->
                                    <div class="input-item">
                                        <label>DL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3DlSubAtten_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL Output Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3DL_InputOffset_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL SD Status</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                            <span class="unit"></span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>DL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Dl_Att_Test_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Out Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ant_Out_Offset_Siso" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS Output</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly id="su3Ant_Output_SISO" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ant_Offset_UL_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- UL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> UL
                                    </h6>
                                    <!-- UL Top Section -->
                                    <div class="input-item">
                                        <label>UL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3UlSubAtten_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>UL Input Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3UL_OutputOffset_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    
                                    <!-- UL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>UL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ul_Att_Test_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- UL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Gain</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ant_Gain_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ant_Offset_DL_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- MIMO RF Section -->
                            <div class="card mb-3">
                                <div class="card-header">MIMO RF</div>
                                <div class="card-body">
                            <div class="rf-content">
                                <!-- DL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> DL
                                    </h6>
                                    <!-- DL Top Section -->
                                    <div class="input-item">
                                        <label>DL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3DlSubAtten_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL Output Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3DL_InputOffset_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL SD Status</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                            <span class="unit"></span>
                                        </div>
                                    </div>
                                    
                                    
                                    <!-- DL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>DL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Dl_Att_Test_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Out Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ant_Out_Offset_Mimo" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS Output</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ant_Output_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ant_Offset_UL_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- UL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> UL
                                    </h6>
                                    <!-- UL Top Section -->
                                    <div class="input-item">
                                        <label>UL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3UlSubAtten_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>UL Input Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3UL_OutputOffset_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- UL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>UL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3UL_Att_Testl_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- UL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Gain</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ant_Gain_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su3Ant_Offset_DL_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- SISO OPTIC Section -->
                            <div class="card mb-3">
                                <div class="card-header">SISO OPTIC</div>
                                <div class="card-body">
                            <div class="optic-content">
                                <div class="input-item">
                                    <label>LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3LD1_DET_DL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3PD1_DET_UL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3LD3_DET_DL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3PD3_DET_UL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>RSRQ Low Level</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3LowRsrpLevel" />
                                        <span class="unit">[dBm]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>RSRQ Still Time</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3LowRsrpStillTime" />
                                        <span class="unit">[sec]</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- MIMO OPTIC Section -->
                            <div class="card mb-3">
                                <div class="card-header">MIMO OPTIC</div>
                                <div class="card-body">
                            <div class="optic-content">
                                <div class="input-item">
                                    <label>LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3LD2_DET_DL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3PD2_DET_UL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3LD4_DET_DL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su3PD4_DET_UL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Section (S/N, Polling Time, Baudrate, Toggles) -->
                    <div class="card mb-3">
                        <div class="card-header">System Settings</div>
                        <div class="card-body">
                            <div class="bottom-content">
                                <!-- Left Block -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">S/N</label>
                                        <input type="text" id="su3conserialnum" value="N/A" class="form-control form-control-sm" />
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Baudrate</label>
                                        <select id="su3baudrate" class="form-select form-select-sm" style="width: 80px; font-size: 0.65rem; padding: 0.1rem 0.2rem;">
                                            <option value="19200">19200</option>
                                            <option value="38400">38400</option>
                                            <option value="57600">57600</option>
                                            <option value="115200">115200</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Middle Block (Toggles) -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">AOM Temp</label>
                                        <button id="su3aomtemp-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Att Test</label>
                                        <button id="su3att-test-toggle" class="btn-toggle off">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Api Init.</label>
                                        <button id="su3api-init-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Api Init. Retry</label>
                                        <button id="su3api-init-retry-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                </div>

                                <!-- Right Block (More Toggles) -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">Debug</label>
                                        <button id="su3debug-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Ant Band</label>
                                        <span id ="su3antband">N/A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="modal-footer" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; justify-content: center; gap: 10px;">
                    <button type="button" class="btn btn-custom-blue-lg" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-custom-blue-lg">Set</button>
                </div>
            </div>
        </div>
    </div>   

    <!-- SU4 Hidden Modal -->
    <div class="modal fade" id="su4HiddenModal" tabindex="-1" aria-labelledby="su4HiddenModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                    <h5 class="modal-title" id="su4HiddenModalLabel" style="font-weight: bold;">
                        <i class="fas fa-plus me-2"></i>SU4 HIDDEN
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                    <!-- Main Grid Layout -->
                    <div class="row">
                        <div class="col-md-6">
                            <!-- SISO RF Section -->
                            <div class="card mb-3">
                                <div class="card-header">SISO RF</div>
                                <div class="card-body">
                            <div class="rf-content">
                                <!-- DL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> DL
                                    </h6>
                                    <!-- DL Top Section -->
                                    <div class="input-item">
                                        <label>DL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4DlSubAtten_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL Output Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4DL_InputOffset_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL SD Status</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                            <span class="unit"></span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>DL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Dl_Att_Test_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Out Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ant_Out_Offset_Siso" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS Output</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly id="su4Ant_Output_SISO" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ant_Offset_UL_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- UL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> UL
                                    </h6>
                                    <!-- UL Top Section -->
                                    <div class="input-item">
                                        <label>UL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4UlSubAtten_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>UL Input Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4UL_OutputOffset_SISO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    
                                    <!-- UL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>UL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ul_Att_Test_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- UL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Gain</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ant_Gain_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ant_Offset_DL_Siso" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- MIMO RF Section -->
                            <div class="card mb-3">
                                <div class="card-header">MIMO RF</div>
                                <div class="card-body">
                            <div class="rf-content">
                                <!-- DL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> DL
                                    </h6>
                                    <!-- DL Top Section -->
                                    <div class="input-item">
                                        <label>DL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4DlSubAtten_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL Output Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4DL_InputOffset_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>DL SD Status</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" readonly />
                                            <span class="unit"></span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>DL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Dl_Att_Test_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- DL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Out Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ant_Out_Offset_Mimo" />
                                            <span class="unit">[dBm]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS Output</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ant_Output_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ant_Offset_UL_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- UL Column -->
                                <div class="rf-column">
                                    <h6 class="text-secondary d-flex align-items-center mb-2">
                                        <i class="fas fa-plus me-1"></i> UL
                                    </h6>
                                    <!-- UL Top Section -->
                                    <div class="input-item">
                                        <label>UL SUB ATT</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4UlSubAtten_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>UL Input Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4UL_OutputOffset_MIMO" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    
                                    <!-- UL Middle Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>UL ATT Test</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4UL_Att_Testl_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    
                                    <!-- UL Bottom Section -->
                                    <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                    <div class="input-item">
                                        <label>GS Gain</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ant_Gain_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                    <div class="input-item">
                                        <label>GS ATT Offset</label>
                                        <div class="input-with-unit">
                                            <input type="text" value="N/A" class="form-control form-control-sm" id="su4Ant_Offset_DL_Mimo" />
                                            <span class="unit">[dB]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- SISO OPTIC Section -->
                            <div class="card mb-3">
                                <div class="card-header">SISO OPTIC</div>
                                <div class="card-body">
                            <div class="optic-content">
                                <div class="input-item">
                                    <label>LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4LD1_DET_DL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4PD1_DET_UL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4LD3_DET_DL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4PD3_DET_UL0_SISO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>RSRQ Low Level</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4LowRsrpLevel" />
                                        <span class="unit">[dBm]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>RSRQ Still Time</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4LowRsrpStillTime" />
                                        <span class="unit">[sec]</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <!-- MIMO OPTIC Section -->
                            <div class="card mb-3">
                                <div class="card-header">MIMO OPTIC</div>
                                <div class="card-body">
                            <div class="optic-content">
                                <div class="input-item">
                                    <label>LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4LD2_DET_DL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4PD2_DET_UL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT LD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4LD4_DET_DL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                                <div class="input-item">
                                    <label>NEXT PD PWR Offset</label>
                                    <div class="input-with-unit">
                                        <input type="text" value="N/A" class="form-control form-control-sm" id="su4PD4_DET_UL1_MIMO_Offset" />
                                        <span class="unit">[dB]</span>
                                    </div>
                                </div>
                            </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Section (S/N, Polling Time, Baudrate, Toggles) -->
                    <div class="card mb-3">
                        <div class="card-header">System Settings</div>
                        <div class="card-body">
                            <div class="bottom-content">
                                <!-- Left Block -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">S/N</label>
                                        <input type="text" id="su4conserialnum" value="N/A" class="form-control form-control-sm" />
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Baudrate</label>
                                        <select id="su4baudrate" class="form-select form-select-sm" style="width: 80px; font-size: 0.65rem; padding: 0.1rem 0.2rem;">
                                            <option value="19200">19200</option>
                                            <option value="38400">38400</option>
                                            <option value="57600">57600</option>
                                            <option value="115200">115200</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Middle Block (Toggles) -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">AOM Temp</label>
                                        <button id="su4aomtemp-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Att Test</label>
                                        <button id="su4att-test-toggle" class="btn-toggle off">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Api Init.</label>
                                        <button id="su4api-init-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Api Init. Retry</label>
                                        <button id="su4api-init-retry-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                </div>

                                <!-- Right Block (More Toggles) -->
                                <div class="bottom-block">
                                    <div class="form-group-item">
                                        <label class="font-semibold">Debug</label>
                                        <button id="su4debug-toggle" class="btn-toggle on">N/A</button>
                                    </div>
                                    <div class="form-group-item">
                                        <label class="font-semibold">Ant Band</label>
                                        <span id ="su4antband">N/A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="modal-footer" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; justify-content: center; gap: 10px;">
                    <button type="button" class="btn btn-custom-blue-lg" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-custom-blue-lg">Set</button>
                </div>
            </div>
        </div>
    </div> 

    <!-- SU1 PLL Relock Modal -->
    <div class="modal fade" id="confirmSu1PllRelockModal" tabindex="-1" aria-labelledby="confirmSu1PllRelockModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                <div class="modal-body p-4">
                    <div class="flex justify-center mb-4">
                        <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                    </div>
                    <p class="text-lg text-gray-700 mb-6">Do you want to PLL Relock SU1?</p>
                    <div class="d-flex justify-content-center gap-3 mb-4">
                        <button type="button" class="btn btn-lg" style="width: 100px; background-color: #d3dce6;" data-bs-dismiss="modal" onclick="handleSu1PllRelockConfirmation(true)">Ok</button>
                        <button type="button" class="btn btn-lg" style="width: 100px; background-color: #d3dce6;" data-bs-dismiss="modal" onclick="handleSu1PllRelockConfirmation(false)">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SU2 PLL Relock Modal -->
    <div class="modal fade" id="confirmSu2PllRelockModal" tabindex="-1" aria-labelledby="confirmSu2PllRelockModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                <div class="modal-body p-4">
                    <div class="flex justify-center mb-4">
                        <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                    </div>
                    <p class="text-lg text-gray-700 mb-6">Do you want to PLL Relock SU2?</p>
                    <div class="d-flex justify-content-center gap-3 mb-4">
                        <button type="button" class="btn btn-lg" style="width: 100px; background-color: #d3dce6;" data-bs-dismiss="modal" onclick="handleSu2PllRelockConfirmation(true)">Ok</button>
                        <button type="button" class="btn btn-lg" style="width: 100px; background-color: #d3dce6;" data-bs-dismiss="modal" onclick="handleSu2PllRelockConfirmation(false)">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SU3 PLL Relock Modal -->
    <div class="modal fade" id="confirmSu3PllRelockModal" tabindex="-1" aria-labelledby="confirmSu3PllRelockModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                <div class="modal-body p-4">
                    <div class="flex justify-center mb-4">
                        <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                    </div>
                    <p class="text-lg text-gray-700 mb-6">Do you want to PLL Relock SU3?</p>
                    <div class="d-flex justify-content-center gap-3 mb-4">
                        <button type="button" class="btn btn-lg" style="width: 100px; background-color: #d3dce6;" data-bs-dismiss="modal" onclick="handleSu3PllRelockConfirmation(true)">Ok</button>
                        <button type="button" class="btn btn-lg" style="width: 100px; background-color: #d3dce6;" data-bs-dismiss="modal" onclick="handleSu3PllRelockConfirmation(false)">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SU4 PLL Relock Modal -->
    <div class="modal fade" id="confirmSu4PllRelockModal" tabindex="-1" aria-labelledby="confirmSu4PllRelockModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                <div class="modal-body p-4">
                    <div class="flex justify-center mb-4">
                        <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                    </div>
                    <p class="text-lg text-gray-700 mb-6">Do you want to PLL Relock SU4?</p>
                    <div class="d-flex justify-content-center gap-3 mb-4">
                        <button type="button" class="btn btn-lg" style="width: 100px; background-color: #d3dce6;" data-bs-dismiss="modal" onclick="handleSu4PllRelockConfirmation(true)">Ok</button>
                        <button type="button" class="btn btn-lg" style="width: 100px; background-color: #d3dce6;" data-bs-dismiss="modal" onclick="handleSu4PllRelockConfirmation(false)">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
</html>