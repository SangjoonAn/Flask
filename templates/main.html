<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RF EMS Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <style>
        body { 
            background-color: #E0E0E0; overflow: auto; 
            transition: background-color 0.2s ease, color 0.2s ease; /* body에도 트랜지션 추가 (선택 사항) */
        }
        .navbar { background: #547186; color: white; display: flex; align-items: center; justify-content: space-between; padding: 10px; }
        .navbar img { height: 40px; }
        .time-container { color: white; }
        .icon-container { display: flex; gap: 15px; color: white; }
        .icon-container i { font-size: 20px; cursor: pointer; }
        .wrapper { 
            display: flex; 
            min-height: 100vh; 
        }
        .sidebar { 
            width: 300px; 
            background: #41515D; 
            color: white; 
            padding: 15px; 
            flex-shrink: 0;
            transition: background-color 0.2s ease, color 0.2s ease; /* 핵심 변경: 사이드바에 트랜지션 추가 */
        }
        .sidebar h5 { font-weight: bold; margin-bottom: 10px; }
        .sidebar .info-box { 
            background: #B0B0B0; 
            padding: 10px; 
            border-radius: 5px; 
            margin-bottom: 5px; 
            /* grid 관련 스타일을 여기서 정의 */
            display: grid;
            grid-template-columns: 120px auto; /* 여기에 정의 */
            grid-gap: 5px;
            align-items: center;
        }
        .sidebar .status-box {        
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 160px; /* 원하는 너비로 조정 */
            margin: 0;
            padding: 0;    
        }

        .sidebar .status-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 13px;
        padding: 2px 0;     /* 상하 padding 줄이기 */
        margin: 0;          /* margin 제거 */
        }

        .sidebar .info-box p {
        margin: 2px 0;           /* 위아래 여백 줄이기 */
        padding: 0;              /* padding 제거 */
        line-height: 1.2;        /* 줄 간격 압축 */
        font-size: 14px;         /* 폰트 크기 조정 (선택) */
        }

        .status-item span {
        margin: 0;
        padding: 0;
        line-height: 1.2;
        }

        /* 상태 원 기본 스타일 */
        .status-circle {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        display: inline-block;
        }

        .status-normal { background-color: green; }
        .status-alarm { background-color: red; }
        .status-alarm-yellow { background-color: yellow; }
        .status-unknown { background-color: gray; }
        .status-linkfail { background-color: orange; }
        .status-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 5px;
        }

        /* 작은 텍스트 크기 클래스 */
        .small-text {
            font-size: 0.75rem;
        }

        /* 플러스 아이콘 스타일 */
        .plus-icon {
            width: 16px;
            height: 16px;
            background-color: #6c757d;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .plus-icon span {
            color: white;
            font-size: 12px;
            font-weight: bold;
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            line-height: 1;
        }



        /* On 버튼 통일 스타일 */
        .btn-on {
            background-color: #507346 !important;
            color: white !important;
            width: 50px;
        }

        .small-text-2 {
            font-size: 0.7rem;
        }

        /* Beam Info 카드 텍스트 크기 절반으로 줄이기 */
        .beam-info-card span {
            font-size: 0.5rem;
        }









        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-dialog {
            margin: 50px auto;
        }

        .modal-content {
            background-color: #fefefe;
            border: 1px solid #888;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .modal-header {
            border-bottom: 1px solid #ddd;
        }

        .modal-header .close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            float: right;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-body table {
            width: 100%;
            border-collapse: collapse;
        }

        .modal-body table td {
            padding: 8px;
            border: 1px solid #ddd;
        }

        .modal-body table input[type="text"],
        .modal-body table textarea {
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 4px 8px;
        }

        .modal-body table input[type="text"]:focus,
        .modal-body table textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        /* DU/SU Navigation Section Styles */
        .du-su-section {
            margin-top: 20px;
            background-color: #3c5260;
            padding: 15px;
            border-radius: 8px;
            color: white;
        }
        .du-item, .su-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            cursor: pointer; /* 클릭 가능하도록 커서 변경 */
            transition: background-color 0.2s ease; /* 호버 효과 추가 */
            padding: 5px;
            border-radius: 5px;
        }
        .du-item:hover, .su-item:hover {
            background-color: #496373; /* 호버 시 배경색 변경 */
        }
        /* du-item-circle 및 su-item-circle에 status-circle 공통 스타일 적용 */
        .du-item-circle, .su-item-circle {
            width: 10px; /* Specific size for nav dots */
            height: 10px; /* Specific size for nav dots */
            border-radius: 50%;
            margin-right: 8px;
            /* background-color will be set by JS via status classes or white for active */
        }
        .su-item { margin-left: 20px; } /* SU 항목 들여쓰기 */

        /* Main Content Area */
        .content-area {
            flex: 1;
            padding: 20px;
            background-color: #fff;
            overflow-y: auto; /* 내용이 많을 경우 스크롤바 생성 */
            box-shadow: -2px 0 5px rgba(0,0,0,0.05);
        }

        /* 각 화면 컨테이너 (처음에는 DU만 보이고 SU#1은 숨김) */
        #du_content_display, #su1_content_display, #su2_content_display { /* SU2 추가 */
            display: none; /* 기본적으로 모두 숨김 */
        }

        /* 특정 화면이 활성화될 때만 보이도록 - 디버깅용 테두리와 배경색 추가 */
        #du_content_display.active,
        #su1_content_display.active { 
            display: block; /* 활성화된 화면만 보이도록 */
        }

        /* DU/SU 화면 내부 스타일 (예시) */
        .dashboard-card {
            background-color: #f0f2f5;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* Sync Module 스타일 */
        .sync-card {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            width: 100%;
            max-width: 280px;
        }

        .sync-label {
            font-weight: 500;
            font-size: 0.85rem;
            margin-bottom: 4px;
        }

        .sync-container {
            background-color: #e9ecef;
            padding: 20px;
            border-radius: 8px;
        }

        .frequency-bar {
            background-color: #dee2e6;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
        }
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 0.75rem;
        }
        .dashboard-header h2 {
            font-size: 1.5rem;
            font-weight: bold;
            color: #343a40;
            margin: 0;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        .info-item {
            background-color: #ffffff;
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            font-size: 0.9em;
            color: #333;
        }
        .info-item label {
            font-weight: bold;
            color: #555;
            display: block;
            margin-bottom: 0.25rem;
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }
        .status-section {
            background-color: #ffffff;
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .status-section h3 {
            font-size: 1.2rem;
            font-weight: bold;
            color: #343a40;
            margin-top: 0;
            margin-bottom: 1rem;
            border-bottom: 1px dashed #e0e0e0;
            padding-bottom: 0.5rem;
        }
        .status-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .status-indicator .status-circle { /* Changed from .status-dot */
            width: 10px; /* Ensure size consistency */
            height: 10px; /* Ensure size consistency */
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        /* Buttons in content area */
        .action-buttons button {
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: bold;
        }
        .action-buttons button:hover {
            background-color: #0056b3;
        }
        .action-buttons .btn-secondary {
            background-color: #6c757d;
        }
        .action-buttons .btn-secondary:hover {
            background-color: #5a6268;
        }



        .status-box span { display: block; }
        .content { flex-grow: 1; padding: 20px; overflow: auto; }
        .card { margin-bottom: 20px; }
        .tx-rx-box { 
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
            gap: 10px;
            margin-bottom: 10px; /* ← 상태 리스트와의 간격 추가 */
        }
        /* 상태 텍스트들을 감싸는 컨테이너 */
            .status-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }        
        /* TX와 RX 박스 공통 스타일 */
        .tx-box, .rx-box {
            padding: 3px 10px;        /* 더 작게 */
            border-radius: 5px;
            font-size: 12px;          /* 글자 크기 축소 */
            font-weight: bold;
            text-align: center;
            min-width: 35px;          /* 너무 좁아지지 않도록 최소 폭 지정 */
        }
        
        /* 송신 박스 스타일 */
        .tx-box {
        background-color: gray;
        color: white;
        }
        /* 수신 박스 스타일 */
        .rx-box {
        background-color: gray;
        color: white;
        }

        .content-card {
            background-color: #f0f0f0; /* 배경색 변경 */
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
        }
        .content-card h5 {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        .content-card p {
            margin-bottom: 5px;
        }
        .content-card .badge {
            margin-left: 5px;
        }
        .content-card .status-circle {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }

        /* Custom styles for DU Hidden Modal */
        .modal-body .rf-optic-section {
            background-color: #f0f2f5; /* Light gray background for the entire section */
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .modal-body .rf-optic-section h6 {
            font-weight: bold;
            font-size: 1.125rem;
            color: #343a40;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
        }

        .modal-body .rf-optic-section h6 i {
            color: #007bff;
            margin-right: 0.5rem;
        }

        .modal-body .rf-optic-section hr {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            border-top: 1px dotted #6c757d; /* Changed to darker dotted line */
        }

        /* Specific styles for input items within RF/Optic sections */
        .modal-body .rf-optic-section .input-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .modal-body .rf-optic-section .input-item label {
            font-weight: 600;
            font-size: 0.875rem;
            color: #495057;
            flex-grow: 1;
            text-align: left;
            margin-right: 10px;
        }

        .modal-body .rf-optic-section .input-item .input-with-unit {
            display: flex;
            align-items: center;
            flex-shrink: 0;
        }

        .modal-body .rf-optic-section .input-item input.form-control-sm {
            width: 80px;
            text-align: center;
            border-radius: 0.375rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            border: 1px solid #ced4da;
        }

        .modal-body .rf-optic-section .input-item span.unit {
            margin-left: 0.5rem;
            font-size: 0.875rem;
            color: #495057;
        }

        .modal-body .rf-optic-section .text-muted-small {
            font-size: 0.75rem;
            color: #6c757d;
            text-align: right;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Specific styles for the bottom section of DU Hidden Modal */
        .modal-body .bottom-section .form-group-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .modal-body .bottom-section .form-group-item input.form-control-sm.w-40 {
            width: 160px;
        }

        .modal-body .bottom-section .btn-toggle {
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            color: white;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
            border: none; /* Ensure no default button border */
        }
        .modal-body .bottom-section .btn-toggle.on {
            background-color: #28a745;
        }
        .modal-body .bottom-section .btn-toggle.off {
            background-color: #dc3545;
        }

        /* Button styling */
        .btn-custom-gray {
            background-color: #6c757d;
            color: white;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
            border: none;
        }
        .btn-custom-gray:hover {
            background-color: #5a6268;
            color: white;
        }
        .btn-custom-blue {
            background-color: #007bff;
            color: white;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
            border: none;
        }
        .btn-custom-blue:hover {
            background-color: #0056b3;
            color: white;
        }
        .btn-custom-blue-lg {
            padding: 0.75rem 1.5rem;
            background-color: #007bff;
            color: white;
            border-radius: 0.375rem;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
            border: none;
        }
        .btn-custom-blue-lg:hover {
            background-color: #0056b3;
            color: white;
        }



        /* ==================== 모달 관련 커스텀 스타일 (다단계 설정 모달 CSS) ==================== */
        /* Custom styles for consistency and rounded corners */
        .modal-content {
            border-radius: 12px;
            overflow: hidden; /* Ensures rounded corners apply to children */
        }

        /* Beam Info Modal 관련 CSS */
        .beam-scan-field {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            padding: 0.25rem 0;
        }

        .beam-scan-field label {
            font-size: 0.875rem;
            color: #495057;
            margin: 0;
        }

        .toggle-switch {
            width: 40px;
            height: 20px;
            background-color: #ccc;
            border-radius: 10px;
            border: none;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .toggle-switch:checked {
            background-color: #28a745;
        }

        .toggle-switch:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.25);
        }

        /* 초기 설정 모달 특정 스타일 */
        .modal-header.initial-setup-header {
            background-color: #A0A0A0; /* 회색 배경 */
            color: black; 
            border-bottom: none; 
            padding: 8px 15px; 
            position: relative; 
        }
        .modal-header.initial-setup-header .modal-title {
            font-weight: bold;
            font-size: 1rem; 
            display: flex;
            align-items: center;
            gap: 5px; 
        }
        .modal-header.initial-setup-header .modal-title i {
            font-size: 0.8rem; 
        }
        .modal-header.initial-setup-header .btn-close {
            color: black; 
            opacity: 1; 
            font-size: 0.9rem; 
            background: none; 
            padding: 0; 
            margin: 0; 
        }
        .modal-header.initial-setup-header .btn-close:focus {
            box-shadow: none;
        }
        .modal-header {
            background-color: #f8f9fa; /* Light header background */
            border-bottom: 1px solid #e9ecef;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }
        .modal-footer {
            border-top: 1px solid #e9ecef;
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
        }
        .btn-styled {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.2s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn-styled:hover {
            transform: translateY(-2px);
        }
        .btn-primary-custom {
            background-color: #2563eb; /* Blue */
            color: white;
        }
        .btn-secondary-custom {
            background-color: #6b7280; /* Gray */
            color: white;
        }

        /* DU Hidden Modal Grid Layout */
        .du-hidden-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto auto;
            gap: 15px;
            margin-bottom: 20px;
        }

        .rf-section, .optic-section {
            background: #e9ecef;
            border-radius: 6px;
            padding: 15px;
            border: 1px solid #ced4da;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .rf-section h6, .optic-section h6 {
            color: #495057;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .rf-content {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .rf-column {
            flex: 1;
        }

        .rf-column h6 {
            color: #6c757d;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .optic-content {
            margin-top: 10px;
        }

        .input-item {
            margin-bottom: 8px;
        }

        .input-item label {
            font-size: 12px;
            color: #495057;
            font-weight: 500;
            margin-bottom: 3px;
            display: block;
        }

        .input-with-unit {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .input-with-unit input {
            flex: 1;
            font-size: 12px;
            padding: 4px 8px;
            border: 1px solid #ced4da;
            border-radius: 3px;
            background: white;
        }

        .input-with-unit .unit {
            font-size: 11px;
            color: #6c757d;
            white-space: nowrap;
        }

        .bottom-section {
            grid-column: 1 / -1;
            background: #e9ecef;
            border-radius: 6px;
            padding: 15px;
            border: 1px solid #ced4da;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .bottom-content {
            display: flex;
            gap: 30px;
            justify-content: space-between;
        }

        .bottom-block {
            flex: 1;
        }

        .form-group-item {
            margin-bottom: 10px;
        }

        .form-group-item label {
            font-size: 12px;
            color: #495057;
            font-weight: 600;
            margin-bottom: 3px;
            display: block;
        }

        .form-group-item input {
            font-size: 12px;
            padding: 4px 8px;
            border: 1px solid #ced4da;
            border-radius: 3px;
            background: white;
            width: 100%;
        }

        .btn-toggle {
            padding: 4px 12px;
            border: none;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-toggle.on {
            background-color: #28a745;
            color: white;
        }

        .btn-toggle.off {
            background-color: #6c757d;
            color: white;
        }

        .cut-time-button {
            display: flex;
            justify-content: flex-end;
            margin-top: 15px;
        }

        .btn-custom-blue-lg {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        .btn-success-custom {
            background-color: #10b981; /* Green */
            color: white;
        }
        .btn-danger-custom {
            background-color: #ef4444; /* Red */
            color: white;
        }
        .step-content {
            display: none; /* Hide all step content by default */
        }
        .info-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        input[type="text"], input[type="number"], select {
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            width: 100%;
            background-color: #fff;
            transition: border-color 0.2s;
        }
        input[type="text"]:focus, input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.25);
        }
        /* 초기 설정 모달 특정 스타일 */
        .modal-header.initial-setup-header {
            background-color: #A0A0A0; /* 회색 배경 */
            color: black; 
            border-bottom: none; 
            padding: 8px 15px; 
            position: relative; 
        }
        .modal-header.initial-setup-header .modal-title {
            font-weight: bold;
            font-size: 1rem; 
            display: flex;
            align-items: center;
            gap: 5px; 
        }
        .modal-header.initial-setup-header .modal-title i {
            font-size: 0.8rem; 
        }
        .modal-header.initial-setup-header .btn-close {
            color: black; 
            opacity: 1; 
            font-size: 0.9rem; 
            background: none; 
            padding: 0; 
            margin: 0; 
        }
        .modal-header.initial-setup-header .btn-close:focus {
            box-shadow: none;
        }
        .modal-body.initial-setup-body {
            background-color: #E0E0E0; 
            padding: 20px; 
            display: flex;
            flex-direction: column;
            align-items: center; 
            gap: 20px; 
        }


        .initial-setup-bar {
            background-color: #FFFF00; 
            color: #1A2E59; 
            font-weight: bold;
            font-size: 1.2rem;
            padding: 8px 0; 
            text-align: center;
            width: 100%; 
            border-radius: 5px; 
        }
        .initial-setup-buttons {
            display: flex;
            gap: 15px; 
        }
        .initial-setup-body .btn-custom-gray {
            background-color: #A0A0A0; 
            color: black; 
            border: none;
            border-radius: 5px; 
            font-weight: bold;
            padding: 5px 20px; 
            font-size: 0.9rem;
        }
        .initial-setup-body .btn-custom-gray:hover {
            background-color: #8C8C8C; 
            color: black;
        }
        .initial-setup-time {
            font-size: 0.9rem;
            color: #555555;
            margin-top: 10px; 
        }
        /* 기존 모달 푸터와 겹치지 않도록 이름을 명확히 하고, 이 모달에서는 기본 푸터 숨김 */
        .modal-footer.initial-setup-footer { /* footer에 클래스 추가 */
             display: flex !important; /* 다시 보이게 함 */
             justify-content: space-between; 
             align-items: center; 
             padding: 1rem; /* 부트스트랩 기본 패딩 */
             border-top: 1px solid #dee2e6; /* 부트스트랩 기본 보더 */
        }
        .modal-footer { /* 기존 모달 푸터 스타일은 유지 */
            display: none; /* 이미지에 푸터가 없으므로 숨김 */
        }

        .siso-rf-box { margin-right: 40px; }
        .mimo-rf-box { margin-left: 40px; }

    </style>


</head>
<body onload="updateTime(); updateNavDotColors(); showScreen('du_content');">
    <nav class="navbar navbar-dark">
        <div class="container-fluid">
            <img src="static/images/main_logo.png" alt="Logo">
            <a class="navbar-brand" href="#">RF EMS</a>
            <div class="time-container">
                <span id="utc-time">UTC: Loading...</span> |
                <span id="browser-time">Local: Loading...</span>
            </div>
            <div class="icon-container d-flex align-items-center">
                <i class="fas fa-user me-3 js-top-icon" style="cursor: pointer;" onclick="openUserManagementModal()"></i> 
                <i class="fas fa-compass me-3 js-top-icon" style="cursor: pointer;" onclick="openBeamInfoModal()"></i>                
                <div style="position: relative; display: inline-block;" class="me-3 js-top-icon">
                    <i class="fas fa-bell" style="cursor: pointer;" onclick="openAlarmHistoryModal()"></i> <span class="badge rounded-pill bg-danger" style="position: absolute; top: -5px; right: -5px; font-size: 0.6em;">125</span>
                </div>
                <i class="fas fa-cog me-3 js-top-icon" onclick="openAlarmLevelModal()"></i> 
                <div class="dropdown js-top-icon">
                    <a class="nav-link dropdown-toggle d-flex align-items-center text-white" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" data-bs-toggle="dropdown" aria-expanded="false" style="color: white !important;">
                        <span class="me-2">primaer</span> </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                        <li><a class="dropdown-item" href="#">My Info</a></li>
                        <li><a class="dropdown-item" href="#">Logout</a></li>
                    </ul>
                </div>
                

            </div>
        </div>
    </nav>

    <div class="wrapper">
        <div class="sidebar">
            <div class="info-box"> 
                <p style="color: black;">Manufacturer:</p>
                <p><strong>FRTek</strong></p>
                <p style="color: black;">Version:</p>
                <p><strong><span id="McuSwVer">N/A</span></strong></p>
            </div>
            
            <div class="info-box">
                <p style="color: black;">IP:</p>
                <p><strong><span id="modipaddress">N/A</span></strong></p>
                <p style="color: black;">Local IP:</p>
                <p><strong>192.168.1.1</strong></p>
                <p style="color: black;">Port:</p>
                <p><strong>80</strong></p>
            </div>

            <div class="tx-rx-box">
                <span class="tx-box">TX</span>
                <span class="rx-box">RX</span>
            </div>

            <div class="status-box">
                <div class="status-item">
                    <span class="status-label">Normal</span>
                    <span class="status-circle status-normal"></span>
                </div>

                <div class="status-item">
                    <span class="status-label">Alarm</span>
                    <span class="status-circle status-alarm"></span>
                </div>

                <div class="status-item">
                    <span class="status-label">Link Fail</span>
                    <span class="status-circle status-linkfail"></span>
                </div>
            </div>
            
            <button class="btn btn-light w-100 mt-2">Reload</button>

            <!-- DU/SU Navigation Section -->
            <div class="du-su-section">
                <div class="du-item" id="nav_du" onclick="showScreen('du_content')">
                    <div class="du-item-circle status-circle" id="du_nav_dot"></div> <!-- status-circle 클래스 추가 -->
                    <span style="font-weight: bold;">DU</span>
                </div>

                <div class="su-item" id="nav_su1" onclick="showScreen('su1_content')">
                    <div class="du-item-circle status-circle" id="su1_nav_dot"></div> <!-- status-circle 클래스 추가 -->
                    <span>SU #1</span>
                </div>

                <div class="su-item" id="nav_su2" onclick="showInfoModal('SU #2 화면 전환 기능은 아직 구현되지 않았습니다.');">
                    <div class="du-item-circle status-circle" id="su2_nav_dot"></div> <!-- status-circle 클래스 추가 -->
                    <span>SU #2</span>
                </div>

                <div class="su-item" id="nav_su3" onclick="showInfoModal('SU #3 화면 전환 기능은 아직 구현되지 않았습니다.');">
                    <div class="du-item-circle status-circle" id="su3_nav_dot"></div> <!-- status-circle 클래스 추가 -->
                    <span>SU #3</span>
                </div>

                <div class="su-item" id="nav_su4" onclick="showInfoModal('SU #4 화면 전환 기능은 아직 구현되지 않았습니다.');">
                    <div class="du-item-circle status-circle" id="su4_nav_dot"></div> <!-- status-circle 클래스 추가 -->
                    <span>SU #4</span>
                </div>
            </div>

            <hr>
                            <button class="btn btn-secondary w-100" onclick="showPacketInfo()">Packet Info</button>
                <button class="btn btn-secondary w-100 mt-2" onclick="showSyncModule()">Sync Module</button>
            <button class="btn btn-secondary w-100 mt-2">Modem AtCmd</button>
            <button class="btn btn-secondary w-100 mt-2">Download</button>
        </div>


        <div class="content-area">
            <!-- DU Content (첫 번째 이미지에 해당하는 내용) -->
            <div id="du_content_display" class="active">
                <div class="bg-light p-3 rounded shadow-sm mb-2"> 
                    <div class="row align-items-center mb-2"> 
                        <div class="col-md-3">
                            <small class="text-muted">Site ID :</small> Kor - FRTek - 001
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">Site Name :</small> Korea FRTek RF - EMIS
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">S/N :</small> <span id="conserialnum_header">N/A</span>
                        </div>
                        <div class="col-md-3 text-end">
                            <small class="text-muted">EMS ver :</small>
                            <span id="emsversion2">N/A</span>
                        </div>
                    </div>
                    
                <hr class="my-3" style="border-top: 1px dotted #000000;"> 
                <div class="d-flex justify-content-between align-items-center"> 
                    <div style="font-size: 1.5rem; font-weight: bold; color: #343a40;">DU <i class="fas fa-pencil-alt text-muted fs-6"></i></div>
                    <div>
                        <button id="openModalBtn" class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#duInitialSetupModal" onclick="startInitialSetup()">
                            Initial Setup
                        </button>
                        <button id="openModalBtn" class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#BtapnSetupModal" >
                            APN
                        </button>
                        <button id="openModalBtn" class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#confirmResetModal" >
                            RESET
                        </button>
                         <button id="openModalBtn" class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#duHiddenModal" >
                            HIDDEN
                        </button>
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;"
                                data-bs-toggle="modal" data-bs-target="#beamInfoModal">Beam Info</button>       
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" data-bs-toggle="modal" data-bs-target="#alarmMaskModal">Alarm Mask</button>
                        <button id="btnStatusMode" class="btn btn-secondary btn-sm me-2 d-none">Status Mode</button>
                        <button id="btnApply" class="btn btn-success btn-sm d-none">Set</button>
                        <button id="btnSetMode" class="btn btn-sm" style="background-color: gray; border: none; border-radius: 5px; color: white;">Set Mode</button>
                    </div>
                </div>



                <!-- Initial Setup Custom Modal -->
                <div class="modal fade" id="duInitialSetupModal" tabindex="-1" aria-labelledby="duInitialSetupModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 10px; margin: 0;">
                            <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0;">
                            <h5 class="modal-title text-white" id="duInitialSetupModalLabel">Initial Setup</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>

                            <div class="modal-body" style="padding: 2rem;">
                            <div class="p-3 mb-3" style="background-color: yellow; font-size: 2rem; font-weight: bold;">
                            INITIAL SETUP
                            </div>
                            <div class="d-flex justify-content-center gap-3 mb-4">
                            <button
                                class="btn btn-lg"
                                style="width: 120px; background-color: #d3dce6;"
                                data-bs-toggle="modal"
                                data-bs-target="#usimCheckModal"
                                data-bs-dismiss="modal"
                                onclick="startUsimTimer()">
                                Start
                            </button>


                            <button class="btn btn-lg" style="width: 120px; background-color: #d3dce6;" data-bs-dismiss="modal">Close</button>
                            </div>
                            <div class="mt-2" style="font-size: 1.2rem;">
                            Time : <span id="setupTimer">10</span> [Sec]
                            </div>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- USIM Check Modal -->
                <div class="modal fade" id="usimCheckModal" tabindex="-1" aria-labelledby="usimCheckModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered" style="max-width:600px;">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                            <div style="font-weight:bold; font-size:1.2rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:10px; margin-bottom:20px;">
                                <i class="bi bi-folder"></i> USIM Insert Check
                            </div>
                            <div style="margin-bottom:30px;">
                                Did you insert the USIM Card?
                            </div>
                            <div class="d-flex justify-content-center gap-3 mb-4">
                                <button class="btn btn-lg btn-light" style="min-width:150px; font-weight:bold;">YES</button>
                                <button class="btn btn-lg btn-light" style="min-width:150px; font-weight:bold;">NO</button>
                            </div>
                            <div style="font-size:1rem; margin-top:10px; margin-bottom:20px;">
                                Time : <span id="usimTimer">300</span> [Sec]
                            </div>

                            <div class="modal-footer d-flex justify-content-between">
                                <button class="btn btn-secondary">Back</button>
                                <div>&lt;Step 1/7&gt;</div>
                                <button class="btn btn-primary" onclick="goToStep2()">Next</button>
                                <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- APN Setup Modal -->
                <div class="modal fade" id="apnSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                            <div style="font-weight:bold; font-size:1.2rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:10px; margin-bottom:20px;">
                                <i class="bi bi-folder"></i> Modem APN Setup
                            </div>

                            <div class="modal-body text-center">

                                <div class="d-flex justify-content-center align-items-center gap-3 mb-4">
                                <label class="fw-bold">Mobile Company</label>
                                <input type="text" class="form-control text-center" style="max-width:100px;" value="uscc" readonly>
                                <input type="text" class="form-control text-center" style="max-width:300px;" value="uscc07454.enterprise3.usc-cdp">
                                <button class="btn btn-secondary">Set</button>
                                </div>
                                <div style="font-size:1rem; margin-top:10px; margin-bottom:20px;">
                                    Time : <span id="apnTimer">300</span> [Sec]
                                </div>

                            </div>
                            <div class="modal-footer d-flex justify-content-between">
                                <button class="btn btn-secondary" onclick="goToUsimFromApn()">Back</button>
                                <div>&lt;Step 2/7&gt;</div>
                                <button class="btn btn-primary" onclick="goToStep3()">Next</button>
                                <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Btapn Setup Modal -->
                <div class="modal fade" id="BtapnSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                  <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                      
                      <!-- Header -->
                      <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0; margin: -20px -20px 20px -20px;">
                        <h5 class="modal-title text-white">APN Setup</h5>
                        <!-- Close(X) button -->
                        <button type="button" class="btn-close btn-close-white" style="filter: invert(1);" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      
                      <!-- Section title -->
                      <div style="font-weight:bold; font-size:1.2rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:10px; margin-bottom:20px;">
                        <i class="bi bi-folder"></i> Modem APN Setup
                      </div>

                      <!-- Body -->
                      <div class="modal-body text-center">
                        <table style="margin: 0 auto; border-collapse: collapse; border: none;">
                          <thead>
                            <tr>
                              <th style="border: none; padding: 8px;"></th>
                              <th style="border: none; padding: 8px;">&lt;Company&gt;</th>
                              <th style="border: none; padding: 8px;">&lt;APN&gt;</th>
                              <th style="border: none; padding: 8px;"></th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td style="font-weight:bold; text-align:right; white-space:nowrap; border: none; padding: 8px;">Mobile Company</td>
                              <td style="border: none; padding: 8px;">
                                <input type="text" class="form-control text-center" style="width:100px;" value="uscc" readonly>
                              </td>
                              <td style="border: none; padding: 8px;">
                                <input type="text" class="form-control text-center" style="width:300px;" value="uscc07454.enterprise3.usc-cdp">
                              </td>
                              <td style="border: none; padding: 8px;">
                                <button class="btn btn-secondary">Set</button>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>

                      <!-- Footer -->
                      
                      <div class="modal-footer d-flex justify-content-center">
                        <button class="btn btn-secondary" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                    </div>
                    </div>
                  </div>
                </div>

                <script>
                // ---------- Config ----------
                var PAGE_SIZE = 25;           // 한 페이지에 더 많이 보이도록
                var WINDOW_SIZE = 3;          // 페이지 버튼 3개만 보이도록
                var TOTAL_ROWS = 180;         // 더미 데이터 개수

                // ---------- Dummy data ----------
                var levels = [
                  {name:'Warning',  color:'#f7c948'},
                  {name:'Major',    color:'#fb923c'},
                  {name:'Critical', color:'#e74c3c'}
                ];
                function pad(n){return (n<10?'0':'')+n;}
                function makeDate(i){
                  // 2025-06-(01~20) 01:01:01 형태
                  var d = 1 + (i % 20), h = i%24, m = (i*3)%60, s = (i*7)%60;
                  return '2025-06-' + pad(d) + ' ' + pad(h) + ':' + pad(m) + ':' + pad(s);
                }
                var rows = [];
                for(var i=0;i<TOTAL_ROWS;i++){
                  var L = levels[i%levels.length];
                  rows.push({
                    level: L.name,
                    color: L.color,
                    msg:   (i%5===2?'DU Main TSYNC LINK Alarm':'DU Main EMS DU LINK Alarm'),
                    date:  makeDate(i+1),
                    yn:    (i%3===0?'N':'Y'),
                    cdate: (i%3===0?'':makeDate(i+2))
                  });
                }

                // ===== Alarm History State =====

                // ===== Alarm History State =====
                var histCurrent = 1;
                var histTotalPages = 8; // 하드코딩된 페이지 수
                
                // ===== Alarm History Helpers =====
                function histRenderTable(){
                  // body 요소를 다시 찾기 (전역 변수 참조 문제 해결)
                  var bodyElement = document.getElementById('histBody');
                  
                  if (!bodyElement) {
                    console.error('Alarm History - histRenderTable: body 요소를 찾을 수 없음', {
                      bodyId: 'histBody'
                    });
                    return;
                  }
                  
                  // 더미 알람 데이터 생성 (실제로는 서버에서 가져와야 함)
                  var alarms = [];
                  for(var i=1; i<=histTotalPages*10; i++){
                    alarms.push({
                      level: ['Critical', 'Major', 'Minor', 'Warning'][i%4],
                      message: 'Alarm message ' + i + ' - This is a test alarm for demonstration',
                      date: '2024-01-' + (i%28+1).toString().padStart(2,'0') + ' 12:00:00',
                      clear: i%3===0 ? 'Y' : 'N',
                      clearDate: i%3===0 ? '2024-01-' + (i%28+1).toString().padStart(2,'0') + ' 13:00:00' : ''
                    });
                  }
                  
                  var start = (histCurrent-1)*10;
                  var slice = alarms.slice(start, start+10);
                  
                  console.log('Alarm History - histRenderTable 실행:', {alarmsLength: alarms.length, start, sliceLength: slice.length});
                  
                  bodyElement.innerHTML = slice.map(function(alarm){
                    return '<tr>'+
                      '<td style="text-align:center;">'+alarm.level+'</td>'+
                      '<td>'+alarm.message+'</td>'+
                      '<td style="text-align:center;">'+alarm.date+'</td>'+
                      '<td style="text-align:center;">'+alarm.clear+'</td>'+
                      '<td style="text-align:center;">'+alarm.clearDate+'</td>'+
                    '</tr>';
                  }).join('') || '<tr><td colspan="5" class="text-center text-muted">No data</td></tr>';
                }

                function histRenderPager(){
                  // DOM 요소를 다시 찾기 (전역 변수 참조 문제 해결)
                  var pagerElement = document.getElementById('histPager');
                  var statusElement = document.getElementById('histPageStatus');
                  
                  if (!pagerElement || !statusElement) {
                    console.error('Alarm History - histRenderPager: pager 또는 status 요소를 찾을 수 없음', {
                      pager: !!pagerElement, 
                      status: !!statusElement,
                      pagerId: 'histPager',
                      statusId: 'histPageStatus'
                    });
                    return;
                  }
                  
                  console.log('Alarm History - histRenderPager 실행:', {histCurrent, histTotalPages, pager: !!pagerElement, status: !!statusElement});
                  
                  // 좌/우 버튼 상태
                  var first = pagerElement.querySelector('[data-act="first"]').parentElement;
                  var prev  = pagerElement.querySelector('[data-act="prev"]').parentElement;
                  var next  = pagerElement.querySelector('[data-act="next"]').parentElement;
                  var last  = pagerElement.querySelector('[data-act="last"]').parentElement;
                  
                  first.classList.toggle('disabled', histCurrent===1);
                  prev .classList.toggle('disabled', histCurrent===1);
                  next .classList.toggle('disabled', histCurrent===histTotalPages);
                  last .classList.toggle('disabled', histCurrent===histTotalPages);

                  // 기존 숫자 버튼 제거
                  [].slice.call(pagerElement.querySelectorAll('a[data-page]')).forEach(function(a){ a.parentElement.remove(); });

                  // 윈도우 계산 (3개만 보이도록)
                  var WINDOW_SIZE = 3;
                  var start = Math.max(1, Math.min(histCurrent - Math.floor(WINDOW_SIZE/2), histTotalPages - WINDOW_SIZE + 1));
                  var end   = Math.min(histTotalPages, start + WINDOW_SIZE - 1);

                  // 새 숫자 버튼 삽입 (prev 뒤에)
                  var anchor = pagerElement.querySelector('[data-act="prev"]').parentElement;
                  for(var p=start; p<=end; p++){
                    var li = document.createElement('li');
                    li.className = 'page-item' + (p===histCurrent?' active':'');
                    li.innerHTML = '<a class="page-link" href="#" data-page="'+p+'">'+p+'</a>';
                    anchor.after(li);
                    anchor = li;
                  }

                  // 상태 문구 업데이트
                  statusElement.textContent = 'Showing ' + histCurrent + ' of ' + histTotalPages + ' pages';
                  console.log('Alarm History - 상태 업데이트 완료:', histCurrent, 'of', histTotalPages);
                  
                  // 실제 DOM에 반영되었는지 확인
                  console.log('Alarm History - DOM 상태 확인:', {
                    statusText: statusElement.textContent,
                    statusInnerHTML: statusElement.innerHTML,
                    statusVisible: statusElement.offsetParent !== null
                  });
                }

                function initAlarmHistory(){
                  console.log('=== Alarm History 초기화 시작 ===');
                  
                  // 상태 초기화
                  histCurrent = 1;
                  
                  // DOM 요소들 가져오기 (전역 변수 사용하지 않음)
                  var pagerElement = document.getElementById('histPager');
                  var bodyElement = document.getElementById('histBody');
                  var statusElement = document.getElementById('histPageStatus');
                  
                  console.log('DOM 요소 검색 결과:', {
                    pager: pagerElement ? '찾음' : '못찾음',
                    body: bodyElement ? '찾음' : '못찾음', 
                    status: statusElement ? '찾음' : '못찾음'
                  });
                  
                  if(pagerElement && bodyElement && statusElement){
                    console.log('페이지네이션 이벤트 리스너 추가 중...');
                    // 이벤트 리스너 추가
                    pagerElement.addEventListener('click', function(e){
                      var a = e.target.closest('a.page-link'); if(!a){return;}
                      e.preventDefault();
                      var act = a.getAttribute('data-act');
                      var num = a.getAttribute('data-page');

                      if(act==='first') histCurrent = 1;
                      else if(act==='prev') histCurrent = Math.max(1, histCurrent-1);
                      else if(act==='next') histCurrent = Math.min(histTotalPages, histCurrent+1);
                      else if(act==='last') histCurrent = histTotalPages;
                      else if(num){ histCurrent = parseInt(num,10); }

                      console.log('Alarm History - 페이지 변경:', act || num, '현재:', histCurrent, '총:', histTotalPages);
                      histRenderTable();
                      histRenderPager();
                    });
                    console.log('페이지네이션 이벤트 리스너 추가 완료');

                    // 초기 렌더
                    console.log('초기 렌더 시작...');
                    console.log('histRenderTable() 호출...');
                    histRenderTable();
                    console.log('histRenderPager() 호출...');
                    histRenderPager();
                    console.log('초기 렌더 완료');
                  } else {
                    console.error('Alarm History 초기화 실패: 필요한 DOM 요소가 없음');
                  }
                  
                  console.log('=== Alarm History 초기화 완료 ===');
                }

                        // 모달이 열릴 때 초기화
        document.addEventListener('DOMContentLoaded', function() {
          console.log('=== DOM 로드 완료, 모달 이벤트 리스너 설정 시작 ===');
          
          // Alarm History 모달 초기화
          var alarmModal = document.getElementById('alarmHistoryModal');
          if(alarmModal) {
            console.log('Alarm History 모달 찾음, 이벤트 리스너 추가 중...');
            alarmModal.addEventListener('shown.bs.modal', function() {
              console.log('Alarm History 모달 열림 이벤트 발생!');
              setTimeout(function() {
                console.log('Alarm History 모달 초기화 시작 (500ms 지연 후)');
                initAlarmHistory();
              }, 500); // User Management와 동일한 지연 시간
            });
            console.log('Alarm History 모달 이벤트 리스너 추가 완료');
          } else {
            console.error('Alarm History 모달을 찾을 수 없음!');
          }
          
          // User Management 모달 초기화
          var userModal = document.getElementById('userMgmtModal');
          if(userModal) {
            console.log('User Management 모달 찾음, 이벤트 리스너 추가 중...');
            userModal.addEventListener('shown.bs.modal', function() {
              console.log('User Management 모달 열림 이벤트 발생!');
              setTimeout(function() {
                console.log('User Management 모달 초기화 시작 (500ms 지연 후)');
                setupUserManagementEvents();
              }, 500); // Alarm History와 동일한 지연 시간
            });
            
            // 모달이 닫힐 때 초기화 상태 리셋
            userModal.addEventListener('hidden.bs.modal', function() {
              console.log('User Management 모달 닫힘, 초기화 상태 리셋');
              window.userManagementInitialized = false;
            });
            
            console.log('User Management 모달 이벤트 리스너 추가 완료');
          } else {
            console.error('User Management 모달을 찾을 수 없음!');
          }
          
          console.log('=== 모달 이벤트 리스너 설정 완료 ===');
        });
                </script>

                <!-- Device Time Setup Modal -->
                <div class="modal fade" id="DeviceSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                            <div style="font-weight:bold; font-size:1.2rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:10px; margin-bottom:20px;">
                                <i class="bi bi-folder"></i> Device Time Setup
                            </div>

                            <div class="modal-body text-center">

                                <div class="text-center my-4 p-3 bg-light rounded">
                                    Cur Time Set (PC browser time applied.)
                                </div>
                                <div style="font-size:1rem; margin-top:10px; margin-bottom:20px;">
                                    Time : <span id="DeviceTimer">300</span> [Sec]
                                </div>

                            </div>
                            <div class="modal-footer d-flex justify-content-between">
                                <button class="btn btn-secondary" onclick="goToApnFromDevice()">Back</button>
                                <div>&lt;Step 3/7&gt;</div>
                                <button class="btn btn-primary" onclick="goToStep4()">Next</button>
                                <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- AGC & TDD Setup Modal -->
                <div class="modal fade" id="AgcSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                        
                        <!-- Title -->
                        <div class="d-flex justify-content-between" style="margin-top: 10px; margin-bottom: 20px;">
                            <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; width:48%;">
                            <i class="bi bi-folder"></i> AGC Setup
                            </div>
                            <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; width:48%;">
                            <i class="bi bi-folder"></i> TDD Setup
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="modal-body text-start d-flex justify-content-between gap-3">

                            <!-- AGC Setup -->
                            <div style="width:48%;">
                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">AGC On/Off</label>
                                    <div class="col-7">
                                    <button id="Mvbx_RsAgcMode2" class="btn btn-success btn-sm w-100" style="width: 50px;">On</button>
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">AGC Level</label>
                                    <div class="col-7 d-flex align-items-center">
                                    <input type="text" id="Mvbx_RsAgcThreshold2" class="form-control text-end" value="-97">
                                    <span class="ms-2">[dBm]</span>
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">gNB Type</label>
                                    <div class="col-7">
                                        <select id="gNB_Vendor_1" class="form-select form-select-sm">
                                            <option value="Manual">Manual</option>
                                            <option value="Samsung">Samsung</option>
                                            <option value="Nokia">Nokia</option>
                                            <option value="Ericsson">Ericsson</option>
                                        </select>
                                        <button id="setVendorBtn" class="btn btn-sm btn-secondary mt-2">Set Vendor</button>
                                    </div>
                                </div>

                            </div>

                            <!-- TDD Setup -->
                            <div style="width:48%;">
                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">Frequency</label>
                                    <div class="col-7 d-flex align-items-center">
                                    <input type="text" id="TDD_Freq" class="form-control text-end" value="">
                                    <span class="ms-2">[MHz]</span>
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">ARFCN</label>
                                    <div class="col-7">
                                    <input type="text" id="TDD_Arfcn" class="form-control text-end" value="">
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">SSB MU</label>
                                    <div class="col-7">
                                    <select id="MvbxSsbMu" class="form-select">
                                        <option value="120K">120K</option>
                                        <option value="240K">240K</option>
                                    </select>
                                    </div>
                                </div>

                                <div class="mb-3 row align-items-center">
                                    <label class="col-5 col-form-label">TDD Rate</label>
                                    <div class="col-7">
                                    <select id="MvbxTddRate" class="form-select">
                                        <option value="3:1">3 : 1</option>
                                        <option value="4:1">4 : 1</option>
                                    </select>
                                    </div>
                                </div>




                            </div>

                        </div>

                        <!-- Timer -->
                        <div style="font-size:1rem; margin-top:10px; margin-bottom:20px; text-align: center;">
                            Time : <span id="AgcTimer">300</span> [Sec]
                        </div>

                        <!-- Footer -->
                        <div class="modal-footer d-flex justify-content-between">
                            <button class="btn btn-secondary" onclick="goToDeviceFromAgc()">Back</button>
                            <div>&lt;Step 4/7&gt;</div>
                            <button class="btn btn-primary" onclick="goToStep5()">Next</button>
                            <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                        </div>
                        </div>
                    </div>
                </div>


                <!-- Confirm Reset Modal (Updated to match Initial Setup Modal style and content) -->
                <div class="modal fade" id="confirmResetModal" tabindex="-1" aria-labelledby="confirmResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to DU Reset it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confirm Modem Reset Modal -->
                <div class="modal fade" id="confirmModemResetModal" tabindex="-1" aria-labelledby="confirmModemResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to Modem Reset it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleModemResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleModemResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confirm EMS Reset Modal -->
                <div class="modal fade" id="confirmEmsResetModal" tabindex="-1" aria-labelledby="confirmEmsResetModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to EMS Reset it?<br>(EMS will reboot.)</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleEmsResetConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleEmsResetConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confirm RSRP Req Modal -->
                <div class="modal fade" id="confirmRsrpReqModal" tabindex="-1" aria-labelledby="confirmRsrpReqModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to RSRP Req refresh set it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleRsrpReqConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleRsrpReqConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confirm PLL Relock Modal -->
                <div class="modal fade" id="confirmPllRelockModal" tabindex="-1" aria-labelledby="confirmPllRelockModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to PLL Relock it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handlePllRelockConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handlePllRelockConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Confirm Beam Scan Modal -->
                <div class="modal fade" id="confirmBeamScanModal" tabindex="-1" aria-labelledby="confirmBeamScanModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-sm">
                        <div class="modal-content" style="background-color: #f5f5f5; text-align: center; border: 1px solid #ccc; border-radius: 5px;">
                            <div class="modal-body p-4">
                                <div class="flex justify-center mb-4">
                                    <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                                </div>
                                <p class="text-lg text-gray-700 mb-6">Do you want to start Beam Scan it?</p>
                                <div class="d-flex justify-content-center gap-3 mb-4">
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleBeamScanConfirmation(true)">
                                        Ok
                                    </button>
                                    <button
                                        type="button"
                                        class="btn btn-lg"
                                        style="width: 100px; background-color: #d3dce6;"
                                        data-bs-dismiss="modal"
                                        onclick="handleBeamScanConfirmation(false)">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Initial Setup Modal (Step 5/7) -->
                <div class="modal fade" id="InitialSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                        


                        <!-- Body -->
                        <div class="modal-body text-start">

                            <!-- DU Physical Section -->
                            <div class="mb-4">
                                <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; margin-bottom:15px;">
                                    <i class="bi bi-folder"></i> DU Physical
                                </div>
                                
                                <div class="row gx-5">
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Orientation</label>
                                            <div class="col-8 d-flex align-items-center">
                                                <input type="text" id="Actual_Orientation" class="form-control text-end" value="0">
                                                <span class="ms-2">[0]</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Tilt</label>
                                            <div class="col-8 d-flex align-items-center">
                                                <input type="text" id="Actual_Tilt" class="form-control text-end" value="0">
                                                <span class="ms-2">[0]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- DU Info Section -->
                            <div class="mb-4">
                                <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; margin-bottom:15px;">
                                    <i class="bi bi-folder"></i> DU Info
                                </div>
                                
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Site ID</label>
                                            <div class="col-8">
                                                <input type="text" id="site-id" class="form-control" value="Kor-FRTek-001" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Site Name</label>
                                            <div class="col-8">
                                                <input type="text" id="site-name" class="form-control" value="Korea FRTek RF-EMS" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Latitude</label>
                                            <div class="col-8">
                                                <input type="text" id="latitude" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">Longitude</label>
                                            <div class="col-8">
                                                <input type="text" id="longitude" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row align-items-center">
                                            <label class="col-4 col-form-label">DU Name</label>
                                            <div class="col-8">
                                                <input type="text" id="du-name" class="form-control" value="DU">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Timer -->
                        <div style="font-size:1rem; margin-top:10px; margin-bottom:20px; text-align: center;">
                            Time : <span id="InitialSetupTimer">300</span> [Sec]
                        </div>

                        <!-- Footer -->
                        <div class="modal-footer d-flex justify-content-between">
                            <button class="btn btn-secondary" onclick="backToAgcSetup()">Back</button>
                            <div>&lt;Step 5/7&gt;</div>
                            <button class="btn btn-primary" onclick="goToStep6()">Next</button>
                            <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- SU Setup Modal (Step 6/7) -->
                <div class="modal fade" id="SuSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">



                        <!-- Body -->
                        <div class="modal-body text-start">

                            <!-- SU Enable Section -->
                            <div class="mb-4">
                                <div style="font-weight:bold; font-size:1.1rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:5px; margin-bottom:15px;">
                                    <i class="bi bi-folder"></i> SU Enable
                                </div>
                                
                                <div class="row gx-5">
                                    <div class="col-md-12">
                                        <div class="row align-items-center">
                                            <label class="col-3 col-form-label">CASCADE</label>
                                            <div class="col-9">
                                                <div class="d-flex gap-2">
                                                    <button id="su1-enable-btn" class="btn btn-success btn-sm">#1 Enable</button>
                                                    <button id="su2-enable-btn" class="btn btn-secondary btn-sm">#2 Disable</button>
                                                    <button id="su3-enable-btn" class="btn btn-secondary btn-sm">#3 Disable</button>
                                                    <button id="su4-enable-btn" class="btn btn-secondary btn-sm">#4 Disable</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- SU Info Section -->
                            <div class="mb-4">
                                <div style="font-weight:bold; font-size:0.9rem; text-align:left; border-bottom:1px dashed #999; padding-bottom:3px; margin-bottom:10px;">
                                    <i class="bi bi-folder"></i> SU Info
                                </div>
                                
                                <div class="row g-2">
                                    <!-- SU#1 Row -->
                                    <div class="col-md-12">
                                        <div class="row g-1 justify-content-center">
                                            <div class="col-md-2">
                                                <div class="row align-items-center">
                                                    <label class="col-12 col-form-label" style="font-size:0.7rem;">SU#1</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-5 col-form-label" style="font-size:0.7rem;">Name</label>
                                                    <div class="col-7">
                                                        <input type="text" id="su1-name" class="form-control form-control-sm" value="SU #1" style="font-size:0.7rem;">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Latitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su1-latitude" class="form-control form-control-sm" style="font-size:0.7rem;">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Longitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su1-longitude" class="form-control form-control-sm" style="font-size:0.7rem;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- SU#2 Row -->
                                    <div class="col-md-12">
                                        <div class="row g-1 justify-content-center">
                                            <div class="col-md-2">
                                                <div class="row align-items-center">
                                                    <label class="col-12 col-form-label" style="font-size:0.7rem;">SU#2</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-5 col-form-label" style="font-size:0.7rem;">Name</label>
                                                    <div class="col-7">
                                                        <input type="text" id="su2-name" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Latitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su2-latitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Longitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su2-longitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- SU#3 Row -->
                                    <div class="col-md-12">
                                        <div class="row g-1 justify-content-center">
                                            <div class="col-md-2">
                                                <div class="row align-items-center">
                                                    <label class="col-12 col-form-label" style="font-size:0.7rem;">SU#3</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-5 col-form-label" style="font-size:0.7rem;">Name</label>
                                                    <div class="col-7">
                                                        <input type="text" id="su3-name" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Latitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su3-latitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Longitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su3-longitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- SU#4 Row -->
                                    <div class="col-md-12">
                                        <div class="row g-1 justify-content-center">
                                            <div class="col-md-2">
                                                <div class="row align-items-center">
                                                    <label class="col-12 col-form-label" style="font-size:0.7rem;">SU#4</label>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-5 col-form-label" style="font-size:0.7rem;">Name</label>
                                                    <div class="col-7">
                                                        <input type="text" id="su4-name" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Latitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su4-latitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="row align-items-center">
                                                    <label class="col-4 col-form-label" style="font-size:0.7rem;">Longitude</label>
                                                    <div class="col-8">
                                                        <input type="text" id="su4-longitude" class="form-control form-control-sm" style="font-size:0.7rem;" disabled>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Timer -->
                        <div style="font-size:1rem; margin-top:10px; margin-bottom:20px; text-align: center;">
                            Time : <span id="BtapnTimer">300</span> [Sec]
                        </div>

                        <!-- Footer -->
                        <div class="modal-footer d-flex justify-content-between">
                            <button class="btn btn-secondary" onclick="backToInitialSetup()">Back</button>
                            <div>&lt;Step 6/7&gt;</div>
                            <button class="btn btn-primary" onclick="goToStep7()">Next</button>
                            <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- Final Setup Modal (Step 7/7) -->
                <div class="modal fade" id="FinalSetupModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-md">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:30px;">
                        
                        <!-- Question -->
                        <div style="font-size:1.2rem; margin-bottom:25px; color:#333;">
                            Complete set up?
                        </div>

                        <!-- Buttons -->
                        <div class="d-flex justify-content-center gap-3">
                            <button class="btn btn-light" style="padding:10px 25px; font-weight:bold; color:#333; border:none; border-radius:5px;">YES</button>
                            <button class="btn btn-light" style="padding:10px 25px; font-weight:bold; color:#333; border:none; border-radius:5px;">NO</button>
                        </div>

                        <!-- Timer -->
                        <div style="font-size:1rem; margin-top:20px; text-align: center;">
                            Time : <span id="FinalSetupTimer">300</span> [Sec]
                        </div>

                        <!-- Footer -->
                        <div class="modal-footer d-flex justify-content-between">
                            <button class="btn btn-secondary" onclick="backToBtapnSetup()">Back</button>
                            <div>&lt;Step 7/7&gt;</div>
                            <button class="btn btn-danger" data-bs-dismiss="modal" onclick="closeSetUpModal()">Close</button>
                        </div>
                        </div>
                    </div>
                </div>



                <!-- DU Hidden Modal -->
                <div class="modal fade" id="duHiddenModal" tabindex="-1" aria-labelledby="duHiddenModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered modal-xl">
                        <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">
                            <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                                <h5 class="modal-title" id="duHiddenModalLabel" style="font-weight: bold;">
                                    <i class="fas fa-plus me-2"></i>DU HIDDEN
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            
                            <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                                <!-- Main Grid Layout -->
                                <div class="row">
                                    <div class="col-md-6">
                                        <!-- SISO RF Section -->
                                        <div class="card mb-3">
                                            <div class="card-header">SISO RF</div>
                                            <div class="card-body">
                                        <div class="rf-content">
                                            <!-- DL Column -->
                                            <div class="rf-column">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus me-1"></i> DL
                                                </h6>
                                                <!-- DL Top Section -->
                                                <div class="input-item">
                                                    <label>DL SUB ATT</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="4.5" class="form-control form-control-sm" id="DlSubAtten_SISO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>DL Input Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="-0.5" class="form-control form-control-sm" id="DL_InputOffset_SISO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- DL Middle Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>DL ATT Test</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0.0" class="form-control form-control-sm" id="Dl_Att_Test_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- DL Bottom Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>Ant Gain</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="46" class="form-control form-control-sm" id="Ant_Gain_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant ATT Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="-3" class="form-control form-control-sm" id="Ant_Offset_DL_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- UL Column -->
                                            <div class="rf-column">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus me-1"></i> UL
                                                </h6>
                                                <!-- UL Top Section -->
                                                <div class="input-item">
                                                    <label>UL SUB ATT</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" id="UlSubAtten_SISO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>UL Output Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" id="UL_OutputOffset_SISO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>SD Status</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" readonly />
                                                        <span class="unit"></span>
                                                    </div>
                                                </div>
                                                
                                                <!-- UL Middle Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>UL ATT Test</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" id="Ul_Att_Test_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- UL Bottom Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>Ant Out Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" id="Ant_Out_Offset_Siso" />
                                                        <span class="unit">[dBm]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant Output</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" readonly id="Ant_Output_SISO" />
                                                        <span class="unit">[dBm]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant ATT Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" id="Ant_Offset_UL_Siso" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <!-- MIMO RF Section -->
                                        <div class="card mb-3">
                                            <div class="card-header">MIMO RF</div>
                                            <div class="card-body">
                                        <div class="rf-content">
                                            <!-- DL Column -->
                                            <div class="rf-column">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus me-1"></i> DL
                                                </h6>
                                                <!-- DL Top Section -->
                                                <div class="input-item">
                                                    <label>DL SUB ATT</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="3.5" class="form-control form-control-sm" id="DlSubAtten_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>DL Input Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="-0.5" class="form-control form-control-sm" id="DL_InputOffset_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- DL Middle Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>DL ATT Test</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0.0" class="form-control form-control-sm" id="Dl_Att_Test_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- DL Bottom Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>Ant Gain</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="48" class="form-control form-control-sm" id="Ant_Gain_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant ATT Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="-3" class="form-control form-control-sm" id="Ant_Offset_DL_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- UL Column -->
                                            <div class="rf-column">
                                                <h6 class="text-secondary d-flex align-items-center mb-2">
                                                    <i class="fas fa-plus me-1"></i> UL
                                                </h6>
                                                <!-- UL Top Section -->
                                                <div class="input-item">
                                                    <label>UL SUB ATT</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="4.0" class="form-control form-control-sm" id="UlSubAtten_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>UL Output Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0.0" class="form-control form-control-sm" id="UL_OutputOffset_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>SD Status</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" readonly />
                                                        <span class="unit"></span>
                                                    </div>
                                                </div>
                                                
                                                <!-- UL Middle Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>UL ATT Test</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" id="U_Att_Testl_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                
                                                <!-- UL Bottom Section -->
                                                <hr class="my-2" style="border-top: 1px dotted #6c757d; width: 100%; margin: 0 auto;" />
                                                <div class="input-item">
                                                    <label>Ant Out Output</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" id="Ant_Out_Offset_Mimo" />
                                                        <span class="unit">[dBm]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant Output</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" id="Ant_Output_MIMO" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                                <div class="input-item">
                                                    <label>Ant ATT Offset</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" value="0" class="form-control form-control-sm" id="Ant_Offset_UL_Mimo" />
                                                        <span class="unit">[dB]</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <!-- SISO OPTIC Section -->
                                        <div class="card mb-3">
                                            <div class="card-header">SISO OPTIC</div>
                                            <div class="card-body">
                                        <div class="optic-content">
                                            <div class="input-item">
                                                <label>LD PWR Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="0" class="form-control form-control-sm" id="LD1_DET_DL0_SISO_Offset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>PD PWR Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="0" class="form-control form-control-sm" id="PD1_DET_UL0_SISO_Offset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>RSRQ Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="0" class="form-control form-control-sm" id="RsrpOffset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>RSRQ Low Level</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="0" class="form-control form-control-sm" id="LowRsrpLevel" />
                                                    <span class="unit">[dBm]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>RSRQ Still Time</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="0" class="form-control form-control-sm" id="LowRsrpStillTime" />
                                                    <span class="unit">[sec]</span>
                                                </div>
                                            </div>
                                        </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <!-- MIMO OPTIC Section -->
                                        <div class="card mb-3">
                                            <div class="card-header">MIMO OPTIC</div>
                                            <div class="card-body">
                                        <div class="optic-content">
                                            <div class="input-item">
                                                <label>LD PWR Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="0" class="form-control form-control-sm" id="LD2_DET_DL1_MIMO_Offset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                            <div class="input-item">
                                                <label>PD PWR Offset</label>
                                                <div class="input-with-unit">
                                                    <input type="text" value="0" class="form-control form-control-sm" id="PD2_DET_UL1_MIMO_Offset" />
                                                    <span class="unit">[dB]</span>
                                                </div>
                                            </div>
                                        </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Bottom Section (S/N, Polling Time, Baudrate, Toggles) -->
                                <div class="card mb-3">
                                    <div class="card-header">System Settings</div>
                                    <div class="card-body">
                                        <div class="bottom-content">
                                            <!-- Left Block -->
                                            <div class="bottom-block">
                                                <div class="form-group-item">
                                                    <label class="font-semibold">S/N</label>
                                                    <input type="text" id="conserialnum" value="N/A" class="form-control form-control-sm" />
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">ISO Detect</label>
                                                    <select id="isodetect" class="form-select form-select-sm" style="width: 80px; font-size: 0.65rem; padding: 0.1rem 0.2rem;">
                                                        <option value="SISO">SISO</option>
                                                        <option value="MIMO">MIMO</option>
                                                    </select>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Polling Time</label>
                                                    <div class="input-with-unit">
                                                        <input type="text" id="pollingtime" value="N/A" class="form-control form-control-sm" onchange="handlePollingTimeChange(this.value)" />
                                                        <span class="unit">[ms]</span>
                                                    </div>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Baudrate</label>
                                                    <select id="baudrate" class="form-select form-select-sm" style="width: 80px; font-size: 0.65rem; padding: 0.1rem 0.2rem;">
                                                        <option value="19200">19200</option>
                                                        <option value="38400">38400</option>
                                                        <option value="57600">57600</option>
                                                        <option value="115200">115200</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <!-- Middle Block (Toggles) -->
                                            <div class="bottom-block">
                                                <div class="form-group-item">
                                                    <label class="font-semibold">AOM Temp</label>
                                                    <button id="aomtemp-toggle" class="btn-toggle on">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Att Test</label>
                                                    <button id="att-test-toggle" class="btn-toggle off">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Api Init.</label>
                                                    <button id="api-init-toggle" class="btn-toggle on">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Api Init. Retry</label>
                                                    <button id="api-init-retry-toggle" class="btn-toggle on">N/A</button>
                                                </div>
                                            </div>

                                            <!-- Right Block (More Toggles) -->
                                            <div class="bottom-block">
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Debug</label>
                                                    <button id="debug-toggle" class="btn-toggle on">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Modem</label>
                                                    <button id="modem-toggle" class="btn-toggle off">N/A</button>
                                                </div>
                                                <div class="form-group-item">
                                                    <label class="font-semibold">Ant Band</label>
                                                    <span id ="antband">N/A</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>
                            <div class="modal-footer" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; justify-content: center; gap: 10px;">
                                <button type="button" class="btn btn-custom-blue-lg" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-custom-blue-lg">Set</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Beam Info Modal -->
                <div class="modal fade" id="beamInfoModal" tabindex="-1" aria-labelledby="beamInfoModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered" style="max-width: 95%; width: 95%;"> <div class="modal-content" style="background-color:#d1d1d1; text-align:center; padding:20px;">

                            <div class="modal-header initial-setup-header" style="background-color: #6c757d; color: white; border-bottom: none; padding: 0.5rem 1rem; border-radius: 0.25rem 0.25rem 0 0; cursor: grab;">
                                <h5 class="modal-title" id="beamInfoModalLabel" style="font-weight: bold;">
                                    <i class="fas fa-info-circle"></i> DU Beam Control
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <div class="modal-body" style="background-color:#d1d1d1; padding: 20px; text-align: left;">
                                <div class="card mb-3">
                                    <div class="card-header">Evn</div>
                                    <div class="card-body">
                                        <div class="row align-items-center justify-content-between">
                                            <div class="col-auto">
                                                <small class="text-muted">Ant. Array Ver</small>
                                                <small id="antArrayVer">N/A</small>
                                            </div>
                                            <div class="col-auto">
                                                <small class="text-muted">Temper Comp</small>
                                            </div>
                                            <div class="col-auto">
                                                <button class="btn btn-sm btn-on" id="temperComp">N/A</button>
                                            </div>
                                            <div class="col-auto">
                                                <small class="text-muted">Start Temper</small>
                                                <small id="startTemper">N/A</small>
                                            </div>
                                            <div class="col-auto">
                                                <small class="text-muted">Cur Temper</small>
                                                <small id="curTemper">N/A</small>
                                            </div>
                                            <div class="col-auto">
                                                <div class="text-end">
                                                    <small class="text-muted">Compensation DL</small>
                                                    <small id="compensationDL">N/A</small>
                                                </div>
                                                <div class="text-end mt-1">
                                                    <small class="text-muted">Compensation UL</small>
                                                    <small id="compensationUL">N/A</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header">SISO Tx/Rx Gain Setting</div>
                                            <div class="card-body">
                                                <div class="row g-2">
                                                    <div class="col-12 d-flex align-items-center">
                                                        <div class="me-2 plus-icon">
                                                            <span>+</span>
                                                        </div> Front End
                                                        <div class="ms-auto d-flex align-items-center">
                                                            <span class="me-2 text-muted">Tx Gain Idx</span>
                                                            <span class="me-3" style="width: 50px;" id="mvbxMv2850TxGainSiso">N/A</span>
                                                            <span class="me-2 text-muted">Rx Gain Idx</span>
                                                            <span style="width: 50px;" id="mvbxMv2850RxGainSiso">N/A</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 d-flex align-items-center">
                                                        <div class="me-2 plus-icon">
                                                            <span>+</span>
                                                        </div> Mixer
                                                        <div class="ms-auto d-flex align-items-center">
                                                            <span class="me-2 text-muted">Tx Gain Idx</span>
                                                            <span class="me-3" style="width: 50px;" id="mvbxMv2853TxGainSiso">N/A</span>
                                                            <span class="me-2 text-muted">Rx Gain Idx</span>
                                                            <span style="width: 50px;" id="mvbxMv2853RxGainSiso">N/A</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header">MIMO Tx/Rx Gain Setting</div>
                                            <div class="card-body">
                                                <div class="row g-2">
                                                    <div class="col-12 d-flex align-items-center">
                                                        <div class="me-2 plus-icon">
                                                            <span>+</span>
                                                        </div> Front End
                                                        <div class="ms-auto d-flex align-items-center">
                                                            <span class="me-2 text-muted">Tx Gain Idx</span>
                                                            <span class="me-3" style="width: 50px;" id="mvbxMv2850TxGainMimo">N/A</span>
                                                            <span class="me-2 text-muted">Rx Gain Idx</span>
                                                            <span style="width: 50px;" id="mvbxMv2850RxGainMimo">N/A</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 d-flex align-items-center">
                                                        <div class="me-2 plus-icon">
                                                            <span>+</span>
                                                        </div> Mixer
                                                        <div class="ms-auto d-flex align-items-center">
                                                            <span class="me-2 text-muted">Tx Gain Idx</span>
                                                            <span class="me-3" style="width: 50px;" id="mvbxMv2853TxGainMimo">N/A</span>
                                                            <span class="me-2 text-muted">Rx Gain Idx</span>
                                                            <span style="width: 50px;" id="mvbxMv2853RxGainMimo">N/A</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-header">Beam Book</div>
                                            <div class="card-body text-center">

                                                <svg id="beamBook" width="360" height="360" viewBox="0 0 400 400"></svg>


                                                <div class="text-end mt-3">
                                                    <small class="text-muted">Orientation</small> <span class="ms-2" id="orientation">0.000</span><br>
                                                    <small class="text-muted">Tilt</small> <span class="ms-4" id="tilt">0.000</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card mb-3 beam-info-card" style="position: sticky; top: 0; z-index: 100;">
                                            <div class="card-header">Beam Info</div>
                                            <div class="card-body p-0">
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-sm mb-0 small-text text-center">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Rank</th>
                                                                <th scope="col">Beam ID</th>
                                                                <th scope="col">PCI</th>
                                                                <th scope="col">SSB</th>
                                                                <th scope="col">Energy</th>
                                                                <th scope="col">PSS</th>
                                                                <th scope="col">SNR(dB)</th>
                                                                <th scope="col">RSRP(dBm)</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td style="background-color: #F2C029; color: white; font-weight: bold;">1st</td>
                                                                <td id="mvbxBeamInfoBeamId1">1</td>
                                                                <td id="mvbxBeamInfoPci1">313</td>
                                                                <td id="mvbxBeamInfoSsbldx1">0</td>
                                                                <td id="mvbxBeamInfoEnergy1">1</td>
                                                                <td id="mvbxBeamInfoPsstype1">0</td>
                                                                <td id="mvbxBeamInfoSnr1">-0.00</td>
                                                                <td id="mvbxBeamInfoRsrp1">-990.00</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="background-color: #84D9A9; color: white; font-weight: bold;">2nd</td>
                                                                <td id="mvbxBeamInfoBeamId2">12</td>
                                                                <td id="mvbxBeamInfoPci2">313</td>
                                                                <td id="mvbxBeamInfoSsbldx2">32</td>
                                                                <td id="mvbxBeamInfoEnergy2">0</td>
                                                                <td id="mvbxBeamInfoPsstype2">1</td>
                                                                <td id="mvbxBeamInfoSnr2">15.91</td>
                                                                <td id="mvbxBeamInfoRsrp2">-96.13</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="background-color: #84D9A9; color: white; font-weight: bold;">3rd</td>
                                                                <td id="mvbxBeamInfoBeamId3">13</td>
                                                                <td id="mvbxBeamInfoPci3">313</td>
                                                                <td id="mvbxBeamInfoSsbldx3">64</td>
                                                                <td id="mvbxBeamInfoEnergy3">0</td>
                                                                <td id="mvbxBeamInfoPsstype3">1</td>
                                                                <td id="mvbxBeamInfoSnr3">12.64</td>
                                                                <td id="mvbxBeamInfoRsrp3">-99.63</td>
                                                            </tr>
                                                            <tr>
                                                                <td style="background-color: #84D9A9; color: white; font-weight: bold;">4th</td>
                                                                <td id="mvbxBeamInfoBeamId4">47</td>
                                                                <td id="mvbxBeamInfoPci4">313</td>
                                                                <td id="mvbxBeamInfoSsbldx4">16</td>
                                                                <td id="mvbxBeamInfoEnergy4">0</td>
                                                                <td id="mvbxBeamInfoPsstype4">1</td>
                                                                <td id="mvbxBeamInfoSnr4">12.14</td>
                                                                <td id="mvbxBeamInfoRsrp4">-100.57</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card mb-3">
                                            <div class="card-header">Beam Scan</div>
                                            <div class="card-body">
                                                <div class="row g-4">
                                                    <div class="col-md-6">
                                                        <div class="beam-scan-field">
                                                            <label for="beamRetry">Beam Retry</label>
                                                            <button class="btn btn-sm ms-auto btn-on" id="beamRetrySwitch">On</button>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="decodeAGC">Decode AGC</label>
                                                            <button class="btn btn-sm ms-auto btn-on" id="decodeAGCSwitch">On</button>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="retryCount">Retry Count [1:5min]</label>
                                                            <span class="ms-auto" id="retryCount">9230</span>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="pllRelockCount">PLL Relock Count</label>
                                                            <span class="ms-auto" id="pllRelockCount">0</span>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="centerFrequency">Center Frequency</label>
                                                            <div class="input-group input-group-sm ms-auto" style="width: 120px;">
                                                                <input type="text" class="form-control" id="centerFrequency" value="2792500">
                                                                <span class="input-group-text">KHz</span>
                                                            </div>
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="beamFix">Beam Fix</label>
                                                            <select class="form-select form-select-sm ms-auto" id="beamFix" style="width: 80px; font-size: 0.6rem; padding: 0.1rem 0.2rem;">
                                                                <option value="AUTO">AUTO</option>
                                                                <option value="FIX">FIX</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="beam-scan-field">
                                                            <label for="apiLogLevel">API Log Level [2~6]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="apiLogLevel" value="5">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="apiAdcSel">API Adc Sel [0-3 :6dB]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="apiAdcSel" value="0">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="syncPathGain">Sync Path Gain [0-15 :2dB]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="syncPathGain" value="15">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="duTimeAdvance">DU Time Advance [1:0.5us]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="duTimeAdvance" value="0">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <label for="suTimeAdvance">SU Time Advance [1:0.5us]</label>
                                                            <input type="text" class="form-control form-control-sm ms-auto w-25" id="suTimeAdvance" value="0">
                                                        </div>
                                                        <div class="beam-scan-field">
                                                            <table class="table table-sm table-borderless mb-0" style="border: none;">
                                                                <thead>
                                                                    <tr>
                                                                        <th scope="col" class="text-center" style="border: none; padding: 8px;"></th>
                                                                        <th scope="col" class="text-center" style="border: none; padding: 8px;">[Actual]</th>
                                                                        <th scope="col" class="text-center" style="border: none; padding: 8px;">[Adjust]</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td class="text-center" style="border: none; padding: 8px;">
                                                                            <small class="text-muted">Orientation</small>
                                                                        </td>
                                                                        <td class="text-center" style="border: none; padding: 8px;">
                                                                            <input type="text" class="form-control form-control-sm" id="orientationActual" value="0" style="width: 60px; margin-left: 20px;">
                                                                        </td>
                                                                        <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-center" style="border: none; padding: 8px;">
                                                                            <small class="text-muted">Tilt</small>
                                                                        </td>
                                                                        <td class="text-center" style="border: none; padding: 8px;">
                                                                            <input type="text" class="form-control form-control-sm" id="tiltActual" value="2" style="width: 60px; margin-left: 20px;">
                                                                        </td>
                                                                        <td class="text-center text-muted" style="border: none; padding: 8px;">[0]</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>                             <div class="modal-footer justify-content-center" style="background-color:#d1d1d1; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                                <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal" style="visibility: visible; opacity: 1;">Cancel</button>
                                <button class="btn btn-primary" id="btnSetModeModal" style="visibility: visible; opacity: 1;">Set Mode</button>
                                <button class="btn btn-success d-none" id="btnApply">Apply</button>
                                <button class="btn btn-secondary d-none" id="btnStatusMode">Status Mode</button>
                            </div>

                        </div>
                    </div>
                </div>



                <!-- DU Alarm Mask Modal -->
                <div class="modal fade" id="alarmMaskModal" tabindex="-1" aria-labelledby="alarmMaskModalLabel" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered" style="max-width: 90%; width: 90%;">
                        <div class="modal-content" style="background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 10px;">
                            <div class="modal-header" style="background-color: #666; border-bottom: none; padding: 1rem; border-radius: 10px 10px 0 0;">
                                <h5 class="modal-title text-white" id="alarmMaskModalLabel">
                                    <i class="fas fa-plus me-2"></i>DU Alarm Mask
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body" style="padding: 1.5rem;">
                                <div class="row g-3">
                                    <!-- Alarm Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>Alarm
                                            </h6>
                                            <div class="row g-2">
                                                <div class="col-3">
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">DC</small>
                                                        <button id="alarm_mask_madc" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">AC</small>
                                                        <button id="alarm_mask_ac" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">FPGA Link</small>
                                                        <button id="alarm_mask_fpga_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">EMS Link</small>
                                                        <button id="EMS_DU_Link_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">Temp</small>
                                                        <button id="alarm_mask_temp" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">BAT</small>
                                                        <button id="alarm_mask_bat" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;"></small>
                                                        <div style="height: 22px;"></div>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;"></small>
                                                        <div style="height: 22px;"></div>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">IF PLL</small>
                                                        <button id="alarm_mask_if_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">Sync PLL</small>
                                                        <button id="alarm_mask_sync_pll" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;"></small>
                                                        <div style="height: 22px;"></div>
                                                    </div>
                                                </div>
                                                <div class="col-3">
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">TSync Link</small>
                                                        <button id="alarm_mask_tsync_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">Decoding</small>
                                                        <button id="alarm_mask_decoding" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                    <div class="mb-2 d-flex flex-column align-items-center">
                                                        <small style="font-size: 9px;">Ant. Array Link</small>
                                                        <button id="alarm_mask_aa_link" class="btn btn-sm alarm-btn" style="background-color: #666; border: none; color: white; font-size: 9px; height: 22px; width: 60px;">Off</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SU FAIL Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 250px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>SU FAIL
                                            </h6>
                                            <div class="mb-3">
                                                <div class="d-flex justify-content-center gap-4">
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">CASCADE</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">#1</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">#2</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">#3</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">#4</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <div class="d-flex justify-content-center gap-4">
                                                    <div class="text-center" style="width: 80px;">
                                                        <small style="font-size: 13px;">PATH#0</small>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <button id="SU1_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">Off</button>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <button id="SU2_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">Off</button>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <button id="SU3_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">Off</button>
                                                    </div>
                                                    <div class="text-center" style="width: 80px;">
                                                        <button id="SU4_MASK_LINK_FAIL" class="btn btn-sm su-fail-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">Off</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SISO RF Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>SISO RF
                                            </h6>
                                            <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                            <div class="mb-3">
                                                <div class="row g-2">
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                            <small style="font-size: 13px;">DL</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                            <small style="font-size: 13px;">UL</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-2">
                                                <div class="d-flex align-items-center">
                                                    <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                                    <button id="SISO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">Off</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- MIMO RF Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>MIMO RF
                                            </h6>
                                            <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                            <div class="mb-3">
                                                <div class="row g-2">
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                            <small style="font-size: 13px;">DL</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="d-flex align-items-center">
                                                            <i class="fas fa-plus text-primary me-2" style="font-size: 14px;"></i>
                                                            <small style="font-size: 13px;">UL</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-2">
                                                <div class="d-flex align-items-center">
                                                    <small style="font-size: 13px; margin-right: 10px;">DL ALC</small>
                                                    <button id="MIMO_MASK_DL_ALC" class="btn btn-sm dl-alc-btn" style="background-color: #666; border: none; color: white; font-size: 13px; width: 65px; height: 30px;">Off</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SISO OPTIC Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>SISO OPTIC
                                            </h6>
                                            <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                            <div class="mb-3">
                                                <div class="row g-2">
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <small style="font-size: 11px;">DL LD Lower</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <button id="LD1_DET_DL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">Off</button>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <small style="font-size: 11px;">UL PD Lower</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <button id="PD1_DET_UL0_SISO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">Off</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- MIMO OPTIC Section -->
                                    <div class="col-md-6">
                                        <div class="alarm-section" style="background-color: #e0e0e0; padding: 15px; border-radius: 8px; height: 140px;">
                                            <h6 style="color: #333; margin-bottom: 15px; font-weight: bold;">
                                                <i class="fas fa-folder me-2"></i>MIMO OPTIC
                                            </h6>
                                            <hr style="border-top: 1px dashed #999; margin-bottom: 15px;">
                                            <div class="mb-3">
                                                <div class="row g-2">
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <small style="font-size: 11px;">DL LD Lower</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <button id="LD2_DET_DL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">Off</button>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <small style="font-size: 11px;">UL PD Lower</small>
                                                        </div>
                                                    </div>
                                                    <div class="col-3">
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <button id="PD2_DET_UL1_MIMO_MASK" class="btn btn-sm" style="background-color: #666; border: none; color: white; font-size: 11px; width: 50px; height: 25px;">Off</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer justify-content-center" style="background-color: #f5f5f5; border-top: none; padding: 10px 20px; display: flex; gap: 10px;">
                                <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" style="background-color: #007bff; border: none;">Set</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DU System -->
                <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white;" class="mb-2">DU System</div>

                <div class="row">
                    <div class="col-md-6 mb-2">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 520px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> DU System
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small">
                                <div class="col-3 mb-2">
                                    <span><strong>F/W Ver</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="McuSwVer2">N/A</span> 
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Rpt Type</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="rpttype">N/A</span>
                                </div>

                                <div class="col-3 mb-2">
                                    <span><strong>FPGA Ver</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="FPGA_Ver">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Manufacturer</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span>FRTek</span>
                                </div>

                                <div class="col-3 mb-2">
                                    <span><strong>Cur Time</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="curtime">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Cur Temper</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="curtemper">N/A</span>
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-2">
                                    <span><strong>Temp Upper</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <input type="text" id="tempupper" data-editable="true" class="form-control form-control-sm" value="80" readonly>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Temp Lower</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <input type="text" id="templower" data-editable="true" class="form-control form-control-sm" value="-30" readonly>
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-2">
                                    <span><strong>FPGA Boot Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="FpgaStatus">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Init Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="InitStatus">N/A</span>
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-2">
                                    <span><strong>Beam Scan Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="ScanStatus">N/A</span>
                                </div>
                                
                            </div>

                            <div class="p-3 mt-4 rounded shadow-sm" style="background-color: #f0ffff;">
                                <h5 class="text-primary d-flex align-items-center mb-3">
                                    <i class="fas fa-folder me-6"></i> SU Enable
                                </h5>
                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="row text-secondary small">
                                    <div class="col-3 mb-2">
                                        <span><strong>CASCADE</strong></span>
                                    </div>
                                    <div class="col-2 mb-2 text-center">
                                        <span id="su1-enable-badge" class="badge bg-secondary">N/A</span>
                                    </div>
                                    <div class="col-2 mb-2 text-center">
                                        <span id="su2-enable-badge" class="badge bg-secondary">N/A</span>
                                    </div>
                                    <div class="col-2 mb-2 text-center">
                                        <span id="su3-enable-badge" class="badge bg-secondary">N/A</span>
                                    </div>
                                    <div class="col-2 mb-2 text-center">
                                        <span id="su4-enable-badge" class="badge bg-secondary">N/A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 520px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> Alarm
                            </h5>
                            <hr class="my-2" />

                            <div class="row text-secondary small mb-4">
                                    <div class="col-4">
                                        <p id="alarm_dc"><span class="status-circle"></span> DC</p>
                                        <p id="alarm_temp" style="color: gray;"><span class="status-circle"></span> Temp</p>
                                        <p id="alarm_if_pll" style="color: gray;"><span class="status-circle"></span> IF PLL</p>
                                    </div>
                                    <div class="col-4">
                                        <p id="alarm_ac" style="color: gray;"><span class="status-circle"></span> AC</p>
                                        <p id="alarm_bat" style="color: gray;"><span class="status-circle"></span> BAT</p>
                                        <p id="alarm_sync_pll" style="color: gray;"><span class="status-circle"></span> Sync PLL</p>
                                    </div>
                                    <div class="col-4">
                                        <p id="alarm_fpga_link" style="color: gray;"><span class="status-circle"></span> FPGA Link</p>
                                        <p id="alarm_aa_link" style="color: gray;"><span class="status-circle"></span> Ant. Array Link</p>
                                        <p id="alarm_tsync_link" style="color: gray;"><span class="status-circle"></span> TSync Link</p>
                                        <p id="alarm_decoding" style="color: gray;"><span class="status-circle"></span> Decoding</p>
                                    </div>
                            </div>

                            <div class="p-3 rounded shadow-sm" style="background-color: #ffffff; border: 1px solid #e0e0e0;">
                                <h5 class="text-primary d-flex align-items-center mb-3">
                                    <i class="fas fa-folder me-2"></i> SU Link
                                </h5>
                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="row text-secondary small">
                                    <div class="col-3 text-center" id="su1-link-container">
                                        <div class="mb-2">
                                            <span>#1</span>
                                        </div>
                                        <div class="mb-2">
                                            <span id="su1-link-dot" class="status-dot status-unknown"></span>
                                        </div>
                                    </div>
                                    <div class="col-3 text-center" id="su2-link-container">
                                        <div class="mb-2">
                                            <span>#2</span>
                                        </div>
                                        <div class="mb-2">
                                            <span id="su2-link-dot" class="status-dot status-unknown"></span>
                                        </div>
                                    </div>
                                    <div class="col-3 text-center" id="su3-link-container">
                                        <div class="mb-2">
                                            <span>#3</span>
                                        </div>
                                        <div class="mb-2">
                                            <span id="su3-link-dot" class="status-dot status-unknown"></span>
                                        </div>
                                    </div>
                                    <div class="col-3 text-center" id="su4-link-container">
                                        <div class="mb-2">
                                            <span>#4</span>
                                        </div>
                                        <div class="mb-2">
                                            <span id="su4-link-dot" class="status-dot status-unknown"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                    </div>

                    <div class="col-md-2">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 520px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> ISO Measur
                            </h5>
                            <hr class="my-2" />

                            <div class="row text-secondary small">
                                <div class="col-6 mb-2">
                                    <span class="small-text"><strong>ISO Status</strong></span>
                                </div>
                                <div class="col-6 mb-2" style="text-align: center;">
                                    <span id="du_iso_status" class="small-text-2">N/A</span>
                                </div>

                                <div class="col-6 mb-2">
                                    <span>#1</span>
                                </div>
                                <div class="col-6 mb-2" style="text-align: center;">
                                    <span>-55dB</span>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>

                                <div class="row">
                    <!-- Modem Status -->
                    <div class="col-md-6"> <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                            Modem Status
                        </div>
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 390px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> Modem Status
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small mb-4"> <div class="col-md-4"> <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Status</strong></span>
                                        <span id="modstatus" class="text-success">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>IMSI</strong></span>
                                        <span id="modimsi" class="small-text">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>IMEI</strong></span>
                                        <span id="modimei" class="small-text">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Num</strong></span>
                                        <span id="modnum">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Mod IP</strong></span>
                                        <span id="modip">N/A</span>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSRP</strong></span>
                                        <span id="rsrp">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSRQ</strong></span>
                                        <span id="rsrq">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSSI</strong></span>
                                        <span id="rssi">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>PCI</strong></span>
                                        <span id="pci">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>SINR</strong></span>
                                        <span id="sinr">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Tx Pwr</strong></span>
                                        <span id="txpwr">N/A</span>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Mod Ver</strong></span>
                                        <span id="modver">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>EMS Ver</strong></span>
                                        <span id="emsversion">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>LAN</strong></span>
                                        <span id="lan">N/A</span>
                                    </div>
                                </div>
                            </div>

                            <hr class="my-3" style="border-top: 1px dotted black;" /> <div class="row text-center mt-3">                                 <div class="col-6 mb-2">
                                    <button id="modemResetBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmModemResetModal">Modem Reset</button>
                                </div>
                                <div class="col-6 mb-2">
                                    <button id="emsResetBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmEmsResetModal">EMS Reset</button>
                                </div>
                                <div class="col-6 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">LAN Disable</button>
                                </div>
                                <div class="col-6 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">LAN Enable</button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Beam Status -->
                    <div class="col-md-6">
                        <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                            Beam Status
                        </div>
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 390px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> Beam Status
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small mb-4">
                                <div class="col-md-4"> <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Beam ID</strong></span>
                                        <span id="mvbx_beamset">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSRP</strong></span>
                                        <span id="mvbx_rsrp">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>SNR</strong></span>
                                        <span id="mvbx_snr">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>SSB</strong></span>
                                        <span id="mvbx_ssb">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>PCI</strong></span>
                                        <span id="mvbx_pci">N/A</span>
                                    </div>
                                </div>
                                <div class="col-md-4"> <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Ant. Array On/Off</strong></span>
                                        <button type="button" class="btn btn-success btn-sm" style="width: 50px;" id="gumstick_onoff" data-editable="true">N/A</button>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>AGC On/Off</strong></span>
                                        <button type="button" class="btn btn-success btn-sm" style="width: 50px;" id="mvbx_rsagc_mode" data-editable="true">N/A</button>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>AGC Level</strong></span>
                                        <input type="text" id="mvbx_rsagc_threshold" data-editable="true" class="form-control form-control-sm" value="-97" readonly>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>AGC Input</strong></span>
                                        <span id="agc_input_power">N/A</span>
                                    </div>
                                </div>
                                <div class="col-md-4">                                       <div class="d-flex justify-content-between mb-2">
                                          <span><strong>Decoded count</strong></span>
                                          <span id="decoded_ssb_count">N/A</span>
                                      </div>
                                      <div class="d-flex justify-content-between mb-2">
                                          <span><strong>Decoded success</strong></span>
                                          <span id="decoded_ssb_no_error_count">N/A</span>
                                      </div>
                                      <div class="d-flex justify-content-between mb-2">
                                          <span><strong>Decoded rate</strong></span>
                                          <span id="DecodedRate">N/A [%]</span>
                                      </div>
                                </div>
                            </div>

                            <hr class="my-3" style="border-top: 1px dotted black;" /> <div class="row mb-3 align-items-center">
                                <div class="col-md-3">
                                    <span><strong>gNB Type</strong></span>
                                </div>
                                <div class="col-md-9">
                                    <select id="gNB_Vendor" data-editable="true" class="form-select form-select-sm">
                                        <option value="Manual">Manual</option>
                                        <option value="Samsung">Samsung</option>
                                        <option value="Nokia">Nokia</option>
                                        <option value="Ericsson">Ericsson</option>
                                    </select>
                                </div>
                            </div>

                            <hr class="my-3" style="border-top: 1px dotted black;" /> <div class="row text-center mt-3">                                 <div class="col-md-4 mb-2">
                                    <button id="rsrpReqBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmRsrpReqModal">RSRP Req</button>
                                </div>
                                <div class="col-md-4 mb-2">
                                    <button id="pllRelockBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmPllRelockModal">PLL Relock</button>
                                </div>
                                <div class="col-md-4 mb-2">
                                    <button id="beamScanBtn" class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;" data-bs-toggle="modal" data-bs-target="#confirmBeamScanModal">Beam Scan</button>
                                </div>
                            </div>
                                                </div>
                    </div>
                </div>

                <!-- AOM Status -->
                <div class="col-md-12 mb-4 mt-2"> <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                        AOM & mmWave
                    </div>
                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 340px;">
                        <h5 class="text-primary d-flex align-items-center mb-3">
                            <i class="fas fa-folder me-2"></i> AOM & mmWave
                        </h5>
                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                        <div class="row text-secondary small">
                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> SISO RF
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> DL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL Input</strong></span>
                                                <span id="dl_input_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ATT</strong></span>
                                                <input type="text" id="dl_att_siso" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ALC Level</strong></span>
                                                <input type="text" id="dl_alc_level_siso" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ALC On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width: 50px;" id="alc_dl0_siso_mode" data-editable="true">N/A</button>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> UL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL Output(EIRP)</strong></span>
                                                <span id="ul_input_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL ATT</strong></span>
                                                <input type="text" id="ul_att_siso" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO Level</strong></span>
                                                <input type="text" id="ul_iso_level_siso" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-2">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL Front End ATT</strong></span>
                                            <input type="text" id="mvbx_tx_gain_set_siso" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL Front End ATT</strong></span>
                                            <input type="text" id="mvbx_rx_gain_set_siso" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL ISO ATT</strong></span>
                                            <span id="ul_iso_att_siso">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> MIMO RF
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> DL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL Input</strong></span>
                                                <span id="dl_input_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ATT</strong></span>
                                                <input type="text" id="dl_att_mimo" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ALC Level</strong></span>
                                                <input type="text" id="dl_alc_level_mimo" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ALC On/Off</strong></span>
                                                <button type="button" class="btn btn-success btn-sm" style="width: 50px;" id="alc_dl1_mimo_mode" data-editable="true">N/A</button>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> UL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL Output(EIRP)</strong></span>
                                                <span id="ul_input_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL ATT</strong></span>
                                                <input type="text" id="ul_att_mimo" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO Level</strong></span>
                                                <input type="text" id="ul_iso_level_mimo" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-2">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL Front End ATT</strong></span>
                                            <input type="text" id="mvbx_tx_gain_set_miso" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL Front End ATT</strong></span>
                                            <input type="text" id="mvbx_rx_gain_set_miso" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL ISO ATT</strong></span>
                                            <span id="ul_iso_att_mimo">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> SISO OPTIC
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL LD</strong></span>
                                            <span id="ld1_det_dl0_siso">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL PD</strong></span>
                                            <span id="pd1_det_ul0_siso">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2 align-items-center">
                                            <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>DL LD Lower</strong></span>
                                            <input type="text" id="ld1_det_dl0_siso_low" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2 align-items-center">
                                            <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>UL PD Lower</strong></span>
                                            <input type="text" id="pd1_det_ul0_siso_low" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> MIMO OPTIC
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL LD</strong></span>
                                            <span id="ld2_det_dl1_mimo">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL PD</strong></span>
                                            <span id="pd2_det_ul1_mimo">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2 align-items-center">
                                            <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>DL LD Lower</strong></span>
                                            <input type="text" id="ld2_det_dl1_mimo_low" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2 align-items-center">
                                            <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>UL PD Lower</strong></span>
                                            <input type="text" id="pd2_det_ul1_mimo_low" data-editable="true" class="form-control form-control-sm" value="0" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>


            <!-- SU Content (첫 번째 이미지에 해당하는 내용) -->
            <div id="su1_content_display">
                <div class="bg-light p-3 rounded shadow-sm mb-2"> 
                    <div class="row align-items-center mb-2"> 
                        <div class="col-md-3">
                            <small class="text-muted">Site ID :</small> Kor - FRTek - 001
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">Site Name :</small> Korea FRTek RF - EMIS
                        </div>
                        <div class="col-md-3 text-center">
                            <small class="text-muted">S/N :</small> <span id="su1_conserialnum_header">N/A</span>
                        </div>
                        <div class="col-md-3 text-end">
                            <small class="text-muted" >EMS ver :</small> 
                            <span id="su1_emsversion2">N/A</span>
                        </div>
                    </div>
                    
                <hr class="my-3" style="border-top: 1px dotted #000000;"> 
                <div class="d-flex justify-content-between align-items-center"> 
                    <div style="font-size: 1.5rem; font-weight: bold; color: #343a40;">SU #1 <i class="fas fa-pencil-alt text-muted fs-6"></i></div>
                    <div>
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;">RESET</button>
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;" onclick="openBeamInfoModal()">Beam Info</button>
                        <button class="btn btn-sm me-2" style="background-color: gray; border: none; border-radius: 5px; color: white;">Alarm Mask</button>
                        <button class="btn btn-sm" style="background-color: gray; border: none; border-radius: 5px; color: white;">Set Mode</button>
                    </div>
                </div>



                <!-- SU System -->
                <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white;" class="mb-2">SU System</div>

                <div class="row">
                    <div class="col-md-6 mb-2">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 450px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> SU System
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small">
                                <div class="col-3 mb-2">
                                    <span><strong>F/W Ver</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_McuSwVer">N/A</span> 
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Rpt Type</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_rpttype">N/A</span>
                                </div>

                                <div class="col-3 mb-2">
                                    <span><strong>FPGA Ver</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_FPGA_Ver">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Manufacturer</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span>FRTek</span>
                                </div>

                                <div class="col-3 mb-2">
                                    <span><strong>Cur Time</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_curtime">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Cur Temper</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_curtemper">N/A</span>
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-2">
                                    <span><strong>Temp Upper</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_tempupper">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Temp Lower</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_templower">N/A</span>
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-2">
                                    <span><strong>FPGA Boot Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_FpgaStatus">N/A</span>
                                </div>
                                <div class="col-3 mb-2">
                                    <span><strong>Init Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_InitStatus">N/A</span>
                                </div>

                                <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                <div class="col-3 mb-2">
                                    <span><strong>Beam Scan Status</strong></span>
                                </div>
                                <div class="col-3 mb-2 text-end">
                                    <span id="su1_ScanStatus">N/A</span>
                                </div>
                            </div>

                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 450px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> Alarm
                            </h5>
                            <hr class="my-2" />

                            <div class="row text-secondary small mb-4">
                                    <div class="col-4">
                                        <p id="su1_alarm_dc"><span class="status-circle"></span> DC</p>
                                        <p id="su1_alarm_temp" style="color: gray;"><span class="status-circle"></span> Temp</p>
                                        <p id="su1_alarm_if_pll" style="color: gray;"><span class="status-circle"></span> IF PLL</p>
                                    </div>
                                    <div class="col-4">
                                        <p id="su1_alarm_ac" style="color: gray;"><span class="status-circle"></span> AC</p>
                                        <p id="su1_alarm_bat" style="color: gray;"><span class="status-circle"></span> BAT</p>
                                        <p id="su1_alarm_sync_pll" style="color: gray;"><span class="status-circle"></span> Sync PLL</p>
                                    </div>
                                    <div class="col-4">
                                        <p id="su1_alarm_fpga_link" style="color: gray;"><span class="status-circle"></span> FPGA Link</p>
                                        <p id="su1_alarm_aa_link" style="color: gray;"><span class="status-circle"></span> Ant. Array Link</p>
                                        <p id="su1_alarm_tsync_link" style="color: gray;"><span class="status-circle"></span> TSync Link</p>
                                        <p id="su1_alarm_decoding" style="color: gray;"><span class="status-circle"></span> Decoding</p>
                                    </div>
                                    
                            </div>

                            </div>
                    </div>

                    <div class="col-md-2">
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 450px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> ISO Measur
                            </h5>
                            <hr class="my-2" />

                            <div class="row text-secondary small">
                                <div class="col-6 mb-2">
                                    <span  class="small-text"><strong>ISO Status</strong></span>
                                </div>
                                <div class="col-6 mb-2 text-end">
                                    <span id="su1_iso_status" class="small-text-2">N/A</span>
                                </div>

                                <div class="col-6 mb-2">
                                    <span>#1</span>
                                </div>
                                <div class="col-6 mb-2 text-end">
                                    <span>-55dB</span>
                                </div>
                            </div>


                        </div>
                    </div>
                </div>


                <div class="row">
                    <!-- Modem Status -->
                    <div class="col-md-6"> <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                            Modem Status
                        </div>
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5;"> <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> Modem Status
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small mb-4"> <div class="col-md-4"> <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Status</strong></span>
                                        <span id="su1_modstatus" class="text-success">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>IMSI</strong></span>
                                        <span id="su1_modimsi" class="small-text">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>IMEI</strong></span>
                                        <span id="su1_modimei" class="small-text">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Num</strong></span>
                                        <span id="su1_modnum">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Mod IP</strong></span>
                                        <span id="su1_modip">N/A</span>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSRP</strong></span>
                                        <span id="su1_rsrp">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSRQ</strong></span>
                                        <span id="su1_rsrq">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSSI</strong></span>
                                        <span id="su1_rssi">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>PCI</strong></span>
                                        <span id="su1_pci">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>SINR</strong></span>
                                        <span id="su1_sinr">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Tx Pwr</strong></span>
                                        <span id="su1_txpwr">N/A</span>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Mod Ver</strong></span>
                                        <span id="su1_modver">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>EMS Ver</strong></span>
                                        <span id="su1_emsversion">N/A</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                        <span><strong>LAN</strong></span>
                                        <span id="su1_lan">N/A</span>
                                    </div>
                                </div>
                            </div>

                            <hr class="my-3" style="border-top: 1px dotted black;" /> <div class="row text-center mt-3"> <div class="col-6 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">Modem Reset</button>
                                </div>
                                <div class="col-6 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">EMS Reset</button>
                                </div>
                                <div class="col-6 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">LAN Disable</button>
                                </div>
                                <div class="col-6 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">LAN Enable</button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Beam Status -->
                    <div class="col-md-6">
                        <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                            Beam Status
                        </div>
                        <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5; min-height: 300px;">
                            <h5 class="text-primary d-flex align-items-center mb-3">
                                <i class="fas fa-folder me-2"></i> Beam Status
                            </h5>
                            <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                            <div class="row text-secondary small mb-4">
                                <div class="col-md-4"> <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Beam ID</strong></span>
                                        <span id="su1_beam_id">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>RSRP</strong></span>
                                        <span id="su1_beam_rsrp">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>SNR</strong></span>
                                        <span id="su1_beam_snr">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>SSB</strong></span>
                                        <span id="su1_beam_ssb">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>PCI</strong></span>
                                        <span id="su1_beam_pci">N/A</span>
                                    </div>
                                </div>
                                <div class="col-md-4">                                     <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Ant. Array On/Off</strong></span>
                                        <button class="btn btn-success btn-sm" style="width: 50px;" id="su1_gumstick_onoff">N/A</button>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>AGC On/Off</strong></span>
                                        <button class="btn btn-success btn-sm" style="width: 50px;" id="su1_mvbx_rsagc_mode">N/A</button>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>AGC Level</strong></span>
                                        <span id="su1_mvbx_rsagc_threshold">N/A</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>AGC Input</strong></span>
                                        <span id="su1_agc_input_power">N/A</span>
                                    </div>
                                </div>
                                <div class="col-md-4"> <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Decoded count</strong></span>
                                        <span id="su1_decoded_ssb_count">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Decoded success</strong></span>
                                        <span id="su1_decoded_ssb_no_error_count">0</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span><strong>Decoded rate</strong></span>
                                        <span id="su1_decoded_rate">0.0 [%]</span>
                                    </div>
                                </div>
                            </div>

                            <hr class="my-3" style="border-top: 1px dotted black;" /> <div class="row mb-3 align-items-center">
                                <div class="col-md-3">
                                    <span><strong>gNB Type</strong></span>
                                </div>
                                <div class="col-md-9">
                                    <select id="su1_gNB_Vendor" class="form-select form-select-sm">
                                        <option value="Manual">Manual</option>
                                        <option value="Samsung">Samsung</option>
                                        <option value="Nokia">Nokia</option>
                                        <option value="Ericsson">Ericsson</option>
                                    </select>
                                </div>
                            </div>

                            <hr class="my-3" style="border-top: 1px dotted black;" /> <div class="row text-center mt-3"> <div class="col-md-4 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">RSRP Req</button>
                                </div>
                                <div class="col-md-4 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">PLL Relock</button>
                                </div>
                                <div class="col-md-4 mb-2">
                                    <button class="btn btn-secondary w-100" style="background-color: #6c757d; color: white; border-radius: 5px;">Beam Scan</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AOM Status -->
                <div class="col-md-12 mb-4 mt-2"> <div style="background-color: #547186; padding: 10px; border-radius: 5px; color: white; margin-bottom: 10px;">
                        AOM & mmWave
                    </div>
                    <div class="p-3 rounded shadow-sm" style="background-color: #f5f5f5;">
                        <h5 class="text-primary d-flex align-items-center mb-3">
                            <i class="fas fa-folder me-2"></i> AOM & mmWave
                        </h5>
                        <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />

                        <div class="row text-secondary small">
                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;"> <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> SISO RF
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> DL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL Input</strong></span>
                                                <span id="su1_dl_input_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ATT</strong></span>
                                                <span id="su1_dl_att_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ALC Level</strong></span>
                                                <span id="su1_dl_alc_level_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ALC On/Off</strong></span>
                                                <button class="btn btn-success btn-sm" style="width: 50px;" id="su1_dl_alc_onoff_siso">On</button>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> UL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL Output(EIRP)</strong></span>
                                                <span id="su1_ul_output_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL ATT</strong></span>
                                                <span id="su1_ul_att_siso">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO Level</strong></span>
                                                <span id="su1_ul_iso_level_siso">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-2">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL Front End ATT</strong></span>
                                            <span id="su1_mvbx_tx_gain_set_siso">NA</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL Front End ATT</strong></span>
                                            <span id="su1_mvbx_rx_gain_set_siso">NA</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL ISO ATT</strong></span>
                                            <span id="su1_ul_iso_att_siso">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> MIMO RF
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> DL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL Input</strong></span>
                                                <span id="su1_dl_input_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ATT</strong></span>
                                                <span id="su1_dl_att_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ALC Level</strong></span>
                                                <span id="su1_dl_alc_level_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>DL ALC On/Off</strong></span>
                                                <button class="btn btn-success btn-sm" style="width: 50px;" id="su1_dl_alc_onoff_mimo">On</button>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <h6 class="text-secondary d-flex align-items-center mb-2">
                                                <i class="fas fa-plus-circle me-1"></i> UL
                                            </h6>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL Output(EIRP)</strong></span>
                                                <span id="su1_ul_output_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL ATT</strong></span>
                                                <span id="su1_ul_att_mimo">N/A</span>
                                            </div>
                                            <div class="d-flex justify-content-between mb-2">
                                                <span><strong>UL ISO Level</strong></span>
                                                <span id="su1_ul_iso_level_mimo">N/A</span>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-2">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL Front End ATT</strong></span>
                                            <span id="su1_mvbx_tx_gain_set_mimo">NA</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL Front End ATT</strong></span>
                                            <span id="su1_mvbx_rx_gain_set_mimo">NA</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL ISO ATT</strong></span>
                                            <span id="su1_ul_iso_att_mimo">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> SISO OPTIC
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL LD</strong></span>
                                            <span id="su1_ld1_det_dl0_siso">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL PD</strong></span>
                                            <span id="su1_pd1_det_ul0_siso">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2 align-items-center">
                                            <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>DL LD Lower</strong></span>
                                            <span id="su1_ld1_det_dl0_siso_low">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2 align-items-center">
                                            <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>UL PD Lower</strong></span>
                                            <span id="su1_pd1_det_ul0_siso_low">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6 mb-4">
                                <div class="p-3 rounded shadow-sm" style="background-color: #e9ecef;">
                                    <h6 class="text-primary d-flex align-items-center mb-3">
                                        <i class="fas fa-folder me-2"></i> MIMO OPTIC
                                    </h6>
                                    <hr class="my-2" style="border-top: 1px dotted black; width: 100%; margin: 0 auto;" />
                                    <div class="row mt-3">
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>DL LD</strong></span>
                                            <span id="su1_ld2_det_dl1_mimo">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2">
                                            <span><strong>UL PD</strong></span>
                                            <span id="su1_pd2_det_ul1_mimo">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2 align-items-center">
                                            <i class="fas fa-circle text-success me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>DL LD Lower</strong></span>
                                            <span id="su1_ld2_det_dl1_mimo_low">N/A</span>
                                        </div>
                                        <div class="col-6 d-flex justify-content-between mb-2 align-items-center">
                                            <i class="fas fa-circle text-danger me-2" style="font-size: 0.7em;"></i>
                                            <span><strong>UL PD Lower</strong></span>
                                            <span id="su1_pd2_det_ul1_mimo_low">N/A</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>





            <div class="modal fade" id="duBeamControlModal" tabindex="-1" aria-labelledby="duBeamControlModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl"> <!-- Adjusted to extra large for more content -->
                    <div class="modal-content rounded-lg shadow-xl">
                        <div class="modal-header bg-gray-700 text-white rounded-t-lg">
                            <h5 class="modal-title text-xl font-bold" id="duBeamControlModalLabel">DU Beam Control</h5>
                            <button type="button" class="btn-close text-white" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body p-6 bg-gray-50">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Left Column -->
                                <div class="flex flex-col gap-6">
                                    <!-- Env Section -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">Env</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-gray-700">
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Ant. Array Ver</span>
                                                <span>03.15</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Temper Comp.</span>
                                                <span>Green</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Start Temper</span>
                                                <span>53.0℃</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Cur Temper</span>
                                                <span>39.0℃</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Compensation DL</span>
                                                <span>1dB</span>
                                            </div>
                                            <div class="flex flex-col">
                                                <span class="font-semibold">Compensation UL</span>
                                                <span>1dB</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- SISO Tx/Rx Gain Setting -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">SISO Tx/Rx Gain Setting</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="grid grid-cols-2 gap-4 text-sm text-gray-700">
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Front End</span>
                                                <span class="ml-auto">Tx Gain Idx <strong class="text-blue-600">9</strong></span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Tx Gain Idx</span>
                                                <span class="ml-auto">14</span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Mixer</span>
                                                <span class="ml-auto">Tx Gain Idx <strong class="text-blue-600">5</strong></span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Rx Gain Idx</span>
                                                <span class="ml-auto">5</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Beam Book (Placeholder for complex image) -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">Beam Book</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="w-full text-center py-8">
                                            <!-- This is a placeholder for the complex SVG/drawing from the image -->
                                            <!-- For now, we'll use a simple text or a placeholder image URL -->
                                            <img src="https://placehold.co/300x300/e0e0e0/333333?text=Beam+Book+Diagram" alt="Beam Book Diagram" class="mx-auto rounded-lg shadow-sm">
                                            <p class="text-sm text-gray-500 mt-2">[Orientation]</p>
                                            <p class="text-sm text-gray-500">0.000</p>
                                            <p class="text-sm text-gray-500">0.000</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Right Column -->
                                <div class="flex flex-col gap-6">
                                    <!-- MIMO Tx/Rx Gain Setting -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">MIMO Tx/Rx Gain Setting</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="grid grid-cols-2 gap-4 text-sm text-gray-700">
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Front End</span>
                                                <span class="ml-auto">Tx Gain Idx <strong class="text-blue-600">9</strong></span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Tx Gain Idx</span>
                                                <span class="ml-auto">14</span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Mixer</span>
                                                <span class="ml-auto">Tx Gain Idx <strong class="text-blue-600">5</strong></span>
                                            </div>
                                            <div class="flex items-center">
                                                <i class="fas fa-circle-dot mr-2 text-blue-500"></i>
                                                <span class="font-semibold">Rx Gain Idx</span>
                                                <span class="ml-auto">5</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Beam Info Table -->
                                    <div class="bg-white p-4 rounded-lg shadow-md overflow-x-auto">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">Beam Info</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <table class="min-w-full text-sm text-gray-700 border-collapse">
                                            <thead>
                                                <tr class="bg-gray-100 border-b border-gray-200">
                                                    <th class="py-2 px-3 text-left font-semibold">Rank</th>
                                                    <th class="py-2 px-3 text-left font-semibold">Beam ID</th>
                                                    <th class="py-2 px-3 text-left font-semibold">PCI</th>
                                                    <th class="py-2 px-3 text-left font-semibold">SSB</th>
                                                    <th class="py-2 px-3 text-left font-semibold">Energy</th>
                                                    <th class="py-2 px-3 text-left font-semibold">PSS</th>
                                                    <th class="py-2 px-3 text-left font-semibold">SNR[dB]</th>
                                                    <th class="py-2 px-3 text-left font-semibold">RSRP[dBm]</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="border-b border-gray-100 bg-yellow-100">
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">-0.00</td>
                                                    <td class="py-2 px-3">-990.00</td>
                                                </tr>
                                                <tr class="border-b border-gray-100">
                                                    <td class="py-2 px-3">2nd</td>
                                                    <td class="py-2 px-3">12</td>
                                                    <td class="py-2 px-3">313</td>
                                                    <td class="py-2 px-3">32</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">15.81</td>
                                                    <td class="py-2 px-3">-96.13</td>
                                                </tr>
                                                <tr class="border-b border-gray-100 bg-green-100">
                                                    <td class="py-2 px-3">3rd</td>
                                                    <td class="py-2 px-3">13</td>
                                                    <td class="py-2 px-3">313</td>
                                                    <td class="py-2 px-3">64</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">12.64</td>
                                                    <td class="py-2 px-3">-99.63</td>
                                                </tr>
                                                <tr class="border-b border-gray-100 bg-green-100">
                                                    <td class="py-2 px-3">4th</td>
                                                    <td class="py-2 px-3">47</td>
                                                    <td class="py-2 px-3">313</td>
                                                    <td class="py-2 px-3">16</td>
                                                    <td class="py-2 px-3">0</td>
                                                    <td class="py-2 px-3">1</td>
                                                    <td class="py-2 px-3">12.14</td>
                                                    <td class="py-2 px-3">-100.67</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- Beam Scan -->
                                    <div class="bg-white p-4 rounded-lg shadow-md">
                                        <h6 class="font-bold text-lg text-gray-800 mb-3">Beam Scan</h6>
                                        <hr class="my-2 border-t border-dotted border-gray-300" />
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700">
                                            <div class="flex flex-col gap-2">
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Beam Retry</span>
                                                    <button class="bg-green-500 text-white rounded-md px-3 py-1 text-xs">On</button>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Retry Count(1/5min)</span>
                                                    <span>9230</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">PLL Relock Count</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Center Frequency</span>
                                                    <span>27252000 [KHz]</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Beam Fix</span>
                                                    <div class="flex items-center">
                                                        <span class="mr-2">AUTO</span>
                                                        <i class="fas fa-arrow-right text-gray-400"></i>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flex flex-col gap-2">
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">API Log Level(2-4)</span>
                                                    <span>3</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">API AGC Sel(0-2)</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Sync Path Gain(0-15)</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">DU Time Advance(10.5us)</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">SU Time Advance(10.5us)</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center mt-4">
                                                    <span class="text-gray-500">[Actual]</span>
                                                    <span class="text-gray-500">[Adjust]</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Orientation</span>
                                                    <span>0</span>
                                                    <span>0</span>
                                                </div>
                                                <div class="flex justify-between items-center">
                                                    <span class="font-semibold">Tx/Rx</span>
                                                    <span>0</span>
                                                    <span>0</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer bg-gray-100 rounded-b-lg p-4 flex justify-end space-x-3">
                            <button type="button" class="bg-gray-500 text-white rounded-md px-4 py-2 shadow-sm hover:bg-gray-600 transition duration-300 ease-in-out" data-bs-dismiss="modal">Cancel</button>
                            <button type="button" class="bg-blue-600 text-white rounded-md px-4 py-2 shadow-sm hover:bg-blue-700 transition duration-300 ease-in-out">Set Mode</button>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Confirm Reset Modal -->
            <div class="modal fade" id="confirmResetModal" tabindex="-1" aria-labelledby="confirmResetModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-sm modal-dialog-centered">
                    <div class="modal-content rounded-lg shadow-xl p-4 text-center">
                        <div class="modal-header border-b-0 pb-0 flex justify-center">
                            <h5 class="modal-title sr-only" id="confirmResetModalLabel">Reset Confirmation</h5>
                            <button type="button" class="btn-close absolute top-3 right-3 text-gray-500 hover:text-gray-700" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body pt-0">
                            <div class="flex justify-center mb-4">
                                <i class="fas fa-question-circle text-blue-400 text-5xl"></i>
                            </div>
                            <p class="text-lg text-gray-700 mb-6">Do you want to DU Reset it?</p>
                            <div class="flex justify-center space-x-4">
                                <button
                                    type="button"
                                    class="btn btn-lg"
                                    style="width: 120px; background-color: #d3dce6;"
                                    data-bs-dismiss="modal"
                                    onclick="handleResetConfirmation(true)">
                                    Ok
                                </button>

                                <button type="button" class="bg-gray-400 text-gray-800 rounded-md px-6 py-2 shadow-sm hover:bg-gray-500 transition duration-300 ease-in-out" data-bs-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>




        </div>

        <!-- Packet Info Content -->
        <div id="packet_info_display" style="display: none; background-color: #D2D7D9; min-height: 100vh; padding: 20px;">
            <div style="background-color: #F0F1F2; padding: 1rem; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); margin-bottom: 0.5rem;"> 
                <div class="row align-items-center mb-2"> 
                    <div class="col-md-3">
                        <small class="text-muted">Site ID :</small> Kor-FRTek-001
                    </div>
                    <div class="col-md-3 text-center">
                        <small class="text-muted">Site Name :</small> Korea FRTek RF-EMS
                    </div>
                    <div class="col-md-3 text-center">
                        <small class="text-muted">S/N :</small> <span id="conserialnum_header_packet">N/A</span>
                    </div>
                    <div class="col-md-3 text-end">
                        <small class="text-muted">EMS ver :</small> <span id="emsversion2_packet">N/A</span>
                    </div>
                </div>
            </div>
            
            <hr class="my-3" style="border-top: 1px dotted #000000;"> 
            
            <!-- Main Packet Info Card -->
            <div style="background-color: #F0F1F2; padding: 1.5rem; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);">
                <div class="d-flex justify-content-between align-items-center mb-3"> 
                    <div style="font-size: 1.2rem; font-weight: bold; color: #343a40; background-color: #6c757d; color: white; padding: 8px 16px; border-radius: 4px;">
                        Packet Info
                    </div>
                    <button class="btn btn-secondary btn-sm">Clear</button>
                </div>

                <!-- SU Packet Send / Success Count Section -->
                <div class="mb-3">
                    <div class="d-flex align-items-center mb-2">
                        <i class="bi bi-folder me-2"></i>
                        <span style="font-weight: bold; color: #343a40;">SU Packet Send / Success Count</span>
                    </div>
                    
                    <!-- Data Table -->
                    <div class="table-responsive">
                        <table class="table table-bordered" style="background-color: white;">
                            <thead>
                                <tr>
                                    <th style="background-color: #f8f9fa; text-align: center;">CASCADE</th>
                                    <th style="background-color: #f8f9fa; text-align: center;">#1</th>
                                    <th style="background-color: #f8f9fa; text-align: center;">#2</th>
                                    <th style="background-color: #f8f9fa; text-align: center;">#3</th>
                                    <th style="background-color: #f8f9fa; text-align: center;">#4</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="text-align: center; font-weight: bold;">PATH#0</td>
                                    <td style="text-align: center; font-weight: bold;" id="packet_cascade1">N/A</td>
                                    <td style="text-align: center; font-weight: bold;" id="packet_cascade2">N/A</td>
                                    <td style="text-align: center; font-weight: bold;" id="packet_cascade3">N/A</td>
                                    <td style="text-align: center; font-weight: bold;" id="packet_cascade4">N/A</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sync Module Content -->
        <div id="sync_module_display" style="display: none; background-color: #D2D7D9; min-height: 100vh; padding: 20px;">
            <div style="background-color: #F0F1F2; padding: 1rem; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075); margin-bottom: 0.5rem;"> 
                <div class="row align-items-center mb-2"> 
                    <div class="col-md-3">
                        <small class="text-muted">Site ID :</small> Kor-FRTek-001
                    </div>
                    <div class="col-md-3 text-center">
                        <small class="text-muted">Site Name :</small> Korea FRTek RF-EMS
                    </div>
                    <div class="col-md-3 text-center">
                        <small class="text-muted">S/N :</small> <span id="conserialnum_sync2">N/A</span>
                    </div>
                    <div class="col-md-3 text-end">
                        <small class="text-muted">EMS ver :</small> <span id="emsversion2_sync2">N/A</span>
                    </div>
                </div>
            </div>
            
            <hr class="my-3" style="border-top: 1px dotted #000000;"> 
            
            <!-- Main Sync Module Card -->
            <div style="background-color: #F0F1F2; padding: 1.5rem; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);">
                <div class="d-flex justify-content-between align-items-center mb-3"> 
                    <div style="font-size: 1.2rem; font-weight: bold; color: #343a40; background-color: #6c757d; color: white; padding: 8px 16px; border-radius: 4px;">
                        Sync Module
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-secondary btn-sm">3Gpp Format Form</button>
                        <button class="btn btn-secondary btn-sm">Slot Format Form</button>
                        <button class="btn btn-secondary btn-sm">3Gpp Format Load</button>
                        <button class="btn btn-secondary btn-sm">Slot Format Load</button>
                        <button class="btn btn-secondary btn-sm">Set Mode</button>
                    </div>
                </div>

                <!-- Slot Format Section -->
                <div class="mb-4">
                    <div class="d-flex align-items-center mb-2" style="cursor: pointer;" onclick="toggleSlotFormat()">
                        <i class="fas fa-chevron-right me-2" id="slot-format-icon"></i>
                        <span style="font-weight: bold; color: #343a40;">Slot Format</span>
                    </div>
                    <div id="slot-format-content" style="display: none;">
                        <div class="table-responsive">
                            <table class="table table-bordered" style="font-size: 0.8rem; text-align: center;">
                                <tbody>
                                    {% for row in range(0, 160, 20) %}
                                    <tr>
                                      <!-- 설명 셀: Slot No / Slot Format -->
                                      <td class="align-middle" style="font-weight: bold; white-space: nowrap; width: 100px; line-height: 1.8;">
                                        Slot No<br>Slot Format
                                      </td>
                                  
                                      <!-- 슬롯 번호 + 입력창 (20칸) -->
                                      {% for col in range(row, row + 20) %}
                                      <td>
                                        <div style="font-weight: bold; margin-bottom: 6px;">{{ col }}</div>
                                        <input id="slot_format_{{ col }}" type="text" class="form-control form-control-sm mt-1" style="height: 15px; font-size: 0.5rem; padding: 1px 3px; text-align: center;" value="">
                                      </td>
                                      {% endfor %}
                                    </tr>
                                    {% endfor %}
                                  </tbody>
                                  
                              </table>
                              
                        </div>
                    </div>
                </div>

                                <!-- Synchronization Parameters -->
                <div class="sync-container">
                    <div class="row gx-4">
                        <!-- Channel 1 -->
                        <div class="col-md-3 px-2">
                            <div class="sync-card">
                                <div class="sync-label">TTG CTRL #1</div>
                                <div id="ttg_ctrl_1" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">RTG CTRL #1</div>
                                <div id="rtg_ctrl_1" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC Delay #1</div>
                                <div id="tsync_delay_1" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC OUT SEL #1</div>
                                <select id="tsync_out_sel_1" class="form-select form-select-sm mb-2">
                                    <option value="0">AUTO</option>
                                    <option value="1">DL(L)</option>
                                    <option value="2">UL(H)</option>
                                </select>

                                <div class="sync-label">TSYNC OUT MODE #1</div>
                                <select id="tsync_out_mode_1" class="form-select form-select-sm">
                                    <option value="0">NORMAL</option>
                                    <option value="1">INVERT</option>
                                </select>
                            </div>
                        </div>

                        <!-- Channel 2 -->
                        <div class="col-md-3 px-2">
                            <div class="sync-card">
                                <div class="sync-label">TTG CTRL #2</div>
                                <div id="ttg_ctrl_2" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">RTG CTRL #2</div>
                                <div id="rtg_ctrl_2" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC Delay #2</div>
                                <div id="tsync_delay_2" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC OUT SEL #2</div>
                                <select id="tsync_out_sel_2" class="form-select form-select-sm mb-2">
                                    <option value="0">AUTO</option>
                                    <option value="1">DL(L)</option>
                                    <option value="2">UL(H)</option>
                                </select>

                                <div class="sync-label">TSYNC OUT MODE #2</div>
                                <select id="tsync_out_mode_2" class="form-select form-select-sm">
                                    <option value="0">NORMAL</option>
                                    <option value="1">INVERT</option>
                                </select>
                            </div>
                        </div>

                        <!-- Channel 3 -->
                        <div class="col-md-3 px-2">
                            <div class="sync-card">
                                <div class="sync-label">TTG CTRL #3</div>
                                <div id="ttg_ctrl_3" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">RTG CTRL #3</div>
                                <div id="rtg_ctrl_3" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC Delay #3</div>
                                <div id="tsync_delay_3" class="form-control form-control-sm mb-2 text-end" style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A [us]</div>

                                <div class="sync-label">TSYNC OUT SEL #3</div>
                                <select id="tsync_out_sel_3" class="form-select form-select-sm mb-2">
                                    <option value="0">AUTO</option>
                                    <option value="1">DL(L)</option>
                                    <option value="2">UL(H)</option>
                                </select>

                                <div class="sync-label">TSYNC OUT MODE #3</div>
                                <select id="tsync_out_mode_3" class="form-select form-select-sm">
                                    <option value="0">NORMAL</option>
                                    <option value="1">INVERT</option>
                                </select>
                            </div>
                        </div>

                        <!-- SSB MU + TDD Rate -->
                        <div class="col-md-3 px-2">
                            <div class="sync-card">
                                <div class="sync-label">SSB MU</div>
                                <select id="ssb_mu" class="form-select form-select-sm mb-2">
                                    <option value="120">120K</option>
                                    <option value="240">240K</option>
                                </select>

                                <div class="sync-label">TDD Rate</div>
                                <select id="tdd_rate" class="form-select form-select-sm">
                                    <option value="0">4:1</option>
                                    <option value="1">DL</option>
                                    <option value="2">UL</option>
                                    <option value="3">CUS</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Frequency Bar -->
                <div class="frequency-bar" style="margin-top: 1rem;">
                    <div>Frequency &nbsp;&nbsp; <div id="TDD_Freq2" class="form-control form-control-sm" style="display: inline-block; width: 120px; margin-left: 10px; background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A</div> &nbsp; [MHz]</div>
                    <div>ARFCN &nbsp;&nbsp; <div id="TDD_Arfcn2" class="form-control form-control-sm" style="display: inline-block; width: 100px; margin-left: 10px; background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 0.375rem 0.75rem; font-size: 0.875rem;">N/A</div></div>
                </div>

                <!-- Slot 3gpp Format Section -->
                <div class="mb-4" style="margin-top: 2rem;">
                    <div class="d-flex align-items-center mb-2" style="cursor: pointer;" onclick="toggleSlot3gppFormat()">
                        <i class="fas fa-chevron-right me-2" id="slot-3gpp-format-icon"></i>
                        <span style="font-weight: bold; color: #343a40;">Slot 3gpp Format</span>
                    </div>
                    <div id="slot-3gpp-format-content" style="display: none;">
                        <div class="table-responsive">
                            <table border="1" style="border-collapse: collapse; font-size: 0.8rem; background-color: white; width: 100%;">
                                <!-- Header -->
                                <thead>
                                    <tr>
                                        <th style="background-color: #f8f9fa; text-align: center; width: 40px; border: 1px solid #dee2e6;"></th>
                                        <!-- Column headers 0~13 -->
                                        {% for col in range(14) %}
                                        <th style="background-color: #f8f9fa; text-align: center; width: 40px; border: 1px solid #dee2e6;">{{ col }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>

                                <!-- Body -->
                                <tbody>
                                    {% for row in range(56) %}
                                    <tr>
                                        <!-- Row header -->
                                        <td style="text-align: center; font-weight: bold; border: 1px solid #dee2e6;">{{ row }}</td>

                                        <!-- Dropdowns -->
                                        {% for col in range(14) %}
                                        <td style="text-align: center; border: 1px solid #dee2e6;">
                                            <select id="slot_3gpp_format_{{ row }}_{{ col }}" class="slot-3gpp-format-select" data-row="{{ row }}" data-col="{{ col }}" style="font-size: 0.75rem; padding: 2px 4px; width: 100%; border: none; background: transparent;">
                                                <option value="0">D</option>
                                                <option value="1">U</option>
                                                <option value="2">F</option>
                                            </select>
                                        </td>
                                        {% endfor %}
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- F Mode Section -->
                <div class="mb-4" style="margin-top: 2rem;">
                    <div class="frequency-bar">
                        <div>F Mode &nbsp;&nbsp; <select id="F_Mode" class="form-select form-select-sm" style="display: inline-block; width: 120px; margin-left: 10px;">
                            <option value="0">DL</option>
                            <option value="1">UL</option>
                        </select></div>
                    </div>
                </div>
            </div>
        </div>



    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/socket.io-client@4.0.1/dist/socket.io.js"></script>

    <script>
        // ✅ 통합된 JavaScript
        let socket = io();

        // 1) 어떤 페이지/모달에서 어떤 패킷을 돌릴지 선언 (원하면 키만 추가)
        //    값이 true면 1초 폴링, false/null이면 안 돌림
        const PAGE_POLL = {
            dashboard: { update: true,  tdd: false }, // 대시보드: update_status만 (네비게이션, 기본 상태)
            su1:       { update: true, tdd: false }, // SU #1: update_status 폴링 (SU1 패킷 요청)
            //alarms:    { update: true,  tdd: false }, // 알람 페이지: update_status만 (알람 상태)
            tddview:   { update: true, tdd: true  }, // sync module 페이지지
            packet_info: { update: true, tdd: false }, // Packet Info: update_status만
            //none:      { update: false, tdd: false }, // 폴링 없음 (정보만 표시)
            // 필요시 추가...
        };

        const MODAL_POLL = {
            // TDD 관련 모달들
            '#beaminfo2': { update: false, tdd: false }, // 빔 정보 모달: 둘 다 (빔 정보 + TDD 설정)
            '#beamInfoModal': { update: true, tdd: false }, // DU Beam Control 모달: 폴링 없음
            
            // 상태/설정 관련 모달들
            '#alarmLevelModal': { update: false, tdd: false }, // 알람 레벨 모달: update_status만
            '#alarmHistoryModal': { update: false, tdd: false }, // 알람 히스토리 모달: update_status만
            '#userMgmtModal': { update: false, tdd: false }, // 사용자 관리 모달: update_status만
            '#alarmMaskModal': { update: true, tdd: false }, // 알람 마스크 모달: update_status만
            
            // Initial Setup 모달들
            '#duInitialSetupModal': { update: false, tdd: false }, // Initial Setup: Step 0/7 (메인 시작 모달)
            '#usimCheckModal': { update: false, tdd: false }, // Initial Setup: Step 1/7 (USIM 체크)
            '#apnSetupModal': { update: false, tdd: false }, // Initial Setup: Step 2/7 (APN 설정)
            '#BtapnSetupModal': { update: false, tdd: false }, // Initial Setup: Step 3/7 (B타입 APN 설정)
            '#DeviceSetupModal': { update: false, tdd: false }, // Initial Setup: Step 4/7 (디바이스 설정)
            '#AgcSetupModal': { update: true, tdd: true }, // Initial Setup: Step 5/7 (AGC 설정) - update_status + tdd_status
            '#InitialSetupModal': { update: true, tdd: false }, // Initial Setup: Step 6/7 (초기 설정)
            '#SuSetupModal': { update: true, tdd: false }, // Initial Setup: Step 7/7 (SU 설정)
            '#FinalSetupModal': { update: false, tdd: false }, // Initial Setup: 완료 모달
            '#duHiddenModal': { update: true, tdd: false },
            '#duBeamControlModal': { update: false, tdd: false },
            '#confirmResetModal': { update: false, tdd: false },
            '#infoModal': { update: false, tdd: false },
            // 필요시 추가...
        };

        // 2) 타이머 매니저 (한 종류당 타이머 1개만 유지)
        const PollManager = (() => {
            const timers = {};
            const start = (key, fn, interval=1000) => {
                if (timers[key]) return;
                fn(); // 즉시 1회
                timers[key] = setInterval(fn, interval);
            };
            const stop = (key) => {
                if (!timers[key]) return;
                clearInterval(timers[key]);
                delete timers[key];
            };
            return { start, stop };
        })();

        // 3) 활성 소스(페이지/모달) 집합으로 필요 여부를 계산
        const active = { update: new Set(), tdd: new Set() };
        let currentPage = null;
        let currentPageKeys = { update: null, tdd: null }; // 현재 페이지가 등록한 소스

        // TX 박스 깜빡임 함수
        function pulseTxBox(onDuration = 200) {
            // ON: TX 박스는 초록색으로
                    document.querySelectorAll('.tx-box').forEach(txbox => {
            txbox.style.backgroundColor = 'yellow';  // TX는 노란색 (RX와 동일)
            txbox.style.color = 'black';            // 텍스트는 검정색
        });
            // OFF: 원래색 복원
            setTimeout(() => {
                document.querySelectorAll('.tx-box').forEach(txbox => {
                    // txBoxState가 초기화되지 않았으면 기본값 사용
                    const originalBg = txBoxState.originalBg || '#6c757d';
                    const originalColor = txBoxState.originalColor || 'white';
                    txbox.style.backgroundColor = originalBg;
                    txbox.style.color = originalColor;
                });
            }, onDuration);
        }

        function reconcile() {
            console.log(`🔄 reconcile called. Active sets:`, { update: [...active.update], tdd: [...active.tdd] });
            
            if (active.update.size > 0) {
                PollManager.start('update', () => {
                    // DU(0x30) vs SU1(0x40) 페이로드 선택
                    let payload = { rcv_main_sys: 0x30 }; // 기본: DU 상태
                    const labels = [...active.update];
                    console.log(`📤 Polling update_status. Labels:`, labels);
                    
                    if (labels.length) {
                        const label = labels[0];
                        if (label.startsWith('page:')) {
                            const key = label.slice(5);
                            if (key === 'su1') {
                                payload = { rcv_main_sys: 0x40 };
                                console.log(`🚀 SU1 패킷 요청:`, payload);
                            } else if (key === 'dashboard') {
                                payload = { rcv_main_sys: 0x30 };
                                console.log(`🚀 DU 패킷 요청:`, payload);
                            }
                        }
                    }
                    socket.emit('request_update_status', payload);
                    pulseTxBox();  // 요청 시점에 TX 깜빡
                }, 1000);
            } else {
                PollManager.stop('update');
                console.log(`⏹️ Stopped update polling`);
            }
            if (active.tdd.size > 0) {
                PollManager.start('tdd', () => {
                    socket.emit('request_tdd_status');
                    pulseTxBox();  // 요청 시점에 TX 깜빡
                }, 1000);
            } else {
                PollManager.stop('tdd');
            }
        }

        // 4) 페이지 전환 처리: PAGE_POLL에 따라 active 집합 갱신
        function enterPage(pageKey) {
            console.log(`🔀 enterPage called with: ${pageKey}`);
            currentPage = pageKey;

            // 이전 페이지 기여 제거
            if (currentPageKeys.update) {
                active.update.delete(currentPageKeys.update);
            }
            if (currentPageKeys.tdd) {
                active.tdd.delete(currentPageKeys.tdd);
            }
            currentPageKeys = { update: null, tdd: null };

            const cfg = PAGE_POLL[pageKey] || {};
            console.log(`📋 PAGE_POLL config for ${pageKey}:`, cfg);
            
            if (cfg.update) {
                currentPageKeys.update = `page:${pageKey}`;
                active.update.add(currentPageKeys.update);
                console.log(`✅ Added update polling for ${pageKey}`);
            }
            if (cfg.tdd) {
                currentPageKeys.tdd = `page:${pageKey}`;
                active.tdd.add(currentPageKeys.tdd);
                console.log(`✅ Added tdd polling for ${pageKey}`);
            }
            
            console.log(`🔍 Current active sets:`, { update: [...active.update], tdd: [...active.tdd] });
            reconcile();
        }

        // 5) 모달 열림/닫힘 처리: MODAL_POLL에 따라 active 집합 갱신
        function modalOpened(selector) {
            const cfg = MODAL_POLL[selector] || {};
            
            // 모달이 열릴 때 현재 페이지의 폴링 일시 중지
            if (currentPageKeys.update) {
                active.update.delete(currentPageKeys.update);
            }
            if (currentPageKeys.tdd) {
                active.tdd.delete(currentPageKeys.tdd);
            }
            
            // 모달 폴링 시작
            if (cfg.update) {
                active.update.add(`modal:${selector}`);
            }
            if (cfg.tdd) {
                active.tdd.add(`modal:${selector}`);
            }
            
            reconcile();
        }
        function modalClosed(selector) {
            // 모달 폴링 중지
            active.update.delete(`modal:${selector}`);
            active.tdd.delete(`modal:${selector}`);
            
            // 모달이 닫힐 때 원래 페이지의 폴링 다시 시작
            if (currentPageKeys.update) {
                active.update.add(currentPageKeys.update);
            }
            if (currentPageKeys.tdd) {
                active.tdd.add(currentPageKeys.tdd);
            }
            
            reconcile();
        }

        // 6) 초기 페이지 지정 + 네비게이션/모달 훅 연결
        document.addEventListener('DOMContentLoaded', () => {
            // 초기 페이지 설정: 자동 폴링 시작하지 않음 (사용자가 페이지 클릭할 때만 시작)
            // const activeContent = document.querySelector('.content-section.active') || 
            //                      document.querySelector('#du_content_display');
            // if (activeContent && activeContent.id === 'du_content_display') {
            //     enterPage('dashboard'); // DU 메인화면이 활성화되어 있으면 update_status 폴링 시작
            // }

            // data-page-key 이벤트 리스너 제거 (showScreen에서 enterPage 호출로 통일)

            // Bootstrap 모달 이벤트 리스너 연결
            const modals = [
                'tddModal', 'statusModal', 'alarmLevelModal', 'alarmHistoryModal', 
                'userMgmtModal', 'beaminfo2', 'beamInfoModal', 'alarmMaskModal',
                'duInitialSetupModal', 'usimCheckModal', 'apnSetupModal', 'BtapnSetupModal',
                'DeviceSetupModal', 'AgcSetupModal', 'InitialSetupModal', 'SuSetupModal',
                'FinalSetupModal', 'duHiddenModal', 'duBeamControlModal', 'confirmResetModal', 'infoModal'
            ];

            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.addEventListener('shown.bs.modal',  () => modalOpened(`#${modalId}`));
                    modal.addEventListener('hidden.bs.modal', () => modalClosed(`#${modalId}`));
                }
            });
        });

        // 탭 비활성화되면 모두 정지 / 복귀 시 현재 활성 소스로 재가동
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                PollManager.stop('update');
                PollManager.stop('tdd');
            } else {
                reconcile(); // active 집합 기준으로 재기동
            }
        });

        let autoCloseTimeout;
        let timerInterval;
        let usimTimerInterval;
        let userStarted = false;
        let userModified = false;
        let savedVendor = null;
        let gNB_VendorElement;
        let timer = 10;
        let timeLeft = 300; // 초기 USIM 타이머 값 (초)
        let userClicked = false;

        // 전역 변수로 현재 알람 상태 저장 (초기값 설정)
        let currentDuAlarmStatus = 0; // 0: 정상 (초록색), 1: 알람 (빨간색) - DU 기본값을 0 (초록색)로 설정
        

        // Send_Packet 데이터 정의 (전역 변수로 선언)
        const sendPacketData = {
            'Rcv_Main_Sys': 0x30, // 1 byte
            'Rcv_Sub_Sys': 0x00,  // 1 byte
            'Rcv_Object': 0x10,   // 1 byte
            'Trans_Main_Sys': 0x40, // 1 byte
            'Trans_Sub_Sys': 0x00,  // 1 byte
            'Trans_Object': 0x10,   // 1 byte
            'CMD': 0x00, // 1 byte
            'EQUIP_TYPE': 0x00, // 1 byte
            'RESERVED': 0x0000, // 2 bytes (Uint16 equivalent for 2 bytes)
            'SubData_Size': 0x0000, // 2 bytes (unsigned short 0)
            // Control
            'InitCheckNum': Array(4).fill(0x00), // 4 bytes
            'ConMuFlag': Array(24).fill(0x00), // 24 bytes
            'ConSysTime': Array(7).fill(0x00), // 7 bytes
            'RptMakerCode': 0x00, // 1 byte
            'SysTemperHighLvl': 0x00, // 1 byte
            'SysTemperLowLvl': 0x00, // 1 byte
            'SubInitCheckNum': 0x00, // 1 byte
            'DebugMode': 0x00, // 1 byte
            'SuEnableInfo': Array(12).fill(0x00), // 12 bytes
            'MaskMuAlarm': Array(12).fill(0x00), // 12 bytes
            'MaskSuLinkFail': Array(12).fill(0x00), // 12 bytes
            'MaskSuSumAlarm': Array(12).fill(0x00), // 12 bytes
            'MaskSuRptAlarm': Array(12).fill(0x00), // 12 bytes
            'ConEmsModemReset': 0x00, // 1 byte
            'DownloadPath_GuiOrEms': 0x00, // 1 byte
            'PollingTime': 0x0000, // 2 bytes
            'ApiInitMode': 0x00, // 1 byte
            'AttTestMode': 0x00, // 1 byte
            'SuId': 0x00, // 1 byte
            'DL_UL_TEST': 0x00, // 1 byte
            'LocalInfo': Array(60).fill(0x00), // 60 bytes
            'SuOpticalEnStatus': 0x00, // 1 byte
            'PreStaAlarm': Array(12).fill(0x00), // 12 bytes
            'Mu_Su_Buadrate': 0x00, // 1 byte
            'ModemOnOff': 0x00, // 1 byte
            'RsrpOffset': 0x00, // 1 byte
            // RF 제어
            'ALC_DL0_SISO_Mode': 0x00, // 1 byte
            'ALC_DL1_MIMO_Mode': 0x00, // 1 byte
            'ALC_UL0_SISO_Mode': 0x00, // 1 byte
            'ALC_UL1_MIMO_Mode': 0x00, // 1 byte
            'ALC_DL0_SISO_Level': 0x0000, // 2 bytes
            'ALC_DL1_MIMO_Level': 0x0000, // 2 bytes
            'ALC_UL0_SISO_Level': 0x0000, // 2 bytes
            'ALC_UL1_MIMO_Level': 0x0000, // 2 bytes
            'SISO_RF_DET_DL0_OUT_High': 0x0000, // 2 bytes
            'SISO_RF_DET_UL0_OUT_High': 0x0000, // 2 bytes
            'MIMO_RF_DET_DL1_OUT_High': 0x0000, // 2 bytes
            'MIMO_RF_DET_UL1_OUT_High': 0x0000, // 2 bytes
            'LD1_DET_DL0_SISO_Low': 0x0000, // 2 bytes
            'LD2_DET_DL1_MIMO_Low': 0x0000, // 2 bytes
            'PD1_DET_UL0_SISO_Low': 0x0000, // 2 bytes
            'PD2_DET_UL1_MIMO_Low': 0x0000, // 2 bytes
            'LD3_DET_DL0_SISO_Low': 0x0000, // 2 bytes
            'LD4_DET_DL1_MIMO_Low': 0x0000, // 2 bytes
            'PD3_DET_UL0_SISO_Low': 0x0000, // 2 bytes
            'PD4_DET_UL1_MIMO_Low': 0x0000, // 2 bytes
            'LD1_DET_DL0_SISO_Offset': 0x0000, // 2 bytes
            'LD2_DET_DL1_MIMO_Offset': 0x0000, // 2 bytes
            'PD1_DET_UL0_SISO_Offset': 0x0000, // 2 bytes
            'PD2_DET_UL1_MIMO_Offset': 0x0000, // 2 bytes
            'LD3_DET_DL0_SISO_Offset': 0x0000, // 2 bytes
            'LD4_DET_DL1_MIMO_Offset': 0x0000, // 2 bytes
            'PD3_DET_UL0_SISO_Offset': 0x0000, // 2 bytes
            'PD4_DET_UL1_MIMO_Offset': 0x0000, // 2 bytes
            'DU_DlManualAtten_SISO': 0x00, // 1 byte
            'DU_DlSubAtten_SISO': 0x00, // 1 byte
            'DU_DlManualAtten_MIMO': 0x00, // 1 byte
            'DU_DlSubAtten_MIMO': 0x00, // 1 byte
            'DU_UlManualAtten_SISO': 0x00, // 1 byte
            'DU_UlSubAtten_SISO': 0x00, // 1 byte
            'DU_UlIsoAtten_SISO': 0x00, // 1 byte
            'DU_UlManualAtten_MIMO': 0x00, // 1 byte
            'DU_UlSubAtten_MIMO': 0x00, // 1 byte
            'DU_UlIsoAtten_MIMO': 0x00, // 1 byte
            'SU_DlManualAtten_SISO': 0x00, // 1 byte
            'SU_DlSubAtten_SISO': 0x00, // 1 byte
            'SU_DlManualAtten_MIMO': 0x00, // 1 byte
            'SU_DlSubAtten_MIMO': 0x00, // 1 byte
            'SU_UlManualAtten_SISO': 0x00, // 1 byte
            'SU_UlSubAtten_SISO': 0x00, // 1 byte
            'SU_UlManualAtten_MIMO': 0x00, // 1 byte
            'SU_UlSubAtten_MIMO': 0x00, // 1 byte
            'LicPassword': 0x0000, // 2 bytes
            'DL_OutputOffset_SISO': 0x0000, // 2 bytes
            'DL_OutputOffset_MIMO': 0x0000, // 2 bytes
            'UL_InputOffset_SISO': 0x0000, // 2 bytes
            'UL_InputOffset_MIMO': 0x0000, // 2 bytes
            'SU_UlCasSisoAtten_SISO': 0x00, // 1 byte
            'SU_UlCasSisoAtten_MIMO': 0x00, // 1 byte
            'SdOnOffSiso': 0x00, // 1 byte
            'SdOnOffMimo': 0x00, // 1 byte
            'DuFixBeam': 0x00, // 1 byte
            'Reserved4_Local': Array(7).fill(0x00), // 7 bytes
            'Dl_Siso_Att_Test': 0x0000, // 2 bytes
            'Dl_Mimo_Att_Test': 0x0000, // 2 bytes
            'Ul_Siso_Att_Test': 0x0000, // 2 bytes
            'Ul_Mimo_Att_Test': 0x0000, // 2 bytes
            'Reserved10p1': Array(32).fill(0x00), // 32 bytes
            // MVBX 제어
            'Mvbx_BeamSet': 0x00, // 1 byte
            'InstallUseMode': 0x00, // 1 byte
            'Reserved14': 0x0000, // 2 bytes
            'Mvbx_FpagImageSize': 0x00000000, // 4 bytes
            'Mvbx_FpagImageStartAddressOffset': 0x00000000, // 4 bytes
            'Reserved15': Array(16).fill(0x00), // 16 bytes
            'FpgaWriteAddress': 0x0000, // 2 bytes
            'FpgaWriteData': 0x0000, // 2 bytes
            'FpgaReadAddress': 0x0000, // 2 bytes
            'FpgaReadData': 0x0000, // 2 bytes
            'Reserved31': Array(12).fill(0x00), // 12 bytes
            'Mvbx_TddSignalMode': 0x00, // 1 byte
            'Mvbx_RsAgcThreshold': 0x00, // 1 byte
            'Mvbx_RsAgcMode': 0x00, // 1 byte
            'Reserved32': 0x00, // 1 byte
            'Mvbx_Mv2853TxGainSiso': 0x00, // 1 byte
            'Mvbx_Mv2853RxGainSiso': 0x00, // 1 byte
            'Mvbx_Mv2850TxGainSiso': 0x00, // 1 byte
            'Mvbx_Mv2850RxGainSiso': 0x00, // 1 byte
            'Mvbx_Mv2853TxGainMimo': 0x00, // 1 byte
            'Mvbx_Mv2853RxGainMimo': 0x00, // 1 byte
            'Mvbx_Mv2850TxGainMimo': 0x00, // 1 byte
            'Mvbx_Mv2850RxGainMimo': 0x00, // 1 byte
            'Mvbx_TxGainSetSiso': 0x00, // 1 byte
            'Mvbx_RxGainSetSiso': 0x00, // 1 byte
            'Mvbx_TxGainSetMiso': 0x00, // 1 byte
            'Mvbx_RxGainSetMiso': 0x00, // 1 byte
            'beam_info_pss_type': 0x00000000, // 4 bytes
            'beam_info_adc_sel': 0x00000000, // 4 bytes
            'beam_info_spg': 0x00000000, // 4 bytes
            'beam_info_ssbIdx': 0x00000000, // 4 bytes
            'beam_info_beamID': 0x0000, // 2 bytes
            'Reserved34': 0x0000, // 2 bytes
            'beam_info_energy': 0x00000000, // 4 bytes
            'beam_info_rsrp': 0x00000000, // 4 bytes
            'beam_info_snr': 0x00000000, // 4 bytes
            'PllSet': 0x00000000, // 4 bytes
            'IsoMeasSet': 0x00, // 1 byte
            'SuGsOnOff': 0x00, // 1 byte
            'SuIsoAttSet': 0x00, // 1 byte
            'GumStick_OnOff': 0x00, // 1 byte
            'BeamScan_OnOff': 0x00, // 1 byte
            'IsoDetectMode': 0x00, // 1 byte
            'ApiLogLevel': 0x00, // 1 byte
            'ApiAdcSel': 0x00, // 1 byte
            'ApiSyncPathGain': 0x00, // 1 byte
            'ApiDuTimeAdvance': 0x00, // 1 byte
            'ApiSuTimeAdvance': 0x00, // 1 byte
            'TemperCompensationMode': 0x00, // 1 byte
            'ApiVenderFreq': 0x00000000, // 4 bytes
            'ApiGsOutputPowerOffsetSiso': 0x0000, // 2 bytes
            'BeamAntSelect': 0x00, // 1 byte
            'DecodeRecoveryFuncOnOff': 0x00, // 1 byte
            'gNB_ScanOnOff': 0x00, // 1 byte
            'Reserved33': 0x00, // 1 byte
            'ApiGsOutputPowerOffsetMimo': 0x0000, // 2 bytes
            'gNB_Vendor': 0x00, // 1 byte
            'Gs_Gain_Siso': 0x00, // 1 byte
            'Gs_Gain_Mimo': 0x00, // 1 byte
            'ApiInitRetryMode': 0x00, // 1 byte
            'Orientation': 0x0000, // 2 bytes
            'Tilt': 0x0000, // 2 bytes
            'GS_AttenOffset_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_UL_Mimo': 0x00, // 1 byte
            'ConSerialNum': Array(16).fill(0x00), // 16 bytes
            'AomTemperConperMode': 0x00, // 1 byte
            'GS_AttenOffset_30by15_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_30by30_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by15_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by30_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by60_DL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_30by15_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_30by30_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by15_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by30_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by60_DL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_30by15_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_30by30_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by15_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by30_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_60by60_UL_Siso': 0x00, // 1 byte
            'GS_AttenOffset_30by15_UL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_30by30_UL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by15_UL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by30_UL_Mimo': 0x00, // 1 byte
            'GS_AttenOffset_60by60_UL_Mimo': 0x00, // 1 byte
            'Reserved41': Array(24).fill(0x00), // 24 bytes
            'LowRsrpStillTime': 0x00, // 1 byte
            'LowRsrpLevel': 0x0000, // 2 bytes
            'SU_DlCasSisoAtten_SISO': 0x00, // 1 byte
            'SU_DlCasSisoAtten_MIMO': 0x00, // 1 byte
            'SU_DlCasSisoAttenTest_SISO': 0x00, // 1 byte
            'SU_DlCasSisoAttenTest_MIMO': 0x00, // 1 byte
            'SU_UlCasSisoAttenTest_SISO': 0x00, // 1 byte
            'SU_UlCasSisoAttenTest_MIMO': 0x00, // 1 byte
            'Reserved41p1': Array(3).fill(0x00), // 3 bytes
            'PciResetOnOff': 0x00, // 1 byte
            'PciNo': 0x0000, // 2 bytes
            'PciTime': 0x00, // 1 byte
            'Reserved42': Array(7).fill(0x00), // 7 bytes
        };

        function updateStatusBadge1(elementId, value) {
            const el = document.getElementById(elementId);

            if (value === 0) {
                el.innerText = "FPGA FAIL";
                el.className = "badge bg-danger";
            } else if (value === 1) {
                el.innerText = "FPGA BOOTING";
                el.className = "badge bg-warning text-dark";
            } else if (value === 2) {
                el.innerHTML = "FPGA OK";
                el.className = "badge bg-info text-dark";
            } else {
                el.innerText = "N/A";
                el.className = "badge bg-dark";
            }
        }


        function updateStatusBadge2(elementId, value) {
            const el = document.getElementById(elementId);

            if (value === 0) {
                el.innerText = "INIT WAITING";
                el.className = "badge bg-secondary";
            } else if (value === 1) {
                el.innerText = "INITIALIZING";
                el.className = "badge bg-warning text-dark";
            } else if (value === 2) {
                el.innerText = "INIT OK";
                el.className = "badge bg-info text-dark";
            } else if (value === 3) {
                el.innerText = "BEAM SCANNING";
                el.className = "badge bg-primary";
            } else if (value === 4) {
                el.innerText = "INIT FAIL";
                el.className = "badge bg-danger";
            } else {
                el.innerText = "N/A";
                el.className = "badge bg-dark";
            }
        }


        function updateStatusBadge3(elementId, value) {
            const el = document.getElementById(elementId);

            if (value === 0) {
                el.innerText = "SCAN READY";
                el.className = "badge bg-secondary";
            } else if (value === 1) {
                el.innerText = "SCAN OK";
                el.className = "badge bg-info text-dark";
            } else if (value === 2) {
                el.innerText = "SCAN FAIL";
                el.className = "badge bg-danger";
            } else if (value === 4) {
                el.innerText = "SCAN OFF";
                el.className = "badge bg-dark";
            } else {
                el.innerText = "N/A";
                el.className = "badge bg-warning text-dark";
            }
        }

        // 비트 값 추출 함수 (중복 제거, 최종 버전)
        function getBitFromByteArray(byteArray, bitIndex) {
            const byteIndex = Math.floor(bitIndex / 8);
            const bitOffset = bitIndex % 8;
            return (byteArray[byteIndex] >> bitOffset) & 1;
        }

        // 비트 값에 따라 .status-circle 색상만 바꾸기
        function updateAlarmDotByBit(byteArray, bitIndex, elementId) {
            const el = document.querySelector(`#${elementId} .status-circle`);
            if (!el) return;

            const bit = getBitFromByteArray(byteArray, bitIndex);
            if (bit === 0) {
                el.style.backgroundColor = 'green'; // 정상
            } else if (bit === 1) {
                el.style.backgroundColor = 'red'; // 알람
            } else {
                el.style.backgroundColor = 'gray'; // 기본값
            }
        }

        // 서버에서 계산된 알람 상태로 .status-circle 색상 변경
        function updateAlarmDot(elementId, isActive) {
            const el = document.querySelector(`#${elementId} .status-circle`);
            if (!el) return;

            if (isActive) {
                el.style.backgroundColor = 'red'; // 알람
            } else {
                el.style.backgroundColor = 'green'; // 정상
            }
        }

        // =======================================================
        // 1. 데이터 및 전역 변수 설정
        // =======================================================
        const beamData = []; // 생성된 beam path/text 정보 저장
        const centerX = 200;
        const centerY = 200;
        const ringWidth = 36;

        // ✅ 링별 빔 개수: 중앙(1개)을 제외하고 정의합니다.
        // 중앙 원은 별도로 그려지므로 첫 번째 링부터 정의합니다.
        const ringSegments = [6, 12, 17, 22]; // 예: [6, 12, 17, 22] -> 총 4개 링

        // =======================================================
        // 2. BeamBook 그리기 (수정된 함수)
        // =======================================================
        function drawBeamBook() {
            const svg = document.getElementById("beamBook");
            svg.innerHTML = "";
            beamData.length = 0;

            // --- 중앙 원(0번) 그리기 (이전과 동일) ---
            const centerCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            centerCircle.setAttribute("cx", centerX);
            centerCircle.setAttribute("cy", centerY);
            centerCircle.setAttribute("r", ringWidth);
            centerCircle.setAttribute("fill", "#F2C029"); // 노란색으로 변경
            centerCircle.style.fill = "#F2C029"; // CSS 스타일로도 설정
            centerCircle.setAttribute("stroke", "#aaa");
            centerCircle.setAttribute("stroke-width", 1);
            svg.appendChild(centerCircle);

            const centerText = document.createElementNS("http://www.w3.org/2000/svg", "text");
            centerText.setAttribute("x", centerX);
            centerText.setAttribute("y", centerY);
            centerText.setAttribute("text-anchor", "middle");
            centerText.setAttribute("alignment-baseline", "middle");
            centerText.setAttribute("font-size", "12");
            centerText.setAttribute("fill", "white");
            centerText.setAttribute("font-weight", "bold");
            centerText.textContent = "0";
            svg.appendChild(centerText);

            beamData.push({ number: 0, pathEl: centerCircle, textEl: centerText });

            // --- 링 그리기 ---
            let startNum = 1;
            for (let ringIndex = 0; ringIndex < ringSegments.length; ringIndex++) {
                const segments = ringSegments[ringIndex];
                const innerRadius = (ringIndex + 1) * ringWidth;
                const outerRadius = innerRadius + ringWidth;

                for (let i = 0; i < segments; i++) {
                    const anglePerSegment = (2 * Math.PI) / segments;

                    // ✅ [수정된 부분] i 앞에 -를 붙여 방향을 반대로 바꿉니다.
                    const midAngle = -(i * anglePerSegment);
                    
                    const startAngle = midAngle - (anglePerSegment / 2);
                    const endAngle = midAngle + (anglePerSegment / 2);
                    
                    const beamNumber = startNum + i;

                    // Path, Text 생성 부분은 이전과 동일합니다.
                    const path = describeArc(centerX, centerY, innerRadius, outerRadius, startAngle, endAngle);
                    const pathEl = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    pathEl.setAttribute("d", path);
                    pathEl.setAttribute("fill", "dimgray");
                    pathEl.setAttribute("stroke", "#aaa");
                    pathEl.setAttribute("stroke-width", 1);
                    svg.appendChild(pathEl);

                    const textRadius = (innerRadius + outerRadius) / 2;
                    const textX = centerX + textRadius * Math.cos(midAngle);
                    const textY = centerY + textRadius * Math.sin(midAngle);
                    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    textEl.setAttribute("x", textX);
                    textEl.setAttribute("y", textY);
                    textEl.setAttribute("text-anchor", "middle");
                    textEl.setAttribute("alignment-baseline", "middle");
                    textEl.setAttribute("font-size", "10");
                    textEl.setAttribute("fill", "white");
                    textEl.textContent = beamNumber;
                    svg.appendChild(textEl);
                    
                    beamData.push({ number: beamNumber, pathEl: pathEl, textEl: textEl });
                }
                startNum += segments;
            }

            // =======================================================
            // ✅ 각도 텍스트 그리기 (사용자 지정 목록 반영)
            // =======================================================

            // ✅ 사용자가 제공한 22개의 각도 레이블 목록 (중복 '164'' 하나 제외)
            const angleLabels = [
                "0'", "16'", "33'", "49'", "65'", "82'", "98'", "115'", "131'", 
                "147'", "164'", "180'", "196'", "213'", "229'", "245'", "262'", 
                "278'", "295'", "311'", "327'", "344'"
            ];

            const lastRingIndex = ringSegments.length - 1;
            const lastRingSegments = ringSegments[lastRingIndex];
            const angleLabelRadius = (ringSegments.length + 1) * ringWidth + 10;

            // 레이블 배열의 개수와 세그먼트 개수가 일치하는지 확인
            if (angleLabels.length !== lastRingSegments) {
                console.error("지정된 각도 레이블의 개수와 마지막 링의 세그먼트 개수가 일치하지 않습니다.");
                return; // 개수가 다르면 충돌 방지를 위해 그리지 않음
            }

            const anglePerSegment = (2 * Math.PI) / lastRingSegments;

            for (let i = 0; i < lastRingSegments; i++) {
                const midAngle = -(i * anglePerSegment); // 위치 계산을 위한 각도는 그대로 사용

                // 텍스트 위치 계산
                const textX = centerX + angleLabelRadius * Math.cos(midAngle);
                const textY = centerY + angleLabelRadius * Math.sin(midAngle);

                // SVG 텍스트 요소 생성
                const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
                textEl.setAttribute("x", textX);
                textEl.setAttribute("y", textY);
                textEl.setAttribute("text-anchor", "middle");
                textEl.setAttribute("alignment-baseline", "middle");
                textEl.setAttribute("font-size", "10");
                textEl.setAttribute("font-weight", "bold");
                textEl.setAttribute("fill", "#1374F2");
                
                // ✅ [수정된 부분] 계산된 각도 대신, 배열에서 텍스트를 가져와 설정
                textEl.textContent = angleLabels[i];
                
                svg.appendChild(textEl);
            }
        }

        // =======================================================
        // 3. Path 계산 (수정된 함수)
        // =======================================================
        /**
         * SVG 경로 데이터(d 속성)를 생성하여 부채꼴 조각을 그립니다. (수정된 버전)
         * @param {number} cx - 중심 X 좌표
         * @param {number} cy - 중심 Y 좌표
         * @param {number} r1 - 내부 반지름
         * @param {number} r2 - 외부 반지름
         * @param {number} startAngle - 시작 각도 (라디안)
         * @param {number} endAngle - 끝 각도 (라디안)
         * @returns {string} SVG path의 d 속성에 들어갈 경로 데이터
         */
        function describeArc(cx, cy, r1, r2, startAngle, endAngle) {
            // 1. 부채꼴의 네 꼭짓점 계산
            const outerStart = { x: cx + r2 * Math.cos(startAngle), y: cy + r2 * Math.sin(startAngle) };
            const outerEnd   = { x: cx + r2 * Math.cos(endAngle),   y: cy + r2 * Math.sin(endAngle) };
            const innerStart = { x: cx + r1 * Math.cos(startAngle), y: cy + r1 * Math.sin(startAngle) };
            const innerEnd   = { x: cx + r1 * Math.cos(endAngle),   y: cy + r1 * Math.sin(endAngle) };

            // 2. 호가 180도보다 큰지 여부 판단
            const largeArcFlag = Math.abs(endAngle - startAngle) >= Math.PI ? '1' : '0';

            // 3. 올바른 순서로 경로 데이터 생성
            // (바깥 호 -> 직선 -> 안쪽 호 -> 닫기)
            const d = [
                "M", outerStart.x, outerStart.y, // 시작: 바깥쪽 호의 시작점
                "A", r2, r2, 0, largeArcFlag, 1, outerEnd.x, outerEnd.y, // 바깥쪽 호 그리기
                "L", innerEnd.x, innerEnd.y,     // 안쪽 호의 끝점으로 직선 연결
                "A", r1, r1, 0, largeArcFlag, 0, innerStart.x, innerStart.y, // 안쪽 호를 반대방향으로 그리기
                "Z" // 경로 닫기
            ].join(" ");

            return d;
        }

        // 외부에서 색상 업데이트
        function updateBeamColors({ yellow = [], blue = [] }) {
            for (const beam of beamData) {
                const { number, pathEl } = beam;
                if (yellow.includes(number)) {
                    pathEl.setAttribute("fill", "gold");
                } else if (blue.includes(number)) {
                    pathEl.setAttribute("fill", "#84D9A9");
                } else {
                    pathEl.setAttribute("fill", "dimgray");
                }
            }
        }

        // Beam Info 모달이 열릴 때 다이어그램 그리기
        document.addEventListener('DOMContentLoaded', function() {
            const beamInfoModal = document.getElementById('beamInfoModal');
            if (beamInfoModal) {
                beamInfoModal.addEventListener('shown.bs.modal', function() {
                    drawBeamBook();
                    
                                        // Beam ID 2, 3, 4번의 실제 값들을 사용하여 동그라미 색상 업데이트
                    updateBeamColors({
                        yellow: [],
                        blue: [2, 3, 4]
                    });
                });
            }
        });


        function updateTime() {
            let now = new Date();

            // UTC 시간 포맷: DD-MM-YYYY, HH:MM:SS AM/PM
            let utcDay = String(now.getUTCDate()).padStart(2, '0');
            let utcMonth = String(now.getUTCMonth() + 1).padStart(2, '0'); // 월은 0부터 시작하므로 +1
            let utcYear = now.getUTCFullYear();
            let utcHours = now.getUTCHours();
            let utcMinutes = String(now.getUTCMinutes()).padStart(2, '0');
            let utcSeconds = String(now.getUTCSeconds()).padStart(2, '0');

            let utcAmPm = utcHours >= 12 ? 'PM' : 'AM';
            utcHours = utcHours % 12;
            utcHours = utcHours ? String(utcHours).padStart(2, '0') : '12'; // 0시일 경우 12로 표시

            let formattedUtcTime = `${utcDay}-${utcMonth}-${utcYear}, ${utcHours}:${utcMinutes}:${utcSeconds} ${utcAmPm}`;
            document.getElementById("utc-time").innerText = "UTC Time: " + formattedUtcTime;

            // 브라우저 시간 포맷: DD-MM-YYYY, HH:MM:SS AM/PM
            // 브라우저의 현지 시간을 기준으로 날짜와 시간을 가져옵니다.
            let browserDay = String(now.getDate()).padStart(2, '0');
            let browserMonth = String(now.getMonth() + 1).padStart(2, '0');
            let browserYear = now.getFullYear();
            let browserHours = now.getHours();
            let browserMinutes = String(now.getMinutes()).padStart(2, '0');
            let browserSeconds = String(now.getSeconds()).padStart(2, '0');

            let browserAmPm = browserHours >= 12 ? 'PM' : 'AM';
            browserHours = browserHours % 12;
            browserHours = browserHours ? String(browserHours).padStart(2, '0') : '12'; // 0시일 경우 12로 표시

            let formattedBrowserTime = `${browserDay}-${browserMonth}-${browserYear}, ${browserHours}:${browserMinutes}:${browserSeconds} ${browserAmPm}`;
            document.getElementById("browser-time").innerText = "Browser Time: " + formattedBrowserTime;

        }
        setInterval(updateTime, 1000);


        // ✅ 초기 설정 모달 관리
        function startInitialSetup() {
            userStarted = true;
            clearTimeout(autoCloseTimeout);
            timer = 10;
            document.getElementById('setupTimer').textContent = timer;

            timerInterval = setInterval(() => {
                timer--;
                document.getElementById('setupTimer').textContent = timer;

                if (timer <= 0) {
                clearInterval(timerInterval);
                bootstrap.Modal.getInstance(document.getElementById('duInitialSetupModal')).hide();
                console.log('✅ Initial Setup countdown complete. Modal closed.');
                }
            }, 1000);
        }

        // ✅ USIM 타이머 및 모달 흐름
        function startUsimTimer(durationSeconds = 300) {
            timeLeft = durationSeconds;
            usimTimerInterval && clearInterval(usimTimerInterval);
            updateTimerDisplays();

            usimTimerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplays();
                if (timeLeft <= 0) {
                clearInterval(usimTimerInterval);
                ['usimCheckModal', 'apnSetupModal', 'DeviceSetupModal', 'AgcSetupModal']
                    .forEach(id => bootstrap.Modal.getInstance(document.getElementById(id))?.hide());
                }
            }, 1000);
        }

        function updateTimerDisplays() {
            document.getElementById('usimTimer').textContent = timeLeft;
            ['apnTimer', 'DeviceTimer', 'AgcTimer', 'InitialSetupTimer', 'BtapnTimer', 'FinalSetupTimer'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = timeLeft;
            });
        }

        function goToStep2() {
            bootstrap.Modal.getInstance(document.getElementById('usimCheckModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('apnSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep3() {
            bootstrap.Modal.getInstance(document.getElementById('apnSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('DeviceSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep4() {
            bootstrap.Modal.getInstance(document.getElementById('DeviceSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('AgcSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep5() {
            bootstrap.Modal.getInstance(document.getElementById('AgcSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('InitialSetupModal')).show();
            updateTimerDisplays();
        }

        function backToAgcSetup() {
            bootstrap.Modal.getInstance(document.getElementById('InitialSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('AgcSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep6() {
            bootstrap.Modal.getInstance(document.getElementById('InitialSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('SuSetupModal')).show();
            updateTimerDisplays();
        }

        function backToInitialSetup() {
            bootstrap.Modal.getInstance(document.getElementById('SuSetupModal'))?.hide();
            if (timeLeft <= 0) return;
            new bootstrap.Modal(document.getElementById('InitialSetupModal')).show();
            updateTimerDisplays();
        }

        function goToStep7() {
            // SuSetupModal을 닫기 (Step 6/7)
            const suModal = bootstrap.Modal.getInstance(document.getElementById('SuSetupModal'));
            if (suModal) {
                suModal.hide();
            }
            
            if (timeLeft <= 0) return;
            
            // FinalSetupModal 열기 (Step 7/7)
            const finalModal = new bootstrap.Modal(document.getElementById('FinalSetupModal'));
            finalModal.show();
            updateTimerDisplays();
        }

        function backToBtapnSetup() {
            // FinalSetupModal을 닫기 (Step 7/7)
            const finalModal = bootstrap.Modal.getInstance(document.getElementById('FinalSetupModal'));
            if (finalModal) {
                finalModal.hide();
            }
            
            if (timeLeft <= 0) return;
            
            // SuSetupModal 열기 (Step 6/7)
            new bootstrap.Modal(document.getElementById('SuSetupModal')).show();
            updateTimerDisplays();
        }

        function goToUsimFromApn() {
            bootstrap.Modal.getInstance(document.getElementById('apnSetupModal'))?.hide();
            new bootstrap.Modal(document.getElementById('usimCheckModal')).show();
            updateTimerDisplays();
        }

        function goToApnFromDevice() {
            bootstrap.Modal.getInstance(document.getElementById('DeviceSetupModal'))?.hide();
            new bootstrap.Modal(document.getElementById('apnSetupModal')).show();
            updateTimerDisplays();
        }

        function goToDeviceFromAgc() {
            bootstrap.Modal.getInstance(document.getElementById('AgcSetupModal'))?.hide();
            new bootstrap.Modal(document.getElementById('DeviceSetupModal')).show();
            updateTimerDisplays();
        }

        function closeSetUpModal() {
            clearInterval(usimTimerInterval);
            usimTimerInterval = null;
        }

        // ✅ DOM 초기화 및 gNB Vendor 이벤트
        document.addEventListener('DOMContentLoaded', function () {
            const modalEl = document.getElementById('duInitialSetupModal');
            const openModalBtn = document.getElementById('openModalBtn'); // 모달 여는 버튼 id 필요
            const agcModeEl = document.getElementById("Mvbx_RsAgcMode");

            
            // 모달이 열리기 시작할 때 (show) 초기화
            modalEl.addEventListener('show.bs.modal', function () {
                userStarted = false;
                timer = 10;
                document.getElementById('setupTimer').textContent = timer;

                // 10초 후 자동 닫힘 예약
                autoCloseTimeout = setTimeout(() => {
                    if (!userStarted) {
                        const modal = bootstrap.Modal.getInstance(modalEl);
                        modal.hide();
                        console.log('Modal auto-closed due to no Start press.');
                    }
                }, 10000);
            });

            // 모달 완전히 열렸을 때 포커스 이동
            modalEl.addEventListener('shown.bs.modal', function () {
                modalEl.focus(); // 모달에 tabindex="-1"이 있어야 포커스 가능
            });

            // 모달이 닫히기 직전 (hide) 포커스 모달 외부 버튼으로 이동
            modalEl.addEventListener('hide.bs.modal', function () {
                if (openModalBtn) {
                    openModalBtn.focus();
                }
            });

            // 모달 완전히 닫힌 후 타이머 정리
            modalEl.addEventListener('hidden.bs.modal', function () {
                clearTimeout(autoCloseTimeout);
                clearInterval(timerInterval);
                timer = 10;
                document.getElementById('setupTimer').textContent = timer;
            });

            if (agcModeEl) {
                agcModeEl.addEventListener("click", () => {
                    userClicked = true;
                    console.log("🖱️ User manually clicked AGC toggle.");
                });
            }

            
        });

        // 네비게이션 점 색상을 현재 알람 상태에 따라 업데이트하는 함수
        function updateNavDotColors() {
            const duNavDot = document.getElementById('du_nav_dot');
            const su1NavDot = document.getElementById('su1_nav_dot');
            const su2NavDot = document.getElementById('su2_nav_dot');
            const su3NavDot = document.getElementById('su3_nav_dot');
            const su4NavDot = document.getElementById('su4_nav_dot');

            // 모든 점에 대해 기존 색상 클래스 초기화
            [duNavDot, su1NavDot, su2NavDot, su3NavDot, su4NavDot].forEach(dot => {
                if (dot) {
                    // 기존 배경색 클래스 제거
                    dot.classList.remove('status-normal', 'status-alarm', 'status-linkfail', 'status-alarm-yellow', 'status-unknown');
                    // 인라인 스타일 초기화 (테두리는 유지)
                    dot.style.backgroundColor = ''; 
                }
            });

            // DU 점 색상 업데이트 - 기본값은 초록색, 알람 시 빨간색
            if (duNavDot) {
                duNavDot.classList.remove('status-normal', 'status-alarm');
                if (currentDuAlarmStatus === 1) {
                    duNavDot.classList.add('status-alarm'); // 알람 시 빨간색
                } else {
                    duNavDot.classList.add('status-normal'); // 정상 시 초록색 (기본값)
                }
            }

            // SU #1, #2, #3, #4 점 색상 업데이트 - SuLinkFailBits 데이터가 있으면 사용, 없으면 기본값
            if (window.currentSuLinkFailBits) {
                const bits = window.currentSuLinkFailBits;
                
                // SU1 링크 알람 (1비트: 0=정상, 1=링크페일알람)
                if (su1NavDot) {
                    su1NavDot.classList.remove('status-normal', 'status-linkfail');
                    if (bits.SU1_LINK_FAIL === 0) {
                        su1NavDot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU1_LINK_FAIL === 1) {
                        su1NavDot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su1NavDot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU2 링크 알람
                if (su2NavDot) {
                    su2NavDot.classList.remove('status-normal', 'status-linkfail');
                    if (bits.SU2_LINK_FAIL === 0) {
                        su2NavDot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU2_LINK_FAIL === 1) {
                        su2NavDot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su2NavDot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU3 링크 알람
                if (su3NavDot) {
                    su3NavDot.classList.remove('status-normal', 'status-linkfail');
                    if (bits.SU3_LINK_FAIL === 0) {
                        su3NavDot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU3_LINK_FAIL === 1) {
                        su3NavDot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su3NavDot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU4 링크 알람
                if (su4NavDot) {
                    su4NavDot.classList.remove('status-normal', 'status-linkfail');
                    if (bits.SU4_LINK_FAIL === 0) {
                        su4NavDot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU4_LINK_FAIL === 1) {
                        su4NavDot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su4NavDot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
            } else {
                // SuLinkFailBits 데이터가 없으면 기본값은 초록색으로 설정 (정상 상태)
                if (su1NavDot) {
                    su1NavDot.classList.remove('status-normal', 'status-linkfail');
                    su1NavDot.classList.add('status-normal');
                }
                if (su2NavDot) {
                    su2NavDot.classList.remove('status-normal', 'status-linkfail');
                    su2NavDot.classList.add('status-normal');
                }
                if (su3NavDot) {
                    su3NavDot.classList.remove('status-normal', 'status-linkfail');
                    su3NavDot.classList.add('status-normal');
                }
                if (su4NavDot) {
                    su4NavDot.classList.remove('status-normal', 'status-linkfail');
                    su4NavDot.classList.add('status-normal');
                }
            }
        }

        // 패킷 요청 함수들 (간단한 래퍼)
        // DU(0x30), SU(0x40) 요청을 payload로 보냄
        function requestUpdateStatus(rcvMainSys = 0x30) {
            const payload = { rcv_main_sys: rcvMainSys };
            socket.emit('request_update_status', payload);
            console.log(`📤 Requested: update_status (Rcv_Main_Sys=0x${rcvMainSys.toString(16)})`);
        }

        function requestTddStatus() {
            socket.emit('request_tdd_status');
            console.log('📤 Requested: tdd_status packet');
        }

        // 화면 전환 함수
        function showScreen(screenId) {
            const duContent = document.getElementById('du_content_display');
            const su1Content = document.getElementById('su1_content_display');
            const packetInfoContent = document.getElementById('packet_info_display');
            const syncModuleContent = document.getElementById('sync_module_display');
            const duNavDot = document.getElementById('du_nav_dot');
            const su1NavDot = document.getElementById('su1_nav_dot');
            const su2NavDot = document.getElementById('su2_nav_dot');
            const su3NavDot = document.getElementById('su3_nav_dot');
            const su4NavDot = document.getElementById('su4_nav_dot');

            // 기존 패킷 요청 타이머들 정리 (새로운 구조에서는 자동으로 관리됨)

            // 모든 네비게이션 점을 현재 알람 상태 색상으로 먼저 초기화 (비활성화 상태의 색상)
            updateNavDotColors();

            // 모든 화면 숨김 (기존 방식대로 active 클래스 제거)
            duContent.classList.remove('active');
            su1Content.classList.remove('active');
            if (packetInfoContent) {
                packetInfoContent.classList.remove('active');
                packetInfoContent.style.display = 'none';
            }
            if (syncModuleContent) {
                syncModuleContent.style.display = 'none';
            }

            // 선택된 화면 표시
            if (screenId === 'du_content') {
                duContent.classList.add('active');
                // DU 화면: dashboard 페이지로 설정 (update_status 폴링)
                enterPage('dashboard'); // 자동 폴링 시작 - 주석처리
            } else if (screenId === 'su1_content') {
                su1Content.classList.add('active');
                // SU1 화면: su1 전용 폴링 (폴링 없음)
                enterPage('su1');
                // SU1 진입 시 한 번 SU1 패킷 요청
                requestUpdateStatus(0x40);
            } else if (screenId === 'packet_info') {
                if (packetInfoContent) {
                    packetInfoContent.classList.add('active');
                    packetInfoContent.style.display = 'block';
                }
                // Packet Info 화면: packet_info 전용 폴링
                enterPage('packet_info');
            } else if (screenId === 'sync_module') {
                // Sync Module 화면 표시
                if (syncModuleContent) {
                    syncModuleContent.style.display = 'block';
                }
                // Sync Module 화면: tddview 페이지로 설정 (tdd_status 폴링)
                enterPage('tddview');
            }
             // SU #2 화면이 활성화될 경우 (현재는 구현되지 않음)
             else if (screenId === 'su2_content') {
                showInfoModal('SU #2 화면 전환 기능은 아직 구현되지 않았습니다.');
            }

            // 화면 전환 시 모든 모달 닫기
            closeAllModals();
        }

        // 모든 모달 닫기 함수
        function closeAllModals() {
            // Bootstrap 모달 인스턴스들 가져오기
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modalElement => {
                const modal = bootstrap.Modal.getInstance(modalElement);
                if (modal) {
                    modal.hide();
                } else {
                    // 모달 인스턴스가 없으면 직접 숨기기
                    modalElement.style.display = 'none';
                    modalElement.classList.remove('show');
                    // backdrop 제거
                    const backdrop = document.querySelector('.modal-backdrop');
                    if (backdrop) {
                        backdrop.remove();
                    }
                }
            });
            
            // body에서 modal-open 클래스 제거
            document.body.classList.remove('modal-open');
            document.body.style.overflow = '';
            document.body.style.paddingRight = '';
        }


        // ✅ Socket.IO 연결
        socket.on('connect', () => console.log('🟢 Connected to Flask Server'));
        socket.on('disconnect', () => console.log('🔴 Disconnected from Flask Server'));
        
        // DU Control 명령 응답 처리
        socket.on('du_control_response', function(response) {
            if (response.status === 'success') {
                console.log('✅ DU Control 명령이 성공적으로 처리되었습니다.');
                // 성공 시 추가 처리 (예: 버튼 상태 변경, 알림 등)
            } else {
                console.error('❌ DU Control 명령 처리 실패:', response.message);
                // 실패 시 추가 처리 (예: 에러 알림, 재시도 등)
            }
        });

        // RX 박스 상태 관리
        let rxBoxState = {
            originalBg: null,
            originalColor: null
        };

        // TX 박스 상태 관리
        let txBoxState = {
            originalBg: null,
            originalColor: null
        };

        // RX/TX 박스 초기 상태 저장
        document.addEventListener('DOMContentLoaded', function() {
            const rxBox = document.querySelector('.rx-box');
            if (rxBox) {
                rxBoxState.originalBg = window.getComputedStyle(rxBox).backgroundColor;
                rxBoxState.originalColor = window.getComputedStyle(rxBox).color;
            }
            
            const txBox = document.querySelector('.tx-box');
            if (txBox) {
                txBoxState.originalBg = window.getComputedStyle(txBox).backgroundColor;
                txBoxState.originalColor = window.getComputedStyle(txBox).color;
            }
            
            // 네비게이션 점 기본값 설정 (초록색)
            updateNavDotColors();
        });

        // RX 박스 켜기
        socket.on("rx_on", function () {
            document.querySelectorAll('.rx-box').forEach(rxbox => {
                rxbox.style.backgroundColor = 'yellow';
                rxbox.style.color = 'black';
            });
            console.log("🟡 RX Box: ON");
        });

        // RX 박스 끄기
        socket.on("rx_off", function () {
            document.querySelectorAll('.rx-box').forEach(rxbox => {
                rxbox.style.backgroundColor = rxBoxState.originalBg;
                rxbox.style.color = rxBoxState.originalColor;
            });
            console.log("⚫ RX Box: OFF");
        });

        // TX 박스 켜기
        socket.on("tx_on", function () {
                    document.querySelectorAll('.tx-box').forEach(txbox => {
            txbox.style.backgroundColor = 'yellow';  // RX와 동일한 노란색
            txbox.style.color = 'black';
        });
            console.log("🟡 TX Box: ON");
        });

        // TX 박스 끄기
        socket.on("tx_off", function () {
            document.querySelectorAll('.tx-box').forEach(txbox => {
                txbox.style.backgroundColor = txBoxState.originalBg;
                txbox.style.color = txBoxState.originalColor;
            });
            console.log("⚫ TX Box: OFF");
        });

        socket.on("tdd_status", function (data) {
            // Set Mode 중이면 실시간 업데이트 중단 (스냅샷만 허용)
            if (!LIVE_UPDATES && !SNAPSHOT_PENDING) {
                console.log('🔒 tdd_status blocked: Set Mode active and no snapshot pending');
                return;
            }

            const updateValue = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) {
                    // Set Mode에서는 값 업데이트 방지 (사용자가 편집 중인 값 덮어쓰기 방지)
                    if (SET_MODE && el.hasAttribute('data-editable')) {
                        console.log(`🔒 Set Mode: ${id} 값 업데이트 차단 (현재 값: ${el.value}, 새 값: ${value})`);
                        return;
                    }
                    
                    console.log(`📝 updateValue: ${id} = ${value} (SET_MODE: ${SET_MODE})`);
                    el.value = value;
                    // ID 값 출력 시 텍스트 크기 조정
                    el.style.fontSize = '0.85rem';
                }
            };

            
            // Sync Module 데이터 업데이트
            updateSyncModuleData(data);
            
            // TDD Setup 업데이트
            // Frequency 업데이트 (서버에서 이미 변환된 값)
            if (data.packet.TDD_Freq) {
                updateValue("TDD_Freq", data.packet.TDD_Freq);
            }

            // ARFCN 업데이트 (Range: 2054166~2104165)
            if (data.packet.TDD_Arfcn) {
                updateValue("TDD_Arfcn", data.packet.TDD_Arfcn);
            }

            // SSB MU 업데이트 (비트값 0이면120K, 1이면240K)
            const ssbMuSelect = document.getElementById("MvbxSsbMu");
            if (ssbMuSelect && data.packet.MvbxSsbMu !== undefined) {
                if (data.packet.MvbxSsbMu === 0) {
                    ssbMuSelect.value = "120K";
                } else if (data.packet.MvbxSsbMu === 1) {
                    ssbMuSelect.value = "240K";
                }
            }

            // TDD Rate 업데이트 (비트값 0이면 3:1, 1이면 4:1)
            const tddRateSelect = document.getElementById("MvbxTddRate");
            if (tddRateSelect && data.packet.MvbxTddRate !== undefined) {
                if (data.packet.MvbxTddRate === 0) {
                    tddRateSelect.value = "3:1";
                } else if (data.packet.MvbxTddRate === 1) {
                    tddRateSelect.value = "4:1";
                }
            }

        });

        // ------- 서버가 보내주는 파싱 완료 패킷 수신 (UI 업데이트) -------
        socket.on("update_status", function (data) {
            // Set Mode 중이면 실시간 업데이트 중단
            if (SET_MODE) {
                console.log('🔒 update_status blocked: Set Mode active');
                return;
            }
            
            console.log("📥 Received update_status:", data.packet);
            console.log("📊 Packet type - rcvMainSys:", data.packet.rcvMainSys);

            // SuLinkFailBits 처리 (1비트씩)
            if (data.packet.SuLinkFailBits) {
                const bits = data.packet.SuLinkFailBits;
                
                // 전역 변수에 저장하여 updateNavDotColors에서 사용할 수 있도록 함
                window.currentSuLinkFailBits = bits;
                
                // SU1 링크 알람 (1비트: 0=정상, 1=링크페일알람)
                const su1Dot = document.querySelector('#su1-link-dot');
                if (su1Dot) {
                    su1Dot.className = 'status-dot';
                    if (bits.SU1_LINK_FAIL === 0) {
                        su1Dot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU1_LINK_FAIL === 1) {
                        su1Dot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su1Dot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU2 링크 알람
                const su2Dot = document.querySelector('#su2-link-dot');
                if (su2Dot) {
                    su2Dot.className = 'status-dot';
                    if (bits.SU2_LINK_FAIL === 0) {
                        su2Dot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU2_LINK_FAIL === 1) {
                        su2Dot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su2Dot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU3 링크 알람
                const su3Dot = document.querySelector('#su3-link-dot');
                if (su3Dot) {
                    su3Dot.className = 'status-dot';
                    if (bits.SU3_LINK_FAIL === 0) {
                        su3Dot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU3_LINK_FAIL === 1) {
                        su3Dot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su3Dot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // SU4 링크 알람
                const su4Dot = document.querySelector('#su4-link-dot');
                if (su4Dot) {
                    su4Dot.className = 'status-dot';
                    if (bits.SU4_LINK_FAIL === 0) {
                        su4Dot.classList.add('status-normal'); // 초록색 (정상)
                    } else if (bits.SU4_LINK_FAIL === 1) {
                        su4Dot.classList.add('status-linkfail'); // 주황색 (링크페일알람)
                    } else {
                        su4Dot.classList.add('status-normal'); // 기본값: 초록색
                    }
                }
                
                // 네비게이션 점 색상 업데이트
                updateNavDotColors();
                
                // SU Link Fail 버튼 상태 업데이트
                updateSuLinkFailButtons(bits);
            }
            
            // Mask SU Link Fail 버튼 상태 업데이트
            if (data.packet.MaskSuLinkFail) {
                updateSuLinkFailButtons(data.packet.MaskSuLinkFail);
            }
            
            // DL ALC 버튼 상태 업데이트
            if (data.packet.DL_ALC_Bits) {
                updateDLALCButtons(data.packet.DL_ALC_Bits);
            }

            // DET MASK 버튼 상태 업데이트
            if (data.packet.DET_MASK_Bits) {
                updateDETMASKButtons(data.packet.DET_MASK_Bits);
            }

            const updateText = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) el.innerText = value;
            };
            const updateValue = (id, value) => {
                const el = document.getElementById(id);
                if (el && value !== undefined) {
                    // Set Mode에서는 값 업데이트 방지 (사용자가 편집 중인 값 덮어쓰기 방지)
                    if (SET_MODE && el.hasAttribute('data-editable')) {
                        console.log(`🔒 Set Mode: ${id} 값 업데이트 차단 (현재 값: ${el.value}, 새 값: ${value})`);
                        return;
                    }
                    
                    console.log(`📝 updateValue: ${id} = ${value} (SET_MODE: ${SET_MODE})`);
                    el.value = value;
                    // ID 값 출력 시 텍스트 크기 조정
                    el.style.fontSize = '0.85rem';
                }
            };

            const statusText = {
                0: "NONE",
                1: "ACTIVE",
                2: "SUCCESS",
                3: "FAIL"
            };

            /*

            const decodeText = (arr) => {
                try {
                    return new TextDecoder().decode(new Uint8Array(arr)).replace(/\x00/g, "").trim() || "N/A";
                } catch (e) {
                    console.error("Decode Error:", e);
                    return "N/A";
                }
            };

            const parseVersion = (arr) => {
                if (arr && arr.length === 2) {
                    return `${arr[0]}.${arr[1].toString().padStart(2, "0")}`;
                }
                return "N/A";
            };

            */

            // DU System 페이지 업데이트 (rcvMainSys = 0x30)
            updateText("McuSwVer", data.packet.McuSwVer);
            updateText("modipaddress", data.packet.ModIpAddress);

            updateText("McuSwVer2", data.packet.McuSwVer);

            updateText("FPGA_Ver", data.packet.FPGA_Ver);

            const rtpTypeText = {
            0: "DU_28G",
            1: "DU_39G",
            2: "DU_26G"
            };

            updateText("rpttype", rtpTypeText[data.packet.RtpKind] || "Unknown");

            // cur_time, cur_temper

            if (data.packet.System_Year && data.packet.System_hour) {
            updateText("curtime", `${data.packet.System_Year} ${data.packet.System_hour}`);
            }

            if (data.packet.SysTemper !== undefined) {
            updateText("curtemper", `${data.packet.SysTemper} ℃`);
            }
            
                            if (data.packet.SysTemperHighLvl !== undefined) {
                    updateValue("tempupper", data.packet.SysTemperHighLvl);
                }
            
                            if (data.packet.SysTemperLowLvl !== undefined) {
                    updateValue("templower", data.packet.SysTemperLowLvl);
                }

            // SU1 페이지 업데이트 (Rcv_Main_Sys = 0x40)
            if (data.packet.Rcv_Main_Sys === 0x40) {
                console.log("🎯 SU1 패킷 감지! SU1 페이지 업데이트 시작");

                updateText("su1_conserialnum_header", data.packet.ConSerialNum);
                updateText("su1_emsversion2", data.packet.ModEmsFwVer);
                
                // 기본 정보
                updateText("su1_McuSwVer", data.packet.McuSwVer);
                updateText("su1_rpttype", rtpTypeText[data.packet.RtpKind] || "Unknown");
                updateText("su1_FPGA_Ver", data.packet.FPGA_Ver);
                
                // 시스템 시간 및 온도
                updateText("su1_curtime", `${data.packet.System_Year} ${data.packet.System_hour}`);
                updateText("su1_curtemper", `${data.packet.SysTemper} ℃`);
                updateText("su1_tempupper", `${data.packet.SysTemperHighLvl} ℃`);
                updateText("su1_templower", `${data.packet.SysTemperLowLvl} ℃`);
                
                // FPGA 상태 (DU와 동일한 패턴으로 updateStatusBadge 함수 사용)
                updateStatusBadge1("su1_FpgaStatus", data.packet.FPGA_Boot_Status);
                updateStatusBadge2("su1_InitStatus", data.packet.FPGA_Init_Status);
                updateStatusBadge3("su1_ScanStatus", data.packet.Beam_Scan_Status);
                
                // Modem 상태
                updateText("su1_modstatus", statusText[data.packet.ModStatus] || "Unknown");
                updateText("su1_modimsi", data.packet.ModIMSINum);
                updateText("su1_modimei", data.packet.ModIMEINum);
                updateText("su1_modnum", data.packet.ModPhonNumber);
                updateText("su1_modip", data.packet.ModIpAddress);
                updateText("su1_rsrp", data.packet.ModRsrp + " [dBm]");
                updateText("su1_rsrq", data.packet.ModRsrq + " [dBm]");
                updateText("su1_rssi", data.packet.ModRssi + " [dBm]");
                updateText("su1_pci", data.packet.ModPci);
                updateText("su1_sinr", data.packet.ModSinr + " [dB]");
                updateText("su1_txpwr", data.packet.ModTxPwr + " [dBm]");
                updateText("su1_modver", data.packet.ModVersion);
                updateText("su1_emsversion", data.packet.ModEmsFwVer);
                updateText("su1_lan", data.packet.ModLanUseMode === 1 ? "Enable" : "Disable");
                
                // ISO 상태 (Ready/Measuring/Fail/Success 표시)
                const su1isoStatusText = {
                    0: "Ready",
                    1: "Measuring", 
                    2: "Fail",
                    3: "Success"
                };
                updateText("su1_iso_status", su1isoStatusText[data.packet.DU_ISO_STATUS] ?? "N/A");

                // SU1 알람 상태 업데이트 (DU와 동일한 방식으로 updateAlarmDot 함수 재사용)
                if (data.packet.AlarmStatus) {
                    const alarmStatus = data.packet.AlarmStatus;
                    
                    // 각 알람 상태에 따라 UI 업데이트 (DU와 동일한 패턴)
                    Object.keys(alarmStatus).forEach(alarmId => {
                        const isActive = alarmStatus[alarmId] === 1;
                        updateAlarmDot(`su1_${alarmId}`, isActive);
                    });
                }
            
                
                // SU1 Beam Status 업데이트 (DU와 동일한 패턴)
                updateText("su1_beam_id", data.packet.Mvbx_BeamSet);
                updateText("su1_beam_rsrp", data.packet.MVBX_rsrp);
                updateText("su1_beam_snr", data.packet.MVBX_snr);
                updateText("su1_beam_ssb", data.packet.MVBX_ssb);
                updateText("su1_beam_pci", data.packet.MVBX_pci);
                
                // SU1 Ant. Array On/Off 업데이트 (DU와 동일한 패턴)
                const antArrayEl = document.getElementById("su1_ant_array_onoff");
                if (antArrayEl) {
                    if (data.packet.Ant_Array_OnOff === 1) {
                        antArrayEl.textContent = "On";
                        antArrayEl.className = "btn btn-success btn-sm";
                    } else {
                        antArrayEl.textContent = "Off";
                        antArrayEl.className = "btn btn-secondary btn-sm";
                    }
                }
                
                // SU1 AGC On/Off 업데이트 (DU와 동일한 패턴)
                const agcEl = document.getElementById("su1_agc_onoff");
                if (agcEl) {
                    if (data.packet.AGC_OnOff === 1) {
                        agcEl.textContent = "On";
                        agcEl.className = "btn btn-success btn-sm";
                    } else {
                        agcEl.textContent = "Off";
                        agcEl.className = "btn btn-secondary btn-sm";
                    }
                }
                
                // SU1 AGC Level 업데이트 (DU와 동일한 패턴)
                updateText("su1_agc_level", data.packet.AGC_Level + " dBm");
                
                // SU1 AGC Input 업데이트 (DU와 동일한 패턴)
                updateText("su1_agc_input", data.packet.AGC_Input + " dBm");
                
                // SU1 Decoded SSB 정보 업데이트 (DU와 동일한 패턴)
                updateText("su1_decoded_ssb_count", data.packet.decoded_ssb_count);
                updateText("su1_decoded_ssb_no_error_count", data.packet.decoded_ssb_no_error_count);
                updateText("su1_decoded_rate", data.packet.DecodedRate + " [%]");
                
                // SU1 AOM & mmWave SISO RF 업데이트 (DU와 동일한 패턴)
                updateText("su1_dl_input_siso", data.packet.SISO_RF_DET_DL0_OUT + " [dBm]");
                updateText("su1_dl_att_siso", data.packet.DU_DlManualAtten_SISO + " [dB]");
                updateText("su1_dl_alc_level_siso", data.packet.ALC_DL0_SISO_Level + " [dBm]");
                if (data.packet.DL_ALC_OnOff_SISO !== undefined) {
                    const dlAlcSisoEl = document.getElementById("su1_dl_alc_onoff_siso");
                    if (dlAlcSisoEl) {
                        if (data.packet.DL_ALC_OnOff_SISO === 1) {
                            dlAlcSisoEl.textContent = "On";
                            dlAlcSisoEl.className = "btn btn-success btn-sm";
                        } else {
                            dlAlcSisoEl.textContent = "Off";
                            dlAlcSisoEl.className = "btn btn-secondary btn-sm";
                        }
                    }
                }
                
                updateText("su1_ul_output_siso", data.packet.SISO_RF_DET_UL0_OUT + " [dBm]");
                updateText("su1_ul_att_siso", data.packet.DU_UlManualAtten_SISO + " [dB]");
                updateText("su1_ul_iso_level_siso", data.packet.ALC_UL0_SISO_Level + " [dBm]");
                
                updateText("su1_mvbx_tx_gain_set_siso", data.packet.Mvbx_TxGainSetSiso + " [dB]");
                updateText("su1_mvbx_rx_gain_set_siso", data.packet.Mvbx_RxGainSetSiso + " [dB]");
                updateText("su1_ul_iso_att_siso", data.packet.DU_UlIsoAtten_SISO + " [dB]");
                
                // SU1 AOM & mmWave MIMO RF 업데이트 (DU와 동일한 패턴)
                updateText("su1_dl_input_mimo", data.packet.MIMO_RF_DET_DL1_OUT + " [dBm]");
                updateText("su1_dl_att_mimo", data.packet.DU_DlManualAtten_MIMO + " [dB]");
                updateText("su1_dl_alc_level_mimo", data.packet.ALC_DL1_MIMO_Level + " [dBm]");
                if (data.packet.DL_ALC_OnOff_MIMO !== undefined) {
                    const dlAlcMimoEl = document.getElementById("su1_dl_alc_onoff_mimo");
                    if (dlAlcMimoEl) {
                        if (data.packet.DL_ALC_OnOff_MIMO === 1) {
                            dlAlcMimoEl.textContent = "On";
                            dlAlcMimoEl.className = "btn btn-success btn-sm";
                        } else {
                            dlAlcMimoEl.textContent = "Off";
                            dlAlcMimoEl.className = "btn btn-secondary btn-sm";
                        }
                    }
                }
                
                updateText("su1_ul_output_mimo", data.packet.MIMO_RF_DET_UL1_OUT + " [dBm]");
                updateText("su1_ul_att_mimo", data.packet.DU_UlManualAtten_MIMO + " [dB]");
                updateText("su1_ul_iso_level_mimo", data.packet.ALC_UL1_MIMO_Level + " [dBm]");
                
                updateText("su1_mvbx_tx_gain_set_mimo", data.packet.Mvbx_TxGainSetMiso + " [dB]");
                updateText("su1_mvbx_rx_gain_set_mimo", data.packet.Mvbx_RxGainSetMiso + " [dB]");
                updateText("su1_ul_iso_att_mimo", data.packet.DU_UlIsoAtten_MIMO + " [dB]");
                
                // SU1 AOM & mmWave SISO OPTIC 업데이트 (DU와 동일한 패턴)
                updateText("su1_ld1_det_dl0_siso", data.packet.LD1_DET_DL0_SISO + " [dBm]");
                updateText("su1_pd1_det_ul0_siso", data.packet.PD1_DET_UL0_SISO + " [dBm]");
                updateText("su1_ld1_det_dl0_siso_low", data.packet.LD1_DET_DL0_SISO_Low + " [dBm]");
                updateText("su1_pd1_det_ul0_siso_low", data.packet.PD1_DET_UL0_SISO_Low + " [dBm]");
                
                // SU1 AOM & mmWave MIMO OPTIC 업데이트 (DU와 동일한 패턴)
                updateText("su1_ld2_det_dl1_mimo", data.packet.LD2_DET_DL1_MIMO + " [dBm]");
                updateText("su1_pd2_det_ul1_mimo", data.packet.PD2_DET_UL1_MIMO + " [dBm]");
                updateText("su1_ld2_det_dl1_mimo_low", data.packet.LD2_DET_DL1_MIMO_Low + " [dBm]");
                updateText("su1_pd2_det_ul1_mimo_low", data.packet.PD2_DET_UL1_MIMO_Low + " [dBm]");
                
                // SU1 gNB Type (Vendor) 업데이트 - DU와 동일 로직 재사용
                if (typeof data.packet.gNB_Vendor === 'number') {
                    let su1GnbVendorText = "Manual";
                    if (data.packet.gNB_Vendor === 0) su1GnbVendorText = "Manual";
                    else if (data.packet.gNB_Vendor === 1) su1GnbVendorText = "Samsung";
                    else if (data.packet.gNB_Vendor === 2) su1GnbVendorText = "Nokia";
                    else if (data.packet.gNB_Vendor === 3) su1GnbVendorText = "Ericsson";
                    updateValue("su1_gNB_Vendor", su1GnbVendorText);
                }

                // SU1 Ant. Array On/Off (GumStick_OnOff) - DU와 동일 로직
                const su1GumstickOnOffEl = document.getElementById("su1_gumstick_onoff");
                if (su1GumstickOnOffEl) {
                    if (data.packet.GumStick_OnOff === 1) {
                        su1GumstickOnOffEl.textContent = "On";
                        su1GumstickOnOffEl.className = "btn btn-success btn-sm";
                    } else {
                        su1GumstickOnOffEl.textContent = "Off";
                        su1GumstickOnOffEl.className = "btn btn-secondary btn-sm";
                    }
                }

                // SU1 AGC On/Off (Mvbx_RsAgcMode) - DU와 동일 로직
                const su1MvbxRsagcModeEl = document.getElementById("su1_mvbx_rsagc_mode");
                if (su1MvbxRsagcModeEl) {
                    if (data.packet.Mvbx_RsAgcMode === 1) {
                        su1MvbxRsagcModeEl.textContent = "On";
                        su1MvbxRsagcModeEl.className = "btn btn-success btn-sm";
                    } else {
                        su1MvbxRsagcModeEl.textContent = "Off";
                        su1MvbxRsagcModeEl.className = "btn btn-secondary btn-sm";
                    }
                }

                // SU1 AGC Level (Mvbx_RsAgcThreshold) - DU와 동일 로직
                let su1AgcLevel = data.packet.Mvbx_RsAgcThreshold;
                if (su1AgcLevel === -999) {
                    updateText("su1_mvbx_rsagc_threshold", "- - -");
                } else {
                    updateText("su1_mvbx_rsagc_threshold", su1AgcLevel + " dBm");
                }

                                // SU1 AGC Input (AGC_Input_Power) - DU와 동일 로직
                updateText("su1_agc_input_power", data.packet.AGC_Input_Power + " dBm");

                // SU1 ALC DL0 SISO On/Off (1=ON, 0=OFF) - DU와 동일 로직
                const su1AlcDl0SisoOnOffEl = document.getElementById("su1_dl_alc_onoff_siso");
                if (su1AlcDl0SisoOnOffEl) {
                    if (data.packet.DL_ALC_OnOff_SISO === 1) {
                        su1AlcDl0SisoOnOffEl.textContent = "On";
                        su1AlcDl0SisoOnOffEl.className = "btn btn-success btn-sm";
                    } else {
                        su1AlcDl0SisoOnOffEl.textContent = "Off";
                        su1AlcDl0SisoOnOffEl.className = "btn btn-secondary btn-sm";
                    }
                }
                
                // SU1 ALC DL1 MIMO On/Off (1=ON, 0=OFF) - DU와 동일 로직
                const su1AlcDl1MimoOnOffEl = document.getElementById("su1_dl_alc_onoff_mimo");
                if (su1AlcDl1MimoOnOffEl) {
                    if (data.packet.DL_ALC_OnOff_MIMO === 1) {
                        su1AlcDl1MimoOnOffEl.textContent = "On";
                        su1AlcDl1MimoOnOffEl.className = "btn btn-success btn-sm";
                    } else {
                        su1AlcDl1MimoOnOffEl.textContent = "Off";
                        su1AlcDl1MimoOnOffEl.className = "btn btn-secondary btn-sm";
                    }
                }
                
                
                console.log("✅ SU1 페이지 업데이트 완료");
            }


            //Modem Status 화면

            updateText("modstatus", statusText[data.packet.ModStatus] || "Unknown");
            updateText("modimsi", data.packet.ModIMSINum);
            updateText("modimei", data.packet.ModIMEINum);
            updateText("modnum", data.packet.ModPhonNumber);
            updateText("rsrp", data.packet.ModRsrp + " [dBm]");
            updateText("rsrq", data.packet.ModRsrq + " [dBm]");
            updateText("rssi", data.packet.ModRssi + " [dBm]");
            updateText("pci", data.packet.ModPci);
            updateText("sinr", data.packet.ModSinr + " [dB]");
            updateText("txpwr", data.packet.ModTxPwr + " [dBm]");
            updateText("modver", data.packet.ModVersion);
            updateText("emsversion", data.packet.ModEmsFwVer);
            updateText("emsversion2", data.packet.ModEmsFwVer);
            updateText("emsversion2_packet", data.packet.ModEmsFwVer);
            updateText("modip", data.packet.ModIpAddress);
            updateText("lan", data.packet.ModLanUseMode === 1 ? "Enable" : "Disable");
            
            // ISO Detect Mode: 1이면 MIMO, 0이면 SISO
            updateValue("isodetect", data.packet.IsoDetectMode === 1 ? "MIMO" : "SISO");
            
            // Polling Time: 값 출력 (범위 100~5,000ms)
            updateValue("pollingtime", data.packet.PollingTime);
            
            // Baudrate: 0=19200bps, 1=38400bps, 2=57600bps, 3=115200bps
            let baudrateText = "N/A";
            if (data.packet.Mu_Su_Buadrate === 0) baudrateText = "19200";
            else if (data.packet.Mu_Su_Buadrate === 1) baudrateText = "38400";
            else if (data.packet.Mu_Su_Buadrate === 2) baudrateText = "57600";
            else if (data.packet.Mu_Su_Buadrate === 3) baudrateText = "115200";
            updateValue("baudrate", baudrateText);
            
            // Ant Band: 0이면 Single, 1이면 Tri
            updateText("antband", data.packet.ApiOldNewVer === 0 ? "Single" : (data.packet.ApiOldNewVer === 1 ? "Tri" : "N/A"));
            
            // 토글 버튼 업데이트 (1=ON, 0=OFF)
            // AOM Temp
            const aomTempToggle = document.getElementById('aomtemp-toggle');
            if (aomTempToggle) {
                if (data.packet.AomTemperConperMode === 1) {
                    updateText('aomtemp-toggle', 'On');
                    aomTempToggle.className = 'btn-toggle on';
                } else {
                    updateText('aomtemp-toggle', 'Off');
                    aomTempToggle.className = 'btn-toggle off';
                }
            }
            
            // Att Test
            const attTestToggle = document.getElementById('att-test-toggle');
            if (attTestToggle) {
                if (data.packet.AttTestMode === 1) {
                    updateText('att-test-toggle', 'On');
                    attTestToggle.className = 'btn-toggle on';
                } else {
                    updateText('att-test-toggle', 'Off');
                    attTestToggle.className = 'btn-toggle off';
                }
            }
            
            // Api Init
            const apiInitToggle = document.getElementById('api-init-toggle');
            if (apiInitToggle) {
                if (data.packet.ApiInitMode === 1) {
                    updateText('api-init-toggle', 'On');
                    apiInitToggle.className = 'btn-toggle on';
                } else {
                    updateText('api-init-toggle', 'Off');
                    apiInitToggle.className = 'btn-toggle off';
                }
            }
            
            // Api Init Retry
            const apiInitRetryToggle = document.getElementById('api-init-retry-toggle');
            if (apiInitRetryToggle) {
                if (data.packet.ApiInitRetryMode === 1) {
                    updateText('api-init-retry-toggle', 'On');
                    apiInitRetryToggle.className = 'btn-toggle on';
                } else {
                    updateText('api-init-retry-toggle', 'Off');
                    apiInitRetryToggle.className = 'btn-toggle off';
                }
            }
            
            // Debug
            const debugToggle = document.getElementById('debug-toggle');
            if (debugToggle) {
                if (data.packet.DebugMode === 1) {
                    updateText('debug-toggle', 'On');
                    debugToggle.className = 'btn-toggle on';
                } else {
                    updateText('debug-toggle', 'Off');
                    debugToggle.className = 'btn-toggle off';
                }
            }
            
            // Modem
            const modemToggle = document.getElementById('modem-toggle');
            if (modemToggle) {
                if (data.packet.ModemOnOff === 1) {
                    updateText('modem-toggle', 'On');
                    modemToggle.className = 'btn-toggle on';
                } else {
                    updateText('modem-toggle', 'Off');
                    modemToggle.className = 'btn-toggle off';
                }
            }

            /*
            const parseFloat32 = (bytes) => {
                try {
                    if (!Array.isArray(bytes) || bytes.length !== 4) return "N/A";
                    const buffer = new ArrayBuffer(4);
                    const view = new DataView(buffer);
                    for (let i = 0; i < 4; i++) {
                        view.setUint8(i, bytes[i]);
                    }
                    return view.getFloat32(0, true); // little-endian
                } catch (e) {
                    console.error("Float parse error:", e);
                    return "N/A";
                }
            };
            */
        

            updateText("mvbx_beamset", data.packet.Mvbx_BeamSet);
            updateText("mvbx_pci", data.packet.MVBX_pci);
            updateText("mvbx_ssb", data.packet.MVBX_ssb);
            updateText("mvbx_rsrp", data.packet.MVBX_rsrp);
            updateText("mvbx_snr", data.packet.MVBX_snr);

            // SISO RF
            updateText("dl_input_siso", data.packet.SISO_RF_DET_DL0_OUT + " [dBm]");
                            updateValue("dl_att_siso", data.packet.DU_DlManualAtten_SISO);
                updateValue("dl_alc_level_siso", data.packet.ALC_DL0_SISO_Level);
            updateText("ul_input_siso", data.packet.SISO_RF_DET_UL0_OUT + " [dBm]");
                            updateValue("ul_att_siso", data.packet.DU_UlManualAtten_SISO);
                updateValue("ul_iso_level_siso", data.packet.ALC_UL0_SISO_Level);
                            updateValue("mvbx_tx_gain_set_siso", data.packet.Mvbx_TxGainSetSiso);
                updateValue("mvbx_rx_gain_set_siso", data.packet.Mvbx_RxGainSetSiso);
            updateText("ul_iso_att_siso", data.packet.DU_UlIsoAtten_SISO + " [dB]");

            // MIMO RF
            updateText("dl_input_mimo", data.packet.MIMO_RF_DET_DL1_OUT + " [dBm]");
                            updateValue("dl_att_mimo", data.packet.DU_DlManualAtten_MIMO);
                updateValue("dl_alc_level_mimo", data.packet.ALC_DL1_MIMO_Level);
            updateText("ul_input_mimo", data.packet.MIMO_RF_DET_UL1_OUT + " [dBm]");
                            updateValue("ul_att_mimo", data.packet.DU_UlManualAtten_MIMO);
                updateValue("ul_iso_level_mimo", data.packet.ALC_UL1_MIMO_Level);
                            updateValue("mvbx_tx_gain_set_miso", data.packet.Mvbx_TxGainSetMiso);
                updateValue("mvbx_rx_gain_set_miso", data.packet.Mvbx_RxGainSetMiso);
            updateText("ul_iso_att_mimo", data.packet.DU_UlIsoAtten_MIMO + " [dB]");

            // RF Configuration Fields Update
            console.log("RF Configuration Data:", data.packet);
            
            // SISO RF Fields
            console.log("DU_DlSubAtten_SISO:", data.packet.DU_DlSubAtten_SISO);
            updateValue("DlSubAtten_SISO", data.packet.DU_DlSubAtten_SISO);
            updateValue("UlSubAtten_SISO", data.packet.DU_UlSubAtten_SISO);
            updateValue("DL_InputOffset_SISO", data.packet.DL_OutputOffset_SISO);
            updateValue("UL_OutputOffset_SISO", data.packet.UL_InputOffset_SISO);
            updateValue("Dl_Att_Test_Siso", data.packet.Dl_Siso_Att_Test);
            updateValue("Ul_Att_Test_Siso", data.packet.Ul_Siso_Att_Test);
            updateValue("Ant_Gain_Siso", data.packet.Gs_Gain_Siso);
            updateValue("Ant_Output_SISO", data.packet.DsOutputPower_SISO);
            updateValue("Ant_Out_Offset_Siso", data.packet.ApiGsOutputPowerOffsetSiso);
            updateValue("Ant_Offset_DL_Siso", data.packet.GS_AttenOffset_DL_Siso);
            updateValue("Ant_Offset_UL_Siso", data.packet.GS_AttenOffset_UL_Siso);

            // MIMO RF Fields
            updateValue("DlSubAtten_MIMO", data.packet.DU_DlSubAtten_MIMO);
            updateValue("UlSubAtten_MIMO", data.packet.DU_UlSubAtten_MIMO);
            updateValue("DL_InputOffset_MIMO", data.packet.DL_OutputOffset_MIMO);
            updateValue("UL_OutputOffset_MIMO", data.packet.UL_InputOffset_MIMO);
            updateValue("Dl_Att_Test_Mimo", data.packet.Dl_Mimo_Att_Test);
            updateValue("U_Att_Testl_Mimo", data.packet.Ul_Mimo_Att_Test);
            updateValue("Ant_Gain_Mimo", data.packet.Gs_Gain_Mimo);
            updateValue("Ant_Output_MIMO", data.packet.DsOutputPower_MIMO);
            updateValue("Ant_Out_Offset_Mimo", data.packet.ApiGsOutputPowerOffsetMimo);
            updateValue("Ant_Offset_DL_Mimo", data.packet.GS_AttenOffset_DL_Mimo);
            updateValue("Ant_Offset_UL_Mimo", data.packet.GS_AttenOffset_UL_Mimo);

            // Optic Configuration Fields Update
            // SISO Optic Fields
            updateValue("LD1_DET_DL0_SISO_Offset", data.packet.LD1_DET_DL0_SISO_Offset);
            updateValue("PD1_DET_UL0_SISO_Offset", data.packet.PD1_DET_UL0_SISO_Offset);
            updateValue("RsrpOffset", data.packet.RsrpOffset);
            updateValue("LowRsrpLevel", data.packet.LowRsrpLevel);
            updateValue("LowRsrpStillTime", data.packet.LowRsrpStillTime);

            // MIMO Optic Fields
            updateValue("LD2_DET_DL1_MIMO_Offset", data.packet.LD2_DET_DL1_MIMO_Offset);
            updateValue("PD2_DET_UL1_MIMO_Offset", data.packet.PD2_DET_UL1_MIMO_Offset);

            

            //siso optic
            updateText("ld1_det_dl0_siso", data.packet.LD1_DET_DL0_SISO + " [dBm]");
            updateText("ld2_det_dl1_mimo", data.packet.LD2_DET_DL1_MIMO + " [dBm]");
            updateText("pd1_det_ul0_siso", data.packet.PD1_DET_UL0_SISO + " [dBm]");
            updateText("pd2_det_ul1_mimo", data.packet.PD2_DET_UL1_MIMO + " [dBm]");
            
            //mimo optic
                            updateValue("ld1_det_dl0_siso_low", data.packet.LD1_DET_DL0_SISO_Low);
                updateValue("ld2_det_dl1_mimo_low", data.packet.LD2_DET_DL1_MIMO_Low);
                updateValue("pd1_det_ul0_siso_low", data.packet.PD1_DET_UL0_SISO_Low);
                updateValue("pd2_det_ul1_mimo_low", data.packet.PD2_DET_UL1_MIMO_Low);


            if (data.packet.AlarmStatus) {
                // 서버에서 계산된 알람 상태 사용
                const alarmStatus = data.packet.AlarmStatus;
                
                // 각 알람 상태에 따라 UI 업데이트
                Object.keys(alarmStatus).forEach(alarmId => {
                    const isActive = alarmStatus[alarmId] === 1;
                    updateAlarmDot(alarmId, isActive);
                });
                
                // DU 알람 상태 계산 (클라이언트에서 계산)
                const hasAnyAlarm = Object.values(alarmStatus).some(status => status === 1);
                currentDuAlarmStatus = hasAnyAlarm ? 1 : 0;
            }

            updateStatusBadge1("FpgaStatus", data.packet.FPGA_Boot_Status);
            updateStatusBadge2("InitStatus", data.packet.FPGA_Init_Status);
            updateStatusBadge3("ScanStatus", data.packet.Beam_Scan_Status);




            updateValue("Mvbx_RsAgcThreshold", data.packet.Mvbx_RsAgcThreshold);
            updateValue("conserialnum", data.packet.ConSerialNum);
            updateText("conserialnum_header", data.packet.ConSerialNum);
            updateText("conserialnum_header_packet", data.packet.ConSerialNum);

            // Decoded SSB 정보 업데이트
            updateText("decoded_ssb_count", data.packet.decoded_ssb_count);
            updateText("decoded_ssb_no_error_count", data.packet.decoded_ssb_no_error_count);
            updateText("DecodedRate", data.packet.DecodedRate + " [%]");

            const duIsoStatusText = {
                0: "Ready",
                1: "Measuring",
                2: "Fail",
                3: "Success"
            };
            


            
            updateText("du_iso_status", duIsoStatusText[data.packet.DU_ISO_STATUS] ?? "N/A");
        

                            // 1. Ant. Array On/Off (GumStick_OnOff)
                const gumstickOnOffEl = document.getElementById("gumstick_onoff");
                if (gumstickOnOffEl) {
                    if (data.packet.GumStick_OnOff === 1) {
                        gumstickOnOffEl.textContent = "On";
                        gumstickOnOffEl.className = "btn btn-success btn-sm";
                    } else {
                        gumstickOnOffEl.textContent = "Off";
                        gumstickOnOffEl.className = "btn btn-secondary btn-sm";
                    }
                }

                            // 2. AGC On/Off (Mvbx_RsAgcMode)
                const mvbxRsagcModeEl = document.getElementById("mvbx_rsagc_mode");
                if (mvbxRsagcModeEl) {
                    if (data.packet.Mvbx_RsAgcMode === 1) {
                        mvbxRsagcModeEl.textContent = "On";
                        mvbxRsagcModeEl.className = "btn btn-success btn-sm";
                    } else {
                        mvbxRsagcModeEl.textContent = "Off";
                        mvbxRsagcModeEl.className = "btn btn-secondary btn-sm";
                    }
                }

                            // 3. AGC Level (Mvbx_RsAgcThreshold)
                let agcLevel = data.packet.Mvbx_RsAgcThreshold;
                if (agcLevel === -999) {
                    updateText("mvbx_rsagc_threshold", "- - -");
                } else {
                    updateText("mvbx_rsagc_threshold", agcLevel + " dBm");
                }

            // 4. AGC Input (AGC_Input_Power)
            updateText("agc_input_power", data.packet.AGC_Input_Power + " dBm");

            // ALC DL0 SISO Mode (1=ON, 0=OFF)
                            const alcDl0SisoEl = document.getElementById("alc_dl0_siso_mode");
                if (alcDl0SisoEl) {
                    if (data.packet.ALC_DL0_SISO_Mode === 1) {
                        alcDl0SisoEl.textContent = "On";
                        alcDl0SisoEl.className = "btn btn-success btn-sm";
                    } else {
                        alcDl0SisoEl.textContent = "Off";
                        alcDl0SisoEl.className = "btn btn-secondary btn-sm";
                    }
                }
            
            // ALC DL1 MIMO Mode (1=ON, 0=OFF)
                            const alcDl1MimoEl = document.getElementById("alc_dl1_mimo_mode");
                if (alcDl1MimoEl) {
                    if (data.packet.ALC_DL1_MIMO_Mode === 1) {
                        alcDl1MimoEl.textContent = "On";
                        alcDl1MimoEl.className = "btn btn-success btn-sm";
                    } else {
                        alcDl1MimoEl.textContent = "Off";
                        alcDl1MimoEl.className = "btn btn-secondary btn-sm";
                    }
                }

            // gNB Type: 0=Manual, 1=Samsung, 2=Nokia, 3=Ericsson
            console.log('gNB_Vendor data:', data.packet.gNB_Vendor);
            let gNBVendorText = "Manual"; // 기본값
            if (data.packet.gNB_Vendor === 0) gNBVendorText = "Manual";
            else if (data.packet.gNB_Vendor === 1) gNBVendorText = "Samsung";
            else if (data.packet.gNB_Vendor === 2) gNBVendorText = "Nokia";
            else if (data.packet.gNB_Vendor === 3) gNBVendorText = "Ericsson";
            console.log('gNBVendorText:', gNBVendorText);
            
            // 메인 화면의 gNB_Vendor 업데이트
            updateValue("gNB_Vendor", gNBVendorText);
            
            // 모달의 gNB_Vendor_1 업데이트
            updateValue("gNB_Vendor_1", gNBVendorText);
            
            // AGC On/Off 업데이트 (1=ON, 0=OFF)
            const agcModeEl2 = document.getElementById("Mvbx_RsAgcMode2");
            if (agcModeEl2) {
                if (data.packet.Mvbx_RsAgcMode === 1) {
                    agcModeEl2.textContent = "On";
                    agcModeEl2.className = "btn btn-success btn-sm w-100";
                } else {
                    agcModeEl2.textContent = "Off";
                    agcModeEl2.className = "btn btn-secondary btn-sm w-100";
                }
            }
            
            // AGC Level 업데이트 (Range:-60~-100, Step:1)
            updateValue("Mvbx_RsAgcThreshold2", data.packet.Mvbx_RsAgcThreshold);

            

            updateText('antArrayVer', data.packet.Gumstick_Ver);
            document.getElementById('temperComp').textContent = data.packet.BeamAntSelect === 1 ? 'On' : 'Off';
            updateText('startTemper', data.packet.Gumstick_StartTemper + '℃');
            updateText('curTemper', data.packet.Gumstick_CurTemper + '℃');
            updateText('compensationDL', data.packet.DlTemperCompensation + 'dB');
            updateText('compensationUL', data.packet.UlTemperCompensation + 'dB');
            updateText('mvbxMv2850TxGainSiso', data.packet.Mvbx_Mv2850TxGainSiso);
            updateText('mvbxMv2850RxGainSiso', data.packet.Mvbx_Mv2850RxGainSiso);
            updateText('mvbxMv2853TxGainSiso', data.packet.Mvbx_Mv2853TxGainSiso);
            updateText('mvbxMv2853RxGainSiso', data.packet.Mvbx_Mv2853RxGainSiso);
            updateText('mvbxMv2850TxGainMimo', data.packet.Mvbx_Mv2850TxGainMimo);
            updateText('mvbxMv2850RxGainMimo', data.packet.Mvbx_Mv2850RxGainMimo);
            updateText('mvbxMv2853TxGainMimo', data.packet.Mvbx_Mv2853TxGainMimo);
            updateText('mvbxMv2853RxGainMimo', data.packet.Mvbx_Mv2853RxGainMimo);
            updateText('mvbxBeamInfoBeamId1', data.packet.MVBX_BeamInfo_beamId1);
            updateText('mvbxBeamInfoBeamId2', data.packet.MVBX_BeamInfo_beamId2);
            updateText('mvbxBeamInfoBeamId3', data.packet.MVBX_BeamInfo_beamId3);
            updateText('mvbxBeamInfoBeamId4', data.packet.MVBX_BeamInfo_beamId4);
            updateText('mvbxBeamInfoPci1', data.packet.MVBX_BeamInfo_pci1);
            updateText('mvbxBeamInfoPci2', data.packet.MVBX_BeamInfo_pci2);
            updateText('mvbxBeamInfoPci3', data.packet.MVBX_BeamInfo_pci3);
            updateText('mvbxBeamInfoPci4', data.packet.MVBX_BeamInfo_pci4);
            updateText('mvbxBeamInfoSsbldx1', data.packet.MVBX_BeamInfo_ssbldx1);
            updateText('mvbxBeamInfoSsbldx2', data.packet.MVBX_BeamInfo_ssbldx2);
            updateText('mvbxBeamInfoSsbldx3', data.packet.MVBX_BeamInfo_ssbldx3);
            updateText('mvbxBeamInfoSsbldx4', data.packet.MVBX_BeamInfo_ssbldx4);
            updateText('mvbxBeamInfoEnergy1', data.packet.MVBX_BeamInfo_energy1);
            updateText('mvbxBeamInfoEnergy2', data.packet.MVBX_BeamInfo_energy2);
            updateText('mvbxBeamInfoEnergy3', data.packet.MVBX_BeamInfo_energy3);
            updateText('mvbxBeamInfoEnergy4', data.packet.MVBX_BeamInfo_energy4);
            updateText('mvbxBeamInfoPsstype1', data.packet.MVBX_BeamInfo_psstype1);
            updateText('mvbxBeamInfoPsstype2', data.packet.MVBX_BeamInfo_psstype2);
            updateText('mvbxBeamInfoPsstype3', data.packet.MVBX_BeamInfo_psstype3);
            updateText('mvbxBeamInfoPsstype4', data.packet.MVBX_BeamInfo_psstype4);
            updateText('mvbxBeamInfoSnr1', data.packet.MVBX_BeamInfo_snr1);
            updateText('mvbxBeamInfoSnr2', data.packet.MVBX_BeamInfo_snr2);
            updateText('mvbxBeamInfoSnr3', data.packet.MVBX_BeamInfo_snr3);
            updateText('mvbxBeamInfoSnr4', data.packet.MVBX_BeamInfo_snr4);
            updateText('mvbxBeamInfoRsrp1', data.packet.MVBX_BeamInfo_rsrp1);
            updateText('mvbxBeamInfoRsrp2', data.packet.MVBX_BeamInfo_rsrp2);
            updateText('mvbxBeamInfoRsrp3', data.packet.MVBX_BeamInfo_rsrp3);
            updateText('mvbxBeamInfoRsrp4', data.packet.MVBX_BeamInfo_rsrp4);
            document.getElementById('beamRetrySwitch').textContent = data.packet.BeamScan_OnOff === 1 ? 'On' : 'Off';
            document.getElementById('decodeAGCSwitch').textContent = data.packet.DecodeRecoveryFuncOnOff === 1 ? 'On' : 'Off';
            updateText('retryCount', data.packet.TryBeamScanCont);
            updateText('pllRelockCount', data.packet.PllRelockCount);
            updateValue('centerFrequency', data.packet.ApiVenderFreq);
            updateValue('beamFix', data.packet.DuFixBeam === 0 ? 'AUTO' : 'FIX');
            updateValue('apiLogLevel', data.packet.ApiLogLevel);
            updateValue('apiAdcSel', data.packet.ApiAdcSel);
            updateValue('syncPathGain', data.packet.ApiSyncPathGain);
            updateValue('duTimeAdvance', data.packet.ApiDuTimeAdvance);
            updateValue('suTimeAdvance', data.packet.ApiSuTimeAdvance);
            updateValue('orientationActual', data.packet.Actual_Orientation);
            updateValue('tiltActual', data.packet.Actual_Tilt);
            updateText('orientation', data.packet.Orientation);
            updateText('tilt', data.packet.Tilt);
            updateText('Actual_Orientation', data.packet.Actual_Orientation);
            updateText('Actual_Tilt', data.packet.Actual_Tilt);
            updateValue('du-name', data.packet.ConSerialNum);

            // Sync Module S/N과 EMS ver 업데이트
            updateText('conserialnum_sync2', data.packet.ConSerialNum);
            updateText('emsversion2_sync2', data.packet.ModEmsFwVer);

        

            // Packet 전송횟수와 응답횟수 업데이트
            if (data.packet.PackSendCount && data.packet.PackErrorCount) {
                // Cascade 1~4 업데이트 (각 cascade당 전송횟수 4바이트, 응답횟수 4바이트)
                for (let i = 1; i <= 4; i++) {
                    const sendCount = data.packet.PackSendCount[i-1] || 0;
                    const errorCount = data.packet.PackErrorCount[i-1] || 0;
                    updateText(`packet_cascade${i}`, `${sendCount} / ${errorCount}`);
                }
            }

                          // SU Enable 버튼 상태 업데이트
              const su1EnableBtn = document.getElementById('su1-enable-btn');
              const su2EnableBtn = document.getElementById('su2-enable-btn');
              const su3EnableBtn = document.getElementById('su3-enable-btn');
              const su4EnableBtn = document.getElementById('su4-enable-btn');
  
              // SU Info 필드들
              const su1NameField = document.getElementById('su1-name');
              const su1LatField = document.getElementById('su1-latitude');
              const su1LonField = document.getElementById('su1-longitude');
              
              const su2NameField = document.getElementById('su2-name');
              const su2LatField = document.getElementById('su2-latitude');
              const su2LonField = document.getElementById('su2-longitude');
              
              const su3NameField = document.getElementById('su3-name');
              const su3LatField = document.getElementById('su3-latitude');
              const su3LonField = document.getElementById('su3-longitude');
              
              const su4NameField = document.getElementById('su4-name');
              const su4LatField = document.getElementById('su4-latitude');
              const su4LonField = document.getElementById('su4-longitude');
  
              if (su1EnableBtn) {
                  su1EnableBtn.textContent = "#1 Enable";
                  su1EnableBtn.className = "btn btn-success btn-sm";
                  if (su1NameField) {
                      su1NameField.disabled = false;
                      su1NameField.style.backgroundColor = "white";
                  }
                  if (su1LatField) {
                      su1LatField.disabled = false;
                      su1LatField.style.backgroundColor = "white";
                  }
                  if (su1LonField) {
                      su1LonField.disabled = false;
                      su1LonField.style.backgroundColor = "white";
                  }
              }
              if (su2EnableBtn) {
                  if (data.packet.SuEnableBits && data.packet.SuEnableBits.SU2_ENABLE === 1) {
                      su2EnableBtn.textContent = "#2 Enable";
                      su2EnableBtn.className = "btn btn-success btn-sm";
                      if (su2NameField) {
                          su2NameField.disabled = false;
                          su2NameField.style.backgroundColor = "white";
                      }
                      if (su2LatField) {
                          su2LatField.disabled = false;
                          su2LatField.style.backgroundColor = "white";
                      }
                      if (su2LonField) {
                          su2LonField.disabled = false;
                          su2LonField.style.backgroundColor = "white";
                      }
                  } else {
                      su2EnableBtn.textContent = "#2 Disable";
                      su2EnableBtn.className = "btn btn-secondary btn-sm";
                      if (su2NameField) {
                          su2NameField.disabled = true;
                          su2NameField.style.backgroundColor = "#e9ecef";
                      }
                      if (su2LatField) {
                          su2LatField.disabled = true;
                          su2LatField.style.backgroundColor = "#e9ecef";
                      }
                      if (su2LonField) {
                          su2LonField.disabled = true;
                          su2LonField.style.backgroundColor = "#e9ecef";
                      }
                  }
              }
              if (su3EnableBtn) {
                  if (data.packet.SuEnableBits && data.packet.SuEnableBits.SU3_ENABLE === 1) {
                      su3EnableBtn.textContent = "#3 Enable";
                      su3EnableBtn.className = "btn btn-success btn-sm";
                      if (su3NameField) {
                          su3NameField.disabled = false;
                          su3NameField.style.backgroundColor = "white";
                      }
                      if (su3LatField) {
                          su3LatField.disabled = false;
                          su3LatField.style.backgroundColor = "white";
                      }
                      if (su3LonField) {
                          su3LonField.disabled = false;
                          su3LonField.style.backgroundColor = "white";
                      }
                  } else {
                      su3EnableBtn.textContent = "#3 Disable";
                      su3EnableBtn.className = "btn btn-secondary btn-sm";
                      if (su3NameField) {
                          su3NameField.disabled = true;
                          su3NameField.style.backgroundColor = "#e9ecef";
                      }
                      if (su3LatField) {
                          su3LatField.disabled = true;
                          su3LatField.style.backgroundColor = "#e9ecef";
                      }
                      if (su3LonField) {
                          su3LonField.disabled = true;
                          su3LonField.style.backgroundColor = "#e9ecef";
                      }
                  }
              }
              if (su4EnableBtn) {
                  if (data.packet.SuEnableBits && data.packet.SuEnableBits.SU4_ENABLE === 1) {
                      su4EnableBtn.textContent = "#4 Enable";
                      su4EnableBtn.className = "btn btn-success btn-sm";
                      if (su4NameField) {
                          su4NameField.disabled = false;
                          su4NameField.style.backgroundColor = "white";
                      }
                      if (su4LatField) {
                          su4LatField.disabled = false;
                          su4LatField.style.backgroundColor = "white";
                      }
                      if (su4LonField) {
                          su4LonField.disabled = false;
                          su4LonField.style.backgroundColor = "white";
                      }
                  } else {
                      su4EnableBtn.textContent = "#4 Disable";
                      su4EnableBtn.className = "btn btn-secondary btn-sm";
                      if (su4NameField) {
                          su4NameField.disabled = true;
                          su4NameField.style.backgroundColor = "#e9ecef";
                      }
                      if (su4LatField) {
                          su4LatField.disabled = true;
                          su4LatField.style.backgroundColor = "#e9ecef";
                      }
                      if (su4LonField) {
                          su4LonField.disabled = true;
                          su4LonField.style.backgroundColor = "#e9ecef";
                      }
                  }
              }
            
        
            
            // Beam Book 동그라미 색상 업데이트 (app.py에서 파싱한 데이터 사용)
            if (data.packet.MVBX_BeamInfo_beamId2 && data.packet.MVBX_BeamInfo_beamId3 && data.packet.MVBX_BeamInfo_beamId4) {
                updateBeamColors({
                    yellow: [],
                    blue: [data.packet.MVBX_BeamInfo_beamId2, data.packet.MVBX_BeamInfo_beamId3, data.packet.MVBX_BeamInfo_beamId4].filter(id => id > 0)
                });
            }

            // 네비게이션 점 색상 업데이트
            updateNavDotColors();

            // 현재 활성화된 화면의 점은 알람 상태를 유지 (추가 표시 없음)
            const activeScreenId = document.querySelector('.content-area > div.active')?.id;
            // 활성화된 화면의 점에 대한 추가 표시 제거
            
            // SU Enable 상태 처리
            if (data.packet.SuEnableBits) {
                const enableBits = data.packet.SuEnableBits;
                
                // SU1 Enable 상태 (항상 Enable로 설정)
                const su1EnableBadge = document.getElementById('su1-enable-badge');
                if (su1EnableBadge) {
                    su1EnableBadge.textContent = "#1 Enable";
                    su1EnableBadge.className = "badge bg-success";
                }
                
                // SU2 Enable 상태
                const su2EnableBadge = document.getElementById('su2-enable-badge');
                if (su2EnableBadge) {
                    if (enableBits.SU2_ENABLE === 1) {
                        su2EnableBadge.textContent = "#2 Enable";
                        su2EnableBadge.className = "badge bg-success";
                    } else {
                        su2EnableBadge.textContent = "#2 Disable";
                        su2EnableBadge.className = "badge bg-secondary";
                    }
                }
                
                // SU3 Enable 상태
                const su3EnableBadge = document.getElementById('su3-enable-badge');
                if (su3EnableBadge) {
                    if (enableBits.SU3_ENABLE === 1) {
                        su3EnableBadge.textContent = "#3 Enable";
                        su3EnableBadge.className = "badge bg-success";
                    } else {
                        su3EnableBadge.textContent = "#3 Disable";
                        su3EnableBadge.className = "badge bg-secondary";
                    }
                }
                
                // SU4 Enable 상태
                const su4EnableBadge = document.getElementById('su4-enable-badge');
                if (su4EnableBadge) {
                    if (enableBits.SU4_ENABLE === 1) {
                        su4EnableBadge.textContent = "#4 Enable";
                        su4EnableBadge.className = "badge bg-success";
                    } else {
                        su4EnableBadge.textContent = "#4 Disable";
                        su4EnableBadge.className = "badge bg-secondary";
                    }
                }
                
                // SU Link 컨테이너 표시/숨김 처리
                const su1LinkContainer = document.getElementById('su1-link-container');
                const su2LinkContainer = document.getElementById('su2-link-container');
                const su3LinkContainer = document.getElementById('su3-link-container');
                const su4LinkContainer = document.getElementById('su4-link-container');
                
                // SU1은 항상 표시 (Enable)
                if (su1LinkContainer) {
                    su1LinkContainer.style.display = 'block';
                }
                
                // SU2 Enable 상태에 따라 표시/숨김
                if (su2LinkContainer) {
                    su2LinkContainer.style.display = enableBits.SU2_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU3 Enable 상태에 따라 표시/숨김
                if (su3LinkContainer) {
                    su3LinkContainer.style.display = enableBits.SU3_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU4 Enable 상태에 따라 표시/숨김
                if (su4LinkContainer) {
                    su4LinkContainer.style.display = enableBits.SU4_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU Navigation 항목 표시/숨김 처리
                const su1NavItem = document.getElementById('nav_su1');
                const su2NavItem = document.getElementById('nav_su2');
                const su3NavItem = document.getElementById('nav_su3');
                const su4NavItem = document.getElementById('nav_su4');
                
                // SU1은 항상 표시 (Enable)
                if (su1NavItem) {
                    su1NavItem.style.display = 'block';
                }
                
                // SU2 Enable 상태에 따라 표시/숨김
                if (su2NavItem) {
                    su2NavItem.style.display = enableBits.SU2_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU3 Enable 상태에 따라 표시/숨김
                if (su3NavItem) {
                    su3NavItem.style.display = enableBits.SU3_ENABLE === 1 ? 'block' : 'none';
                }
                
                // SU4 Enable 상태에 따라 표시/숨김
                if (su4NavItem) {
                    su4NavItem.style.display = enableBits.SU4_ENABLE === 1 ? 'block' : 'none';
                }
            }

            
        });

        // Bootstrap Modal을 사용하여 정보 메시지 표시 (alert() 대체)
        function showInfoModal(message) {
            const modalHtml = `
                <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="infoModalLabel">정보</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                ${message}
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            // 모달이 이미 존재하면 제거 (여러 번 클릭 시 중복 생성 방지)
            const existingModal = document.getElementById('infoModal');
            if (existingModal) existingModal.remove();

            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const infoModal = new bootstrap.Modal(document.getElementById('infoModal'));
            infoModal.show();
        }

        // Alarm Level 모달을 여는 함수
        function openAlarmLevelModal() {
            // Alarm Level 모달: update_status 패킷 요청 시작 (알람 상태 정보)
            modalOpened('#alarmLevelModal');
            
            const modalElement = document.getElementById('alarmLevelModal');
            if (modalElement) {
                // 기존 모달 인스턴스가 있다면 제거
                const existingModal = bootstrap.Modal.getInstance(modalElement);
                if (existingModal) {
                    existingModal.dispose();
                }
                
                // 새로운 모달 인스턴스 생성
                const modal = new bootstrap.Modal(modalElement, {
                    backdrop: 'static',
                    keyboard: false
                });
                
                modal.show();
            }
        }

        // Alarm History 모달을 여는 함수
        function openAlarmHistoryModal() {
            // Alarm History 모달: update_status 패킷 요청 시작 (알람 히스토리 정보)
            modalOpened('#alarmHistoryModal');
            
            const modalElement = document.getElementById('alarmHistoryModal');
            if (modalElement) {
                // 기존 모달 인스턴스가 있다면 제거
                const existingModal = bootstrap.Modal.getInstance(modalElement);
                if (existingModal) {
                    existingModal.dispose();
                }
                
                // 새로운 모달 인스턴스 생성
                const modal = new bootstrap.Modal(modalElement, {
                    backdrop: 'static',
                    keyboard: false
                });
                
                modal.show();
            }
        }





        // ConMuFlag 전체 초기화 함수
        function resetConMuFlag() {
            if (sendPacketData.ConMuFlag) {
                sendPacketData.ConMuFlag = sendPacketData.ConMuFlag.map(() => 0x00);
            }
        }

        // Reset 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleResetConfirmation(confirmed) {
            if (confirmed) {
                console.log('DU Reset이 확인되었습니다. Reset 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[0] 바이트를 1로 수정
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x01; // 10진수 1 또는 16진수 0x01
                    console.log('sendPacketData.ConMuFlag[0] set to 1:', sendPacketData.ConMuFlag[0]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is empty.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('DU Reset packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x00; // 0번 바이트 전체 초기화
                }
            }
        }

        // Modem Reset 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleModemResetConfirmation(confirmed) {
            if (confirmed) {
                console.log('Modem Reset이 확인되었습니다. Reset 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConEmsModemReset 개별 초기화 (이 함수에서 사용하므로)
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x00;
                }

                // ConEmsModemReset 필드를 0x01로 설정 (Modem reset)
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x01; // 0x01 = Modem reset
                    console.log('sendPacketData.ConEmsModemReset set to 0x01 (Modem reset):', sendPacketData.ConEmsModemReset);
                } else {
                    console.error('sendPacketData.ConEmsModemReset is not defined.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('Modem Reset packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 필드만 초기화
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x00;
                }
            }
        }

        // EMS Reset 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleEmsResetConfirmation(confirmed) {
            if (confirmed) {
                console.log('EMS Reset이 확인되었습니다. Reset 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConEmsModemReset 개별 초기화 (이 함수에서 사용하므로)
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x00;
                }

                // ConEmsModemReset 필드를 0x02로 설정 (EMS reset)
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x02; // 0x02 = EMS reset
                    console.log('sendPacketData.ConEmsModemReset set to 0x02 (EMS reset):', sendPacketData.ConEmsModemReset);
                } else {
                    console.error('sendPacketData.ConEmsModemReset is not defined.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('EMS Reset packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 필드만 초기화
                if (sendPacketData.ConEmsModemReset !== undefined) {
                    sendPacketData.ConEmsModemReset = 0x00;
                }
            }
        }

        // RSRP Req 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleRsrpReqConfirmation(confirmed) {
            if (confirmed) {
                console.log('RSRP Request가 확인되었습니다. RSRP 요청을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[14] (packet[594])의 5번 비트를 1로 설정
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 14) {
                    sendPacketData.ConMuFlag[14] |= 0x20; // 0x20 = 32 = 2^5 (5번 비트)
                    console.log('sendPacketData.ConMuFlag[14] set to:', sendPacketData.ConMuFlag[14]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is too short.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('RSRP Request packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 14) {
                    sendPacketData.ConMuFlag[14] = 0x00; // 14번 바이트 전체 초기화
                }
            }
        }

        // PLL Relock 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handlePllRelockConfirmation(confirmed) {
            if (confirmed) {
                console.log('PLL Relock이 확인되었습니다. PLL Relock 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[0] (packet[580])의 7번 비트를 1로 설정
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] |= 0x80; // 0x80 = 128 = 2^7 (7번 비트)
                    console.log('sendPacketData.ConMuFlag[0] set to:', sendPacketData.ConMuFlag[0]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is empty.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('PLL Relock packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 0) {
                    sendPacketData.ConMuFlag[0] = 0x00; // 0번 바이트 전체 초기화
                }
            }
        }

        // Beam Scan 확인 모달에서 Ok/Cancel 버튼을 처리하는 함수
        function handleBeamScanConfirmation(confirmed) {
            if (confirmed) {
                console.log('Beam Scan이 확인되었습니다. Beam Scan 명령을 보냅니다.');

                // ConMuFlag 전체 초기화 (전역 함수 사용)
                resetConMuFlag();

                // ConMuFlag[14] (packet[594])의 6번 비트를 1로 설정
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 14) {
                    sendPacketData.ConMuFlag[14] |= 0x40; // 0x40 = 64 = 2^6 (6번 비트)
                    console.log('sendPacketData.ConMuFlag[14] set to:', sendPacketData.ConMuFlag[14]);
                } else {
                    console.error('sendPacketData.ConMuFlag is not defined or is too short.');
                }

                // Socket.IO를 통해 전역 변수 sendPacketData 전송
                if (socket) {
                    socket.emit('du_Ctrl_packet', sendPacketData);
                    console.log('Beam Scan packet sent:');
                } else {
                    console.error('Socket is not connected.');
                }

                // 마지막에 사용한 비트만 초기화
                if (sendPacketData.ConMuFlag && sendPacketData.ConMuFlag.length > 14) {
                    sendPacketData.ConMuFlag[14] = 0x00; // 14번 바이트 전체 초기화
                }
            }
        }

        // Packet Info 화면을 표시하는 함수
        function showPacketInfo() {
            // showScreen 함수를 사용하여 화면 전환
            showScreen('packet_info');
        }

        // Sync Module 화면을 표시하는 함수
        function showSyncModule() {
            // showScreen 함수를 사용하여 화면 전환
            showScreen('sync_module');
        }

        // Slot Format 토글 함수
        function toggleSlotFormat() {
            const content = document.getElementById('slot-format-content');
            const icon = document.getElementById('slot-format-icon');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                icon.className = 'fas fa-chevron-down me-2';
            } else {
                content.style.display = 'none';
                icon.className = 'fas fa-chevron-right me-2';
            }
        }

        // Slot 3gpp Format 토글 함수
        function toggleSlot3gppFormat() {
            const content = document.getElementById('slot-3gpp-format-content');
            const icon = document.getElementById('slot-3gpp-format-icon');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                icon.className = 'fas fa-chevron-down me-2';
            } else {
                content.style.display = 'none';
                icon.className = 'fas fa-chevron-right me-2';
            }
        }

        // 알람 버튼 상태 업데이트 함수 (DU용)
        function updateAlarmButtons(alarmStatus) {
            if (!alarmStatus) return;
            
            // 각 알람 버튼의 상태를 업데이트
            const alarmButtons = {
                'alarm_mask_madc': document.getElementById('alarm_mask_madc'),
                'alarm_mask_ac': document.getElementById('alarm_mask_ac'),
                'alarm_mask_temp': document.getElementById('alarm_mask_temp'),
                'alarm_mask_bat': document.getElementById('alarm_mask_bat'),
                'alarm_mask_fpga_link': document.getElementById('alarm_mask_fpga_link'),
                'alarm_mask_if_pll': document.getElementById('alarm_mask_if_pll'),
                'alarm_mask_sync_pll': document.getElementById('alarm_mask_sync_pll'),
                'alarm_mask_tsync_link': document.getElementById('alarm_mask_tsync_link'),
                'alarm_mask_decoding': document.getElementById('alarm_mask_decoding'),
                'alarm_mask_aa_link': document.getElementById('alarm_mask_aa_link')
            };

            // 각 버튼의 상태를 비트값에 따라 업데이트
            Object.keys(alarmButtons).forEach(alarmId => {
                const button = alarmButtons[alarmId];
                if (button && alarmStatus.hasOwnProperty(alarmId)) {
                    const isOn = alarmStatus[alarmId] === 1;
                    if (isOn) {
                        button.textContent = 'On';
                        button.style.backgroundColor = '#28a745'; // 녹색
                    } else {
                        button.textContent = 'Off';
                        button.style.backgroundColor = '#666'; // 회색
                    }
                }
            });
        }

        // SU1 알람 점 업데이트는 DU의 updateAlarmDot 함수를 재사용
        // (별도 함수 불필요 - updateAlarmDot('su1_alarm_dc', isActive) 형태로 호출)

        // Socket.IO 이벤트 리스너에서 알람 상태 업데이트
        socket.on('alarm_status_update', function(data) {
            if (data && data.AlarmStatus) {
                // DU 알람 버튼 업데이트
                updateAlarmButtons(data.AlarmStatus);
                
                // SU1 알람 점 업데이트 (SU1 페이지가 활성화된 경우, DU와 동일한 방식)
                if (document.getElementById('su1_content_display').classList.contains('active')) {
                    const alarmStatus = data.AlarmStatus;
                    Object.keys(alarmStatus).forEach(alarmId => {
                        const isActive = alarmStatus[alarmId] === 1;
                        updateAlarmDot(`su1_${alarmId}`, isActive);
                    });
                }
            }
        });

        // Socket.IO 이벤트 리스너에서 Mask 알람 상태 업데이트
        socket.on('mask_alarm_status_update', function(data) {
            if (data && data.MaskAlarmStatus) {
                // DU 알람 버튼 업데이트
                updateAlarmButtons(data.MaskAlarmStatus);
                
                // SU1 알람 점 업데이트 (SU1 페이지가 활성화된 경우, DU와 동일한 방식)
                if (document.getElementById('su1_content_display').classList.contains('active')) {
                    const alarmStatus = data.MaskAlarmStatus;
                    Object.keys(alarmStatus).forEach(alarmId => {
                        const isActive = alarmStatus[alarmId] === 1;
                        updateAlarmDot(`su1_${alarmId}`, isActive);
                    });
                }
            }
        });

        // DL ALC 버튼 상태 업데이트 함수
        function updateDLALCButtons(dlAlcStatus) {
            if (!dlAlcStatus) return;
            
            // 각 DL ALC 버튼의 상태를 업데이트
            const dlAlcButtons = {
                'SISO_MASK_DL_ALC': document.getElementById('SISO_MASK_DL_ALC'),
                'MIMO_MASK_DL_ALC': document.getElementById('MIMO_MASK_DL_ALC'),
                'EMS_DU_Link_MASK': document.getElementById('EMS_DU_Link_MASK')
            };

            // 각 버튼의 상태를 비트값에 따라 업데이트
            Object.keys(dlAlcButtons).forEach(dlAlcId => {
                const button = dlAlcButtons[dlAlcId];
                if (button && dlAlcStatus.hasOwnProperty(dlAlcId)) {
                    const isOn = dlAlcStatus[dlAlcId] === 1;
                    if (isOn) {
                        button.textContent = 'On';
                        button.style.backgroundColor = '#28a745'; // 녹색
                    } else {
                        button.textContent = 'Off';
                        button.style.backgroundColor = '#666'; // 회색
                    }
                }
            });
        }

        // DET MASK 버튼 상태 업데이트 함수
        function updateDETMASKButtons(detMaskStatus) {
            if (!detMaskStatus) return;
            
            // 각 DET MASK 버튼의 상태를 업데이트
            const detMaskButtons = {
                'LD1_DET_DL0_SISO_MASK': document.getElementById('LD1_DET_DL0_SISO_MASK'),
                'LD2_DET_DL1_MIMO_MASK': document.getElementById('LD2_DET_DL1_MIMO_MASK'),
                'PD1_DET_UL0_SISO_MASK': document.getElementById('PD1_DET_UL0_SISO_MASK'),
                'PD2_DET_UL1_MIMO_MASK': document.getElementById('PD2_DET_UL1_MIMO_MASK')
            };

            // 각 버튼의 상태를 비트값에 따라 업데이트
            Object.keys(detMaskButtons).forEach(detMaskId => {
                const button = detMaskButtons[detMaskId];
                if (button && detMaskStatus.hasOwnProperty(detMaskId)) {
                    const isOn = detMaskStatus[detMaskId] === 1;
                    if (isOn) {
                        button.textContent = 'On';
                        button.style.backgroundColor = '#28a745'; // 녹색
                    } else {
                        button.textContent = 'Off';
                        button.style.backgroundColor = '#666'; // 회색
                    }
                }
            });
        }



        // SU Link Fail 버튼 상태 업데이트 함수
        function updateSuLinkFailButtons(suLinkFailStatus) {
            if (!suLinkFailStatus) return;
            
            // 각 SU Link Fail 버튼의 상태를 업데이트
            const suLinkFailButtons = {
                'SU1_MASK_LINK_FAIL': document.getElementById('SU1_MASK_LINK_FAIL'),
                'SU2_MASK_LINK_FAIL': document.getElementById('SU2_MASK_LINK_FAIL'),
                'SU3_MASK_LINK_FAIL': document.getElementById('SU3_MASK_LINK_FAIL'),
                'SU4_MASK_LINK_FAIL': document.getElementById('SU4_MASK_LINK_FAIL')
            };

            // 각 버튼의 상태를 비트값에 따라 업데이트
            Object.keys(suLinkFailButtons).forEach(suLinkFailId => {
                const button = suLinkFailButtons[suLinkFailId];
                if (button && suLinkFailStatus.hasOwnProperty(suLinkFailId)) {
                    const isOn = suLinkFailStatus[suLinkFailId] === 1;
                    if (isOn) {
                        button.textContent = 'On';
                        button.style.backgroundColor = '#28a745'; // 녹색
                    } else {
                        button.textContent = 'Off';
                        button.style.backgroundColor = '#666'; // 회색
                    }
                }
            });
        }

        // Packet Info 데이터 업데이트 함수
        function updatePacketInfoData() {
            // Packet Info 화면에서 사용할 데이터 업데이트 로직
            console.log('Packet Info 데이터 업데이트');
        }

        // Sync Module 데이터 업데이트 함수
        function updateSyncModuleData(data) {
            if (!data || !data.packet) {
                console.log('Sync Module 데이터가 없습니다.');
                return;
            }

            console.log('Sync Module 데이터 업데이트:', data.packet);

            // Channel 1 업데이트
            updateSyncValue('ttg_ctrl_1', data.packet.TTG_CTRL1, 'us');
            updateSyncValue('rtg_ctrl_1', data.packet.RTG_CTRL1, 'us');
            updateSyncValue('tsync_delay_1', data.packet.TSYNC_DELAY1, 'us');
            updateSyncSelect('tsync_out_sel_1', data.packet.TSYNC_OUT_SEL1);
            updateSyncSelect('tsync_out_mode_1', data.packet.TSYNC_OUT_SEL1);

            // Channel 2 업데이트
            updateSyncValue('ttg_ctrl_2', data.packet.TTG_CTRL2, 'us');
            updateSyncValue('rtg_ctrl_2', data.packet.RTG_CTRL2, 'us');
            updateSyncValue('tsync_delay_2', data.packet.TSYNC_DELAY2, 'us');
            updateSyncSelect('tsync_out_sel_2', data.packet.TSYNC_OUT_SEL2);
            updateSyncSelect('tsync_out_mode_2', data.packet.TSYNC_OUT_SEL2);

            // Channel 3 업데이트
            updateSyncValue('ttg_ctrl_3', data.packet.TTG_CTRL3, 'us');
            updateSyncValue('rtg_ctrl_3', data.packet.RTG_CTRL3, 'us');
            updateSyncValue('tsync_delay_3', data.packet.TSYNC_DELAY3, 'us');
            updateSyncSelect('tsync_out_sel_3', data.packet.TSYNC_OUT_SEL3);
            updateSyncSelect('tsync_out_mode_3', data.packet.TSYNC_OUT_SEL3);

            // Frequency, ARFCN, F_Mode 업데이트
            updateSyncValue('TDD_Freq2', data.packet.TDD_Freq);
            updateSyncValue('TDD_Arfcn2', data.packet.TDD_Arfcn);
            updateSyncSelect('F_Mode', data.packet.F_Mode);

                                // Slot Format 업데이트 (160개)
                    if (data.packet.TDD_Slot_Format) {
                        // ArrayBuffer를 Uint8Array로 변환
                        const slotFormatArray = new Uint8Array(data.packet.TDD_Slot_Format);
                        updateSlotFormat(Array.from(slotFormatArray));
                    }

                    // Slot 3gpp Format 업데이트 (56x14 = 784개)
                    if (data.packet.TDD_3gpp_table) {
                        // ArrayBuffer를 Uint8Array로 변환
                        const slot3gppArray = new Uint8Array(data.packet.TDD_3gpp_table);
                        updateSlot3gppFormat(Array.from(slot3gppArray));
                    }
        }

        // Sync Module 값 업데이트 헬퍼 함수
        function updateSyncValue(elementId, value, unit = '') {
            const element = document.getElementById(elementId);
            if (element) {
                if (value === -999 || value === undefined) {
                    element.textContent = unit ? `N/A [${unit}]` : 'N/A';
                } else {
                    // app.py에서 이미 변환된 값 사용, 단위 유지
                    element.textContent = unit ? `${value} [${unit}]` : value;
                }
            }
        }

        // Sync Module select 업데이트 헬퍼 함수
        function updateSyncSelect(elementId, value) {
            const element = document.getElementById(elementId);
            if (element) {
                if (value === -999 || value === undefined) {
                    element.selectedIndex = 0; // 기본값
                } else {
                    // TSYNC_OUT_SEL: Bit[1:0] 처리
                    if (elementId.includes('tsync_out_sel')) {
                        const selValue = value & 0x03; // Bit[1:0]만 추출
                        element.value = selValue.toString();
                    }
                    // TSYNC_OUT_MODE: Bit 7 처리
                    else if (elementId.includes('tsync_out_mode')) {
                        const modeValue = (value >> 7) & 0x01; // Bit 7만 추출
                        element.value = modeValue.toString();
                    }
                    // F_Mode 처리 (0=DL, 1=UL)
                    else if (elementId === 'F_Mode') {
                        element.value = value.toString();
                    }
                }
            }
        }

        // Sync Module input 업데이트 헬퍼 함수
        function updateSyncInput(elementId, value) {
            const element = document.getElementById(elementId);
            if (element) {
                if (value === -999 || value === undefined) {
                    element.value = 'N/A';
                } else {
                    element.value = value;
                }
            }
        }

        // Slot Format 업데이트 헬퍼 함수 (160개)
        function updateSlotFormat(slotFormatData) {
            for (let i = 0; i < 160; i++) {
                const element = document.getElementById(`slot_format_${i}`);
                if (element && slotFormatData[i] !== undefined) {
                    element.value = slotFormatData[i];
                }
            }
        }

        // Slot 3gpp Format 업데이트 헬퍼 함수 (56x14 = 784개)
        function updateSlot3gppFormat(slot3gppData) {
            for (let row = 0; row < 56; row++) {
                for (let col = 0; col < 14; col++) {
                    const index = row * 14 + col;
                    const element = document.getElementById(`slot_3gpp_format_${row}_${col}`);
                    if (element && slot3gppData[index] !== undefined) {
                        // 0=D, 1=U, 2=F
                        element.value = slot3gppData[index].toString();
                    }
                }
            }
        }

        // User Management Modal 열기 함수
        function openUserManagementModal() {
            // User Management 모달: update_status 패킷 요청 시작 (사용자 관리 정보)
            modalOpened('#userMgmtModal');
            
            const modalElement = document.getElementById('userMgmtModal');
            if (modalElement) {
                // 기존 모달 인스턴스가 있다면 제거
                const existingModal = bootstrap.Modal.getInstance(modalElement);
                if (existingModal) {
                    existingModal.dispose();
                }
                
                // 새로운 모달 인스턴스 생성
                const modal = new bootstrap.Modal(modalElement, {
                    backdrop: 'static',
                    keyboard: false
                });
                
                modal.show();
                
                // 모달이 열린 후 이벤트 리스너 설정 (중복 방지)
                setTimeout(function() {
                    console.log('openUserManagementModal에서 setupUserManagementEvents 호출');
                    setupUserManagementEvents();
                }, 100);
            }
        }

        // ===== User Management Config =====
        var PAGE_SIZE   = 12;  // 한 페이지 행 수 (스크린샷처럼 널찍)
        var WINDOW_SIZE = 3;   // 페이지 버튼 3개만 표시

        // ===== Dummy Users (60명 생성) =====
        var levels = ['Super Admin','Admin','User'];
        function z(n){return (n<10?'0':'')+n;}
        var USERS = [];
        for(var i=1;i<=60;i++){
            USERS.push({
                id: 'user'+z(i),
                name: 'user'+z(i),
                level: levels[i%3],
                email: (i%4===0?'':'user'+z(i)+'@mail.com'),
                recv: (i%5===0?'Y':'N'),
                tel: (i%6===0? '010-'+z(i)+z(i)+'-'+z(70+i)+z(10+i) : ''),
                remark: (i%7===0? 'note '+i : ''),
                updated: (i%2===0? 'admin':'primaer')
            });
        }

        // ===== State =====
        var current = 1;
        var filterField = 'id';
        var term = '';

        // ===== Elements =====
        var body, pager, status, search, fieldMenu, fieldLabel;

        // ===== Helpers =====
        function filtered(){
            if(!term) {
                console.log('User Management - filtered: 검색어 없음, 전체 사용자 반환:', USERS.length);
                return USERS;
            }
            var t = term.toLowerCase();
            var filteredUsers = USERS.filter(function(u){
                return String(u[filterField]||'').toLowerCase().indexOf(t) !== -1;
            });
            console.log('User Management - filtered: 검색어 "' + term + '", 결과:', filteredUsers.length);
            return filteredUsers;
        }
        function pageCount(){ 
            var filteredData = filtered();
            var count = Math.max(1, Math.ceil(filteredData.length / PAGE_SIZE));
            console.log('User Management - pageCount:', {filteredLength: filteredData.length, PAGE_SIZE, count});
            return count;
        }

        function renderTable(){
            // body 요소를 다시 찾기 (전역 변수 참조 문제 해결)
            var bodyElement = document.getElementById('userBody');
            
            if (!bodyElement) {
                console.error('User Management - renderTable: body 요소를 찾을 수 없음', {
                    bodyId: 'userBody'
                });
                return;
            }
            
            var data = filtered();
            var start = (current-1)*PAGE_SIZE;
            var slice = data.slice(start, start+PAGE_SIZE);
            
            console.log('User Management - renderTable 실행:', {dataLength: data.length, start, sliceLength: slice.length});
            
            bodyElement.innerHTML = slice.map(function(u){
                return '<tr>'+
                    '<td>'+u.id+'</td>'+
                    '<td>'+u.name+'</td>'+
                    '<td>'+u.level+'</td>'+
                    '<td>'+u.email+'</td>'+
                    '<td>'+u.recv+'</td>'+
                    '<td>'+u.tel+'</td>'+
                    '<td>'+u.remark+'</td>'+
                    '<td>'+u.updated+'</td>'+
                '</tr>';
            }).join('') || '<tr><td colspan="8" class="text-center text-muted">No data</td></tr>';
        }

        function renderPager(){
            // status 요소를 다시 찾기 (전역 변수 참조 문제 해결)
            var statusElement = document.getElementById('userStatus');
            
            if (!pager || !statusElement) {
                console.error('User Management - renderPager: pager 또는 status 요소를 찾을 수 없음', {
                    pager: !!pager, 
                    status: !!statusElement,
                    statusId: 'userStatus'
                });
                return;
            }
            
            var total = pageCount();
            current = Math.min(current, total);

            console.log('User Management - renderPager 실행:', {current, total, pager: !!pager, status: !!statusElement});

            // 좌/우 버튼 상태
            var first = pager.querySelector('[data-act="first"]').parentElement;
            var prev  = pager.querySelector('[data-act="prev"]').parentElement;
            var next  = pager.querySelector('[data-act="next"]').parentElement;
            var last  = pager.querySelector('[data-act="last"]').parentElement;
            first.classList.toggle('disabled', current===1);
            prev .classList.toggle('disabled', current===1);
            next .classList.toggle('disabled', current===total);
            last .classList.toggle('disabled', current===total);

            // 기존 숫자 버튼 제거
            [].slice.call(pager.querySelectorAll('a[data-page]')).forEach(function(a){ a.parentElement.remove(); });

            // 윈도우 계산 (3개)
            var start = Math.max(1, Math.min(current - Math.floor(WINDOW_SIZE/2), total - WINDOW_SIZE + 1));
            var end   = Math.min(total, start + WINDOW_SIZE - 1);

            // prev 뒤에 삽입
            var anchor = pager.querySelector('[data-act="prev"]').parentElement;
            for(var p=start; p<=end; p++){
                var li = document.createElement('li');
                li.className = 'page-item' + (p===current?' active':'');
                li.innerHTML = '<a class="page-link" href="#" data-page="'+p+'">'+p+'</a>';
                anchor.after(li);
                anchor = li;
            }

            // 상태 텍스트 업데이트 - 중요!
            statusElement.textContent = 'Showing ' + current + ' of ' + total + ' pages';
            console.log('User Management - 상태 업데이트 완료:', current, 'of', total);
            
            // 실제 DOM에 반영되었는지 확인
            console.log('DOM 상태 확인:', {
                statusText: statusElement.textContent,
                statusInnerHTML: statusElement.innerHTML,
                statusVisible: statusElement.offsetParent !== null
            });
        }

        // User Management 이벤트 리스너 설정 함수
        function setupUserManagementEvents() {
            console.log('=== User Management 초기화 시작 ===');
            
            // 중복 초기화 방지
            if (window.userManagementInitialized) {
                console.log('User Management 이미 초기화됨, 중복 실행 방지');
                return;
            }
            
            // 요소들 다시 가져오기
            body = document.getElementById('userBody');
            pager = document.getElementById('userPager');
            status = document.getElementById('userStatus');
            search = document.getElementById('userSearch');
            fieldMenu = document.getElementById('userFilterFieldMenu');
            fieldLabel = document.getElementById('userFilterFieldLabel');
            
            console.log('DOM 요소 검색 결과:', {
                body: body ? '찾음' : '못찾음',
                pager: pager ? '찾음' : '못찾음', 
                status: status ? '찾음' : '못찾음',
                search: search ? '찾음' : '못찾음',
                fieldMenu: fieldMenu ? '찾음' : '못찾음',
                fieldLabel: fieldLabel ? '찾음' : '못찾음'
            });
            
            // 상태 초기화
            current = 1;
            term = '';
            
            if (pager) {
                console.log('페이지네이션 이벤트 리스너 추가 중...');
                pager.addEventListener('click', function(e){
                    var a = e.target.closest('a.page-link'); if(!a){return;}
                    e.preventDefault();
                    var act = a.getAttribute('data-act');
                    var num = a.getAttribute('data-page');
                    var total = pageCount();

                    if(act==='first') current = 1;
                    else if(act==='prev') current = Math.max(1, current-1);
                    else if(act==='next') current = Math.min(total, current+1);
                    else if(act==='last') current = total;
                    else if(num){ current = parseInt(num,10); }

                    console.log('User Management - 페이지 변경:', act || num, '현재:', current, '총:', total);
                    renderTable(); 
                    renderPager();
                });
                console.log('페이지네이션 이벤트 리스너 추가 완료');
            } else {
                console.error('페이지네이션 요소를 찾을 수 없음!');
            }

            // 검색/필드 변경 이벤트 리스너
            if (search) {
                search.addEventListener('input', function(){ 
                    term = this.value.trim(); 
                    current = 1; 
                    renderTable(); 
                    renderPager(); 
                });
            }

            if (fieldMenu) {
                fieldMenu.addEventListener('click', function(e){
                    var a = e.target.closest('[data-field]'); if(!a) return;
                    e.preventDefault();
                    filterField = a.getAttribute('data-field');
                    fieldLabel.textContent = a.textContent;
                    current = 1; 
                    renderTable(); 
                    renderPager(); 
                });
            }

            // 초기 렌더
            console.log('초기 렌더 시작...');
            if (body && pager) {
                console.log('renderTable() 호출...');
                renderTable();
                console.log('renderPager() 호출...');
                renderPager();
                console.log('초기 렌더 완료');
                
                // 초기화 완료 표시
                window.userManagementInitialized = true;
            } else {
                console.error('초기 렌더 실패: body 또는 pager가 없음');
            }
            
            console.log('=== User Management 초기화 완료 ===');
        }

        // ===== Beam Info Modal Functions =====
        function openBeamInfoModal() {
            // Beam Info 모달: update_status + tdd_status 패킷 요청 시작 (빔 정보 + 동기화 모듈)
            modalOpened('#beaminfo2');
            
            const modal = new bootstrap.Modal(document.getElementById('beaminfo2'));
            modal.show();
        }

        function closeModal(modalId) {
            const modalElement = document.getElementById(modalId);
            if (modalElement) {
                const modal = bootstrap.Modal.getInstance(modalElement);
                if (modal) {
                    modal.hide();
                }
            }
        }

        // Close modal when clicking outside (Bootstrap handles this automatically)
        // No need for custom window.onclick handler

        // Save button event listener
        document.addEventListener('DOMContentLoaded', function() {
            const saveBtn = document.getElementById('beamSaveBtn');
            if (saveBtn) {
                saveBtn.addEventListener('click', function() {
                    // 여기에 저장 로직을 추가할 수 있습니다
                    closeModal('beaminfo2');
                });
            }

            // beaminfo2 모달 이벤트 리스너 추가 (새로운 구조에서는 자동으로 관리됨)
            const beaminfo2Modal = document.getElementById('beaminfo2');
            if (beaminfo2Modal) {
                beaminfo2Modal.addEventListener('hidden.bs.modal', function() {
                    // 모달이 닫힐 때 새로운 구조에서 자동으로 관리됨
                    console.log('[UI] 🔒 beaminfo2 modal closed');
                });
            }
        });

    </script>

    <!-- Beam Info Modal -->
    <div id="beaminfo2" class="modal fade" tabindex="-1" aria-labelledby="beaminfo2Label" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog" style="width: 800px;">
            <div class="modal-content" style="border-radius: 8px; overflow: hidden; border: none;">

                <!-- Modal Header -->
                <div class="modal-header" style="background-color: #888; color: white; padding: 10px; border-radius: 8px 8px 0 0; margin: 0;">
                    <span><i class="bi bi-plus-square"></i> Beam Info</span>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="color: white;"></button>
                </div>

                <!-- Modal Body -->
                <div class="modal-body" style="background-color: #e0e0e0; padding: 20px;">

                    <!-- DU Section -->
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px; border: none;">
                        <tr>
                            <td colspan="4" style="font-weight: bold; border-bottom: 1px dashed #999; padding-bottom: 5px; border: none;">
                                <i class="bi bi-folder"></i> DU
                            </td>
                        </tr>
                        <tr style="border: none;">
                            <td style="width: 80px; border: none; padding: 5px;">Latitude</td>
                            <td style="border: none; padding: 5px;"><input type="text" style="width: 100%; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></td>
                            <td style="width: 80px; border: none; padding: 5px;">Longitude</td>
                            <td style="border: none; padding: 5px;"><input type="text" style="width: 100%; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></td>
                        </tr>
                        <tr style="border: none;">
                            <td style="border: none; padding: 5px;">Azimuth:</td>
                            <td style="border: none; padding: 5px;">Orientation [ 0 ]</td>
                            <td style="border: none; padding: 5px;">Tilt</td>
                            <td style="border: none; padding: 5px;">[ 0 ]</td>
                        </tr>
                    </table>

                    <!-- SU Section -->
                    <table style="width: 100%; border-collapse: collapse; border: none;">
                        <tr>
                            <td colspan="4" style="font-weight: bold; border-bottom: 1px dashed #999; padding-bottom: 5px; border: none;">
                                <i class="bi bi-folder"></i> SU
                            </td>
                        </tr>
                        <tr style="border: none;">
                            <td style="border: none; padding: 5px;">SU#1</td>
                            <td style="border: none; padding: 5px;">Latitude <input type="text" style="width: 80px; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></td>
                            <td style="border: none; padding: 5px;">Longitude <input type="text" style="width: 80px; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></td>
                            <td style="border: none; padding: 5px;"></td>
                        </tr>
                        <tr style="border: none;">
                            <td style="border: none; padding: 5px;">Azimuth:</td>
                            <td style="border: none; padding: 5px;">Orientation [ ]</td>
                            <td style="border: none; padding: 5px;">Tilt</td>
                            <td style="border: none; padding: 5px;">[ ]</td>
                        </tr>
                        <tr style="border: none;">
                            <td style="border: none; padding: 5px;">Remark</td>
                            <td colspan="3" style="border: none; padding: 5px;">
                                <textarea style="width: 100%; height: 60px; border: 1px solid #ccc; border-radius: 4px; padding: 4px;"></textarea>
                            </td>
                        </tr>
                    </table>

                </div>

                <!-- Modal Footer -->
                <!-- Footer buttons (Bootstrap 5) -->
                <div class="d-flex justify-content-center py-4" style="gap:8px;">
                    <button type="button" class="btn" data-bs-dismiss="modal"
                            style="background:#6b7280; color:#fff; font-weight:700; padding:.6rem 1.6rem; border-radius:8px;">
                        Cancel
                    </button>
                    <button type="button" id="beamSaveBtn" class="btn"
                            style="background:#667089; color:#fff; font-weight:700; padding:.6rem 1.6rem; border-radius:8px;">
                        Save
                    </button>
                </div>

            </div>
        </div>
    </div>
                    
    <!-- User Management Modal -->
    <div class="modal fade" id="userMgmtModal" tabindex="-1" data-bs-backdrop="static" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content" style="background:#efefef; border:0;">
                <!-- Title bar -->
                <div class="d-flex align-items-center justify-content-between px-3 py-2"
                     style="background:#7a7f82; color:#fff; border-radius:8px 8px 0 0;">
                    <div class="d-flex align-items-center">
                        <span style="width:22px;height:22px;border:2px solid #fff;border-radius:4px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;margin-right:10px;">+</span>
                        <span style="font-size:1.1rem;">User Management</span>
                    </div>
                    <button type="button" class="btn-close text-white m-0 p-0" data-bs-dismiss="modal" aria-label="Close" style="font-size:28px; line-height:1;"></button>
                </div>

                <div class="px-3 pt-3 pb-0">
                    <!-- Search row -->
                    <div class="d-flex align-items-center mb-3" style="gap:14px;">
                        <div class="dropdown">
                            <button class="btn btn-light dropdown-toggle d-flex align-items-center"
                                    type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                    style="min-width:180px; justify-content:space-between;">
                                <span id="userFilterFieldLabel">User ID</span>
                    </button>
                            <ul class="dropdown-menu" id="userFilterFieldMenu">
                                <li><a class="dropdown-item" href="#" data-field="id">User ID</a></li>
                                <li><a class="dropdown-item" href="#" data-field="name">Name</a></li>
                                <li><a class="dropdown-item" href="#" data-field="level">Level Name</a></li>
                                <li><a class="dropdown-item" href="#" data-field="email">E-mail</a></li>
                            </ul>
                </div>

                        <div class="position-relative" style="flex:1 1 auto; max-width:540px;">
                            <input type="text" id="userSearch" class="form-control" placeholder="Search…" style="padding-right:42px;">
                            <span style="position:absolute; right:12px; top:50%; transform:translateY(-50%); opacity:.6;">🔍</span>
                        </div>

                        <div class="ml-auto d-flex" style="gap:10px;">
                            <button class="btn btn-success">Add</button>
                            <button class="btn btn-primary">Modify</button>
                            <button class="btn btn-danger">Delete</button>
            </div>
        </div>

                    <!-- Table -->
                    <div class="bg-white rounded" style="border:1px solid #cfd3d8;">
                        <div class="table-responsive" style="max-height:58vh; overflow:auto;">
                            <table class="table table-sm mb-0" style="font-size: 0.75rem;">
                                <thead style="background:#74767a; color:#fff; position:sticky; top:0; z-index:2; font-size: 0.8rem;">
                                    <tr>
                                        <th style="min-width:120px; padding: 0.4rem 0.3rem; text-align: center;">ID</th>
                                        <th style="min-width:120px; padding: 0.4rem 0.3rem; text-align: center;">Name</th>
                                        <th style="min-width:140px; padding: 0.4rem 0.3rem; text-align: center;">Level Name</th>
                                        <th style="min-width:180px; padding: 0.4rem 0.3rem; text-align: center;">E-mail</th>
                                        <th style="min-width:80px; padding: 0.4rem 0.3rem; text-align: center;">Recv Y/N</th>
                                        <th style="min-width:120px; padding: 0.4rem 0.3rem; text-align: center;">Tel</th>
                                        <th style="min-width:200px; padding: 0.4rem 0.3rem; text-align: center;">Remark</th>
                                        <th style="min-width:120px; padding: 0.4rem 0.3rem; text-align: center;">Update ID</th>
                                    </tr>
                                </thead>
                                <tbody id="userBody" style="font-size: 0.75rem;">
                                    <!-- JS renders -->
                                </tbody>
                                <style>
                                    #userBody tr td {
                                        padding: 0.3rem 0.2rem !important;
                                        vertical-align: middle;
                                        text-align: center !important;
                                    }
                                    #userBody tr:hover {
                                        background-color: #f8f9fa;
                                    }
                                </style>
                            </table>
                        </div>
                    </div>

                    <!-- Footer: status + pagination + Cancel -->
                    <div class="d-flex align-items-center justify-content-between mt-3 mb-4">
                        <div class="text-muted small ms-1" id="userStatus" style="min-width: 150px; font-weight: bold; color: #666 !important;">Loading...</div>

                        <ul id="userPager" class="pagination pagination-sm mb-0">
                            <li class="page-item"><a class="page-link" href="#" data-act="first">&laquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="prev">&lsaquo;</a></li>
                            <!-- windowed page buttons (3 visible) will be injected here -->
                            <li class="page-item"><a class="page-link" href="#" data-act="next">&rsaquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="last">&raquo;</a></li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-center pb-4">
                        <button class="btn" data-bs-dismiss="modal"
                                style="background:#6b7280; color:#fff; font-weight:700; padding:.6rem 1.6rem; border-radius:8px;">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Alarm Level Modal -->
    <div class="modal fade" id="alarmLevelModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content" style="background:#d9d9db; border:0;">
                <!-- 상단 타이틀 바 -->
                <div class="d-flex align-items-center justify-content-between px-3 py-2"
                     style="background:#7a7f82; color:#fff; border-radius:12px 12px 0 0;">
                    <div class="d-flex align-items-center">
                        <span style="width:20px;height:20px;border:2px solid #fff;border-radius:4px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;margin-right:8px;">+</span>
                        <span style="font-size:1.05rem;">Alarm Level</span>
                    </div>
                    <!-- BS5 닫기 버튼 -->
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <!-- 본문 -->
                <div class="px-3 pt-2 pb-0" style="background:#eeeeef;">
                    <!-- 우상단 버튼 -->
                    <div class="d-flex justify-content-end my-2">
                        <button class="btn btn-primary btn-sm me-2">Modify</button>
                        <button class="btn btn-success btn-sm">Config</button>
                    </div>

                    <!-- 테이블 컨테이너 -->
                    <div class="bg-white rounded" style="border:1px solid #c9c9cf;">
                        <div class="table-wrap" style="max-height:58vh; overflow:auto; position:relative;">
                            <table class="table table-sm m-0 text-center">
                                <thead style="position:sticky; top:0; z-index:2; background:#f8f9fa; box-shadow:0 1px 0 #ddd;">
                                    <tr>
                                        <th style="min-width:110px; text-align:center;">Equip</th>
                                        <th style="min-width:140px; text-align:center;">Alarm Level</th>
                                        <th style="min-width:140px; text-align:center;">Module Name</th>
                                        <th style="min-width:160px; text-align:center;">Sub Module Name</th>
                                        <th style="min-width:220px; text-align:center;">Item Name</th>
                                        <th style="min-width:140px; text-align:center;">Alarm Mask</th>
                                        <th style="min-width:140px; text-align:center;">Update ID</th>
                                    </tr>
                                    <!-- 필터 행 (보기만) -->
                                    <tr>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                        <th><input class="form-control form-control-sm text-center" /></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- 하드코딩 데이터 시작 -->
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">MIMO</td><td style="text-align:center;">DL ALC Level</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">SISO</td><td style="text-align:center;">DL ALC Level</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Warning</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">EMS DU LINK</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">FPGA LINK</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Ant. Array Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">IF PLL</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">SISO</td><td style="text-align:center;">DL LD Lower</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">MIMO</td><td style="text-align:center;">DL LD Lower</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">SU#1 Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">SU#2 Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">SU#3 Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">SU#4 Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">SISO</td><td style="text-align:center;">UL PD Lower</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">MIMO</td><td style="text-align:center;">UL PD Lower</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Decoding</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Sync PLL</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">TSYNC LINK</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">AC</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">BAT</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">DC</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Minor</td><td style="text-align:center;">Download</td><td style="text-align:center;"></td><td style="text-align:center;">Download</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">DU</td><td style="text-align:center;">Minor</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Temp</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">MIMO</td><td style="text-align:center;">DL ALC Level</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;">SISO</td><td style="text-align:center;">DL ALC Level</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Major</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">DU LINK</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">Ant. Array Link</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <tr><td style="text-align:center;">SU #1</td><td style="text-align:center;">Critical</td><td style="text-align:center;">Main</td><td style="text-align:center;"></td><td style="text-align:center;">IF PLL</td><td style="color:#d9534f; text-align:center;">Not Use</td><td style="text-align:center;"></td></tr>
                                    <!-- 필요시 더 추가 -->
                                    <!-- 하드코딩 데이터 끝 -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 하단 푸터 -->
                    <div class="d-flex justify-content-center py-3" style="background:#eeeeef; border-radius:0 0 12px 12px;">
                        <button class="btn btn-secondary px-4" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Alarm History Modal -->
    <div class="modal fade" id="alarmHistoryModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content" style="background:#d9d9db; border:0;">
                <!-- Title bar -->
                <div class="d-flex align-items-center justify-content-between px-3 py-2"
                     style="background:#7a7f82; color:#fff; border-radius:12px 12px 0 0;">
                    <div class="d-flex align-items-center">
                        <span style="width:20px;height:20px;border:2px solid #fff;border-radius:4px;display:inline-flex;align-items:center;justify-content:center;font-weight:700;margin-right:8px;">+</span>
                        <span style="font-size:1.05rem;">Alarm History</span>
                    </div>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="px-3 pt-2 pb-0" style="background:#eeeeef;">
                    <!-- Right action buttons -->
                    <div class="d-flex justify-content-end my-2">
                        <button class="btn btn-danger btn-sm me-2">Delete</button>
                        <button class="btn btn-success btn-sm">Excel</button>
                    </div>

                    <!-- Table -->
                    <div class="bg-white rounded" style="border:1px solid #c9c9cf;">
                        <div class="table-wrap" style="max-height:58vh; overflow:auto; position:relative;">
                            <table class="table table-sm m-0" style="font-size: 0.75rem;">
                                <thead style="position:sticky; top:0; z-index:2; background:#f8f9fa; box-shadow:0 1px 0 #ddd; font-size: 0.8rem;">
                                    <tr>
                                        <th style="min-width:150px; text-align: center; padding: 0.4rem 0.3rem;">Alarm Level</th>
                                        <th style="min-width:380px; text-align: center; padding: 0.4rem 0.3rem;">Alarm Message</th>
                                        <th style="min-width:180px; text-align: center; padding: 0.4rem 0.3rem;">Alarm Date</th>
                                        <th style="min-width:120px; text-align: center; padding: 0.4rem 0.3rem;">Clear Y/N</th>
                                        <th style="min-width:180px; text-align: center; padding: 0.4rem 0.3rem;">Clear Date</th>
                                    </tr>
                                </thead>
                                <tbody id="histBody" style="font-size: 0.75rem;">
                                    <!-- JS가 렌더링 -->
                                </tbody>
                                <style>
                                    #histBody tr td {
                                        padding: 0.3rem 0.2rem !important;
                                        vertical-align: middle;
                                        text-align: center !important;
                                    }
                                    #histBody tr:hover {
                                        background-color: #f8f9fa;
                                    }
                                </style>
                            </table>
                        </div>
                    </div>

                    <!-- Footer: status + pagination + cancel -->
                    <div class="d-flex align-items-center justify-content-between py-3" style="background:#eeeeef;">
                        <div id="histPageStatus" class="text-muted small ms-1" style="min-width: 150px; font-weight: bold; color: #666 !important;">Loading...</div>

                        <ul id="histPager" class="pagination pagination-sm mb-0">
                            <li class="page-item"><a class="page-link" href="#" data-act="first">&laquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="prev">&lsaquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="1">1</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="2">2</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-page="3">3</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="next">&rsaquo;</a></li>
                            <li class="page-item"><a class="page-link" href="#" data-act="last">&raquo;</a></li>
                        </ul>

                        <button class="btn btn-secondary px-4" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Set Mode JavaScript -->
    <script>
    //==== 전역 상태 ====
    let SET_MODE = false;

    //==== UI id ↔ 데이터 필드 매핑 ====
    const FIELD_MAP = {
      // DU System
      tempupper:       { key:'SysTemperHighLvl',      type:'i8',    min:-128, max:127 },
      templower:       { key:'SysTemperLowLvl',       type:'i8',    min:-128, max:127 },

      // Beam Status
      gumstick_onoff:  { key:'GumStick_OnOff',        type:'u8',    min:0, max:1 },
      mvbx_rsagc_mode: { key:'Mvbx_RsAgcMode',        type:'u8',    min:0, max:1 },
      mvbx_rsagc_threshold: { key:'Mvbx_RsAgcThreshold', type:'i8', min:-128, max:127 },
      gNB_Vendor:      { key:'gNB_Vendor',            type:'u8',    min:0, max:255 },

      // SISO RF
      dl_att_siso:     { key:'DU_DlManualAtten_SISO', type:'u8',    min:0, max:255 },
      dl_alc_level_siso: { key:'ALC_DL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      alc_dl0_siso_mode: { key:'ALC_DL0_SISO_Mode',   type:'u8',    min:0, max:1 },
      mvbx_tx_gain_set_siso: { key:'Mvbx_TxGainSetSiso', type:'u8', min:0, max:255 },
      ul_att_siso:     { key:'DU_UlManualAtten_SISO', type:'u8',    min:0, max:255 },
      ul_iso_level_siso: { key:'ALC_UL0_SISO_Level',  type:'u16le', min:0, max:65535 },
      mvbx_rx_gain_set_siso: { key:'Mvbx_RxGainSetSiso', type:'u8', min:0, max:255 },

      // MIMO RF
      dl_att_mimo:     { key:'DU_DlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      dl_alc_level_mimo: { key:'ALC_DL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      alc_dl1_mimo_mode: { key:'ALC_DL1_MIMO_Mode',   type:'u8',    min:0, max:1 },
      mvbx_tx_gain_set_miso: { key:'Mvbx_TxGainSetMiso', type:'u8', min:0, max:255 },
      ul_att_mimo:     { key:'DU_UlManualAtten_MIMO', type:'u8',    min:0, max:255 },
      ul_iso_level_mimo: { key:'ALC_UL1_MIMO_Level',  type:'u16le', min:0, max:65535 },
      mvbx_rx_gain_set_miso: { key:'Mvbx_RxGainSetMiso', type:'u8', min:0, max:255 },

      // OPTIC
      ld1_det_dl0_siso_low: { key:'LD1_DET_DL0_SISO_Low', type:'u16le', min:0, max:65535 },
      pd1_det_ul0_siso_low: { key:'PD1_DET_UL0_SISO_Low', type:'u16le', min:0, max:65535 },
      ld2_det_dl1_mimo_low: { key:'LD2_DET_DL1_MIMO_Low', type:'u16le', min:0, max:65535 },
      pd2_det_ul1_mimo_low: { key:'PD2_DET_UL1_MIMO_Low', type:'u16le', min:0, max:65535 },
    };

    //==== ConMuFlag 컨트롤 비트 (packet[580]을 index 0으로, [상대인덱스, bit]) ====
    const CONTROL_BITS = {
      SysTemperHighLvl:[0,3], SysTemperLowLvl:[0,3],

      GumStick_OnOff:[7,1],
      Mvbx_RsAgcMode:[16,5],
      Mvbx_RsAgcThreshold:[16,4],
      gNB_Vendor:[14,2],

      DU_DlManualAtten_SISO:[4,0],
      ALC_DL0_SISO_Level:[7,4],
      ALC_DL0_SISO_Mode:[3,2],
      Mvbx_TxGainSetSiso:[16,0],
      DU_UlManualAtten_SISO:[4,4],
      ALC_UL0_SISO_Level:[7,6],
      Mvbx_RxGainSetSiso:[16,1],

      DU_DlManualAtten_MIMO:[4,2],
      ALC_DL1_MIMO_Level:[7,5],
      ALC_DL1_MIMO_Mode:[3,3],
      Mvbx_TxGainSetMiso:[16,2],
      DU_UlManualAtten_MIMO:[4,7],
      ALC_UL1_MIMO_Level:[7,7],
      Mvbx_RxGainSetMiso:[16,3],

      LD1_DET_DL0_SISO_Low:[8,0],
      PD1_DET_UL0_SISO_Low:[8,2],
      LD2_DET_DL1_MIMO_Low:[8,1],
      PD2_DET_UL1_MIMO_Low:[8,3],
    };

    //==== 값 업데이트 함수 ====
    function updateValue(id, value) {
        const el = document.getElementById(id);
        if (!el) return;
        
        // Set Mode에서는 값 업데이트 방지 (사용자가 편집 중인 값 덮어쓰기 방지)
        if (SET_MODE && el.hasAttribute('data-editable')) {
            console.log(`🔒 Set Mode: ${id} 값 업데이트 차단 (현재 값: ${el.value}, 새 값: ${value})`);
            return;
        }
        
        console.log(`📝 updateValue: ${id} = ${value} (SET_MODE: ${SET_MODE})`);
        
        if (el.type === 'button') {
            el.textContent = value;
            el.className = value === 'On' ? 'btn btn-success btn-sm' : 'btn btn-secondary btn-sm';
        } else if (el.tagName === 'SELECT') {
            el.value = value;
        } else {
            el.value = value;
        }
    }

    //==== UI 모드 토글 ====
    function applyUiMode(){
      console.log(`🔧 applyUiMode: SET_MODE=${SET_MODE}`);
      
      // Set Mode 관련 버튼들 토글
      document.getElementById('btnSetMode').classList.toggle('d-none', SET_MODE);
      document.getElementById('btnApply').classList.toggle('d-none', !SET_MODE);
      document.getElementById('btnStatusMode').classList.toggle('d-none', !SET_MODE);
      
      // 사진에 보이는 모든 버튼들 숨김/표시 (Initial Setup, APN, RESET, HIDDEN, Beam Info, Alarm Mask)
      const buttonsToHide = [
        'initialSetupBtn', 'apnBtn', 'resetBtn', 'openModalBtn', 
        'beamInfoBtn', 'alarmMaskBtn'
      ];
      buttonsToHide.forEach(id => {
        const btn = document.getElementById(id);
        if (btn) btn.classList.toggle('d-none', SET_MODE);
      });
      
      // 또는 data-bs-toggle 속성이 있는 모든 버튼 숨김 (모달 버튼들)
      const modalButtons = document.querySelectorAll('[data-bs-toggle="modal"]');
      modalButtons.forEach(el=>{
        el.classList.toggle('d-none', SET_MODE);
      });
      console.log(`🔧 Hidden ${modalButtons.length} modal buttons`);

      // 편집 가능한 필드들 토글
      const editableFields = document.querySelectorAll('[data-editable="true"]');
      editableFields.forEach(el=>{
        if (el.type==='checkbox') el.disabled = !SET_MODE;
        else el.toggleAttribute('readonly', !SET_MODE);
        el.classList.toggle('editable-on', SET_MODE);
      });
      console.log(`🔧 Toggled ${editableFields.length} editable fields`);
    }

    //==== 상태 수신: Set Mode에서는 값 업데이트 차단 ====
    socket.on("tdd_status", ({packet})=>{
      if (SET_MODE) {
        console.log('🔒 tdd_status blocked: Set Mode active');
        return;
      }
      // 예시: updateValue('temp_upper', packet.SysTemperHighLvl); 등
    });

    //==== 컨트롤비트 빌드(24바이트) ====
    function buildConMuFlag(enable=true){
      const bytes = new Array(24).fill(0);
      if (!enable) return bytes;
      for (const [key,[idx,bit]] of Object.entries(CONTROL_BITS)){
        bytes[idx] |= (1<<bit);
      }
      return bytes;
    }

    //==== 값 수집/검증 ====
    function collectFields(){
      const out = {};
      for (const [id, spec] of Object.entries(FIELD_MAP)){
        const el = document.getElementById(id);
        if (!el) continue;
        
        let v;
        if (el.type === 'checkbox') {
          // 체크박스: 체크되면 1, 아니면 0
          v = el.checked ? 1 : 0;
        } else if (el.tagName === 'SELECT') {
          // 드롭다운: 텍스트 값을 숫자로 매핑
          v = getDropdownNumericValue(id, el.value);
        } else if (el.type === 'button') {
          // 버튼: On/Off 텍스트를 숫자로 변환
          v = el.textContent === 'On' ? 1 : 0;
        } else {
          // 일반 입력 필드: 숫자로 변환
          v = Number(el.value);
        }
        
        if (Number.isNaN(v)) throw new Error(`${id} 값이 숫자가 아닙니다`);
        if (spec.min!==undefined && v<spec.min) throw new Error(`${id} 최소 ${spec.min}`);
        if (spec.max!==undefined && v>spec.max) throw new Error(`${id} 최대 ${spec.max}`);
        out[spec.key] = v;
      }
      return out;
    }
    
    //==== 드롭다운 텍스트 값을 16진수로 변환 ====
    function getDropdownNumericValue(id, textValue) {
      switch(id) {
        case 'gNB_Vendor':
          switch(textValue) {
            case 'Manual': return 0x00;
            case 'Samsung': return 0x01;
            case 'Nokia': return 0x02;
            case 'Ericsson': return 0x03;
            default: return 0x00;
          }
        // 다른 드롭다운들도 여기에 추가
        default:
          return Number(textValue); // 기본적으로는 숫자로 변환 시도
      }
    }
    
    //==== On/Off 버튼 토글 함수 ====
    function toggleOnOffButton(buttonId) {
      if (!SET_MODE) return; // Set Mode가 아니면 토글 불가
      
      const button = document.getElementById(buttonId);
      if (!button) return;
      
      const currentState = button.textContent;
      if (currentState === 'On') {
        button.textContent = 'Off';
        button.className = 'btn btn-secondary btn-sm';
      } else {
        button.textContent = 'On';
        button.className = 'btn btn-success btn-sm';
      }
      
      console.log(`🔘 ${buttonId} 토글: ${currentState} → ${button.textContent}`);
    }

    //==== 버튼 핸들러 ====
    function enterSetMode(){
      console.log('🔧 Entering Set Mode...');
      SET_MODE = true;
      console.log(`🔧 State: SET_MODE=${SET_MODE}`);
      applyUiMode();
      socket.emit('enter_set_mode');
      console.log('🔧 Set Mode activated');
    }
    function leaveSetMode(){
      console.log('🔧 Leaving Set Mode...');
      SET_MODE = false;
      console.log(`🔧 State: SET_MODE=${SET_MODE}`);
      applyUiMode();
      socket.emit('leave_set_mode');
      console.log('🔧 Status Mode activated');
    }
    function applySet(){
      try{
        const fields = collectFields();
        socket.emit('apply_du_values', { Fields: fields });
      }catch(e){ alert('입력 오류: ' + e.message); }
    }

    //==== 버튼 바인딩 ====
    // 메인 화면의 Set Mode 버튼에만 이벤트 연결 (1127라인)
    document.querySelector('button[id="btnSetMode"]:not([style*="visibility"])')?.addEventListener('click', enterSetMode);
    document.getElementById('btnStatusMode')?.addEventListener('click', leaveSetMode);
    document.getElementById('btnApply')?.addEventListener('click', applySet);
    
    //==== On/Off 버튼 토글 이벤트 연결 ====
    // Set Mode에서만 작동하는 On/Off 버튼들
    const onOffButtons = [
      'gumstick_onoff', 'mvbx_rsagc_mode', 'alc_dl0_siso_mode', 'alc_dl1_mimo_mode'
    ];
    
    onOffButtons.forEach(buttonId => {
      const button = document.getElementById(buttonId);
      if (button) {
        button.addEventListener('click', () => toggleOnOffButton(buttonId));
      }
    });
    </script>

</body>
</html>